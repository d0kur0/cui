(()=>{var kN=Object.create;var Sp=Object.defineProperty;var xN=Object.getOwnPropertyDescriptor;var DN=Object.getOwnPropertyNames;var CN=Object.getPrototypeOf,AN=Object.prototype.hasOwnProperty;var ON=t=>Sp(t,"__esModule",{value:!0});var NN=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var RN=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of DN(e))!AN.call(t,r)&&r!=="default"&&Sp(t,r,{get:()=>e[r],enumerable:!(n=xN(e,r))||n.enumerable});return t},MN=t=>RN(ON(Sp(t!=null?kN(CN(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var ib=NN((QF,Xc)=>{var $w,Fw,Uw,qw,Vw,Bw,Ww,Gw,Hw,Yc,Bp,Kw,zw,Yw,Yo,Qw,Xw,Jw,Zw,eb,tb,nb,rb,Qc;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){t(n(e,n(r)))}):typeof Xc=="object"&&typeof Xc.exports=="object"?t(n(e,n(Xc.exports))):t(n(e));function n(r,o){return r!==e&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(s,u){return r[s]=o?o(s,u):u}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])};$w=function(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(r,o);function s(){this.constructor=r}r.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)},Fw=Object.assign||function(r){for(var o,s=1,u=arguments.length;s<u;s++){o=arguments[s];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},Uw=function(r,o){var s={};for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&o.indexOf(u)<0&&(s[u]=r[u]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,u=Object.getOwnPropertySymbols(r);c<u.length;c++)o.indexOf(u[c])<0&&Object.prototype.propertyIsEnumerable.call(r,u[c])&&(s[u[c]]=r[u[c]]);return s},qw=function(r,o,s,u){var c=arguments.length,f=c<3?o:u===null?u=Object.getOwnPropertyDescriptor(o,s):u,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,o,s,u);else for(var d=r.length-1;d>=0;d--)(p=r[d])&&(f=(c<3?p(f):c>3?p(o,s,f):p(o,s))||f);return c>3&&f&&Object.defineProperty(o,s,f),f},Vw=function(r,o){return function(s,u){o(s,u,r)}},Bw=function(r,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,o)},Ww=function(r,o,s,u){function c(f){return f instanceof s?f:new s(function(p){p(f)})}return new(s||(s=Promise))(function(f,p){function d(y){try{v(u.next(y))}catch(b){p(b)}}function g(y){try{v(u.throw(y))}catch(b){p(b)}}function v(y){y.done?f(y.value):c(y.value).then(d,g)}v((u=u.apply(r,o||[])).next())})},Gw=function(r,o){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,c,f,p;return p={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function d(v){return function(y){return g([v,y])}}function g(v){if(u)throw new TypeError("Generator is already executing.");for(;s;)try{if(u=1,c&&(f=v[0]&2?c.return:v[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,v[1])).done)return f;switch(c=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,c=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){s.label=v[1];break}if(v[0]===6&&s.label<f[1]){s.label=f[1],f=v;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(v);break}f[2]&&s.ops.pop(),s.trys.pop();continue}v=o.call(r,s)}catch(y){v=[6,y],c=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Hw=function(r,o){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&Qc(o,r,s)},Qc=Object.create?function(r,o,s,u){u===void 0&&(u=s),Object.defineProperty(r,u,{enumerable:!0,get:function(){return o[s]}})}:function(r,o,s,u){u===void 0&&(u=s),r[u]=o[s]},Yc=function(r){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&r[o],u=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&u>=r.length&&(r=void 0),{value:r&&r[u++],done:!r}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},Bp=function(r,o){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var u=s.call(r),c,f=[],p;try{for(;(o===void 0||o-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(d){p={error:d}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(p)throw p.error}}return f},Kw=function(){for(var r=[],o=0;o<arguments.length;o++)r=r.concat(Bp(arguments[o]));return r},zw=function(){for(var r=0,o=0,s=arguments.length;o<s;o++)r+=arguments[o].length;for(var u=Array(r),c=0,o=0;o<s;o++)for(var f=arguments[o],p=0,d=f.length;p<d;p++,c++)u[c]=f[p];return u},Yw=function(r,o,s){if(s||arguments.length===2)for(var u=0,c=o.length,f;u<c;u++)(f||!(u in o))&&(f||(f=Array.prototype.slice.call(o,0,u)),f[u]=o[u]);return r.concat(f||o)},Yo=function(r){return this instanceof Yo?(this.v=r,this):new Yo(r)},Qw=function(r,o,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u=s.apply(r,o||[]),c,f=[];return c={},p("next"),p("throw"),p("return"),c[Symbol.asyncIterator]=function(){return this},c;function p(T){u[T]&&(c[T]=function(S){return new Promise(function(A,V){f.push([T,S,A,V])>1||d(T,S)})})}function d(T,S){try{g(u[T](S))}catch(A){b(f[0][3],A)}}function g(T){T.value instanceof Yo?Promise.resolve(T.value.v).then(v,y):b(f[0][2],T)}function v(T){d("next",T)}function y(T){d("throw",T)}function b(T,S){T(S),f.shift(),f.length&&d(f[0][0],f[0][1])}},Xw=function(r){var o,s;return o={},u("next"),u("throw",function(c){throw c}),u("return"),o[Symbol.iterator]=function(){return this},o;function u(c,f){o[c]=r[c]?function(p){return(s=!s)?{value:Yo(r[c](p)),done:c==="return"}:f?f(p):p}:f}},Jw=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r[Symbol.asyncIterator],s;return o?o.call(r):(r=typeof Yc=="function"?Yc(r):r[Symbol.iterator](),s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s);function u(f){s[f]=r[f]&&function(p){return new Promise(function(d,g){p=r[f](p),c(d,g,p.done,p.value)})}}function c(f,p,d,g){Promise.resolve(g).then(function(v){f({value:v,done:d})},p)}},Zw=function(r,o){return Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,r};var n=Object.create?function(r,o){Object.defineProperty(r,"default",{enumerable:!0,value:o})}:function(r,o){r.default=o};eb=function(r){if(r&&r.__esModule)return r;var o={};if(r!=null)for(var s in r)s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)&&Qc(o,r,s);return n(o,r),o},tb=function(r){return r&&r.__esModule?r:{default:r}},nb=function(r,o,s,u){if(s==="a"&&!u)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?r!==o||!u:!o.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?u:s==="a"?u.call(r):u?u.value:o.get(r)},rb=function(r,o,s,u,c){if(u==="m")throw new TypeError("Private method is not writable");if(u==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?r!==o||!c:!o.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u==="a"?c.call(r,s):c?c.value=s:o.set(r,s),s},t("__extends",$w),t("__assign",Fw),t("__rest",Uw),t("__decorate",qw),t("__param",Vw),t("__metadata",Bw),t("__awaiter",Ww),t("__generator",Gw),t("__exportStar",Hw),t("__createBinding",Qc),t("__values",Yc),t("__read",Bp),t("__spread",Kw),t("__spreadArrays",zw),t("__spreadArray",Yw),t("__await",Yo),t("__asyncGenerator",Qw),t("__asyncDelegator",Xw),t("__asyncValues",Jw),t("__makeTemplateObject",Zw),t("__importStar",eb),t("__importDefault",tb),t("__classPrivateFieldGet",nb),t("__classPrivateFieldSet",rb)})});try{self["workbox:window:6.1.5"]&&_()}catch(t){}function lw(t,e){return new Promise(function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},t.postMessage(e,[r.port2])})}function fw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PN(t,e){var n;if(typeof Symbol=="undefined"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=function(o,s){if(o){if(typeof o=="string")return hw(o,s);var u=Object.prototype.toString.call(o).slice(8,-1);return u==="Object"&&o.constructor&&(u=o.constructor.name),u==="Map"||u==="Set"?Array.from(o):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?hw(o,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=t[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.1.5"]&&_()}catch(t){}var Ep=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function kp(t,e){var n=location.href;return new URL(t,n).href===new URL(e,n).href}var ka=function(t,e){this.type=t,Object.assign(this,e)};function Uc(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function LN(){}var jN={type:"SKIP_WAITING"};function dw(t,e){if(!e)return t&&t.then?t.then(LN):Promise.resolve()}var pw=function(t){var e,n;function r(f,p){var d,g;return p===void 0&&(p={}),(d=t.call(this)||this).nn={},d.tn=0,d.rn=new Ep,d.en=new Ep,d.on=new Ep,d.un=0,d.an=new Set,d.cn=function(){var v=d.fn,y=v.installing;d.tn>0||!kp(y.scriptURL,d.sn)||performance.now()>d.un+6e4?(d.vn=y,v.removeEventListener("updatefound",d.cn)):(d.hn=y,d.an.add(y),d.rn.resolve(y)),++d.tn,y.addEventListener("statechange",d.ln)},d.ln=function(v){var y=d.fn,b=v.target,T=b.state,S=b===d.vn,A={sw:b,isExternal:S,originalEvent:v};!S&&d.mn&&(A.isUpdate=!0),d.dispatchEvent(new ka(T,A)),T==="installed"?d.wn=self.setTimeout(function(){T==="installed"&&y.waiting===b&&d.dispatchEvent(new ka("waiting",A))},200):T==="activating"&&(clearTimeout(d.wn),S||d.en.resolve(b))},d.dn=function(v){var y=d.hn,b=y!==navigator.serviceWorker.controller;d.dispatchEvent(new ka("controlling",{isExternal:b,originalEvent:v,sw:y,isUpdate:d.mn})),b||d.on.resolve(y)},d.gn=(g=function(v){var y=v.data,b=v.source;return Uc(d.getSW(),function(){d.an.has(b)&&d.dispatchEvent(new ka("message",{data:y,sw:b,originalEvent:v}))})},function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{return Promise.resolve(g.apply(this,v))}catch(b){return Promise.reject(b)}}),d.sn=f,d.nn=p,navigator.serviceWorker.addEventListener("message",d.gn),d}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o,s,u,c=r.prototype;return c.register=function(f){var p=(f===void 0?{}:f).immediate,d=p!==void 0&&p;try{var g=this;return function(v,y){var b=v();return b&&b.then?b.then(y):y(b)}(function(){if(!d&&document.readyState!=="complete")return dw(new Promise(function(v){return window.addEventListener("load",v)}))},function(){return g.mn=Boolean(navigator.serviceWorker.controller),g.yn=g.pn(),Uc(g.bn(),function(v){g.fn=v,g.yn&&(g.hn=g.yn,g.en.resolve(g.yn),g.on.resolve(g.yn),g.yn.addEventListener("statechange",g.ln,{once:!0}));var y=g.fn.waiting;return y&&kp(y.scriptURL,g.sn)&&(g.hn=y,Promise.resolve().then(function(){g.dispatchEvent(new ka("waiting",{sw:y,wasWaitingBeforeRegister:!0}))}).then(function(){})),g.hn&&(g.rn.resolve(g.hn),g.an.add(g.hn)),g.fn.addEventListener("updatefound",g.cn),navigator.serviceWorker.addEventListener("controllerchange",g.dn,{once:!0}),g.fn})})}catch(v){return Promise.reject(v)}},c.update=function(){try{return this.fn?dw(this.fn.update()):void 0}catch(f){return Promise.reject(f)}},c.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},c.messageSW=function(f){try{return Uc(this.getSW(),function(p){return lw(p,f)})}catch(p){return Promise.reject(p)}},c.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&lw(this.fn.waiting,jN)},c.pn=function(){var f=navigator.serviceWorker.controller;return f&&kp(f.scriptURL,this.sn)?f:void 0},c.bn=function(){try{var f=this;return function(p,d){try{var g=p()}catch(v){return d(v)}return g&&g.then?g.then(void 0,d):g}(function(){return Uc(navigator.serviceWorker.register(f.sn,f.nn),function(p){return f.un=performance.now(),p})},function(p){throw p})}catch(p){return Promise.reject(p)}},o=r,(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&fw(o.prototype,s),u&&fw(o,u),r}(function(){function t(){this.Pn=new Map}var e=t.prototype;return e.addEventListener=function(n,r){this.Sn(n).add(r)},e.removeEventListener=function(n,r){this.Sn(n).delete(r)},e.dispatchEvent=function(n){n.target=this;for(var r,o=PN(this.Sn(n.type));!(r=o()).done;)(0,r.value)(n)},e.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},t}());function le(){}var qc=t=>t;function ae(t,e){for(let n in e)t[n]=e[n];return t}function xp(t){return t()}function mw(){return Object.create(null)}function ct(t){t.forEach(xp)}function zi(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vw(t){return Object.keys(t).length===0}function Dp(t,...e){if(t==null)return le;let n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function be(t,e,n){t.$$.on_destroy.push(Dp(e,n))}function zn(t,e,n,r){if(t){let o=gw(t,e,n,r);return t[0](o)}}function gw(t,e,n,r){return t[1]&&r?ae(n.ctx.slice(),t[1](r(e))):n.ctx}function $N(t,e,n,r){if(t[2]&&r){let o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){let s=[],u=Math.max(e.dirty.length,o.length);for(let c=0;c<u;c+=1)s[c]=e.dirty[c]|o[c];return s}return e.dirty|o}return e.dirty}function Yn(t,e,n,r,o,s,u){let c=$N(e,r,o,s);if(c){let f=gw(e,n,r,u);t.p(f,c)}}function Ce(t){let e={};for(let n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function xt(t){return t&&zi(t.destroy)?t.destroy:le}var yw=typeof window!="undefined",FN=yw?()=>window.performance.now():()=>Date.now(),Cp=yw?t=>requestAnimationFrame(t):le;var Ho=new Set;function _w(t){Ho.forEach(e=>{e.c(t)||(Ho.delete(e),e.f())}),Ho.size!==0&&Cp(_w)}function UN(t){let e;return Ho.size===0&&Cp(_w),{promise:new Promise(n=>{Ho.add(e={c:t,f:n})}),abort(){Ho.delete(e)}}}var Vc=!1;function qN(){Vc=!0}function VN(){Vc=!1}function BN(t,e,n,r){for(;t<e;){let o=t+(e-t>>1);n(o)<=r?t=o+1:e=o}return t}function WN(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes,n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let o=0;for(let f=0;f<e.length;f++){let p=e[f].claim_order,d=BN(1,o+1,v=>e[n[v]].claim_order,p)-1;r[f]=n[d]+1;let g=d+1;n[g]=f,o=Math.max(g,o)}let s=[],u=[],c=e.length-1;for(let f=n[o]+1;f!=0;f=r[f-1]){for(s.push(e[f-1]);c>=f;c--)u.push(e[c]);c--}for(;c>=0;c--)u.push(e[c]);s.reverse(),u.sort((f,p)=>f.claim_order-p.claim_order);for(let f=0,p=0;f<u.length;f++){for(;p<s.length&&u[f].claim_order>=s[p].claim_order;)p++;let d=p<s.length?s[p]:null;t.insertBefore(u[f],d)}}function x(t,e){Vc?(WN(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function P(t,e,n){Vc&&!n?x(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function M(t){t.parentNode.removeChild(t)}function Nr(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function j(t){return document.createElement(t)}function Ue(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ne(t){return document.createTextNode(t)}function W(){return ne(" ")}function rt(){return ne("")}function Ie(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ko(t){return function(e){return e.preventDefault(),t.call(this,e)}}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function GN(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ap(t,e){t.value=e??""}function $e(t,e,n){t.classList[n?"add":"remove"](e)}function ww(t,e){let n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}var Op=new Set,Bc=0;function HN(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function bw(t,e,n,r,o,s,u,c=0){let f=16.666/r,p=`{
`;for(let S=0;S<=1;S+=f){let A=e+(n-e)*s(S);p+=S*100+`%{${u(A,1-A)}}
`}let d=p+`100% {${u(n,1-n)}}
}`,g=`__svelte_${HN(d)}_${c}`,v=t.ownerDocument;Op.add(v);let y=v.__svelte_stylesheet||(v.__svelte_stylesheet=v.head.appendChild(j("style")).sheet),b=v.__svelte_rules||(v.__svelte_rules={});b[g]||(b[g]=!0,y.insertRule(`@keyframes ${g} ${d}`,y.cssRules.length));let T=t.style.animation||"";return t.style.animation=`${T?`${T}, `:""}${g} ${r}ms linear ${o}ms 1 both`,Bc+=1,g}function KN(t,e){let n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),Bc-=o,Bc||zN())}function zN(){Cp(()=>{Bc||(Op.forEach(t=>{let e=t.__svelte_stylesheet,n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),Op.clear())})}var Wc;function Gc(t){Wc=t}function xa(){if(!Wc)throw new Error("Function called outside component initialization");return Wc}function Np(t){xa().$$.after_update.push(t)}function Rp(t){xa().$$.on_destroy.push(t)}function cn(){let t=xa();return(e,n)=>{let r=t.$$.callbacks[e];if(r){let o=ww(e,n);r.slice().forEach(s=>{s.call(t,o)})}}}function Mp(t,e){xa().$$.context.set(t,e)}function Pp(t){return xa().$$.context.get(t)}function ni(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}var Da=[];var Hc=[],Kc=[],Iw=[],Tw=Promise.resolve(),Lp=!1;function Sw(){Lp||(Lp=!0,Tw.then(Ew))}function Ca(){return Sw(),Tw}function Mn(t){Kc.push(t)}var jp=!1,$p=new Set;function Ew(){if(!jp){jp=!0;do{for(let t=0;t<Da.length;t+=1){let e=Da[t];Gc(e),YN(e.$$)}for(Gc(null),Da.length=0;Hc.length;)Hc.pop()();for(let t=0;t<Kc.length;t+=1){let e=Kc[t];$p.has(e)||($p.add(e),e())}Kc.length=0}while(Da.length);for(;Iw.length;)Iw.pop()();Lp=!1,jp=!1,$p.clear()}}function YN(t){if(t.fragment!==null){t.update(),ct(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Mn)}}var Aa;function QN(){return Aa||(Aa=Promise.resolve(),Aa.then(()=>{Aa=null})),Aa}function Fp(t,e,n){t.dispatchEvent(ww(`${e?"intro":"outro"}${n}`))}var zc=new Set,Rr;function Te(){Rr={r:0,c:[],p:Rr}}function Se(){Rr.r||ct(Rr.c),Rr=Rr.p}function E(t,e){t&&t.i&&(zc.delete(t),t.i(e))}function D(t,e,n,r){if(t&&t.o){if(zc.has(t))return;zc.add(t),Rr.c.push(()=>{zc.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}var XN={duration:0};function En(t,e,n,r){let o=e(t,n),s=r?0:1,u=null,c=null,f=null;function p(){f&&KN(t,f)}function d(v,y){let b=v.b-s;return y*=Math.abs(b),{a:s,b:v.b,d:b,duration:y,start:v.start,end:v.start+y,group:v.group}}function g(v){let{delay:y=0,duration:b=300,easing:T=qc,tick:S=le,css:A}=o||XN,V={start:FN()+y,b:v};v||(V.group=Rr,Rr.r+=1),u||c?c=V:(A&&(p(),f=bw(t,s,v,b,y,T,A)),v&&S(0,1),u=d(V,b),Mn(()=>Fp(t,v,"start")),UN(q=>{if(c&&q>c.start&&(u=d(c,b),c=null,Fp(t,u.b,"start"),A&&(p(),f=bw(t,s,u.b,u.duration,0,T,o.css))),u){if(q>=u.end)S(s=u.b,1-s),Fp(t,u.b,"end"),c||(u.b?p():--u.group.r||ct(u.group.c)),u=null;else if(q>=u.start){let L=q-u.start;s=u.a+u.d*T(L/u.duration),S(s,1-s)}}return!!(u||c)}))}return{run(v){zi(o)?QN().then(()=>{o=o(),g(v)}):g(v)},end(){p(),u=c=null}}}var dF=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function kw(t,e){D(t,1,1,()=>{e.delete(t.key)})}function xw(t,e,n,r,o,s,u,c,f,p,d,g){let v=t.length,y=s.length,b=v,T={};for(;b--;)T[t[b].key]=b;let S=[],A=new Map,V=new Map;for(b=y;b--;){let R=g(o,s,b),K=n(R),ie=u.get(K);ie?r&&ie.p(R,e):(ie=p(K,R),ie.c()),A.set(K,S[b]=ie),K in T&&V.set(K,Math.abs(b-T[K]))}let q=new Set,L=new Set;function O(R){E(R,1),R.m(c,d),u.set(R.key,R),d=R.first,y--}for(;v&&y;){let R=S[y-1],K=t[v-1],ie=R.key,Y=K.key;R===K?(d=R.first,v--,y--):A.has(Y)?!u.has(ie)||q.has(ie)?O(R):L.has(Y)?v--:V.get(ie)>V.get(Y)?(L.add(ie),O(R)):(q.add(Y),v--):(f(K,u),v--)}for(;v--;){let R=t[v];A.has(R.key)||f(R,u)}for(;y;)O(S[y-1]);return S}function We(t,e){let n={},r={},o={$$scope:1},s=t.length;for(;s--;){let u=t[s],c=e[s];if(c){for(let f in u)f in c||(r[f]=1);for(let f in c)o[f]||(n[f]=c[f],o[f]=1);t[s]=c}else for(let f in u)o[f]=1}for(let u in r)u in n||(n[u]=void 0);return n}function Ge(t){return typeof t=="object"&&t!==null?t:{}}var pF=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function U(t){t&&t.c()}function F(t,e,n,r){let{fragment:o,on_mount:s,on_destroy:u,after_update:c}=t.$$;o&&o.m(e,n),r||Mn(()=>{let f=s.map(xp).filter(zi);u?u.push(...f):ct(f),t.$$.on_mount=[]}),c.forEach(Mn)}function $(t,e){let n=t.$$;n.fragment!==null&&(ct(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function JN(t,e){t.$$.dirty[0]===-1&&(Da.push(t),Sw(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,r,o,s,u=[-1]){let c=Wc;Gc(t);let f=t.$$={fragment:null,ctx:null,props:s,update:le,not_equal:o,bound:mw(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:e.context||[]),callbacks:mw(),dirty:u,skip_bound:!1},p=!1;if(f.ctx=n?n(t,e.props||{},(d,g,...v)=>{let y=v.length?v[0]:g;return f.ctx&&o(f.ctx[d],f.ctx[d]=y)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](y),p&&JN(t,d)),g}):[],f.update(),p=!0,ct(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){qN();let d=GN(e.target);f.fragment&&f.fragment.l(d),d.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&E(t.$$.fragment),F(t,e.target,e.anchor,e.customElement),VN(),Ew()}Gc(c)}var ZN;typeof HTMLElement=="function"&&(ZN=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(xp).filter(zi);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){ct(this.$$.on_disconnect)}$destroy(){$(this,1),this.$destroy=le}$on(t,e){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let r=n.indexOf(e);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!vw(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var X=class{$destroy(){$(this,1),this.$destroy=le}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!vw(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var e2=()=>{let t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)},Up=e2;var Dw=typeof Symbol!="undefined"?Symbol("storeon"):"@@storeon";function Cw(t){Mp(Dw,t)}function Pe(...t){let e=Pp(Dw);if(!e)throw new Error('Could not find storeon context value.Please ensure you provide store using "provideStoreon" function');let n={},r=s=>({subscribe:c=>{let f=e.get();return n[s]=c,c(f[s]),()=>{delete n[s]}}});e.on("@changed",(s,u)=>{t.forEach(c=>{c in u&&n[c]&&n[c](u[c])})});let o={};return t.forEach(s=>{o[s]=r(s)}),o.dispatch=e.dispatch,o}var zo=[];function qp(t,e){return{subscribe:Yi(t,e).subscribe}}function Yi(t,e=le){let n,r=[];function o(c){if(Q(t,c)&&(t=c,n)){let f=!zo.length;for(let p=0;p<r.length;p+=1){let d=r[p];d[1](),zo.push(d,t)}if(f){for(let p=0;p<zo.length;p+=2)zo[p][0](zo[p+1]);zo.length=0}}}function s(c){o(c(t))}function u(c,f=le){let p=[c,f];return r.push(p),r.length===1&&(n=e(o)||le),c(t),()=>{let d=r.indexOf(p);d!==-1&&r.splice(d,1),r.length===0&&(n(),n=null)}}return{set:o,update:s,subscribe:u}}function Vp(t,e,n){let r=!Array.isArray(t),o=r?[t]:t,s=e.length<2;return qp(n,u=>{let c=!1,f=[],p=0,d=le,g=()=>{if(p)return;d();let y=e(r?f[0]:f,u);s?u(y):d=zi(y)?y:le},v=o.map((y,b)=>Dp(y,T=>{f[b]=T,p&=~(1<<b),c&&g()},()=>{p|=1<<b}));return c=!0,g(),function(){ct(v),d()}})}function t2(t){let e,n,r,o,s=t[8].default,u=zn(s,t,t[7],null);return{c(){e=j("button"),u&&u.c(),C(e,"type","submit"),C(e,"class","button svelte-1gba7se"),$e(e,"button--fullwidth",t[0]),$e(e,"button--rounded",t[1]),$e(e,"button--large",t[3]),$e(e,"button--small",t[2]),$e(e,"button--danger",t[4]),$e(e,"button--only-border",t[5]),$e(e,"button--outline",t[6])},m(c,f){P(c,e,f),u&&u.m(e,null),n=!0,r||(o=Ie(e,"click",t[9]),r=!0)},p(c,[f]){u&&u.p&&(!n||f&128)&&Yn(u,s,c,c[7],n?f:-1,null,null),f&1&&$e(e,"button--fullwidth",c[0]),f&2&&$e(e,"button--rounded",c[1]),f&8&&$e(e,"button--large",c[3]),f&4&&$e(e,"button--small",c[2]),f&16&&$e(e,"button--danger",c[4]),f&32&&$e(e,"button--only-border",c[5]),f&64&&$e(e,"button--outline",c[6])},i(c){n||(E(u,c),n=!0)},o(c){D(u,c),n=!1},d(c){c&&M(e),u&&u.d(c),r=!1,o()}}}function n2(t,e,n){let{$$slots:r={},$$scope:o}=e,{fullWidth:s=!1}=e,{rounded:u=!0}=e,{small:c=!1}=e,{large:f=!1}=e,{danger:p=!1}=e,{onlyBorder:d=!1}=e,{outline:g=!1}=e;function v(y){ni.call(this,t,y)}return t.$$set=y=>{"fullWidth"in y&&n(0,s=y.fullWidth),"rounded"in y&&n(1,u=y.rounded),"small"in y&&n(2,c=y.small),"large"in y&&n(3,f=y.large),"danger"in y&&n(4,p=y.danger),"onlyBorder"in y&&n(5,d=y.onlyBorder),"outline"in y&&n(6,g=y.outline),"$$scope"in y&&n(7,o=y.$$scope)},[s,u,c,f,p,d,g,o,r,v]}var Aw=class extends X{constructor(e){super();J(this,e,n2,t2,Q,{fullWidth:0,rounded:1,small:2,large:3,danger:4,onlyBorder:5,outline:6})}},Dt=Aw;function Ow(t){let e,n,r,o,s,u,c,f,p;return u=new Dt({props:{small:!0,$$slots:{default:[r2]},$$scope:{ctx:t}}}),u.$on("click",t[2]),f=new Dt({props:{small:!0,outline:!0,$$slots:{default:[i2]},$$scope:{ctx:t}}}),f.$on("click",t[3]),{c(){e=j("div"),n=j("div"),r=j("div"),r.textContent="\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0442\u0435, \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0435\u0439\u0447\u0430\u0441?",o=W(),s=j("div"),U(u.$$.fragment),c=W(),U(f.$$.fragment),C(s,"class","prompt-buttons svelte-1fp4ass"),C(n,"class","prompt svelte-1fp4ass"),C(e,"class","update-prompt svelte-1fp4ass")},m(d,g){P(d,e,g),x(e,n),x(n,r),x(n,o),x(n,s),F(u,s,null),x(s,c),F(f,s,null),p=!0},p(d,g){let v={};g&64&&(v.$$scope={dirty:g,ctx:d}),u.$set(v);let y={};g&64&&(y.$$scope={dirty:g,ctx:d}),f.$set(y)},i(d){p||(E(u.$$.fragment,d),E(f.$$.fragment,d),p=!0)},o(d){D(u.$$.fragment,d),D(f.$$.fragment,d),p=!1},d(d){d&&M(e),$(u),$(f)}}}function r2(t){let e;return{c(){e=ne("\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function i2(t){let e;return{c(){e=ne("\u041D\u0435 \u0441\u0435\u0439\u0447\u0430\u0441")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function o2(t){let e,n,r=t[0]&&Ow(t);return{c(){r&&r.c(),e=rt()},m(o,s){r&&r.m(o,s),P(o,e,s),n=!0},p(o,[s]){o[0]?r?(r.p(o,s),s&1&&E(r,1)):(r=Ow(o),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(Te(),D(r,1,1,()=>{r=null}),Se())},i(o){n||(E(r),n=!0)},o(o){D(r),n=!1},d(o){r&&r.d(o),o&&M(e)}}}function s2(t,e,n){let r,{workbox:o}=e,s=Yi(!1);be(t,s,p=>n(0,r=p));function u(){sessionStorage.hideUpdatePrompt!==void 0&&s.set(!0)}function c(){o.addEventListener("controlling",()=>{window.location.reload()}),o.messageSkipWaiting()}function f(){s.set(!1),sessionStorage.hideUpdatePrompt=!0}return o.addEventListener("waiting",u),t.$$set=p=>{"workbox"in p&&n(4,o=p.workbox)},[r,s,c,f,o]}var Nw=class extends X{constructor(e){super();J(this,e,s2,o2,Q,{workbox:4})}},Rw=Nw;function Mw(t){let e,n,r,o,s,u,c,f;return s=new Dt({props:{small:!0,$$slots:{default:[a2]},$$scope:{ctx:t}}}),s.$on("click",t[2]),c=new Dt({props:{small:!0,outline:!0,$$slots:{default:[u2]},$$scope:{ctx:t}}}),c.$on("click",l2),{c(){e=j("div"),n=j("div"),n.textContent="\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043A\u0430\u043A \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435?",r=W(),o=j("div"),U(s.$$.fragment),u=W(),U(c.$$.fragment),C(n,"class","install-message svelte-1j3efzm"),C(e,"class","install-prompt svelte-1j3efzm")},m(p,d){P(p,e,d),x(e,n),x(e,r),x(e,o),F(s,o,null),x(o,u),F(c,o,null),f=!0},p(p,d){let g={};d&16&&(g.$$scope={dirty:d,ctx:p}),s.$set(g);let v={};d&16&&(v.$$scope={dirty:d,ctx:p}),c.$set(v)},i(p){f||(E(s.$$.fragment,p),E(c.$$.fragment,p),f=!0)},o(p){D(s.$$.fragment,p),D(c.$$.fragment,p),f=!1},d(p){p&&M(e),$(s),$(c)}}}function a2(t){let e;return{c(){e=ne("\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function u2(t){let e;return{c(){e=ne("\u0421\u043A\u0440\u044B\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function c2(t){let e,n,r=t[0]&&Mw(t);return{c(){r&&r.c(),e=rt()},m(o,s){r&&r.m(o,s),P(o,e,s),n=!0},p(o,[s]){o[0]?r?(r.p(o,s),s&1&&E(r,1)):(r=Mw(o),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(Te(),D(r,1,1,()=>{r=null}),Se())},i(o){n||(E(r),n=!0)},o(o){D(r),n=!1},d(o){r&&r.d(o),o&&M(e)}}}function l2(){localStorage.hideInstallPrompt=!0}function f2(t,e,n){let r,o,s=Yi(!1);be(t,s,c=>n(0,r=c)),window.addEventListener("beforeinstallprompt",c=>{c.preventDefault(),o=c,localStorage.hideInstallPrompt||s.set(!0)}),window.addEventListener("appinstalled",()=>{s.set(!1),o=null});async function u(){s.set(!1),o.prompt(),await o.userChoice,o=null}return[r,s,u]}var Pw=class extends X{constructor(e){super();J(this,e,f2,c2,Q,{})}},Lw=Pw;var jw=t=>{let e={},n={},r={dispatch(o,s){if(o!=="@dispatch"&&r.dispatch("@dispatch",[o,s,e[o]]),e[o]){let u;e[o].forEach(c=>{let f=e[o].includes(c)&&c(n,s,r);f&&typeof f.then!="function"&&(n={...n,...f},u={...u,...f})}),u&&r.dispatch("@changed",u)}},get:()=>n,on(o,s){return(e[o]||(e[o]=[])).push(s),()=>{e[o]=e[o].filter(u=>u!==s)}}};return t.forEach(o=>{o&&o(r)}),r.dispatch("@init"),r};var ob=MN(ib()),{__extends:ge,__assign:Oa,__rest:XF,__decorate:JF,__param:ZF,__metadata:eU,__awaiter:z,__generator:H,__exportStar:tU,__createBinding:nU,__values:Jc,__read:Na,__spread:rU,__spreadArrays:iU,__spreadArray:dt,__await:oU,__asyncGenerator:sU,__asyncDelegator:aU,__asyncValues:uU,__makeTemplateObject:cU,__importStar:lU,__importDefault:fU,__classPrivateFieldGet:hU,__classPrivateFieldSet:dU}=ob.default;var h2=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)==55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)==56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},d2=function(t){for(var e=[],n=0,r=0;n<t.length;){var o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){var s=t[n++];e[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){var s=t[n++],u=t[n++],c=t[n++],f=((o&7)<<18|(s&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{var s=t[n++],u=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|u&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<t.length;o+=3){var s=t[o],u=o+1<t.length,c=u?t[o+1]:0,f=o+2<t.length,p=f?t[o+2]:0,d=s>>2,g=(s&3)<<4|c>>4,v=(c&15)<<2|p>>6,y=p&63;f||(y=64,u||(v=64)),r.push(n[d],n[g],n[v],n[y])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h2(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<t.length;){var s=n[t.charAt(o++)],u=o<t.length,c=u?n[t.charAt(o)]:0;++o;var f=o<t.length,p=f?n[t.charAt(o)]:64;++o;var d=o<t.length,g=d?n[t.charAt(o)]:64;if(++o,s==null||c==null||p==null||g==null)throw Error();var v=s<<2|c>>4;if(r.push(v),p!==64){var y=c<<4&240|p>>2;if(r.push(y),g!==64){var b=p<<6&192|g;r.push(b)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ab(t){return Qo(void 0,t)}function Qo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)!e.hasOwnProperty(r)||!p2(r)||(t[r]=Qo(t[r],e[r]));return t}function p2(t){return t!=="__proto__"}var ub=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){e.resolve=n,e.reject=r})}return t.prototype.wrapCallback=function(e){var n=this;return function(r,o){r?n.reject(r):n.resolve(o),typeof e=="function"&&(n.promise.catch(function(){}),e.length===1?e(r):e(r,o))}},t}();function cb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var u=Oa({iss:"https://securetoken.google.com/"+r,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[sb.encodeString(JSON.stringify(n),!1),sb.encodeString(JSON.stringify(u),!1),c].join(".")}function ri(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lb(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ri())}function fb(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function hb(){return typeof self=="object"&&self.self===self}function db(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mb(){return ri().indexOf("Electron/")>=0}function vb(){var t=ri();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gb(){return ri().indexOf("MSAppHost/")>=0}var m2="FirebaseError",v2=function(t){ge(e,t);function e(n,r,o){var s=t.call(this,r)||this;return s.code=n,s.customData=o,s.name=m2,Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Zc.prototype.create),s}return e}(Error),Zc=function(){function t(e,n,r){this.service=e,this.serviceName=n,this.errors=r}return t.prototype.create=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=n[0]||{},s=this.service+"/"+e,u=this.errors[e],c=u?g2(u,o):"Error",f=this.serviceName+": "+c+" ("+s+").",p=new v2(s,f,o);return p},t}();function g2(t,e){return t.replace(y2,function(n,r){var o=e[r];return o!=null?String(o):"<"+r+"?>"})}var y2=/\{\$([^}]+)}/g;function Wp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var vU=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,n){n||(n=0);var r=this.W_;if(typeof e=="string")for(var o=0;o<16;o++)r[o]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(var o=0;o<16;o++)r[o]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(var o=16;o<80;o++){var s=r[o-3]^r[o-8]^r[o-14]^r[o-16];r[o]=(s<<1|s>>>31)&4294967295}for(var u=this.chain_[0],c=this.chain_[1],f=this.chain_[2],p=this.chain_[3],d=this.chain_[4],g,v,o=0;o<80;o++){o<40?o<20?(g=p^c&(f^p),v=1518500249):(g=c^f^p,v=1859775393):o<60?(g=c&f|p&(c|f),v=2400959708):(g=c^f^p,v=3395469782);var s=(u<<5|u>>>27)+g+d+v+r[o]&4294967295;d=p,p=f,f=(c<<30|c>>>2)&4294967295,c=u,u=s}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},t.prototype.update=function(e,n){if(e!=null){n===void 0&&(n=e.length);for(var r=n-this.blockSize,o=0,s=this.buf_,u=this.inbuf_;o<n;){if(u===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(s[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(s),u=0;break}}else for(;o<n;)if(s[u]=e[o],++u,++o,u===this.blockSize){this.compress_(s),u=0;break}}this.inbuf_=u,this.total_+=n}},t.prototype.digest=function(){var e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var o=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)e[o]=this.chain_[r]>>s&255,++o;return e},t}();function yb(t,e){var n=new _2(t,e);return n.subscribe.bind(n)}var _2=function(){function t(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){e(r)}).catch(function(o){r.error(o)})}return t.prototype.next=function(e){this.forEachObserver(function(n){n.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(n){n.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,n,r){var o=this,s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");w2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gp),s.error===void 0&&(s.error=Gp),s.complete===void 0&&(s.complete=Gp);var u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?s.error(o.finalError):s.complete()}catch(c){}}),this.observers.push(s),u},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,e)},t.prototype.sendOne=function(e,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[e]!==void 0)try{n(r.observers[e])}catch(o){typeof console!="undefined"&&console.error&&console.error(o)}})},t.prototype.close=function(e){var n=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},t}();function w2(t,e){if(typeof t!="object"||t===null)return!1;for(var n=0,r=e;n<r.length;n++){var o=r[n];if(o in t&&typeof t[o]=="function")return!0}return!1}function Gp(){}var gU=4*60*60*1e3;function Et(t){return t&&t._delegate?t._delegate:t}var Xo=function(){function t(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();var Jo="[DEFAULT]";var b2=function(){function t(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){var r=new ub;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch(s){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(e){var n,r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var n,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(T2(e))try{this.getOrInitializeService({instanceIdentifier:Jo})}catch(g){}try{for(var o=Jc(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var u=Na(s.value,2),c=u[0],f=u[1],p=this.normalizeInstanceIdentifier(c);try{var d=this.getOrInitializeService({instanceIdentifier:p});f.resolve(d)}catch(g){}}}catch(g){n={error:g}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=Jo),this.instancesDeferred.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return z(this,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(dt(dt([],Na(e.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Na(e.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=Jo),this.instances.has(e)},t.prototype.initialize=function(e){var n,r;e===void 0&&(e={});var o=e.options,s=o===void 0?{}:o,u=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var f=Jc(this.instancesDeferred.entries()),p=f.next();!p.done;p=f.next()){var d=Na(p.value,2),g=d[0],v=d[1],y=this.normalizeInstanceIdentifier(g);u===y&&v.resolve(c)}}catch(b){n={error:b}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return c},t.prototype.onInit=function(e,n){var r,o=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(o,s);var u=this.instances.get(o);return u&&e(u,o),function(){s.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,n){var r,o,s=this.onInitCallbacks.get(n);if(!!s)try{for(var u=Jc(s),c=u.next();!c.done;c=u.next()){var f=c.value;try{f(e,n)}catch(p){}}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}},t.prototype.getOrInitializeService=function(e){var n=e.instanceIdentifier,r=e.options,o=r===void 0?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:I2(n),options:o}),this.instances.set(n,s),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(u){}return s||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=Jo),this.component?this.component.multipleInstances?e:Jo:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function I2(t){return t===Jo?void 0:t}function T2(t){return t.instantiationMode==="EAGER"}var _b=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);n.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var n=this.getProvider(e.name);n.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var n=new b2(e,this);return this.providers.set(e,n),n},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function or(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var s=arguments[e],u=0,c=s.length;u<c;u++,o++)r[o]=s[u];return r}var Qi,Hp=[],He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));var wb={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},S2=He.INFO,E2=(Qi={},Qi[He.DEBUG]="log",Qi[He.VERBOSE]="log",Qi[He.INFO]="info",Qi[He.WARN]="warn",Qi[He.ERROR]="error",Qi),k2=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=new Date().toISOString(),s=E2[e];if(s)console[s].apply(console,or(["["+o+"]  "+t.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},el=function(){function t(e){this.name=e,this._logLevel=S2,this._logHandler=k2,this._userLogHandler=null,Hp.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in He))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?wb[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,or([this,He.DEBUG],e)),this._logHandler.apply(this,or([this,He.DEBUG],e))},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,or([this,He.VERBOSE],e)),this._logHandler.apply(this,or([this,He.VERBOSE],e))},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,or([this,He.INFO],e)),this._logHandler.apply(this,or([this,He.INFO],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,or([this,He.WARN],e)),this._logHandler.apply(this,or([this,He.WARN],e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,or([this,He.ERROR],e)),this._logHandler.apply(this,or([this,He.ERROR],e))},t}();function bb(t){Hp.forEach(function(e){e.setLogLevel(t)})}function Ib(t,e){for(var n=function(u){var c=null;e&&e.level&&(c=wb[e.level]),t===null?u.userLogHandler=null:u.userLogHandler=function(f,p){for(var d=[],g=2;g<arguments.length;g++)d[g-2]=arguments[g];var v=d.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch(b){return null}}).filter(function(y){return y}).join(" ");p>=(c??f.logLevel)&&t({level:He[p].toLowerCase(),message:v,args:d,type:f.name})}},r=0,o=Hp;r<o.length;r++){var s=o[r];n(s)}}var ii,x2=(ii={},ii["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ii["bad-app-name"]="Illegal App name: '{$appName}",ii["duplicate-app"]="Firebase App named '{$appName}' already exists",ii["app-deleted"]="Firebase App named '{$appName}' already deleted",ii["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ii["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ii),Zo=new Zc("app","Firebase",x2),Tb="@firebase/app",D2="0.6.28",C2="@firebase/analytics",A2="@firebase/app-check",O2="@firebase/auth",N2="@firebase/database",R2="@firebase/functions",M2="@firebase/installations",P2="@firebase/messaging",L2="@firebase/performance",j2="@firebase/remote-config",$2="@firebase/storage",F2="@firebase/firestore",U2="firebase-wrapper";var Xt,tl="[DEFAULT]",q2=(Xt={},Xt[Tb]="fire-core",Xt[C2]="fire-analytics",Xt[A2]="fire-app-check",Xt[O2]="fire-auth",Xt[N2]="fire-rtdb",Xt[R2]="fire-fn",Xt[M2]="fire-iid",Xt[P2]="fire-fcm",Xt[L2]="fire-perf",Xt[j2]="fire-rc",Xt[$2]="fire-gcs",Xt[F2]="fire-fst",Xt["fire-js"]="fire-js",Xt[U2]="fire-js-all",Xt);var es=new el("@firebase/app");var nl=function(){function t(e,n,r){var o=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=ab(e),this.container=new _b(n.name),this._addComponent(new Xo("app",function(){return o},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(s){return o._addComponent(s)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(n){return n.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,n){var r;n===void 0&&(n=tl),this.checkDestroyed_();var o=this.container.getProvider(e);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:n})},t.prototype._removeServiceInstance=function(e,n){n===void 0&&(n=tl),this.container.getProvider(e).clearInstance(n)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){es.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Zo.create("app-deleted",{appName:this.name_})},t}();nl.prototype.name&&nl.prototype.options||nl.prototype.delete||console.log("dc");var V2="8.7.0";function B2(t){var e={},n=new Map,r={__esModule:!0,initializeApp:u,app:s,registerVersion:p,setLogLevel:bb,onLog:d,apps:null,SDK_VERSION:V2,INTERNAL:{registerComponent:f,removeApp:o,components:n,useAsService:g}};r.default=r,Object.defineProperty(r,"apps",{get:c});function o(v){delete e[v]}function s(v){if(v=v||tl,!Wp(e,v))throw Zo.create("no-app",{appName:v});return e[v]}s.App=t;function u(v,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var b=y;y={name:b}}var T=y;T.name===void 0&&(T.name=tl);var S=T.name;if(typeof S!="string"||!S)throw Zo.create("bad-app-name",{appName:String(S)});if(Wp(e,S))throw Zo.create("duplicate-app",{appName:S});var A=new t(v,T,r);return e[S]=A,A}function c(){return Object.keys(e).map(function(v){return e[v]})}function f(v){var y=v.name;if(n.has(y))return es.debug("There were multiple attempts to register component "+y+"."),v.type==="PUBLIC"?r[y]:null;if(n.set(y,v),v.type==="PUBLIC"){var b=function(V){if(V===void 0&&(V=s()),typeof V[y]!="function")throw Zo.create("invalid-app-argument",{appName:y});return V[y]()};v.serviceProps!==void 0&&Qo(b,v.serviceProps),r[y]=b,t.prototype[y]=function(){for(var V=[],q=0;q<arguments.length;q++)V[q]=arguments[q];var L=this._getService.bind(this,y);return L.apply(this,v.multipleInstances?V:[])}}for(var T=0,S=Object.keys(e);T<S.length;T++){var A=S[T];e[A]._addComponent(v)}return v.type==="PUBLIC"?r[y]:null}function p(v,y,b){var T,S=(T=q2[v])!==null&&T!==void 0?T:v;b&&(S+="-"+b);var A=S.match(/\s|\//),V=y.match(/\s|\//);if(A||V){var q=['Unable to register library "'+S+'" with version "'+y+'":'];A&&q.push('library name "'+S+'" contains illegal characters (whitespace or "/")'),A&&V&&q.push("and"),V&&q.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),es.warn(q.join(" "));return}f(new Xo(S+"-version",function(){return{library:S,version:y}},"VERSION"))}function d(v,y){if(v!==null&&typeof v!="function")throw Zo.create("invalid-log-argument");Ib(v,y)}function g(v,y){if(y==="serverAuth")return null;var b=y;return b}return r}function Sb(){var t=B2(nl);t.INTERNAL=Oa(Oa({},t.INTERNAL),{createFirebaseNamespace:Sb,extendNamespace:e,createSubscribe:yb,ErrorFactory:Zc,deepExtend:Qo});function e(n){Qo(t,n)}return t}var Kp=Sb();var W2=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(n){if(G2(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},t}();function G2(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}function H2(t,e){t.INTERNAL.registerComponent(new Xo("platform-logger",function(n){return new W2(n)},"PRIVATE")),t.registerVersion(Tb,D2,e),t.registerVersion("fire-js","")}hb()&&self.firebase!==void 0&&(es.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `),zp=self.firebase.SDK_VERSION,zp&&zp.indexOf("LITE")>=0&&es.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `));var zp,K2=Kp.initializeApp;Kp.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fb()&&es.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),K2.apply(void 0,t)};var Eb=Kp;H2(Eb);var pe=Eb;var z2="firebase",kb="8.7.0";pe.registerVersion(z2,kb,"app");pe.SDK_VERSION=kb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(i,a,l){i!=Array.prototype&&i!=Object.prototype&&(i[a]=l.value)};function n(i){i=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,i];for(var a=0;a<i.length;++a){var l=i[a];if(l&&l.Math==Math)return l}return globalThis}var r=n(this);function o(i,a){if(a){var l=r;i=i.split(".");for(var h=0;h<i.length-1;h++){var m=i[h];m in l||(l[m]={}),l=l[m]}i=i[i.length-1],h=l[i],a=a(h),a!=h&&a!=null&&e(l,i,{configurable:!0,writable:!0,value:a})}}function s(i){var a=0;return function(){return a<i.length?{done:!1,value:i[a++]}:{done:!0}}}function u(i){var a=typeof Symbol!="undefined"&&Symbol.iterator&&i[Symbol.iterator];return a?a.call(i):{next:s(i)}}o("Promise",function(i){function a(I){this.b=0,this.c=void 0,this.a=[];var k=this.f();try{I(k.resolve,k.reject)}catch(G){k.reject(G)}}function l(){this.a=null}function h(I){return I instanceof a?I:new a(function(k){k(I)})}if(i)return i;l.prototype.b=function(I){if(this.a==null){this.a=[];var k=this;this.c(function(){k.g()})}this.a.push(I)};var m=r.setTimeout;l.prototype.c=function(I){m(I,0)},l.prototype.g=function(){for(;this.a&&this.a.length;){var I=this.a;this.a=[];for(var k=0;k<I.length;++k){var G=I[k];I[k]=null;try{G()}catch(Z){this.f(Z)}}}this.a=null},l.prototype.f=function(I){this.c(function(){throw I})},a.prototype.f=function(){function I(Z){return function(De){G||(G=!0,Z.call(k,De))}}var k=this,G=!1;return{resolve:I(this.m),reject:I(this.g)}},a.prototype.m=function(I){if(I===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(I instanceof a)this.s(I);else{e:switch(typeof I){case"object":var k=I!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.v(I):this.h(I)}},a.prototype.v=function(I){var k=void 0;try{k=I.then}catch(G){this.g(G);return}typeof k=="function"?this.u(k,I):this.h(I)},a.prototype.g=function(I){this.i(2,I)},a.prototype.h=function(I){this.i(1,I)},a.prototype.i=function(I,k){if(this.b!=0)throw Error("Cannot settle("+I+", "+k+"): Promise already settled in state"+this.b);this.b=I,this.c=k,this.l()},a.prototype.l=function(){if(this.a!=null){for(var I=0;I<this.a.length;++I)w.b(this.a[I]);this.a=null}};var w=new l;return a.prototype.s=function(I){var k=this.f();I.Ra(k.resolve,k.reject)},a.prototype.u=function(I,k){var G=this.f();try{I.call(k,G.resolve,G.reject)}catch(Z){G.reject(Z)}},a.prototype.then=function(I,k){function G(Ke,Ft){return typeof Ke=="function"?function(Or){try{Z(Ke(Or))}catch(Tp){De(Tp)}}:Ft}var Z,De,Ze=new a(function(Ke,Ft){Z=Ke,De=Ft});return this.Ra(G(I,Z),G(k,De)),Ze},a.prototype.catch=function(I){return this.then(void 0,I)},a.prototype.Ra=function(I,k){function G(){switch(Z.b){case 1:I(Z.c);break;case 2:k(Z.c);break;default:throw Error("Unexpected state: "+Z.b)}}var Z=this;this.a==null?w.b(G):this.a.push(G)},a.resolve=h,a.reject=function(I){return new a(function(k,G){G(I)})},a.race=function(I){return new a(function(k,G){for(var Z=u(I),De=Z.next();!De.done;De=Z.next())h(De.value).Ra(k,G)})},a.all=function(I){var k=u(I),G=k.next();return G.done?h([]):new a(function(Z,De){function Ze(Or){return function(Tp){Ke[Or]=Tp,Ft--,Ft==0&&Z(Ke)}}var Ke=[],Ft=0;do Ke.push(void 0),Ft++,h(G.value).Ra(Ze(Ke.length-1),De),G=k.next();while(!G.done)})},a});var c=c||{},f=this||self,p=/^[\w+/_-]+[=]{0,2}$/,d=null;function g(i){return(i=i.querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&p.test(i)?i:""}function v(){}function y(i){var a=typeof i;return a!="object"?a:i?Array.isArray(i)?"array":a:"null"}function b(i){var a=y(i);return a=="array"||a=="object"&&typeof i.length=="number"}function T(i){return y(i)=="function"}function S(i){var a=typeof i;return a=="object"&&i!=null||a=="function"}function A(i){return Object.prototype.hasOwnProperty.call(i,V)&&i[V]||(i[V]=++q)}var V="closure_uid_"+(1e9*Math.random()>>>0),q=0;function L(i,a,l){return i.call.apply(i.bind,arguments)}function O(i,a,l){if(!i)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var m=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(m,h),i.apply(a,m)}}return function(){return i.apply(a,arguments)}}function R(i,a,l){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?R=L:R=O,R.apply(null,arguments)}function K(i,a){var l=Array.prototype.slice.call(arguments,1);return function(){var h=l.slice();return h.push.apply(h,arguments),i.apply(this,h)}}var ie=Date.now;function Y(i,a){function l(){}l.prototype=a.prototype,i.bb=a.prototype,i.prototype=new l,i.prototype.constructor=i}function ye(i){return i}function N(i,a,l){this.code=_e+i,this.message=a||at[i]||"",this.a=l||null}Y(N,Error),N.prototype.w=function(){var i={code:this.code,message:this.message};return this.a&&(i.serverResponse=this.a),i},N.prototype.toJSON=function(){return this.w()};function Qe(i){var a=i&&i.code;return a?new N(a.substring(_e.length),i.message,i.serverResponse):null}var _e="auth/",at={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},we={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function tt(i){for(var a in we)if(we[a].id===i)return i=we[a],{firebaseEndpoint:i.Ua,secureTokenEndpoint:i.$a,identityPlatformEndpoint:i.Xa};return null}var ke;ke=tt("__EID__")?"__EID__":void 0;function Le(i){if(!i)return!1;try{return!!i.$goog_Thenable}catch(a){return!1}}function ut(i){if(Error.captureStackTrace)Error.captureStackTrace(this,ut);else{var a=Error().stack;a&&(this.stack=a)}i&&(this.message=String(i))}Y(ut,Error),ut.prototype.name="CustomError";function $t(i,a){i=i.split("%s");for(var l="",h=i.length-1,m=0;m<h;m++)l+=i[m]+(m<a.length?a[m]:"%s");ut.call(this,l+i[h])}Y($t,ut),$t.prototype.name="AssertionError";function bt(i,a){throw new $t("Failure"+(i?": "+i:""),Array.prototype.slice.call(arguments,1))}function Be(i,a){this.c=i,this.f=a,this.b=0,this.a=null}Be.prototype.get=function(){if(0<this.b){this.b--;var i=this.a;this.a=i.next,i.next=null}else i=this.c();return i};function _n(i,a){i.f(a),100>i.b&&(i.b++,a.next=i.a,i.a=a)}function Er(){this.b=this.a=null}var sn=new Be(function(){return new Hf},function(i){i.reset()});Er.prototype.add=function(i,a){var l=sn.get();l.set(i,a),this.b?this.b.next=l:this.a=l,this.b=l};function Lu(){var i=Kg,a=null;return i.a&&(a=i.a,i.a=i.a.next,i.a||(i.b=null),a.next=null),a}function Hf(){this.next=this.b=this.a=null}Hf.prototype.set=function(i,a){this.a=i,this.b=a,this.next=null},Hf.prototype.reset=function(){this.next=this.b=this.a=null};var bg=Array.prototype.indexOf?function(i,a){return Array.prototype.indexOf.call(i,a,void 0)}:function(i,a){if(typeof i=="string")return typeof a!="string"||a.length!=1?-1:i.indexOf(a,0);for(var l=0;l<i.length;l++)if(l in i&&i[l]===a)return l;return-1},mt=Array.prototype.forEach?function(i,a,l){Array.prototype.forEach.call(i,a,l)}:function(i,a,l){for(var h=i.length,m=typeof i=="string"?i.split(""):i,w=0;w<h;w++)w in m&&a.call(l,m[w],w,i)};function TD(i,a){for(var l=typeof i=="string"?i.split(""):i,h=i.length-1;0<=h;--h)h in l&&a.call(void 0,l[h],h,i)}var SD=Array.prototype.filter?function(i,a){return Array.prototype.filter.call(i,a,void 0)}:function(i,a){for(var l=i.length,h=[],m=0,w=typeof i=="string"?i.split(""):i,I=0;I<l;I++)if(I in w){var k=w[I];a.call(void 0,k,I,i)&&(h[m++]=k)}return h},ju=Array.prototype.map?function(i,a){return Array.prototype.map.call(i,a,void 0)}:function(i,a){for(var l=i.length,h=Array(l),m=typeof i=="string"?i.split(""):i,w=0;w<l;w++)w in m&&(h[w]=a.call(void 0,m[w],w,i));return h},ED=Array.prototype.some?function(i,a){return Array.prototype.some.call(i,a,void 0)}:function(i,a){for(var l=i.length,h=typeof i=="string"?i.split(""):i,m=0;m<l;m++)if(m in h&&a.call(void 0,h[m],m,i))return!0;return!1};function kD(i){e:{for(var a=oA,l=i.length,h=typeof i=="string"?i.split(""):i,m=0;m<l;m++)if(m in h&&a.call(void 0,h[m],m,i)){a=m;break e}a=-1}return 0>a?null:typeof i=="string"?i.charAt(a):i[a]}function kr(i,a){return 0<=bg(i,a)}function $u(i,a){a=bg(i,a);var l;return(l=0<=a)&&Array.prototype.splice.call(i,a,1),l}function Jn(i,a){var l=0;TD(i,function(h,m){a.call(void 0,h,m,i)&&Array.prototype.splice.call(i,m,1).length==1&&l++})}function Kf(i){return Array.prototype.concat.apply([],arguments)}function xi(i){var a=i.length;if(0<a){for(var l=Array(a),h=0;h<a;h++)l[h]=i[h];return l}return[]}var Ig=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]},xD=/&/g,DD=/</g,CD=/>/g,AD=/"/g,OD=/'/g,ND=/\x00/g,RD=/[\x00&<>"']/;function ot(i,a){return i.indexOf(a)!=-1}function zf(i,a){return i<a?-1:i>a?1:0}var Io;e:{var Tg=f.navigator;if(Tg){var Sg=Tg.userAgent;if(Sg){Io=Sg;break e}}Io=""}function Pt(i){return ot(Io,i)}function Eg(i,a){for(var l in i)a.call(void 0,i[l],l,i)}function Di(i){for(var a in i)return!1;return!0}function Kr(i){var a={},l;for(l in i)a[l]=i[l];return a}var kg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wn(i,a){for(var l,h,m=1;m<arguments.length;m++){h=arguments[m];for(l in h)i[l]=h[l];for(var w=0;w<kg.length;w++)l=kg[w],Object.prototype.hasOwnProperty.call(h,l)&&(i[l]=h[l])}}function xg(i,a){e:{try{var l=i&&i.ownerDocument,h=l&&(l.defaultView||l.parentWindow);if(h=h||f,h.Element&&h.Location){var m=h;break e}}catch(I){}m=null}if(m&&typeof m[a]!="undefined"&&(!i||!(i instanceof m[a])&&(i instanceof m.Location||i instanceof m.Element))){if(S(i))try{var w=i.constructor.displayName||i.constructor.name||Object.prototype.toString.call(i)}catch(I){w="<object could not be stringified>"}else w=i===void 0?"undefined":i===null?"null":typeof i;bt("Argument is not a %s (or a non-Element, non-Location mock); got: %s",a,w)}}function lr(i,a){this.a=i===Fu&&a||"",this.b=Dg}lr.prototype.ta=!0,lr.prototype.sa=function(){return this.a},lr.prototype.toString=function(){return"Const{"+this.a+"}"};function Yf(i){return i instanceof lr&&i.constructor===lr&&i.b===Dg?i.a:(bt("expected object of type Const, got '"+i+"'"),"type_error:Const")}var Dg={},Fu={},Uu;function Cg(){if(Uu===void 0){var i=null,a=f.trustedTypes;if(a&&a.createPolicy){try{i=a.createPolicy("goog#html",{createHTML:ye,createScript:ye,createScriptURL:ye})}catch(l){f.console&&f.console.error(l.message)}Uu=i}else Uu=i}return Uu}function To(i,a){this.a=a===Og?i:""}To.prototype.ta=!0,To.prototype.sa=function(){return this.a.toString()},To.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Ag(i){return i instanceof To&&i.constructor===To?i.a:(bt("expected object of type TrustedResourceUrl, got '"+i+"' of type "+y(i)),"type_error:TrustedResourceUrl")}function Qf(i,a){var l=Yf(i);if(!PD.test(l))throw Error("Invalid TrustedResourceUrl format: "+l);return i=l.replace(MD,function(h,m){if(!Object.prototype.hasOwnProperty.call(a,m))throw Error('Found marker, "'+m+'", in format string, "'+l+'", but no valid label mapping found in args: '+JSON.stringify(a));return h=a[m],h instanceof lr?Yf(h):encodeURIComponent(String(h))}),LD(i)}var MD=/%{(\w+)}/g,PD=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Og={};function LD(i){var a=Cg();return i=a?a.createScriptURL(i):i,new To(i,Og)}function bn(i,a){this.a=a===Ws?i:""}bn.prototype.ta=!0,bn.prototype.sa=function(){return this.a.toString()},bn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function qu(i){return i instanceof bn&&i.constructor===bn?i.a:(bt("expected object of type SafeUrl, got '"+i+"' of type "+y(i)),"type_error:SafeUrl")}var jD=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,$D=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ng=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rg(i){if(i instanceof bn)return i;if(i=typeof i=="object"&&i.ta?i.sa():String(i),Ng.test(i))i=new bn(i,Ws);else{i=String(i),i=i.replace(/(%0A|%0D)/g,"");var a=i.match($D);i=a&&jD.test(a[1])?new bn(i,Ws):null}return i}function Mg(i){return i instanceof bn?i:(i=typeof i=="object"&&i.ta?i.sa():String(i),Ng.test(i)||(i="about:invalid#zClosurez"),new bn(i,Ws))}var Ws={},Pg=new bn("about:invalid#zClosurez",Ws);function So(i,a,l){this.a=l===Lg?i:""}So.prototype.ta=!0,So.prototype.sa=function(){return this.a.toString()},So.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function FD(i){return i instanceof So&&i.constructor===So?i.a:(bt("expected object of type SafeHtml, got '"+i+"' of type "+y(i)),"type_error:SafeHtml")}var Lg={};function UD(i,a){xg(i,"HTMLScriptElement"),i.src=Ag(a),(a=i.ownerDocument&&i.ownerDocument.defaultView)&&a!=f?a=g(a.document):(d===null&&(d=g(f.document)),a=d),a&&i.setAttribute("nonce",a)}function jg(i,a,l,h){return i=i instanceof bn?i:Mg(i),a=a||f,l=l instanceof lr?Yf(l):l||"",a.open(qu(i),l,h,void 0)}function $g(i,a){for(var l=i.split("%s"),h="",m=Array.prototype.slice.call(arguments,1);m.length&&1<l.length;)h+=l.shift()+m.shift();return h+l.join("%s")}function Xf(i){return RD.test(i)&&(i.indexOf("&")!=-1&&(i=i.replace(xD,"&amp;")),i.indexOf("<")!=-1&&(i=i.replace(DD,"&lt;")),i.indexOf(">")!=-1&&(i=i.replace(CD,"&gt;")),i.indexOf('"')!=-1&&(i=i.replace(AD,"&quot;")),i.indexOf("'")!=-1&&(i=i.replace(OD,"&#39;")),i.indexOf("\0")!=-1&&(i=i.replace(ND,"&#0;"))),i}function Jf(i){return Jf[" "](i),i}Jf[" "]=v;function qD(i,a){var l=GD;return Object.prototype.hasOwnProperty.call(l,i)?l[i]:l[i]=a(i)}var VD=Pt("Opera"),Zn=Pt("Trident")||Pt("MSIE"),Fg=Pt("Edge"),BD=Fg||Zn,Ug=Pt("Gecko")&&!(ot(Io.toLowerCase(),"webkit")&&!Pt("Edge"))&&!(Pt("Trident")||Pt("MSIE"))&&!Pt("Edge"),WD=ot(Io.toLowerCase(),"webkit")&&!Pt("Edge");function qg(){var i=f.document;return i?i.documentMode:void 0}var Vu;e:{var Zf="",eh=function(){var i=Io;if(Ug)return/rv:([^\);]+)(\)|;)/.exec(i);if(Fg)return/Edge\/([\d\.]+)/.exec(i);if(Zn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(WD)return/WebKit\/(\S+)/.exec(i);if(VD)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(eh&&(Zf=eh?eh[1]:""),Zn){var th=qg();if(th!=null&&th>parseFloat(Zf)){Vu=String(th);break e}}Vu=Zf}var GD={};function Vg(i){return qD(i,function(){for(var a=0,l=Ig(String(Vu)).split("."),h=Ig(String(i)).split("."),m=Math.max(l.length,h.length),w=0;a==0&&w<m;w++){var I=l[w]||"",k=h[w]||"";do{if(I=/(\d*)(\D*)(.*)/.exec(I)||["","","",""],k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""],I[0].length==0&&k[0].length==0)break;a=zf(I[1].length==0?0:parseInt(I[1],10),k[1].length==0?0:parseInt(k[1],10))||zf(I[2].length==0,k[2].length==0)||zf(I[2],k[2]),I=I[3],k=k[3]}while(a==0)}return 0<=a})}var nh;if(f.document&&Zn){var Bg=qg();nh=Bg||parseInt(Vu,10)||void 0}else nh=void 0;var zr=nh;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(i){}var HD=!Zn||9<=Number(zr);function Gs(i){var a=document;return typeof i=="string"?a.getElementById(i):i}function Wg(i,a){Eg(a,function(l,h){l&&typeof l=="object"&&l.ta&&(l=l.sa()),h=="style"?i.style.cssText=l:h=="class"?i.className=l:h=="for"?i.htmlFor=l:Gg.hasOwnProperty(h)?i.setAttribute(Gg[h],l):h.lastIndexOf("aria-",0)==0||h.lastIndexOf("data-",0)==0?i.setAttribute(h,l):i[h]=l})}var Gg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function KD(i,a,l){var h=arguments,m=document,w=String(h[0]),I=h[1];if(!HD&&I&&(I.name||I.type)){if(w=["<",w],I.name&&w.push(' name="',Xf(I.name),'"'),I.type){w.push(' type="',Xf(I.type),'"');var k={};wn(k,I),delete k.type,I=k}w.push(">"),w=w.join("")}return w=Bu(m,w),I&&(typeof I=="string"?w.className=I:Array.isArray(I)?w.className=I.join(" "):Wg(w,I)),2<h.length&&zD(m,w,h),w}function zD(i,a,l){function h(k){k&&a.appendChild(typeof k=="string"?i.createTextNode(k):k)}for(var m=2;m<l.length;m++){var w=l[m];if(!b(w)||S(w)&&0<w.nodeType)h(w);else{e:{if(w&&typeof w.length=="number"){if(S(w)){var I=typeof w.item=="function"||typeof w.item=="string";break e}if(T(w)){I=typeof w.item=="function";break e}}I=!1}mt(I?xi(w):w,h)}}}function Bu(i,a){return a=String(a),i.contentType==="application/xhtml+xml"&&(a=a.toLowerCase()),i.createElement(a)}function Hg(i){f.setTimeout(function(){throw i},0)}var rh;function YD(){var i=f.MessageChannel;if(typeof i=="undefined"&&typeof window!="undefined"&&window.postMessage&&window.addEventListener&&!Pt("Presto")&&(i=function(){var m=Bu(document,"IFRAME");m.style.display="none",document.documentElement.appendChild(m);var w=m.contentWindow;m=w.document,m.open(),m.close();var I="callImmediate"+Math.random(),k=w.location.protocol=="file:"?"*":w.location.protocol+"//"+w.location.host;m=R(function(G){(k=="*"||G.origin==k)&&G.data==I&&this.port1.onmessage()},this),w.addEventListener("message",m,!1),this.port1={},this.port2={postMessage:function(){w.postMessage(I,k)}}}),typeof i!="undefined"&&!Pt("Trident")&&!Pt("MSIE")){var a=new i,l={},h=l;return a.port1.onmessage=function(){if(l.next!==void 0){l=l.next;var m=l.Hb;l.Hb=null,m()}},function(m){h.next={Hb:m},h=h.next,a.port2.postMessage(0)}}return function(m){f.setTimeout(m,0)}}function Wu(i,a){Gu||QD(),ih||(Gu(),ih=!0),Kg.add(i,a)}var Gu;function QD(){if(f.Promise&&f.Promise.resolve){var i=f.Promise.resolve(void 0);Gu=function(){i.then(zg)}}else Gu=function(){var a=zg;!T(f.setImmediate)||f.Window&&f.Window.prototype&&!Pt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(rh||(rh=YD()),rh(a)):f.setImmediate(a)}}var ih=!1,Kg=new Er;function zg(){for(var i;i=Lu();){try{i.a.call(i.b)}catch(a){Hg(a)}_n(sn,i)}ih=!1}function je(i,a){if(this.a=Ci,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,i!=v)try{var l=this;i.call(a,function(h){Ai(l,Hs,h)},function(h){if(!(h instanceof Eo))try{throw h instanceof Error?h:Error("Promise rejected.")}catch(m){}Ai(l,xr,h)})}catch(h){Ai(this,xr,h)}}var Ci=0,Hs=2,xr=3;function Yg(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Yg.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qg=new Be(function(){return new Yg},function(i){i.reset()});function oh(i,a,l){var h=Qg.get();return h.g=i,h.b=a,h.f=l,h}function me(i){if(i instanceof je)return i;var a=new je(v);return Ai(a,Hs,i),a}function ft(i){return new je(function(a,l){l(i)})}function Xg(i,a,l){ty(i,a,l,null)||Wu(K(a,i))}function XD(i){return new je(function(a,l){var h=i.length,m=[];if(h)for(var w=function(Z,De){h--,m[Z]=De,h==0&&a(m)},I=function(Z){l(Z)},k=0,G;k<i.length;k++)G=i[k],Xg(G,K(w,k),I);else a(m)})}function Jg(i){return new je(function(a){var l=i.length,h=[];if(l)for(var m=function(k,G,Z){l--,h[k]=G?{Qb:!0,value:Z}:{Qb:!1,reason:Z},l==0&&a(h)},w=0,I;w<i.length;w++)I=i[w],Xg(I,K(m,w,!0),K(m,w,!1));else a(h)})}je.prototype.then=function(i,a,l){return ey(this,T(i)?i:null,T(a)?a:null,l)},je.prototype.$goog_Thenable=!0,t=je.prototype,t.oa=function(i,a){return i=oh(i,i,a),i.c=!0,sh(this,i),this},t.o=function(i,a){return ey(this,null,i,a)},t.cancel=function(i){if(this.a==Ci){var a=new Eo(i);Wu(function(){Zg(this,a)},this)}};function Zg(i,a){if(i.a==Ci)if(i.c){var l=i.c;if(l.b){for(var h=0,m=null,w=null,I=l.b;I&&(I.c||(h++,I.a==i&&(m=I),!(m&&1<h)));I=I.next)m||(w=I);m&&(l.a==Ci&&h==1?Zg(l,a):(w?(h=w,h.next==l.f&&(l.f=h),h.next=h.next.next):ry(l),iy(l,m,xr,a)))}i.c=null}else Ai(i,xr,a)}function sh(i,a){i.b||i.a!=Hs&&i.a!=xr||ny(i),i.f?i.f.next=a:i.b=a,i.f=a}function ey(i,a,l,h){var m=oh(null,null,null);return m.a=new je(function(w,I){m.g=a?function(k){try{var G=a.call(h,k);w(G)}catch(Z){I(Z)}}:w,m.b=l?function(k){try{var G=l.call(h,k);G===void 0&&k instanceof Eo?I(k):w(G)}catch(Z){I(Z)}}:I}),m.a.c=i,sh(i,m),m.a}t.$c=function(i){this.a=Ci,Ai(this,Hs,i)},t.ad=function(i){this.a=Ci,Ai(this,xr,i)};function Ai(i,a,l){i.a==Ci&&(i===l&&(a=xr,l=new TypeError("Promise cannot resolve to itself")),i.a=1,ty(l,i.$c,i.ad,i)||(i.i=l,i.a=a,i.c=null,ny(i),a!=xr||l instanceof Eo||ZD(i,l)))}function ty(i,a,l,h){if(i instanceof je)return sh(i,oh(a||v,l||null,h)),!0;if(Le(i))return i.then(a,l,h),!0;if(S(i))try{var m=i.then;if(T(m))return JD(i,m,a,l,h),!0}catch(w){return l.call(h,w),!0}return!1}function JD(i,a,l,h,m){function w(G){k||(k=!0,h.call(m,G))}function I(G){k||(k=!0,l.call(m,G))}var k=!1;try{a.call(i,I,w)}catch(G){w(G)}}function ny(i){i.h||(i.h=!0,Wu(i.gc,i))}function ry(i){var a=null;return i.b&&(a=i.b,i.b=a.next,a.next=null),i.b||(i.f=null),a}t.gc=function(){for(var i;i=ry(this);)iy(this,i,this.a,this.i);this.h=!1};function iy(i,a,l,h){if(l==xr&&a.b&&!a.c)for(;i&&i.g;i=i.c)i.g=!1;if(a.a)a.a.c=null,oy(a,l,h);else try{a.c?a.g.call(a.f):oy(a,l,h)}catch(m){sy.call(null,m)}_n(Qg,a)}function oy(i,a,l){a==Hs?i.g.call(i.f,l):i.b&&i.b.call(i.f,l)}function ZD(i,a){i.g=!0,Wu(function(){i.g&&sy.call(null,a)})}var sy=Hg;function Eo(i){ut.call(this,i)}Y(Eo,ut),Eo.prototype.name="cancel";function Hu(){ah!=0&&(ay[A(this)]=this),this.ya=this.ya,this.pa=this.pa}var ah=0,ay={};Hu.prototype.ya=!1;function uy(i){if(!i.ya&&(i.ya=!0,i.Da(),ah!=0)){var a=A(i);if(ah!=0&&i.pa&&0<i.pa.length)throw Error(i+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ay[a]}}Hu.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var eC=Object.freeze||function(i){return i},cy=!Zn||9<=Number(zr),tC=Zn&&!Vg("9"),nC=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var i=!1,a=Object.defineProperty({},"passive",{get:function(){i=!0}});try{f.addEventListener("test",v,a),f.removeEventListener("test",v,a)}catch(l){}return i}();function In(i,a){this.type=i,this.b=this.target=a,this.defaultPrevented=!1}In.prototype.preventDefault=function(){this.defaultPrevented=!0};function Oi(i,a){if(In.call(this,i?i.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,i){var l=this.type=i.type,h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.b=a,a=i.relatedTarget){if(Ug){e:{try{Jf(a.nodeName);var m=!0;break e}catch(w){}m=!1}m||(a=null)}}else l=="mouseover"?a=i.fromElement:l=="mouseout"&&(a=i.toElement);this.relatedTarget=a,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:rC[i.pointerType]||"",this.a=i,i.defaultPrevented&&this.preventDefault()}}Y(Oi,In);var rC=eC({2:"touch",3:"pen",4:"mouse"});Oi.prototype.preventDefault=function(){Oi.bb.preventDefault.call(this);var i=this.a;if(i.preventDefault)i.preventDefault();else if(i.returnValue=!1,tC)try{(i.ctrlKey||112<=i.keyCode&&123>=i.keyCode)&&(i.keyCode=-1)}catch(a){}},Oi.prototype.g=function(){return this.a};var Ks="closure_listenable_"+(1e6*Math.random()|0),iC=0;function oC(i,a,l,h,m){this.listener=i,this.proxy=null,this.src=a,this.type=l,this.capture=!!h,this.Wa=m,this.key=++iC,this.wa=this.Qa=!1}function Ku(i){i.wa=!0,i.listener=null,i.proxy=null,i.src=null,i.Wa=null}function zu(i){this.src=i,this.a={},this.b=0}zu.prototype.add=function(i,a,l,h,m){var w=i.toString();i=this.a[w],i||(i=this.a[w]=[],this.b++);var I=ch(i,a,h,m);return-1<I?(a=i[I],l||(a.Qa=!1)):(a=new oC(a,this.src,w,!!h,m),a.Qa=l,i.push(a)),a};function uh(i,a){var l=a.type;l in i.a&&$u(i.a[l],a)&&(Ku(a),i.a[l].length==0&&(delete i.a[l],i.b--))}function ch(i,a,l,h){for(var m=0;m<i.length;++m){var w=i[m];if(!w.wa&&w.listener==a&&w.capture==!!l&&w.Wa==h)return m}return-1}var lh="closure_lm_"+(1e6*Math.random()|0),fh={},ly=0;function Wn(i,a,l,h,m){if(h&&h.once)hh(i,a,l,h,m);else if(Array.isArray(a))for(var w=0;w<a.length;w++)Wn(i,a[w],l,h,m);else l=ph(l),i&&i[Ks]?vy(i,a,l,S(h)?!!h.capture:!!h,m):fy(i,a,l,!1,h,m)}function fy(i,a,l,h,m,w){if(!a)throw Error("Invalid event type");var I=S(m)?!!m.capture:!!m,k=Yu(i);if(k||(i[lh]=k=new zu(i)),l=k.add(a,l,h,I,w),!l.proxy){if(h=sC(),l.proxy=h,h.src=i,h.listener=l,i.addEventListener)nC||(m=I),m===void 0&&(m=!1),i.addEventListener(a.toString(),h,m);else if(i.attachEvent)i.attachEvent(dy(a.toString()),h);else if(i.addListener&&i.removeListener)i.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");ly++}}function sC(){var i=aC,a=cy?function(l){return i.call(a.src,a.listener,l)}:function(l){if(l=i.call(a.src,a.listener,l),!l)return l};return a}function hh(i,a,l,h,m){if(Array.isArray(a))for(var w=0;w<a.length;w++)hh(i,a[w],l,h,m);else l=ph(l),i&&i[Ks]?mh(i,a,l,S(h)?!!h.capture:!!h,m):fy(i,a,l,!0,h,m)}function On(i,a,l,h,m){if(Array.isArray(a))for(var w=0;w<a.length;w++)On(i,a[w],l,h,m);else h=S(h)?!!h.capture:!!h,l=ph(l),i&&i[Ks]?(i=i.v,a=String(a).toString(),a in i.a&&(w=i.a[a],l=ch(w,l,h,m),-1<l&&(Ku(w[l]),Array.prototype.splice.call(w,l,1),w.length==0&&(delete i.a[a],i.b--)))):i&&(i=Yu(i))&&(a=i.a[a.toString()],i=-1,a&&(i=ch(a,l,h,m)),(l=-1<i?a[i]:null)&&hy(l))}function hy(i){if(typeof i!="number"&&i&&!i.wa){var a=i.src;if(a&&a[Ks])uh(a.v,i);else{var l=i.type,h=i.proxy;a.removeEventListener?a.removeEventListener(l,h,i.capture):a.detachEvent?a.detachEvent(dy(l),h):a.addListener&&a.removeListener&&a.removeListener(h),ly--,(l=Yu(a))?(uh(l,i),l.b==0&&(l.src=null,a[lh]=null)):Ku(i)}}}function dy(i){return i in fh?fh[i]:fh[i]="on"+i}function py(i,a,l,h){var m=!0;if((i=Yu(i))&&(a=i.a[a.toString()]))for(a=a.concat(),i=0;i<a.length;i++){var w=a[i];w&&w.capture==l&&!w.wa&&(w=my(w,h),m=m&&w!==!1)}return m}function my(i,a){var l=i.listener,h=i.Wa||i.src;return i.Qa&&hy(i),l.call(h,a)}function aC(i,a){if(i.wa)return!0;if(!cy){if(!a)e:{a=["window","event"];for(var l=f,h=0;h<a.length;h++)if(l=l[a[h]],l==null){a=null;break e}a=l}if(h=a,a=new Oi(h,this),l=!0,!(0>h.keyCode||h.returnValue!=null)){e:{var m=!1;if(h.keyCode==0)try{h.keyCode=-1;break e}catch(I){m=!0}(m||h.returnValue==null)&&(h.returnValue=!0)}for(h=[],m=a.b;m;m=m.parentNode)h.push(m);for(i=i.type,m=h.length-1;0<=m;m--){a.b=h[m];var w=py(h[m],i,!0,a);l=l&&w}for(m=0;m<h.length;m++)a.b=h[m],w=py(h[m],i,!1,a),l=l&&w}return l}return my(i,new Oi(a,this))}function Yu(i){return i=i[lh],i instanceof zu?i:null}var dh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ph(i){return T(i)?i:(i[dh]||(i[dh]=function(a){return i.handleEvent(a)}),i[dh])}function an(){Hu.call(this),this.v=new zu(this),this.bc=this,this.hb=null}Y(an,Hu),an.prototype[Ks]=!0,an.prototype.addEventListener=function(i,a,l,h){Wn(this,i,a,l,h)},an.prototype.removeEventListener=function(i,a,l,h){On(this,i,a,l,h)},an.prototype.dispatchEvent=function(i){var a,l=this.hb;if(l)for(a=[];l;l=l.hb)a.push(l);l=this.bc;var h=i.type||i;if(typeof i=="string")i=new In(i,l);else if(i instanceof In)i.target=i.target||l;else{var m=i;i=new In(h,l),wn(i,m)}if(m=!0,a)for(var w=a.length-1;0<=w;w--){var I=i.b=a[w];m=Qu(I,h,!0,i)&&m}if(I=i.b=l,m=Qu(I,h,!0,i)&&m,m=Qu(I,h,!1,i)&&m,a)for(w=0;w<a.length;w++)I=i.b=a[w],m=Qu(I,h,!1,i)&&m;return m},an.prototype.Da=function(){if(an.bb.Da.call(this),this.v){var i=this.v,a=0,l;for(l in i.a){for(var h=i.a[l],m=0;m<h.length;m++)++a,Ku(h[m]);delete i.a[l],i.b--}}this.hb=null};function vy(i,a,l,h,m){i.v.add(String(a),l,!1,h,m)}function mh(i,a,l,h,m){i.v.add(String(a),l,!0,h,m)}function Qu(i,a,l,h){if(a=i.v.a[String(a)],!a)return!0;a=a.concat();for(var m=!0,w=0;w<a.length;++w){var I=a[w];if(I&&!I.wa&&I.capture==l){var k=I.listener,G=I.Wa||I.src;I.Qa&&uh(i.v,I),m=k.call(G,h)!==!1&&m}}return m&&!h.defaultPrevented}function vh(i,a,l){if(T(i))l&&(i=R(i,l));else if(i&&typeof i.handleEvent=="function")i=R(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:f.setTimeout(i,a||0)}function ko(i){var a=null;return new je(function(l,h){a=vh(function(){l(void 0)},i),a==-1&&h(Error("Failed to schedule timer."))}).o(function(l){throw f.clearTimeout(a),l})}function gy(i){if(i.X&&typeof i.X=="function")return i.X();if(typeof i=="string")return i.split("");if(b(i)){for(var a=[],l=i.length,h=0;h<l;h++)a.push(i[h]);return a}a=[],l=0;for(h in i)a[l++]=i[h];return a}function yy(i){if(i.Y&&typeof i.Y=="function")return i.Y();if(!i.X||typeof i.X!="function"){if(b(i)||typeof i=="string"){var a=[];i=i.length;for(var l=0;l<i;l++)a.push(l);return a}a=[],l=0;for(var h in i)a[l++]=h;return a}}function uC(i,a){if(i.forEach&&typeof i.forEach=="function")i.forEach(a,void 0);else if(b(i)||typeof i=="string")mt(i,a,void 0);else for(var l=yy(i),h=gy(i),m=h.length,w=0;w<m;w++)a.call(void 0,h[w],l&&l[w],i)}function xo(i,a){this.b={},this.a=[],this.c=0;var l=arguments.length;if(1<l){if(l%2)throw Error("Uneven number of arguments");for(var h=0;h<l;h+=2)this.set(arguments[h],arguments[h+1])}else if(i)if(i instanceof xo)for(l=i.Y(),h=0;h<l.length;h++)this.set(l[h],i.get(l[h]));else for(h in i)this.set(h,i[h])}t=xo.prototype,t.X=function(){gh(this);for(var i=[],a=0;a<this.a.length;a++)i.push(this.b[this.a[a]]);return i},t.Y=function(){return gh(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function gh(i){if(i.c!=i.a.length){for(var a=0,l=0;a<i.a.length;){var h=i.a[a];Ni(i.b,h)&&(i.a[l++]=h),a++}i.a.length=l}if(i.c!=i.a.length){var m={};for(l=a=0;a<i.a.length;)h=i.a[a],Ni(m,h)||(i.a[l++]=h,m[h]=1),a++;i.a.length=l}}t.get=function(i,a){return Ni(this.b,i)?this.b[i]:a},t.set=function(i,a){Ni(this.b,i)||(this.c++,this.a.push(i)),this.b[i]=a},t.forEach=function(i,a){for(var l=this.Y(),h=0;h<l.length;h++){var m=l[h],w=this.get(m);i.call(a,w,m,this)}};function Ni(i,a){return Object.prototype.hasOwnProperty.call(i,a)}var _y=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cC(i,a){if(i){i=i.split("&");for(var l=0;l<i.length;l++){var h=i[l].indexOf("="),m=null;if(0<=h){var w=i[l].substring(0,h);m=i[l].substring(h+1)}else w=i[l];a(w,m?decodeURIComponent(m.replace(/\+/g," ")):"")}}}function Yr(i,a){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var l;i instanceof Yr?(this.i=a!==void 0?a:i.i,zs(this,i.c),this.l=i.l,this.a=i.a,Ys(this,i.g),this.f=i.f,yh(this,Ty(i.b)),this.h=i.h):i&&(l=String(i).match(_y))?(this.i=!!a,zs(this,l[1]||"",!0),this.l=Qs(l[2]||""),this.a=Qs(l[3]||"",!0),Ys(this,l[4]),this.f=Qs(l[5]||"",!0),yh(this,l[6]||"",!0),this.h=Qs(l[7]||"")):(this.i=!!a,this.b=new Ri(null,this.i))}Yr.prototype.toString=function(){var i=[],a=this.c;a&&i.push(Xs(a,wy,!0),":");var l=this.a;return(l||a=="file")&&(i.push("//"),(a=this.l)&&i.push(Xs(a,wy,!0),"@"),i.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.g,l!=null&&i.push(":",String(l))),(l=this.f)&&(this.a&&l.charAt(0)!="/"&&i.push("/"),i.push(Xs(l,l.charAt(0)=="/"?hC:fC,!0))),(l=this.b.toString())&&i.push("?",l),(l=this.h)&&i.push("#",Xs(l,pC)),i.join("")},Yr.prototype.resolve=function(i){var a=new Yr(this),l=!!i.c;l?zs(a,i.c):l=!!i.l,l?a.l=i.l:l=!!i.a,l?a.a=i.a:l=i.g!=null;var h=i.f;if(l)Ys(a,i.g);else if(l=!!i.f){if(h.charAt(0)!="/")if(this.a&&!this.f)h="/"+h;else{var m=a.f.lastIndexOf("/");m!=-1&&(h=a.f.substr(0,m+1)+h)}if(m=h,m==".."||m==".")h="";else if(ot(m,"./")||ot(m,"/.")){h=m.lastIndexOf("/",0)==0,m=m.split("/");for(var w=[],I=0;I<m.length;){var k=m[I++];k=="."?h&&I==m.length&&w.push(""):k==".."?((1<w.length||w.length==1&&w[0]!="")&&w.pop(),h&&I==m.length&&w.push("")):(w.push(k),h=!0)}h=w.join("/")}else h=m}return l?a.f=h:l=i.b.toString()!=="",l?yh(a,Ty(i.b)):l=!!i.h,l&&(a.h=i.h),a};function zs(i,a,l){i.c=l?Qs(a,!0):a,i.c&&(i.c=i.c.replace(/:$/,""))}function Ys(i,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);i.g=a}else i.g=null}function yh(i,a,l){a instanceof Ri?(i.b=a,mC(i.b,i.i)):(l||(a=Xs(a,dC)),i.b=new Ri(a,i.i))}function It(i,a,l){i.b.set(a,l)}function Gn(i,a){return i.b.get(a)}function Tn(i){return i instanceof Yr?new Yr(i):new Yr(i,void 0)}function Xu(i,a,l,h){var m=new Yr(null,void 0);return i&&zs(m,i),a&&(m.a=a),l&&Ys(m,l),h&&(m.f=h),m}function Qs(i,a){return i?a?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Xs(i,a,l){return typeof i=="string"?(i=encodeURI(i).replace(a,lC),l&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function lC(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var wy=/[#\/\?@]/g,fC=/[#\?:]/g,hC=/[#\?]/g,dC=/[#\?@]/g,pC=/#/g;function Ri(i,a){this.b=this.a=null,this.c=i||null,this.f=!!a}function Qr(i){i.a||(i.a=new xo,i.b=0,i.c&&cC(i.c,function(a,l){i.add(decodeURIComponent(a.replace(/\+/g," ")),l)}))}function by(i){var a=yy(i);if(typeof a=="undefined")throw Error("Keys are undefined");var l=new Ri(null,void 0);i=gy(i);for(var h=0;h<a.length;h++){var m=a[h],w=i[h];Array.isArray(w)?Iy(l,m,w):l.add(m,w)}return l}t=Ri.prototype,t.add=function(i,a){Qr(this),this.c=null,i=Do(this,i);var l=this.a.get(i);return l||this.a.set(i,l=[]),l.push(a),this.b+=1,this};function fr(i,a){Qr(i),a=Do(i,a),Ni(i.a.b,a)&&(i.c=null,i.b-=i.a.get(a).length,i=i.a,Ni(i.b,a)&&(delete i.b[a],i.c--,i.a.length>2*i.c&&gh(i)))}t.clear=function(){this.a=this.c=null,this.b=0};function _h(i,a){return Qr(i),a=Do(i,a),Ni(i.a.b,a)}t.forEach=function(i,a){Qr(this),this.a.forEach(function(l,h){mt(l,function(m){i.call(a,m,h,this)},this)},this)},t.Y=function(){Qr(this);for(var i=this.a.X(),a=this.a.Y(),l=[],h=0;h<a.length;h++)for(var m=i[h],w=0;w<m.length;w++)l.push(a[h]);return l},t.X=function(i){Qr(this);var a=[];if(typeof i=="string")_h(this,i)&&(a=Kf(a,this.a.get(Do(this,i))));else{i=this.a.X();for(var l=0;l<i.length;l++)a=Kf(a,i[l])}return a},t.set=function(i,a){return Qr(this),this.c=null,i=Do(this,i),_h(this,i)&&(this.b-=this.a.get(i).length),this.a.set(i,[a]),this.b+=1,this},t.get=function(i,a){return i?(i=this.X(i),0<i.length?String(i[0]):a):a};function Iy(i,a,l){fr(i,a),0<l.length&&(i.c=null,i.a.set(Do(i,a),xi(l)),i.b+=l.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var i=[],a=this.a.Y(),l=0;l<a.length;l++){var h=a[l],m=encodeURIComponent(String(h));h=this.X(h);for(var w=0;w<h.length;w++){var I=m;h[w]!==""&&(I+="="+encodeURIComponent(String(h[w]))),i.push(I)}}return this.c=i.join("&")};function Ty(i){var a=new Ri;return a.c=i.c,i.a&&(a.a=new xo(i.a),a.b=i.b),a}function Do(i,a){return a=String(a),i.f&&(a=a.toLowerCase()),a}function mC(i,a){a&&!i.f&&(Qr(i),i.c=null,i.a.forEach(function(l,h){var m=h.toLowerCase();h!=m&&(fr(this,h),Iy(this,m,l))},i)),i.f=a}function Sy(i){var a=[];return wh(new vC,i,a),a.join("")}function vC(){}function wh(i,a,l){if(a==null)l.push("null");else{if(typeof a=="object"){if(Array.isArray(a)){var h=a;a=h.length,l.push("[");for(var m="",w=0;w<a;w++)l.push(m),wh(i,h[w],l),m=",";l.push("]");return}if(a instanceof String||a instanceof Number||a instanceof Boolean)a=a.valueOf();else{l.push("{"),m="";for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&(w=a[h],typeof w!="function"&&(l.push(m),ky(h,l),l.push(":"),wh(i,w,l),m=","));l.push("}");return}}switch(typeof a){case"string":ky(a,l);break;case"number":l.push(isFinite(a)&&!isNaN(a)?String(a):"null");break;case"boolean":l.push(String(a));break;case"function":l.push("null");break;default:throw Error("Unknown type: "+typeof a)}}}var Ey={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},gC=/\uffff/.test("\uFFFF")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ky(i,a){a.push('"',i.replace(gC,function(l){var h=Ey[l];return h||(h="\\u"+(l.charCodeAt(0)|65536).toString(16).substr(1),Ey[l]=h),h}),'"')}function bh(){var i=Vt();return Zn&&!!zr&&zr==11||/Edge\/\d+/.test(i)}function Js(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function xy(i,a){a=a||f.window;var l="about:blank";i&&(l=qu(Rg(i)||Pg)),a.location.href=l}function Dy(i,a){var l=[],h;for(h in i)h in a?typeof i[h]!=typeof a[h]?l.push(h):typeof i[h]=="object"&&i[h]!=null&&a[h]!=null?0<Dy(i[h],a[h]).length&&l.push(h):i[h]!==a[h]&&l.push(h):l.push(h);for(h in a)h in i||l.push(h);return l}function yC(){var i=Vt();return i=Co(i)!=Ny?null:(i=i.match(/\sChrome\/(\d+)/i))&&i.length==2?parseInt(i[1],10):null,i&&30>i?!1:!Zn||!zr||9<zr}function Cy(i){return i=(i||Vt()).toLowerCase(),!!(i.match(/android/)||i.match(/webos/)||i.match(/iphone|ipad|ipod/)||i.match(/blackberry/)||i.match(/windows phone/)||i.match(/iemobile/))}function Mi(i){i=i||f.window;try{i.close()}catch(a){}}function Ay(i,a,l){var h=Math.floor(1e9*Math.random()).toString();a=a||500,l=l||600;var m=(window.screen.availHeight-l)/2,w=(window.screen.availWidth-a)/2;a={width:a,height:l,top:0<m?m:0,left:0<w?w:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},l=Vt().toLowerCase(),h&&(a.target=h,ot(l,"crios/")&&(a.target="_blank")),Co(Vt())==Sh&&(i=i||"http://localhost",a.scrollbars=!0),l=i||"",(i=a)||(i={}),h=window,a=l instanceof bn?l:Rg(typeof l.href!="undefined"?l.href:String(l))||Pg,l=i.target||l.target,m=[];for(I in i)switch(I){case"width":case"height":case"top":case"left":m.push(I+"="+i[I]);break;case"target":case"noopener":case"noreferrer":break;default:m.push(I+"="+(i[I]?1:0))}var I=m.join(",");if((Pt("iPhone")&&!Pt("iPod")&&!Pt("iPad")||Pt("iPad")||Pt("iPod"))&&h.navigator&&h.navigator.standalone&&l&&l!="_self"?(I=Bu(document,"A"),xg(I,"HTMLAnchorElement"),a=a instanceof bn?a:Mg(a),I.href=qu(a),I.setAttribute("target",l),i.noreferrer&&I.setAttribute("rel","noreferrer"),i=document.createEvent("MouseEvent"),i.initMouseEvent("click",!0,!0,h,1),I.dispatchEvent(i),I={}):i.noreferrer?(I=jg("",h,l,I),i=qu(a),I&&(BD&&ot(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),I.opener=null,i='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Xf(i)+'">',i=(h=Cg())?h.createHTML(i):i,i=new So(i,null,Lg),h=I.document)&&(h.write(FD(i)),h.close())):(I=jg(a,h,l,I))&&i.noopener&&(I.opener=null),I)try{I.focus()}catch(k){}return I}function _C(i){return new je(function(a){function l(){ko(2e3).then(function(){if(!i||i.closed)a();else return l()})}return l()})}var wC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bC=/^[^@]+@[^@]+$/;function Ju(){var i=null;return new je(function(a){f.document.readyState=="complete"?a():(i=function(){a()},hh(window,"load",i))}).o(function(a){throw On(window,"load",i),a})}function IC(){return Ih(void 0)?Ju().then(function(){return new je(function(i,a){var l=f.document,h=setTimeout(function(){a(Error("Cordova framework is not ready."))},1e3);l.addEventListener("deviceready",function(){clearTimeout(h),i()},!1)})}):ft(Error("Cordova must run in an Android or iOS file scheme."))}function Ih(i){return i=i||Vt(),!(Oo()!=="file:"&&Oo()!=="ionic:"||!i.toLowerCase().match(/iphone|ipad|ipod|android/))}function Th(){var i=f.window;try{return!(!i||i==i.top)}catch(a){return!1}}function er(){return typeof f.WorkerGlobalScope!="undefined"&&typeof f.importScripts=="function"}function hr(){return pe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":pe.INTERNAL.hasOwnProperty("node")?"Node":er()?"Worker":"Browser"}function Oy(){var i=hr();return i==="ReactNative"||i==="Node"}function TC(){for(var i=50,a=[];0<i;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return a.join("")}var Sh="Firefox",Ny="Chrome";function Co(i){var a=i.toLowerCase();if(ot(a,"opera/")||ot(a,"opr/")||ot(a,"opios/"))return"Opera";if(ot(a,"iemobile"))return"IEMobile";if(ot(a,"msie")||ot(a,"trident/"))return"IE";if(ot(a,"edge/"))return"Edge";if(ot(a,"firefox/"))return Sh;if(ot(a,"silk/"))return"Silk";if(ot(a,"blackberry"))return"Blackberry";if(ot(a,"webos"))return"Webos";if(!ot(a,"safari/")||ot(a,"chrome/")||ot(a,"crios/")||ot(a,"android"))if(!ot(a,"chrome/")&&!ot(a,"crios/")||ot(a,"edge/")){if(ot(a,"android"))return"Android";if((i=i.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&i.length==2)return i[1]}else return Ny;else return"Safari";return"Other"}var Ry={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ao(i,a){a=a||[];var l=[],h={},m;for(m in Ry)h[Ry[m]]=!0;for(m=0;m<a.length;m++)typeof h[a[m]]!="undefined"&&(delete h[a[m]],l.push(a[m]));return l.sort(),a=l,a.length||(a=["FirebaseCore-web"]),l=hr(),l==="Browser"?(h=Vt(),l=Co(h)):l==="Worker"&&(h=Vt(),l=Co(h)+"-"+l),l+"/JsCore/"+i+"/"+a.join(",")}function Vt(){return f.navigator&&f.navigator.userAgent||""}function ht(i,a){i=i.split("."),a=a||f;for(var l=0;l<i.length&&typeof a=="object"&&a!=null;l++)a=a[i[l]];return l!=i.length&&(a=void 0),a}function Eh(){try{var i=f.localStorage,a=Li();if(i)return i.setItem(a,"1"),i.removeItem(a),bh()?!!f.indexedDB:!0}catch(l){return er()&&!!f.indexedDB}return!1}function Pi(){return(Zu()||Oo()==="chrome-extension:"||Ih())&&!Oy()&&Eh()&&!er()}function Zu(){return Oo()==="http:"||Oo()==="https:"}function Oo(){return f.location&&f.location.protocol||null}function Zs(i){return i=i||Vt(),!(Cy(i)||Co(i)==Sh)}function ea(i){return typeof i=="undefined"?null:Sy(i)}function My(i){var a={},l;for(l in i)i.hasOwnProperty(l)&&i[l]!==null&&i[l]!==void 0&&(a[l]=i[l]);return a}function No(i){if(i!==null)return JSON.parse(i)}function Li(i){return i||Math.floor(1e9*Math.random()).toString()}function Py(i){return i=i||Vt(),!(Co(i)=="Safari"||i.toLowerCase().match(/iphone|ipad|ipod/))}function Ly(){var i=f.___jsl;if(i&&i.H){for(var a in i.H)if(i.H[a].r=i.H[a].r||[],i.H[a].L=i.H[a].L||[],i.H[a].r=i.H[a].L.concat(),i.CP)for(var l=0;l<i.CP.length;l++)i.CP[l]=null}}function Xr(i,a){if(i>a)throw Error("Short delay should be less than long delay!");this.a=i,this.c=a,i=Vt(),a=hr(),this.b=Cy(i)||a==="ReactNative"}Xr.prototype.get=function(){var i=f.navigator;return(i&&typeof i.onLine=="boolean"&&(Zu()||Oo()==="chrome-extension:"||typeof i.connection!="undefined")?i.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};function kh(){var i=f.document;return i&&typeof i.visibilityState!="undefined"?i.visibilityState=="visible":!0}function SC(){var i=f.document,a=null;return kh()||!i?me():new je(function(l){a=function(){kh()&&(i.removeEventListener("visibilitychange",a,!1),l())},i.addEventListener("visibilitychange",a,!1)}).o(function(l){throw i.removeEventListener("visibilitychange",a,!1),l})}function ta(i){try{var a=new Date(parseInt(i,10));if(!isNaN(a.getTime())&&!/[^0-9]/.test(i))return a.toUTCString()}catch(l){}return null}function jy(){return!(!ht("fireauth.oauthhelper",f)&&!ht("fireauth.iframe",f))}function EC(){var i=f.navigator;return i&&i.serviceWorker&&i.serviceWorker.controller||null}function kC(){var i=f.navigator;return i&&i.serviceWorker?me().then(function(){return i.serviceWorker.ready}).then(function(a){return a.active||null}).o(function(){return null}):me(null)}var $y={};function xh(i){$y[i]||($y[i]=!0,typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(i))}var Dh;try{var Ch={};Object.defineProperty(Ch,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ch,"abcd",{configurable:!0,enumerable:!0,value:2}),Dh=Ch.abcd==2}catch(i){Dh=!1}function ce(i,a,l){Dh?Object.defineProperty(i,a,{configurable:!0,enumerable:!0,value:l}):i[a]=l}function un(i,a){if(a)for(var l in a)a.hasOwnProperty(l)&&ce(i,l,a[l])}function dr(i){var a={};return un(a,i),a}function xC(i){var a={},l;for(l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);return a}function DC(i,a){if(!a||!a.length)return!0;if(!i)return!1;for(var l=0;l<a.length;l++){var h=i[a[l]];if(h==null||h==="")return!1}return!0}function Ah(i){var a=i;if(typeof i=="object"&&i!=null){a="length"in i?[]:{};for(var l in i)ce(a,l,Ah(i[l]))}return a}function Oh(i){var a=i&&(i[Ph]?"phone":null);if(a&&i&&i[Mh]){ce(this,"uid",i[Mh]),ce(this,"displayName",i[Fy]||null);var l=null;i[Rh]&&(l=new Date(i[Rh]).toUTCString()),ce(this,"enrollmentTime",l),ce(this,"factorId",a)}else throw new N("internal-error","Internal assert: invalid MultiFactorInfo object")}Oh.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Nh(i){try{var a=new na(i)}catch(l){a=null}return a}var Fy="displayName",Rh="enrolledAt",Mh="mfaEnrollmentId",Ph="phoneInfo";function na(i){Oh.call(this,i),ce(this,"phoneNumber",i[Ph])}Y(na,Oh),na.prototype.w=function(){var i=na.bb.w.call(this);return i.phoneNumber=this.phoneNumber,i};function CC(i){var a={},l=i[AC],h=i[NC],m=i[RC];if(i=Nh(i[OC]),!m||m!=ec&&m!=ra&&!l||m==ra&&!h||m==Lh&&!i)throw Error("Invalid checkActionCode response!");m==ra?(a[qy]=l||null,a[Vy]=l||null,a[Uy]=h):(a[qy]=h||null,a[Vy]=h||null,a[Uy]=l||null),a[MC]=i||null,ce(this,LC,m),ce(this,PC,Ah(a))}var Lh="REVERT_SECOND_FACTOR_ADDITION",ec="EMAIL_SIGNIN",ra="VERIFY_AND_CHANGE_EMAIL",AC="email",OC="mfaInfo",NC="newEmail",RC="requestType",Uy="email",qy="fromEmail",MC="multiFactorInfo",Vy="previousEmail",PC="data",LC="operation";function jh(i){i=Tn(i);var a=Gn(i,By)||null,l=Gn(i,Wy)||null,h=Gn(i,Gy)||null;if(h=h&&UC[h]||null,!a||!l||!h)throw new N("argument-error",By+", "+Wy+"and "+Gy+" are required in a valid action code URL.");un(this,{apiKey:a,operation:h,code:l,continueUrl:Gn(i,jC)||null,languageCode:Gn(i,$C)||null,tenantId:Gn(i,FC)||null})}var By="apiKey",Wy="oobCode",jC="continueUrl",$C="languageCode",Gy="mode",FC="tenantId",UC={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Lh,signIn:ec,verifyAndChangeEmail:ra,verifyEmail:"VERIFY_EMAIL"};function Hy(i){try{return new jh(i)}catch(a){return null}}function tc(i){var a=i[qC];if(typeof a=="undefined")throw new N("missing-continue-uri");if(typeof a!="string"||typeof a=="string"&&!a.length)throw new N("invalid-continue-uri");this.h=a,this.b=this.a=null,this.g=!1;var l=i[Ky];if(l&&typeof l=="object"){a=l[Jy];var h=l[Qy];if(l=l[Xy],typeof a=="string"&&a.length){if(this.a=a,typeof h!="undefined"&&typeof h!="boolean")throw new N("argument-error",Qy+" property must be a boolean when specified.");if(this.g=!!h,typeof l!="undefined"&&(typeof l!="string"||typeof l=="string"&&!l.length))throw new N("argument-error",Xy+" property must be a non empty string when specified.");this.b=l||null}else{if(typeof a!="undefined")throw new N("argument-error",Jy+" property must be a non empty string when specified.");if(typeof h!="undefined"||typeof l!="undefined")throw new N("missing-android-pkg-name")}}else if(typeof l!="undefined")throw new N("argument-error",Ky+" property must be a non null object when specified.");if(this.f=null,(a=i[Yy])&&typeof a=="object"){if(a=a[Zy],typeof a=="string"&&a.length)this.f=a;else if(typeof a!="undefined")throw new N("argument-error",Zy+" property must be a non empty string when specified.")}else if(typeof a!="undefined")throw new N("argument-error",Yy+" property must be a non null object when specified.");if(a=i[$h],typeof a!="undefined"&&typeof a!="boolean")throw new N("argument-error",$h+" property must be a boolean when specified.");if(this.c=!!a,i=i[zy],typeof i!="undefined"&&(typeof i!="string"||typeof i=="string"&&!i.length))throw new N("argument-error",zy+" property must be a non empty string when specified.");this.i=i||null}var Ky="android",zy="dynamicLinkDomain",$h="handleCodeInApp",Yy="iOS",qC="url",Qy="installApp",Xy="minimumVersion",Jy="packageName",Zy="bundleId";function nc(i){var a={};a.continueUrl=i.h,a.canHandleCodeInApp=i.c,(a.androidPackageName=i.a)&&(a.androidMinimumVersion=i.b,a.androidInstallApp=i.g),a.iOSBundleId=i.f,a.dynamicLinkDomain=i.i;for(var l in a)a[l]===null&&delete a[l];return a}function VC(i){return ju(i,function(a){return a=a.toString(16),1<a.length?a:"0"+a}).join("")}var ia=null;function BC(i){var a=[];return WC(i,function(l){a.push(l)}),a}function WC(i,a){function l(G){for(;h<i.length;){var Z=i.charAt(h++),De=ia[Z];if(De!=null)return De;if(!/^[\s\xa0]*$/.test(Z))throw Error("Unknown base64 encoding at char: "+Z)}return G}GC();for(var h=0;;){var m=l(-1),w=l(0),I=l(64),k=l(64);if(k===64&&m===-1)break;a(m<<2|w>>4),I!=64&&(a(w<<4&240|I>>2),k!=64&&a(I<<6&192|k))}}function GC(){if(!ia){ia={};for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],l=0;5>l;l++)for(var h=i.concat(a[l].split("")),m=0;m<h.length;m++){var w=h[m];ia[w]===void 0&&(ia[w]=m)}}}function rc(i){var a=e0(i);if(!(a&&a.sub&&a.iss&&a.aud&&a.exp))throw Error("Invalid JWT");this.h=i,this.a=a.exp,this.i=a.sub,i=Date.now()/1e3,this.g=a.iat||(i>this.a?this.a:i),this.b=a.provider_id||a.firebase&&a.firebase.sign_in_provider||null,this.f=a.firebase&&a.firebase.tenant||null,this.c=!!a.is_anonymous||this.b=="anonymous"}rc.prototype.T=function(){return this.f},rc.prototype.l=function(){return this.c},rc.prototype.toString=function(){return this.h};function ic(i){try{return new rc(i)}catch(a){return null}}function e0(i){if(!i||(i=i.split("."),i.length!=3))return null;i=i[1];for(var a=(4-i.length%4)%4,l=0;l<a;l++)i+=".";try{var h=BC(i);for(i=[],l=a=0;a<h.length;){var m=h[a++];if(128>m)i[l++]=String.fromCharCode(m);else if(191<m&&224>m){var w=h[a++];i[l++]=String.fromCharCode((m&31)<<6|w&63)}else if(239<m&&365>m){w=h[a++];var I=h[a++],k=h[a++],G=((m&7)<<18|(w&63)<<12|(I&63)<<6|k&63)-65536;i[l++]=String.fromCharCode(55296+(G>>10)),i[l++]=String.fromCharCode(56320+(G&1023))}else w=h[a++],I=h[a++],i[l++]=String.fromCharCode((m&15)<<12|(w&63)<<6|I&63)}return JSON.parse(i.join(""))}catch(Z){}return null}var t0="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),oc=["client_id","response_type","scope","redirect_uri","state"],Fh={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:oc},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:oc},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:oc},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:t0},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Uh(i){for(var a in Fh)if(Fh[a].fa==i)return Fh[a];return null}function n0(i){var a={};a["facebook.com"]=i0,a["google.com"]=s0,a["github.com"]=o0,a["twitter.com"]=a0;var l=i&&i[r0];try{if(l)return a[l]?new a[l](i):new pr(i);if(typeof i[qh]!="undefined")return new Vh(i)}catch(h){}return null}var qh="idToken",r0="providerId";function Vh(i){var a=i[r0];if(!a&&i[qh]){var l=ic(i[qh]);l&&l.b&&(a=l.b)}if(!a)throw Error("Invalid additional user info!");(a=="anonymous"||a=="custom")&&(a=null),l=!1,typeof i.isNewUser!="undefined"?l=!!i.isNewUser:i.kind==="identitytoolkit#SignupNewUserResponse"&&(l=!0),ce(this,"providerId",a),ce(this,"isNewUser",l)}function pr(i){Vh.call(this,i),i=No(i.rawUserInfo||"{}"),ce(this,"profile",Ah(i||{}))}Y(pr,Vh);function i0(i){if(pr.call(this,i),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}Y(i0,pr);function o0(i){if(pr.call(this,i),this.providerId!="github.com")throw Error("Invalid provider ID!");ce(this,"username",this.profile&&this.profile.login||null)}Y(o0,pr);function s0(i){if(pr.call(this,i),this.providerId!="google.com")throw Error("Invalid provider ID!")}Y(s0,pr);function a0(i){if(pr.call(this,i),this.providerId!="twitter.com")throw Error("Invalid provider ID!");ce(this,"username",i.screenName||null)}Y(a0,pr);function u0(i){var a=Tn(i),l=Gn(a,"link"),h=Gn(Tn(l),"link");return a=Gn(a,"deep_link_id"),Gn(Tn(a),"link")||a||h||l||i}function sc(i,a){if(!i&&!a)throw new N("internal-error","Internal assert: no raw session string available");if(i&&a)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=i||null,this.b=a||null,this.type=this.a?oa:ac}var oa="enroll",ac="signin";sc.prototype.Ha=function(){return this.a?me(this.a):me(this.b)},sc.prototype.w=function(){return this.type==oa?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Ro(){}Ro.prototype.ka=function(){},Ro.prototype.b=function(){},Ro.prototype.c=function(){},Ro.prototype.w=function(){};function Mo(i,a){return i.then(function(l){if(l[rr]){var h=ic(l[rr]);if(!h||a!=h.i)throw new N("user-mismatch");return l}throw new N("user-mismatch")}).o(function(l){throw l&&l.code&&l.code==_e+"user-not-found"?new N("user-mismatch"):l})}function ji(i,a){if(a)this.a=a;else throw new N("internal-error","failed to construct a credential");ce(this,"providerId",i),ce(this,"signInMethod",i)}ji.prototype.ka=function(i){return hd(i,Bh(this))},ji.prototype.b=function(i,a){var l=Bh(this);return l.idToken=a,dd(i,l)},ji.prototype.c=function(i,a){return Mo(pd(i,Bh(this)),a)};function Bh(i){return{pendingToken:i.a,requestUri:"http://localhost"}}ji.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function HC(i){if(i&&i.providerId&&i.signInMethod&&i.providerId.indexOf("saml.")==0&&i.pendingToken)try{return new ji(i.providerId,i.pendingToken)}catch(a){}return null}function Dr(i,a,l){if(this.a=null,a.idToken||a.accessToken)a.idToken&&ce(this,"idToken",a.idToken),a.accessToken&&ce(this,"accessToken",a.accessToken),a.nonce&&!a.pendingToken&&ce(this,"nonce",a.nonce),a.pendingToken&&(this.a=a.pendingToken);else if(a.oauthToken&&a.oauthTokenSecret)ce(this,"accessToken",a.oauthToken),ce(this,"secret",a.oauthTokenSecret);else throw new N("internal-error","failed to construct a credential");ce(this,"providerId",i),ce(this,"signInMethod",l)}Dr.prototype.ka=function(i){return hd(i,Wh(this))},Dr.prototype.b=function(i,a){var l=Wh(this);return l.idToken=a,dd(i,l)},Dr.prototype.c=function(i,a){var l=Wh(this);return Mo(pd(i,l),a)};function Wh(i){var a={};return i.idToken&&(a.id_token=i.idToken),i.accessToken&&(a.access_token=i.accessToken),i.secret&&(a.oauth_token_secret=i.secret),a.providerId=i.providerId,i.nonce&&!i.a&&(a.nonce=i.nonce),a={postBody:by(a).toString(),requestUri:"http://localhost"},i.a&&(delete a.postBody,a.pendingToken=i.a),a}Dr.prototype.w=function(){var i={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(i.oauthIdToken=this.idToken),this.accessToken&&(i.oauthAccessToken=this.accessToken),this.secret&&(i.oauthTokenSecret=this.secret),this.nonce&&(i.nonce=this.nonce),this.a&&(i.pendingToken=this.a),i};function KC(i){if(i&&i.providerId&&i.signInMethod){var a={idToken:i.oauthIdToken,accessToken:i.oauthTokenSecret?null:i.oauthAccessToken,oauthTokenSecret:i.oauthTokenSecret,oauthToken:i.oauthTokenSecret&&i.oauthAccessToken,nonce:i.nonce,pendingToken:i.pendingToken};try{return new Dr(i.providerId,a,i.signInMethod)}catch(l){}}return null}function $i(i,a){this.Qc=a||[],un(this,{providerId:i,isOAuthProvider:!0}),this.Jb={},this.qb=(Uh(i)||{}).Ja||null,this.pb=null}$i.prototype.Ka=function(i){return this.Jb=Kr(i),this};function c0(i){if(typeof i!="string"||i.indexOf("saml.")!=0)throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');$i.call(this,i,[])}Y(c0,$i);function Nn(i){$i.call(this,i,oc),this.a=[]}Y(Nn,$i),Nn.prototype.Ca=function(i){return kr(this.a,i)||this.a.push(i),this},Nn.prototype.Rb=function(){return xi(this.a)},Nn.prototype.credential=function(i,a){var l;if(S(i)?l={idToken:i.idToken||null,accessToken:i.accessToken||null,nonce:i.rawNonce||null}:l={idToken:i||null,accessToken:a||null},!l.idToken&&!l.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new Dr(this.providerId,l,this.providerId)};function Fi(){Nn.call(this,"facebook.com")}Y(Fi,Nn),ce(Fi,"PROVIDER_ID","facebook.com"),ce(Fi,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function l0(i){if(!i)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=i;return S(i)&&(a=i.accessToken),new Fi().credential({accessToken:a})}function Ui(){Nn.call(this,"github.com")}Y(Ui,Nn),ce(Ui,"PROVIDER_ID","github.com"),ce(Ui,"GITHUB_SIGN_IN_METHOD","github.com");function f0(i){if(!i)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var a=i;return S(i)&&(a=i.accessToken),new Ui().credential({accessToken:a})}function qi(){Nn.call(this,"google.com"),this.Ca("profile")}Y(qi,Nn),ce(qi,"PROVIDER_ID","google.com"),ce(qi,"GOOGLE_SIGN_IN_METHOD","google.com");function h0(i,a){var l=i;return S(i)&&(l=i.idToken,a=i.accessToken),new qi().credential({idToken:l,accessToken:a})}function Po(){$i.call(this,"twitter.com",t0)}Y(Po,$i),ce(Po,"PROVIDER_ID","twitter.com"),ce(Po,"TWITTER_SIGN_IN_METHOD","twitter.com");function d0(i,a){var l=i;if(S(l)||(l={oauthToken:i,oauthTokenSecret:a}),!l.oauthToken||!l.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Dr("twitter.com",l,"twitter.com")}function Jr(i,a,l){this.a=i,this.f=a,ce(this,"providerId","password"),ce(this,"signInMethod",l===Hn.EMAIL_LINK_SIGN_IN_METHOD?Hn.EMAIL_LINK_SIGN_IN_METHOD:Hn.EMAIL_PASSWORD_SIGN_IN_METHOD)}Jr.prototype.ka=function(i){return this.signInMethod==Hn.EMAIL_LINK_SIGN_IN_METHOD?Fe(i,NA,{email:this.a,oobCode:this.f}):Fe(i,q0,{email:this.a,password:this.f})},Jr.prototype.b=function(i,a){return this.signInMethod==Hn.EMAIL_LINK_SIGN_IN_METHOD?Fe(i,RA,{idToken:a,email:this.a,oobCode:this.f}):Fe(i,U0,{idToken:a,email:this.a,password:this.f})},Jr.prototype.c=function(i,a){return Mo(this.ka(i),a)},Jr.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function zC(i){return i&&i.email&&i.password?new Jr(i.email,i.password,i.signInMethod):null}function Hn(){un(this,{providerId:"password",isOAuthProvider:!1})}function p0(i,a){if(a=Gh(a),!a)throw new N("argument-error","Invalid email link!");return new Jr(i,a.code,Hn.EMAIL_LINK_SIGN_IN_METHOD)}function Gh(i){return i=u0(i),(i=Hy(i))&&i.operation===ec?i:null}un(Hn,{PROVIDER_ID:"password"}),un(Hn,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),un(Hn,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Zr(i){if(!(i.fb&&i.eb||i.La&&i.ea))throw new N("internal-error");this.a=i,ce(this,"providerId","phone"),this.fa="phone",ce(this,"signInMethod","phone")}Zr.prototype.ka=function(i){return i.gb(sa(this))},Zr.prototype.b=function(i,a){var l=sa(this);return l.idToken=a,Fe(i,ZA,l)},Zr.prototype.c=function(i,a){var l=sa(this);return l.operation="REAUTH",i=Fe(i,eO,l),Mo(i,a)},Zr.prototype.w=function(){var i={providerId:"phone"};return this.a.fb&&(i.verificationId=this.a.fb),this.a.eb&&(i.verificationCode=this.a.eb),this.a.La&&(i.temporaryProof=this.a.La),this.a.ea&&(i.phoneNumber=this.a.ea),i};function YC(i){if(i&&i.providerId==="phone"&&(i.verificationId&&i.verificationCode||i.temporaryProof&&i.phoneNumber)){var a={};return mt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(l){i[l]&&(a[l]=i[l])}),new Zr(a)}return null}function sa(i){return i.a.La&&i.a.ea?{temporaryProof:i.a.La,phoneNumber:i.a.ea}:{sessionInfo:i.a.fb,code:i.a.eb}}function Cr(i){try{this.a=i||pe.auth()}catch(a){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}un(this,{providerId:"phone",isOAuthProvider:!1})}Cr.prototype.gb=function(i,a){var l=this.a.a;return me(a.verify()).then(function(h){if(typeof h!="string")throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(a.type){case"recaptcha":var m=S(i)?i.session:null,w=S(i)?i.phoneNumber:i,I;return m&&m.type==oa?I=m.Ha().then(function(k){return TA(l,{idToken:k,phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:h}})}):m&&m.type==ac?I=m.Ha().then(function(k){return SA(l,{mfaPendingCredential:k,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:h}})}):I=IA(l,{phoneNumber:w,recaptchaToken:h}),I.then(function(k){return typeof a.reset=="function"&&a.reset(),k},function(k){throw typeof a.reset=="function"&&a.reset(),k});default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function m0(i,a){if(!i)throw new N("missing-verification-id");if(!a)throw new N("missing-verification-code");return new Zr({fb:i,eb:a})}un(Cr,{PROVIDER_ID:"phone"}),un(Cr,{PHONE_SIGN_IN_METHOD:"phone"});function Hh(i){if(i.temporaryProof&&i.phoneNumber)return new Zr({La:i.temporaryProof,ea:i.phoneNumber});var a=i&&i.providerId;if(!a||a==="password")return null;var l=i&&i.oauthAccessToken,h=i&&i.oauthTokenSecret,m=i&&i.nonce,w=i&&i.oauthIdToken,I=i&&i.pendingToken;try{switch(a){case"google.com":return h0(w,l);case"facebook.com":return l0(l);case"github.com":return f0(l);case"twitter.com":return d0(l,h);default:return l||h||w||I?I?a.indexOf("saml.")==0?new ji(a,I):new Dr(a,{pendingToken:I,idToken:i.oauthIdToken,accessToken:i.oauthAccessToken},a):new Nn(a).credential({idToken:w,accessToken:l,rawNonce:m}):null}}catch(k){return null}}function Kh(i){if(!i.isOAuthProvider)throw new N("invalid-oauth-provider")}function tr(i,a,l,h,m,w,I){if(this.c=i,this.b=a||null,this.g=l||null,this.f=h||null,this.i=w||null,this.h=I||null,this.a=m||null,this.g||this.a){if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}else throw new N("invalid-auth-event")}tr.prototype.getUid=function(){var i=[];return i.push(this.c),this.b&&i.push(this.b),this.f&&i.push(this.f),this.h&&i.push(this.h),i.join("-")},tr.prototype.T=function(){return this.h},tr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function v0(i){return i=i||{},i.type?new tr(i.type,i.eventId,i.urlResponse,i.sessionId,i.error&&Qe(i.error),i.postBody,i.tenantId):null}function QC(){this.b=null,this.a=[]}var zh=null;function XC(i){var a=zh;a.a.push(i),a.b||(a.b=function(l){for(var h=0;h<a.a.length;h++)a.a[h](l)},i=ht("universalLinks.subscribe",f),typeof i=="function"&&i(null,a.b))}function Yh(i){var a="unauthorized-domain",l=void 0,h=Tn(i);i=h.a,h=h.c,h=="chrome-extension"?l=$g("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):h=="http"||h=="https"?l=$g("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",i):a="operation-not-supported-in-this-environment",N.call(this,a,l)}Y(Yh,N);function aa(i,a,l){N.call(this,i,l),i=a||{},i.Kb&&ce(this,"email",i.Kb),i.ea&&ce(this,"phoneNumber",i.ea),i.credential&&ce(this,"credential",i.credential),i.$b&&ce(this,"tenantId",i.$b)}Y(aa,N),aa.prototype.w=function(){var i={code:this.code,message:this.message};this.email&&(i.email=this.email),this.phoneNumber&&(i.phoneNumber=this.phoneNumber),this.tenantId&&(i.tenantId=this.tenantId);var a=this.credential&&this.credential.w();return a&&wn(i,a),i},aa.prototype.toJSON=function(){return this.w()};function uc(i){if(i.code){var a=i.code||"";a.indexOf(_e)==0&&(a=a.substring(_e.length));var l={credential:Hh(i),$b:i.tenantId};if(i.email)l.Kb=i.email;else if(i.phoneNumber)l.ea=i.phoneNumber;else if(!l.credential)return new N(a,i.message||void 0);return new aa(a,l,i.message)}return null}function ua(){}ua.prototype.c=null;function g0(i){return i.c||(i.c=i.b())}var Qh;function cc(){}Y(cc,ua),cc.prototype.a=function(){var i=y0(this);return i?new ActiveXObject(i):new XMLHttpRequest},cc.prototype.b=function(){var i={};return y0(this)&&(i[0]=!0,i[1]=!0),i};function y0(i){if(!i.f&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],l=0;l<a.length;l++){var h=a[l];try{return new ActiveXObject(h),i.f=h}catch(m){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return i.f}Qh=new cc;function lc(){}Y(lc,ua),lc.prototype.a=function(){var i=new XMLHttpRequest;if("withCredentials"in i)return i;if(typeof XDomainRequest!="undefined")return new _0;throw Error("Unsupported browser")},lc.prototype.b=function(){return{}};function _0(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=R(this.qc,this),this.a.onerror=R(this.Tb,this),this.a.onprogress=R(this.rc,this),this.a.ontimeout=R(this.vc,this)}t=_0.prototype,t.open=function(i,a,l){if(l!=null&&!l)throw Error("Only async requests are supported.");this.a.open(i,a)},t.send=function(i){if(i)if(typeof i=="string")this.a.send(i);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(i){return i.toLowerCase()=="content-type"?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xh(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Xh(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Xh(this,1)};function Xh(i,a){i.readyState=a,i.onreadystatechange&&i.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function Jh(i,a,l){this.reset(i,a,l,void 0,void 0)}Jh.prototype.a=null;var JC=0;Jh.prototype.reset=function(i,a,l,h,m){typeof m=="number"||JC++,h||ie(),delete this.a};function Zh(i){this.f=i,this.b=this.c=this.a=null}function ca(i,a){this.name=i,this.value=a}ca.prototype.toString=function(){return this.name};var w0=new ca("SEVERE",1e3),ed=new ca("WARNING",900),ZC=new ca("CONFIG",700),eA=new ca("FINE",500);function b0(i){return i.c?i.c:i.a?b0(i.a):(bt("Root logger has no level set."),null)}Zh.prototype.log=function(i,a,l){if(i.value>=b0(this).value)for(T(a)&&(a=a()),i=new Jh(i,String(a),this.f),l&&(i.a=l),l=this;l;)l=l.a};var td={},fc=null;function nd(i){fc||(fc=new Zh(""),td[""]=fc,fc.c=ZC);var a;if(!(a=td[i])){a=new Zh(i);var l=i.lastIndexOf("."),h=i.substr(l+1);l=nd(i.substr(0,l)),l.b||(l.b={}),l.b[h]=a,a.a=l,td[i]=a}return a}function Kn(i,a){i&&i.log(eA,a,void 0)}function hc(i){this.f=i}Y(hc,ua),hc.prototype.a=function(){return new dc(this.f)},hc.prototype.b=function(i){return function(){return i}}({});function dc(i){an.call(this),this.u=i,this.h=void 0,this.readyState=rd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=nd("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}Y(dc,an);var rd=0;t=dc.prototype,t.open=function(i,a){if(this.readyState!=rd)throw this.abort(),Error("Error reopening a connection");this.s=i,this.f=a,this.readyState=1,fa(this)},t.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var a={headers:this.l,method:this.s,credentials:this.h,cache:void 0};i&&(a.body=i),this.u.fetch(new Request(this.f,a)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,la(this)),this.readyState=rd},t.uc=function(i){this.a&&(this.g=i,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=i.headers,this.readyState=2,fa(this)),this.a&&(this.readyState=3,fa(this),this.a&&(this.responseType==="arraybuffer"?i.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof f.ReadableStream!="undefined"&&"body"in i?(this.response=this.responseText="",this.c=i.body.getReader(),this.m=new TextDecoder,I0(this)):i.text().then(this.tc.bind(this),this.Va.bind(this)))))};function I0(i){i.c.read().then(i.pc.bind(i)).catch(i.Va.bind(i))}t.pc=function(i){if(this.a){var a=this.m.decode(i.value?i.value:new Uint8Array(0),{stream:!i.done});a&&(this.response=this.responseText+=a),i.done?la(this):fa(this),this.readyState==3&&I0(this)}},t.tc=function(i){this.a&&(this.response=this.responseText=i,la(this))},t.sc=function(i){this.a&&(this.response=i,la(this))},t.Va=function(i){var a=this.i;a&&a.log(ed,"Failed to fetch url "+this.f,i instanceof Error?i:Error(i)),this.a&&la(this)};function la(i){i.readyState=4,i.g=null,i.c=null,i.m=null,fa(i)}t.setRequestHeader=function(i,a){this.l.append(i,a)},t.getResponseHeader=function(i){return this.b?this.b.get(i.toLowerCase())||"":((i=this.i)&&i.log(ed,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var i=this.i;return i&&i.log(ed,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}i=[];for(var a=this.b.entries(),l=a.next();!l.done;)l=l.value,i.push(l[0]+": "+l[1]),l=a.next();return i.join(`\r
`)};function fa(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(dc.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(i){this.h=i?"include":"same-origin"}});function ha(i){an.call(this),this.headers=new xo,this.D=i||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=T0,this.u=this.S=!1}Y(ha,an);var T0="";ha.prototype.b=nd("goog.net.XhrIo");var tA=/^https?$/i,nA=["POST","PUT"];function rA(i,a,l,h,m){if(i.a)throw Error("[goog.net.XhrIo] Object is active with another request="+i.l+"; newUri="+a);l=l?l.toUpperCase():"GET",i.l=a,i.h="",i.P=l,i.J=!1,i.c=!0,i.a=i.D?i.D.a():Qh.a(),i.C=i.D?g0(i.D):g0(Qh),i.a.onreadystatechange=R(i.Wb,i);try{Kn(i.b,Ar(i,"Opening Xhr")),i.N=!0,i.a.open(l,String(a),!0),i.N=!1}catch(I){Kn(i.b,Ar(i,"Error opening Xhr: "+I.message)),S0(i,I);return}a=h||"";var w=new xo(i.headers);m&&uC(m,function(I,k){w.set(k,I)}),m=kD(w.Y()),h=f.FormData&&a instanceof f.FormData,!kr(nA,l)||m||h||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),w.forEach(function(I,k){this.a.setRequestHeader(k,I)},i),i.m&&(i.a.responseType=i.m),"withCredentials"in i.a&&i.a.withCredentials!==i.S&&(i.a.withCredentials=i.S);try{x0(i),0<i.g&&(i.u=iA(i.a),Kn(i.b,Ar(i,"Will abort after "+i.g+"ms if incomplete, xhr2 "+i.u)),i.u?(i.a.timeout=i.g,i.a.ontimeout=R(i.Ma,i)):i.s=vh(i.Ma,i.g,i)),Kn(i.b,Ar(i,"Sending request")),i.i=!0,i.a.send(a),i.i=!1}catch(I){Kn(i.b,Ar(i,"Send error: "+I.message)),S0(i,I)}}function iA(i){return Zn&&Vg(9)&&typeof i.timeout=="number"&&i.ontimeout!==void 0}function oA(i){return i.toLowerCase()=="content-type"}t=ha.prototype,t.Ma=function(){typeof c!="undefined"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Kn(this.b,Ar(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function S0(i,a){i.c=!1,i.a&&(i.f=!0,i.a.abort(),i.f=!1),i.h=a,E0(i),pc(i)}function E0(i){i.J||(i.J=!0,i.dispatchEvent("complete"),i.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(Kn(this.b,Ar(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pc(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),pc(this,!0)),ha.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?k0(this):this.Jc())},t.Jc=function(){k0(this)};function k0(i){if(i.c&&typeof c!="undefined"){if(i.C[1]&&da(i)==4&&mc(i)==2)Kn(i.b,Ar(i,"Local request error detected and ignored"));else if(i.i&&da(i)==4)vh(i.Wb,0,i);else if(i.dispatchEvent("readystatechange"),da(i)==4){Kn(i.b,Ar(i,"Request complete")),i.c=!1;try{var a=mc(i);e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var m;if(m=a===0){var w=String(i.l).match(_y)[1]||null;if(!w&&f.self&&f.self.location){var I=f.self.location.protocol;w=I.substr(0,I.length-1)}m=!tA.test(w?w.toLowerCase():"")}h=m}if(h)i.dispatchEvent("complete"),i.dispatchEvent("success");else{try{var k=2<da(i)?i.a.statusText:""}catch(G){Kn(i.b,"Can not get status: "+G.message),k=""}i.h=k+" ["+mc(i)+"]",E0(i)}}finally{pc(i)}}}}function pc(i,a){if(i.a){x0(i);var l=i.a,h=i.C[0]?v:null;i.a=null,i.C=null,a||i.dispatchEvent("ready");try{l.onreadystatechange=h}catch(m){(i=i.b)&&i.log(w0,"Problem encountered resetting onreadystatechange: "+m.message,void 0)}}}function x0(i){i.a&&i.u&&(i.a.ontimeout=null),i.s&&(f.clearTimeout(i.s),i.s=null)}function da(i){return i.a?i.a.readyState:0}function mc(i){try{return 2<da(i)?i.a.status:-1}catch(a){return-1}}function sA(i){try{return i.a?i.a.responseText:""}catch(a){return Kn(i.b,"Can not get responseText: "+a.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case T0:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var i=this.b;return i&&i.log(w0,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(a){return Kn(this.b,"Can not get response: "+a.message),null}};function Ar(i,a){return a+" ["+i.P+" "+i.l+" "+mc(i)+"]"}function Vi(i){var a=cA;this.g=[],this.u=a,this.s=i||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}Vi.prototype.cancel=function(i){if(this.a)this.c instanceof Vi&&this.c.cancel();else{if(this.b){var a=this.b;delete this.b,i?a.cancel(i):(a.l--,0>=a.l&&a.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(i=new ma(this),vc(this),pa(this,!1,i))}},Vi.prototype.m=function(i,a){this.i=!1,pa(this,i,a)};function pa(i,a,l){i.a=!0,i.c=l,i.f=!a,C0(i)}function vc(i){if(i.a){if(!i.v)throw new gc(i);i.v=!1}}function aA(i,a){id(i,null,a,void 0)}function id(i,a,l,h){i.g.push([a,l,h]),i.a&&C0(i)}Vi.prototype.then=function(i,a,l){var h,m,w=new je(function(I,k){h=I,m=k});return id(this,h,function(I){I instanceof ma?w.cancel():m(I)}),w.then(i,a,l)},Vi.prototype.$goog_Thenable=!0;function D0(i){return ED(i.g,function(a){return T(a[1])})}function C0(i){if(i.h&&i.a&&D0(i)){var a=i.h,l=yc[a];l&&(f.clearTimeout(l.a),delete yc[a]),i.h=0}i.b&&(i.b.l--,delete i.b),a=i.c;for(var h=l=!1;i.g.length&&!i.i;){var m=i.g.shift(),w=m[0],I=m[1];if(m=m[2],w=i.f?I:w)try{var k=w.call(m||i.s,a);k!==void 0&&(i.f=i.f&&(k==a||k instanceof Error),i.c=a=k),(Le(a)||typeof f.Promise=="function"&&a instanceof f.Promise)&&(h=!0,i.i=!0)}catch(G){a=G,i.f=!0,D0(i)||(l=!0)}}i.c=a,h&&(k=R(i.m,i,!0),h=R(i.m,i,!1),a instanceof Vi?(id(a,k,h),a.C=!0):a.then(k,h)),l&&(a=new A0(a),yc[a.a]=a,i.h=a.a)}function gc(){ut.call(this)}Y(gc,ut),gc.prototype.message="Deferred has already fired",gc.prototype.name="AlreadyCalledError";function ma(){ut.call(this)}Y(ma,ut),ma.prototype.message="Deferred was canceled",ma.prototype.name="CanceledError";function A0(i){this.a=f.setTimeout(R(this.c,this),0),this.b=i}A0.prototype.c=function(){throw delete yc[this.a],this.b};var yc={};function od(i){var a={},l=a.document||document,h=Ag(i).toString(),m=Bu(document,"SCRIPT"),w={Xb:m,Ma:void 0},I=new Vi(w),k=null,G=a.timeout!=null?a.timeout:5e3;return 0<G&&(k=window.setTimeout(function(){_c(m,!0);var Z=new sd(fA,"Timeout reached for loading script "+h);vc(I),pa(I,!1,Z)},G),w.Ma=k),m.onload=m.onreadystatechange=function(){m.readyState&&m.readyState!="loaded"&&m.readyState!="complete"||(_c(m,a.xd||!1,k),vc(I),pa(I,!0,null))},m.onerror=function(){_c(m,!0,k);var Z=new sd(lA,"Error while loading script "+h);vc(I),pa(I,!1,Z)},w=a.attributes||{},wn(w,{type:"text/javascript",charset:"UTF-8"}),Wg(m,w),UD(m,i),uA(l).appendChild(m),I}function uA(i){var a;return(a=(i||document).getElementsByTagName("HEAD"))&&a.length!=0?a[0]:i.documentElement}function cA(){if(this&&this.Xb){var i=this.Xb;i&&i.tagName=="SCRIPT"&&_c(i,!0,this.Ma)}}function _c(i,a,l){l!=null&&f.clearTimeout(l),i.onload=v,i.onerror=v,i.onreadystatechange=v,a&&window.setTimeout(function(){i&&i.parentNode&&i.parentNode.removeChild(i)},0)}var lA=0,fA=1;function sd(i,a){var l="Jsloader error (code #"+i+")";a&&(l+=": "+a),ut.call(this,l),this.code=i}Y(sd,ut);function wc(i){this.f=i}Y(wc,ua),wc.prototype.a=function(){return new this.f},wc.prototype.b=function(){return{}};function nr(i,a,l){if(this.c=i,i=a||{},this.l=i.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=i.secureTokenTimeout||hA,this.g=Kr(i.secureTokenHeaders||dA),this.h=i.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=i.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=i.firebaseTimeout||pA,this.a=Kr(i.firebaseHeaders||mA),l&&(this.a["X-Client-Version"]=l,this.g["X-Client-Version"]=l),l=hr()=="Node",l=f.XMLHttpRequest||l&&pe.INTERNAL.node&&pe.INTERNAL.node.XMLHttpRequest,!l&&!er())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,er()?this.f=new hc(self):Oy()?this.f=new wc(l):this.f=new lc,this.b=null}var ad,rr="idToken",hA=new Xr(3e4,6e4),dA={"Content-Type":"application/x-www-form-urlencoded"},pA=new Xr(3e4,6e4),mA={"Content-Type":"application/json"};function O0(i,a){a?i.a["X-Firebase-Locale"]=a:delete i.a["X-Firebase-Locale"]}function bc(i,a){a&&(i.l=ud("https://securetoken.googleapis.com/v1/token",a),i.h=ud("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",a),i.i=ud("https://identitytoolkit.googleapis.com/v2/",a))}function ud(i,a){return i=Tn(i),a=Tn(a.url),i.f=i.a+i.f,zs(i,a.c),i.a=a.a,Ys(i,a.g),i.toString()}function N0(i,a){a?(i.a["X-Client-Version"]=a,i.g["X-Client-Version"]=a):(delete i.a["X-Client-Version"],delete i.g["X-Client-Version"])}nr.prototype.T=function(){return this.b};function R0(i,a,l,h,m,w,I){yC()||er()?i=R(i.u,i):(ad||(ad=new je(function(k,G){gA(k,G)})),i=R(i.s,i)),i(a,l,h,m,w,I)}nr.prototype.u=function(i,a,l,h,m,w){if(er()&&(typeof f.fetch=="undefined"||typeof f.Headers=="undefined"||typeof f.Request=="undefined"))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var I=new ha(this.f);if(w){I.g=Math.max(0,w);var k=setTimeout(function(){I.dispatchEvent("timeout")},w)}vy(I,"complete",function(){k&&clearTimeout(k);var G=null;try{G=JSON.parse(sA(this))||null}catch(Z){G=null}a&&a(G)}),mh(I,"ready",function(){k&&clearTimeout(k),uy(this)}),mh(I,"timeout",function(){k&&clearTimeout(k),uy(this),a&&a(null)}),rA(I,i,l,h,m)};var vA=new lr(Fu,"https://apis.google.com/js/client.js?onload=%{onload}"),M0="__fcb"+Math.floor(1e6*Math.random()).toString();function gA(i,a){if(((window.gapi||{}).client||{}).request)i();else{f[M0]=function(){((window.gapi||{}).client||{}).request?i():a(Error("CORS_UNSUPPORTED"))};var l=Qf(vA,{onload:M0});aA(od(l),function(){a(Error("CORS_UNSUPPORTED"))})}}nr.prototype.s=function(i,a,l,h,m){var w=this;ad.then(function(){window.gapi.client.setApiKey(w.c);var I=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:i,method:l,body:h,headers:m,authType:"none",callback:function(k){window.gapi.auth.setToken(I),a&&a(k)}})}).o(function(I){a&&a({error:{message:I&&I.message||"CORS_UNSUPPORTED"}})})};function yA(i,a){return new je(function(l,h){a.grant_type=="refresh_token"&&a.refresh_token||a.grant_type=="authorization_code"&&a.code?R0(i,i.l+"?key="+encodeURIComponent(i.c),function(m){m?m.error?h(vd(m)):m.access_token&&m.refresh_token?l(m):h(new N("internal-error")):h(new N("network-request-failed"))},"POST",by(a).toString(),i.g,i.m.get()):h(new N("internal-error"))})}function P0(i,a,l,h,m,w,I){var k=Tn(a+l);It(k,"key",i.c),I&&It(k,"cb",Date.now().toString());var G=h=="GET";if(G)for(var Z in m)m.hasOwnProperty(Z)&&It(k,Z,m[Z]);return new je(function(De,Ze){R0(i,k.toString(),function(Ke){Ke?Ke.error?Ze(vd(Ke,w||{})):De(Ke):Ze(new N("network-request-failed"))},h,G?void 0:Sy(My(m)),i.a,i.v.get())})}function Bi(i){if(i=i.email,typeof i!="string"||!bC.test(i))throw new N("invalid-email")}function L0(i){"email"in i&&Bi(i)}function _A(i,a){return Fe(i,CA,{identifier:a,continueUri:Zu()?Js():"http://localhost"}).then(function(l){return l.signinMethods||[]})}function wA(i){return Fe(i,qA,{}).then(function(a){return a.authorizedDomains||[]})}function Sn(i){if(!i[rr])throw i.mfaPendingCredential?new N("multi-factor-auth-required",null,Kr(i)):new N("internal-error")}function cd(i){if(i.phoneNumber||i.temporaryProof){if(!i.phoneNumber||!i.temporaryProof)throw new N("internal-error")}else{if(!i.sessionInfo)throw new N("missing-verification-id");if(!i.code)throw new N("missing-verification-code")}}nr.prototype.Ab=function(){return Fe(this,GA,{})},nr.prototype.Cb=function(i,a){return Fe(this,F0,{idToken:i,email:a})},nr.prototype.Db=function(i,a){return Fe(this,U0,{idToken:i,password:a})};var bA={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=nr.prototype,t.Eb=function(i,a){var l={idToken:i},h=[];return Eg(bA,function(m,w){var I=a[w];I===null?h.push(m):w in a&&(l[w]=I)}),h.length&&(l.deleteAttribute=h),Fe(this,F0,l)},t.wb=function(i,a){return i={requestType:"PASSWORD_RESET",email:i},wn(i,a),Fe(this,UA,i)},t.xb=function(i,a){return i={requestType:"EMAIL_SIGNIN",email:i},wn(i,a),Fe(this,jA,i)},t.vb=function(i,a){return i={requestType:"VERIFY_EMAIL",idToken:i},wn(i,a),Fe(this,$A,i)},t.Fb=function(i,a,l){return i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:a},wn(i,l),Fe(this,FA,i)};function IA(i,a){return Fe(i,WA,a)}t.gb=function(i){return Fe(this,JA,i)};function TA(i,a){return Fe(i,HA,a).then(function(l){return l.phoneSessionInfo.sessionInfo})}function j0(i){if(!i.phoneVerificationInfo)throw new N("internal-error");if(!i.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!i.phoneVerificationInfo.code)throw new N("missing-verification-code")}function SA(i,a){return Fe(i,KA,a).then(function(l){return l.phoneResponseInfo.sessionInfo})}function EA(i,a,l){return Fe(i,OA,{idToken:a,deleteProvider:l})}function ld(i){if(!i.requestUri||!i.sessionId&&!i.postBody&&!i.pendingToken)throw new N("internal-error")}function fd(i,a){return a.oauthIdToken&&a.providerId&&a.providerId.indexOf("oidc.")==0&&!a.pendingToken&&(i.sessionId?a.nonce=i.sessionId:i.postBody&&(i=new Ri(i.postBody),_h(i,"nonce")&&(a.nonce=i.get("nonce")))),a}function $0(i){var a=null;if(i.needConfirmation?(i.code="account-exists-with-different-credential",a=uc(i)):i.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(i.code="credential-already-in-use",a=uc(i)):i.errorMessage=="EMAIL_EXISTS"?(i.code="email-already-in-use",a=uc(i)):i.errorMessage&&(a=V0(i.errorMessage)),a)throw a;Sn(i)}function hd(i,a){return a.returnIdpCredential=!0,Fe(i,zA,a)}function dd(i,a){return a.returnIdpCredential=!0,Fe(i,QA,a)}function pd(i,a){return a.returnIdpCredential=!0,a.autoCreate=!1,Fe(i,YA,a)}function md(i){if(!i.oobCode)throw new N("invalid-action-code")}t.ob=function(i,a){return Fe(this,BA,{oobCode:i,newPassword:a})},t.Sa=function(i){return Fe(this,xA,{oobCode:i})},t.kb=function(i){return Fe(this,kA,{oobCode:i})};var kA={endpoint:"setAccountInfo",A:md,Z:"email",B:!0},xA={endpoint:"resetPassword",A:md,G:function(i){var a=i.requestType;if(!a||!i.email&&a!="EMAIL_SIGNIN"&&a!="VERIFY_AND_CHANGE_EMAIL")throw new N("internal-error")},B:!0},DA={endpoint:"signupNewUser",A:function(i){if(Bi(i),!i.password)throw new N("weak-password")},G:Sn,V:!0,B:!0},CA={endpoint:"createAuthUri",B:!0},AA={endpoint:"deleteAccount",O:["idToken"]},OA={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(i){if(!Array.isArray(i.deleteProvider))throw new N("internal-error")}},NA={endpoint:"emailLinkSignin",O:["email","oobCode"],A:Bi,G:Sn,V:!0,B:!0},RA={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:Bi,G:Sn,V:!0},MA={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:j0,G:Sn,B:!0,Na:!0},PA={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:j0,G:Sn,B:!0,Na:!0},LA={endpoint:"getAccountInfo"},jA={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(i){if(i.requestType!="EMAIL_SIGNIN")throw new N("internal-error");Bi(i)},Z:"email",B:!0},$A={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(i){if(i.requestType!="VERIFY_EMAIL")throw new N("internal-error")},Z:"email",B:!0},FA={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(i){if(i.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new N("internal-error")},Z:"email",B:!0},UA={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(i){if(i.requestType!="PASSWORD_RESET")throw new N("internal-error");Bi(i)},Z:"email",B:!0},qA={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},VA={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(i){if(!i.recaptchaSiteKey)throw new N("internal-error")}},BA={endpoint:"resetPassword",A:md,Z:"email",B:!0},WA={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},F0={endpoint:"setAccountInfo",O:["idToken"],A:L0,V:!0},U0={endpoint:"setAccountInfo",O:["idToken"],A:function(i){if(L0(i),!i.password)throw new N("weak-password")},G:Sn,V:!0},GA={endpoint:"signupNewUser",G:Sn,V:!0,B:!0},HA={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(i){if(!i.phoneEnrollmentInfo)throw new N("internal-error");if(!i.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!i.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(i){if(!i.phoneSessionInfo||!i.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},KA={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(i){if(!i.phoneSignInInfo||!i.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(i){if(!i.phoneResponseInfo||!i.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},zA={endpoint:"verifyAssertion",A:ld,Za:fd,G:$0,V:!0,B:!0},YA={endpoint:"verifyAssertion",A:ld,Za:fd,G:function(i){if(i.errorMessage&&i.errorMessage=="USER_NOT_FOUND")throw new N("user-not-found");if(i.errorMessage)throw V0(i.errorMessage);Sn(i)},V:!0,B:!0},QA={endpoint:"verifyAssertion",A:function(i){if(ld(i),!i.idToken)throw new N("internal-error")},Za:fd,G:$0,V:!0},XA={endpoint:"verifyCustomToken",A:function(i){if(!i.token)throw new N("invalid-custom-token")},G:Sn,V:!0,B:!0},q0={endpoint:"verifyPassword",A:function(i){if(Bi(i),!i.password)throw new N("wrong-password")},G:Sn,V:!0,B:!0},JA={endpoint:"verifyPhoneNumber",A:cd,G:Sn,B:!0},ZA={endpoint:"verifyPhoneNumber",A:function(i){if(!i.idToken)throw new N("internal-error");cd(i)},G:function(i){if(i.temporaryProof)throw i.code="credential-already-in-use",uc(i);Sn(i)}},eO={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:cd,G:Sn,B:!0},tO={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(i){if(!!i[rr]^!!i.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function Fe(i,a,l){if(!DC(l,a.O))return ft(new N("internal-error"));var h=!!a.Na,m=a.Vb||"POST",w;return me(l).then(a.A).then(function(){return a.V&&(l.returnSecureToken=!0),a.B&&i.b&&typeof l.tenantId=="undefined"&&(l.tenantId=i.b),h?P0(i,i.i,a.endpoint,m,l,a.Ib,a.mb||!1):P0(i,i.h,a.endpoint,m,l,a.Ib,a.mb||!1)}).then(function(I){return w=I,a.Za?a.Za(l,w):w}).then(a.G).then(function(){if(!a.Z)return w;if(!(a.Z in w))throw new N("internal-error");return w[a.Z]})}function V0(i){return vd({error:{errors:[{message:i}],code:400,message:i}})}function vd(i,a){var l=(i.error&&i.error.errors&&i.error.errors[0]||{}).reason||"",h={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(l=h[l]?new N(h[l]):null)return l;l=i.error&&i.error.message||"",h={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},wn(h,a||{}),a=(a=l.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<a.length?a[1]:void 0;for(var m in h)if(l.indexOf(m)===0)return new N(h[m],a);return!a&&i&&(a=ea(i)),new N("internal-error",a)}function nO(i){this.b=i,this.a=null,this.sb=rO(this)}function rO(i){return cO().then(function(){return new je(function(a,l){ht("gapi.iframes.getContext")().open({where:document.body,url:i.b,messageHandlersFilter:ht("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(h){function m(){clearTimeout(w),a()}i.a=h,i.a.restyle({setHideOnLeave:!1});var w=setTimeout(function(){l(Error("Network Error"))},uO.get());h.ping(m).then(m,function(){l(Error("Network Error"))})})})})}function iO(i,a){return i.sb.then(function(){return new je(function(l){i.a.send(a.type,a,l,ht("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function oO(i,a){i.sb.then(function(){i.a.register("authEvent",a,ht("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var sO=new lr(Fu,"https://apis.google.com/js/api.js?onload=%{onload}"),aO=new Xr(3e4,6e4),uO=new Xr(5e3,15e3),Ic=null;function cO(){return Ic||(Ic=new je(function(i,a){function l(){Ly(),ht("gapi.load")("gapi.iframes",{callback:i,ontimeout:function(){Ly(),a(Error("Network Error"))},timeout:aO.get()})}if(ht("gapi.iframes.Iframe"))i();else if(ht("gapi.load"))l();else{var h="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[h]=function(){ht("gapi.load")?l():a(Error("Network Error"))},h=Qf(sO,{onload:h}),me(od(h)).o(function(){a(Error("Network Error"))})}}).o(function(i){throw Ic=null,i}))}function B0(i,a,l,h){this.l=i,this.h=a,this.i=l,this.g=h,this.f=null,this.g?(i=Tn(this.g.url),i=Xu(i.c,i.a,i.g,"/emulator/auth/iframe")):i=Xu("https",this.l,null,"/__/auth/iframe"),this.a=i,It(this.a,"apiKey",this.h),It(this.a,"appName",this.i),this.b=null,this.c=[]}B0.prototype.toString=function(){return this.f?It(this.a,"v",this.f):fr(this.a.b,"v"),this.b?It(this.a,"eid",this.b):fr(this.a.b,"eid"),this.c.length?It(this.a,"fw",this.c.join(",")):fr(this.a.b,"fw"),this.a.toString()};function gd(i,a,l,h,m,w){this.u=i,this.s=a,this.c=l,this.m=h,this.v=w,this.i=this.g=this.l=null,this.a=m,this.h=this.f=null}gd.prototype.zb=function(i){return this.h=i,this},gd.prototype.toString=function(){if(this.v){var i=Tn(this.v.url);i=Xu(i.c,i.a,i.g,"/emulator/auth/handler")}else i=Xu("https",this.u,null,"/__/auth/handler");if(It(i,"apiKey",this.s),It(i,"appName",this.c),It(i,"authType",this.m),this.a.isOAuthProvider){var a=this.a;try{var l=pe.app(this.c).auth().la()}catch(k){l=null}a.pb=l,It(i,"providerId",this.a.providerId),l=this.a,a=My(l.Jb);for(var h in a)a[h]=a[h].toString();h=l.Qc,a=Kr(a);for(var m=0;m<h.length;m++){var w=h[m];w in a&&delete a[w]}l.qb&&l.pb&&!a[l.qb]&&(a[l.qb]=l.pb),Di(a)||It(i,"customParameters",ea(a))}if(typeof this.a.Rb=="function"&&(l=this.a.Rb(),l.length&&It(i,"scopes",l.join(","))),this.l?It(i,"redirectUrl",this.l):fr(i.b,"redirectUrl"),this.g?It(i,"eventId",this.g):fr(i.b,"eventId"),this.i?It(i,"v",this.i):fr(i.b,"v"),this.b)for(var I in this.b)this.b.hasOwnProperty(I)&&!Gn(i,I)&&It(i,I,this.b[I]);return this.h?It(i,"tid",this.h):fr(i.b,"tid"),this.f?It(i,"eid",this.f):fr(i.b,"eid"),I=yd(this.c),I.length&&It(i,"fw",I.join(",")),i.toString()};function yd(i){try{return pe.app(i).auth().Ga()}catch(a){return[]}}function W0(i,a,l,h,m,w){this.s=i,this.g=a,this.b=l,this.f=w,this.c=h||null,this.i=m||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function G0(i){var a=Js();return wA(i).then(function(l){e:{var h=Tn(a),m=h.c;h=h.a;for(var w=0;w<l.length;w++){var I=l[w],k=h,G=m;if(I.indexOf("chrome-extension://")==0?k=Tn(I).a==k&&G=="chrome-extension":G!="http"&&G!="https"?k=!1:wC.test(I)?k=k==I:(I=I.split(".").join("\\."),k=new RegExp("^(.+\\."+I+"|"+I+")$","i").test(k)),k){l=!0;break e}}l=!1}if(!l)throw new Yh(Js())})}function H0(i){return i.m||(i.m=Ju().then(function(){if(!i.u){var a=i.c,l=i.i,h=yd(i.b),m=new B0(i.s,i.g,i.b,i.f);m.f=a,m.b=l,m.c=xi(h||[]),i.u=m.toString()}i.v=new nO(i.u),lO(i)})),i.m}t=W0.prototype,t.Pb=function(i,a,l){var h=new N("popup-closed-by-user"),m=new N("web-storage-unsupported"),w=this,I=!1;return this.ma().then(function(){fO(w).then(function(k){k||(i&&Mi(i),a(m),I=!0)})}).o(function(){}).then(function(){if(!I)return _C(i)}).then(function(){if(!I)return ko(l).then(function(){a(h)})})},t.Yb=function(){var i=Vt();return!Zs(i)&&!Py(i)},t.Ub=function(){return!1},t.Nb=function(i,a,l,h,m,w,I,k){if(!i)return ft(new N("popup-blocked"));if(I&&!Zs())return this.ma().o(function(Z){Mi(i),m(Z)}),h(),me();this.a||(this.a=G0(K0(this)));var G=this;return this.a.then(function(){var Z=G.ma().o(function(De){throw Mi(i),m(De),De});return h(),Z}).then(function(){if(Kh(l),!I){var Z=va(G.s,G.g,G.b,a,l,null,w,G.c,void 0,G.i,k,G.f);xy(Z,i)}}).o(function(Z){throw Z.code=="auth/network-request-failed"&&(G.a=null),Z})};function K0(i){return i.l||(i.C=i.c?Ao(i.c,yd(i.b)):null,i.l=new nr(i.g,tt(i.i),i.C),i.f&&bc(i.l,i.f)),i.l}t.Ob=function(i,a,l,h){this.a||(this.a=G0(K0(this)));var m=this;return this.a.then(function(){Kh(a);var w=va(m.s,m.g,m.b,i,a,Js(),l,m.c,void 0,m.i,h,m.f);xy(w)}).o(function(w){throw w.code=="auth/network-request-failed"&&(m.a=null),w})},t.ma=function(){var i=this;return H0(this).then(function(){return i.v.sb}).o(function(){throw i.a=null,new N("network-request-failed")})},t.ac=function(){return!0};function va(i,a,l,h,m,w,I,k,G,Z,De,Ze){return i=new gd(i,a,l,h,m,Ze),i.l=w,i.g=I,i.i=k,i.b=Kr(G||null),i.f=Z,i.zb(De).toString()}function lO(i){if(!i.v)throw Error("IfcHandler must be initialized!");oO(i.v,function(a){var l={};if(a&&a.authEvent){var h=!1;for(a=v0(a.authEvent),l=0;l<i.h.length;l++)h=i.h[l](a)||h;return l={},l.status=h?"ACK":"ERROR",me(l)}return l.status="ERROR",me(l)})}function fO(i){var a={type:"webStorageSupport"};return H0(i).then(function(){return iO(i.v,a)}).then(function(l){if(l&&l.length&&typeof l[0].webStorageSupport!="undefined")return l[0].webStorageSupport;throw Error()})}t.Ea=function(i){this.h.push(i)},t.Ta=function(i){Jn(this.h,function(a){return a==i})};function z0(i){if(this.a=i||pe.INTERNAL.reactNative&&pe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=z0.prototype,t.get=function(i){return me(this.a.getItem(i)).then(function(a){return a&&No(a)})},t.set=function(i,a){return me(this.a.setItem(i,ea(a)))},t.U=function(i){return me(this.a.removeItem(i))},t.ca=function(){},t.ia=function(){};function Y0(i){this.b=i,this.a={},this.f=R(this.c,this)}var Q0=[];function hO(){var i=er()?self:null;if(mt(Q0,function(l){l.b==i&&(a=l)}),!a){var a=new Y0(i);Q0.push(a)}return a}Y0.prototype.c=function(i){var a=i.data.eventType,l=i.data.eventId,h=this.a[a];if(h&&0<h.length){i.ports[0].postMessage({status:"ack",eventId:l,eventType:a,response:null});var m=[];mt(h,function(w){m.push(me().then(function(){return w(i.origin,i.data.data)}))}),Jg(m).then(function(w){var I=[];mt(w,function(k){I.push({fulfilled:k.Qb,value:k.value,reason:k.reason?k.reason.message:void 0})}),mt(I,function(k){for(var G in k)typeof k[G]=="undefined"&&delete k[G]}),i.ports[0].postMessage({status:"done",eventId:l,eventType:a,response:I})})}};function X0(i,a,l){Di(i.a)&&i.b.addEventListener("message",i.f),typeof i.a[a]=="undefined"&&(i.a[a]=[]),i.a[a].push(l)}function J0(i){this.a=i}J0.prototype.postMessage=function(i,a){this.a.postMessage(i,a)};function Z0(i){this.c=i,this.b=!1,this.a=[]}function e_(i,a,l,h){var m,w=l||{},I,k,G,Z=null;if(i.b)return ft(Error("connection_unavailable"));var De=h?800:50,Ze=typeof MessageChannel!="undefined"?new MessageChannel:null;return new je(function(Ke,Ft){Ze?(m=Math.floor(Math.random()*Math.pow(10,20)).toString(),Ze.port1.start(),k=setTimeout(function(){Ft(Error("unsupported_event"))},De),I=function(Or){Or.data.eventId===m&&(Or.data.status==="ack"?(clearTimeout(k),G=setTimeout(function(){Ft(Error("timeout"))},3e3)):Or.data.status==="done"?(clearTimeout(G),typeof Or.data.response!="undefined"?Ke(Or.data.response):Ft(Error("unknown_error"))):(clearTimeout(k),clearTimeout(G),Ft(Error("invalid_response"))))},Z={messageChannel:Ze,onMessage:I},i.a.push(Z),Ze.port1.addEventListener("message",I),i.c.postMessage({eventType:a,eventId:m,data:w},[Ze.port2])):Ft(Error("connection_unavailable"))}).then(function(Ke){return _d(i,Z),Ke}).o(function(Ke){throw _d(i,Z),Ke})}function _d(i,a){if(a){var l=a.messageChannel,h=a.onMessage;l&&(l.port1.removeEventListener("message",h),l.port1.close()),Jn(i.a,function(m){return m==a})}}Z0.prototype.close=function(){for(;0<this.a.length;)_d(this,this.a[0]);this.b=!0};function t_(){if(!Id())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var i=this;er()&&self?(this.v=hO(),X0(this.v,"keyChanged",function(a,l){return i_(i).then(function(h){return 0<h.length&&mt(i.a,function(m){m(h)}),{keyProcessed:kr(h,l.key)}})}),X0(this.v,"ping",function(){return me(["keyChanged"])})):kC().then(function(a){(i.h=a)&&(i.g=new Z0(new J0(a)),e_(i.g,"ping",null,!0).then(function(l){l[0].fulfilled&&kr(l[0].value,"keyChanged")&&(i.s=!0)}).o(function(){}))})}var wd;function dO(i){return new je(function(a,l){var h=i.m.deleteDatabase("firebaseLocalStorageDb");h.onsuccess=function(){a()},h.onerror=function(m){l(Error(m.target.error))}})}function n_(i){return new je(function(a,l){var h=i.m.open("firebaseLocalStorageDb",1);h.onerror=function(m){try{m.preventDefault()}catch(w){}l(Error(m.target.error))},h.onupgradeneeded=function(m){m=m.target.result;try{m.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(w){l(w)}},h.onsuccess=function(m){m=m.target.result,m.objectStoreNames.contains("firebaseLocalStorage")?a(m):dO(i).then(function(){return n_(i)}).then(function(w){a(w)}).o(function(w){l(w)})}})}function bd(i){return i.i||(i.i=n_(i)),i.i}function Tc(i,a){function l(m,w){bd(i).then(a).then(m).o(function(I){if(3<++h)w(I);else return bd(i).then(function(k){return k.close(),i.i=void 0,l(m,w)}).o(function(k){w(k)})})}var h=0;return new je(l)}function Id(){try{return!!f.indexedDB}catch(i){return!1}}function ga(i){return i.objectStore("firebaseLocalStorage")}function ya(i,a){return i.transaction(["firebaseLocalStorage"],a?"readwrite":"readonly")}function Lo(i){return new je(function(a,l){i.onsuccess=function(h){h&&h.target?a(h.target.result):a()},i.onerror=function(h){l(h.target.error)}})}t=t_.prototype,t.set=function(i,a){var l=this,h=!1;return Tc(this,function(m){return m=ga(ya(m,!0)),Lo(m.get(i))}).then(function(m){return Tc(l,function(w){if(w=ga(ya(w,!0)),m)return m.value=a,Lo(w.put(m));l.b++,h=!0;var I={};return I.fbase_key=i,I.value=a,Lo(w.add(I))})}).then(function(){return l.c[i]=a,r_(l,i)}).oa(function(){h&&l.b--})};function r_(i,a){return i.g&&i.h&&EC()===i.h?e_(i.g,"keyChanged",{key:a},i.s).then(function(){}).o(function(){}):me()}t.get=function(i){return Tc(this,function(a){return Lo(ga(ya(a,!1)).get(i))}).then(function(a){return a&&a.value})},t.U=function(i){var a=this,l=!1;return Tc(this,function(h){return l=!0,a.b++,Lo(ga(ya(h,!0)).delete(i))}).then(function(){return delete a.c[i],r_(a,i)}).oa(function(){l&&a.b--})};function i_(i){return bd(i).then(function(a){var l=ga(ya(a,!1));return l.getAll?Lo(l.getAll()):new je(function(h,m){var w=[],I=l.openCursor();I.onsuccess=function(k){(k=k.target.result)?(w.push(k.value),k.continue()):h(w)},I.onerror=function(k){m(k.target.error)}})}).then(function(a){var l={},h=[];if(i.b==0){for(h=0;h<a.length;h++)l[a[h].fbase_key]=a[h].value;h=Dy(i.c,l),i.c=l}return h})}t.ca=function(i){this.a.length==0&&pO(this),this.a.push(i)},t.ia=function(i){Jn(this.a,function(a){return a==i}),this.a.length==0&&o_(this)};function pO(i){function a(){i.f=setTimeout(function(){i.l=i_(i).then(function(l){0<l.length&&mt(i.a,function(h){h(l)})}).then(function(){a()}).o(function(l){l.message!="STOP_EVENT"&&a()})},800)}o_(i),a()}function o_(i){i.l&&i.l.cancel("STOP_EVENT"),i.f&&(clearTimeout(i.f),i.f=null)}function s_(i){var a=this,l=null;this.a=[],this.type="indexedDB",this.c=i,this.b=me().then(function(){if(Id()){var h=Li(),m="__sak"+h;return wd||(wd=new t_),l=wd,l.set(m,h).then(function(){return l.get(m)}).then(function(w){if(w!==h)throw Error("indexedDB not supported!");return l.U(m)}).then(function(){return l}).o(function(){return a.c})}return a.c}).then(function(h){return a.type=h.type,h.ca(function(m){mt(a.a,function(w){w(m)})}),h})}t=s_.prototype,t.get=function(i){return this.b.then(function(a){return a.get(i)})},t.set=function(i,a){return this.b.then(function(l){return l.set(i,a)})},t.U=function(i){return this.b.then(function(a){return a.U(i)})},t.ca=function(i){this.a.push(i)},t.ia=function(i){Jn(this.a,function(a){return a==i})};function _a(){this.a={},this.type="inMemory"}t=_a.prototype,t.get=function(i){return me(this.a[i])},t.set=function(i,a){return this.a[i]=a,me()},t.U=function(i){return delete this.a[i],me()},t.ca=function(){},t.ia=function(){};function Sc(){if(!mO())throw hr()=="Node"?new N("internal-error","The LocalStorage compatibility library was not found."):new N("web-storage-unsupported");this.a=a_()||pe.INTERNAL.node.localStorage,this.type="localStorage"}function a_(){try{var i=f.localStorage,a=Li();return i&&(i.setItem(a,"1"),i.removeItem(a)),i}catch(l){return null}}function mO(){var i=hr()=="Node";if(i=a_()||i&&pe.INTERNAL.node&&pe.INTERNAL.node.localStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch(a){return!1}}t=Sc.prototype,t.get=function(i){var a=this;return me().then(function(){var l=a.a.getItem(i);return No(l)})},t.set=function(i,a){var l=this;return me().then(function(){var h=ea(a);h===null?l.U(i):l.a.setItem(i,h)})},t.U=function(i){var a=this;return me().then(function(){a.a.removeItem(i)})},t.ca=function(i){f.window&&Wn(f.window,"storage",i)},t.ia=function(i){f.window&&On(f.window,"storage",i)};function Td(){this.type="nullStorage"}t=Td.prototype,t.get=function(){return me(null)},t.set=function(){return me()},t.U=function(){return me()},t.ca=function(){},t.ia=function(){};function Sd(){if(!vO())throw hr()=="Node"?new N("internal-error","The SessionStorage compatibility library was not found."):new N("web-storage-unsupported");this.a=u_()||pe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function u_(){try{var i=f.sessionStorage,a=Li();return i&&(i.setItem(a,"1"),i.removeItem(a)),i}catch(l){return null}}function vO(){var i=hr()=="Node";if(i=u_()||i&&pe.INTERNAL.node&&pe.INTERNAL.node.sessionStorage,!i)return!1;try{return i.setItem("__sak","1"),i.removeItem("__sak"),!0}catch(a){return!1}}t=Sd.prototype,t.get=function(i){var a=this;return me().then(function(){var l=a.a.getItem(i);return No(l)})},t.set=function(i,a){var l=this;return me().then(function(){var h=ea(a);h===null?l.U(i):l.a.setItem(i,h)})},t.U=function(i){var a=this;return me().then(function(){a.a.removeItem(i)})},t.ca=function(){},t.ia=function(){};function gO(){var i={};i.Browser=yO,i.Node=_O,i.ReactNative=wO,i.Worker=bO,this.a=i[hr()]}var Ed,yO={F:Sc,cb:Sd},_O={F:Sc,cb:Sd},wO={F:z0,cb:Td},bO={F:Sc,cb:Td},jo={rd:"local",NONE:"none",td:"session"};function IO(i){var a=new N("invalid-persistence-type"),l=new N("unsupported-persistence-type");e:{for(h in jo)if(jo[h]==i){var h=!0;break e}h=!1}if(!h||typeof i!="string")throw a;switch(hr()){case"ReactNative":if(i==="session")throw l;break;case"Node":if(i!=="none")throw l;break;case"Worker":if(i==="session"||!Id()&&i!=="none")throw l;break;default:if(!Eh()&&i!=="none")throw l}}function c_(){var i=!!(!Py(Vt())&&Th()),a=Zs(),l=Eh();this.m=i,this.h=a,this.l=l,this.a={},Ed||(Ed=new gO),i=Ed;try{this.g=!bh()&&jy()||!f.indexedDB?new i.a.F:new s_(er()?new _a:new i.a.F)}catch(h){this.g=new _a,this.h=!0}try{this.i=new i.a.cb}catch(h){this.i=new _a}this.v=new _a,this.f=R(this.Zb,this),this.b={}}var kd;function wa(){return kd||(kd=new c_),kd}function Wi(i,a){switch(a){case"session":return i.i;case"none":return i.v;default:return i.g}}function $o(i,a){return"firebase:"+i.name+(a?":"+a:"")}function TO(i,a,l){var h=$o(a,l),m=Wi(i,a.F);return i.get(a,l).then(function(w){var I=null;try{I=No(f.localStorage.getItem(h))}catch(k){}if(I&&!w)return f.localStorage.removeItem(h),i.set(a,I,l);I&&w&&m.type!="localStorage"&&f.localStorage.removeItem(h)})}t=c_.prototype,t.get=function(i,a){return Wi(this,i.F).get($o(i,a))};function Fo(i,a,l){return l=$o(a,l),a.F=="local"&&(i.b[l]=null),Wi(i,a.F).U(l)}t.set=function(i,a,l){var h=$o(i,l),m=this,w=Wi(this,i.F);return w.set(h,a).then(function(){return w.get(h)}).then(function(I){i.F=="local"&&(m.b[h]=I)})},t.addListener=function(i,a,l){i=$o(i,a),this.l&&(this.b[i]=f.localStorage.getItem(i)),Di(this.a)&&(Wi(this,"local").ca(this.f),this.h||(bh()||!jy())&&f.indexedDB||!this.l||SO(this)),this.a[i]||(this.a[i]=[]),this.a[i].push(l)},t.removeListener=function(i,a,l){i=$o(i,a),this.a[i]&&(Jn(this.a[i],function(h){return h==l}),this.a[i].length==0&&delete this.a[i]),Di(this.a)&&(Wi(this,"local").ia(this.f),xd(this))};function SO(i){xd(i),i.c=setInterval(function(){for(var a in i.a){var l=f.localStorage.getItem(a),h=i.b[a];l!=h&&(i.b[a]=l,l=new Oi({type:"storage",key:a,target:window,oldValue:h,newValue:l,a:!0}),i.Zb(l))}},1e3)}function xd(i){i.c&&(clearInterval(i.c),i.c=null)}t.Zb=function(i){if(i&&i.g){var a=i.a.key;if(a==null)for(var l in this.a){var h=this.b[l];typeof h=="undefined"&&(h=null);var m=f.localStorage.getItem(l);m!==h&&(this.b[l]=m,this.nb(l))}else if(a.indexOf("firebase:")==0&&this.a[a]){if(typeof i.a.a!="undefined"?Wi(this,"local").ia(this.f):xd(this),this.m){if(l=f.localStorage.getItem(a),h=i.a.newValue,h!==l)h!==null?f.localStorage.setItem(a,h):f.localStorage.removeItem(a);else if(this.b[a]===h&&typeof i.a.a=="undefined")return}var w=this;l=function(){(typeof i.a.a!="undefined"||w.b[a]!==f.localStorage.getItem(a))&&(w.b[a]=f.localStorage.getItem(a),w.nb(a))},Zn&&zr&&zr==10&&f.localStorage.getItem(a)!==i.a.newValue&&i.a.newValue!==i.a.oldValue?setTimeout(l,10):l()}}else mt(i,R(this.nb,this))},t.nb=function(i){this.a[i]&&mt(this.a[i],function(a){a()})};function EO(i){this.a=i,this.b=wa()}var Dd={name:"authEvent",F:"local"};function kO(i){return i.b.get(Dd,i.a).then(function(a){return v0(a)})}function xO(){this.a=wa()}function DO(){this.b=-1}function Ec(i,a){this.b=l_,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=i,this.h=a,this.l=f.Int32Array?new Int32Array(64):Array(64),kc===void 0&&(f.Int32Array?kc=new Int32Array(d_):kc=d_),this.reset()}var kc;Y(Ec,DO);for(var l_=64,CO=l_-1,f_=[],Cd=0;Cd<CO;Cd++)f_[Cd]=0;var h_=Kf(128,f_);Ec.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):xi(this.h)};function Ad(i){for(var a=i.f,l=i.l,h=0,m=0;m<a.length;)l[h++]=a[m]<<24|a[m+1]<<16|a[m+2]<<8|a[m+3],m=4*h;for(a=16;64>a;a++){m=l[a-15]|0,h=l[a-2]|0;var w=(l[a-16]|0)+((m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3)|0,I=(l[a-7]|0)+((h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10)|0;l[a]=w+I|0}h=i.a[0]|0,m=i.a[1]|0;var k=i.a[2]|0,G=i.a[3]|0,Z=i.a[4]|0,De=i.a[5]|0,Ze=i.a[6]|0;for(w=i.a[7]|0,a=0;64>a;a++){var Ke=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&m^h&k^m&k)|0;I=Z&De^~Z&Ze,w=w+((Z>>>6|Z<<26)^(Z>>>11|Z<<21)^(Z>>>25|Z<<7))|0,I=I+(kc[a]|0)|0,I=w+(I+(l[a]|0)|0)|0,w=Ze,Ze=De,De=Z,Z=G+I|0,G=k,k=m,m=h,h=I+Ke|0}i.a[0]=i.a[0]+h|0,i.a[1]=i.a[1]+m|0,i.a[2]=i.a[2]+k|0,i.a[3]=i.a[3]+G|0,i.a[4]=i.a[4]+Z|0,i.a[5]=i.a[5]+De|0,i.a[6]=i.a[6]+Ze|0,i.a[7]=i.a[7]+w|0}function Od(i,a,l){l===void 0&&(l=a.length);var h=0,m=i.c;if(typeof a=="string")for(;h<l;)i.f[m++]=a.charCodeAt(h++),m==i.b&&(Ad(i),m=0);else if(b(a))for(;h<l;){var w=a[h++];if(!(typeof w=="number"&&0<=w&&255>=w&&w==(w|0)))throw Error("message must be a byte array");i.f[m++]=w,m==i.b&&(Ad(i),m=0)}else throw Error("message must be string or array");i.c=m,i.g+=l}var d_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function p_(){Ec.call(this,8,AO)}Y(p_,Ec);var AO=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function m_(i,a,l,h,m,w){this.v=i,this.i=a,this.l=l,this.m=h||null,this.u=m||null,this.s=w,this.h=a+":"+l,this.C=new xO,this.g=new EO(this.h),this.f=null,this.b=[],this.a=this.c=null}function xc(i){return new N("invalid-cordova-configuration",i)}t=m_.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=IC().then(function(){if(typeof ht("universalLinks.subscribe",f)!="function")throw xc("cordova-universal-links-plugin-fix is not installed");if(typeof ht("BuildInfo.packageName",f)=="undefined")throw xc("cordova-plugin-buildinfo is not installed");if(typeof ht("cordova.plugins.browsertab.openUrl",f)!="function")throw xc("cordova-plugin-browsertab is not installed");if(typeof ht("cordova.InAppBrowser.open",f)!="function")throw xc("cordova-plugin-inappbrowser is not installed")},function(){throw new N("cordova-not-ready")})};function OO(){for(var i=20,a=[];0<i;)a.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),i--;return a.join("")}function NO(i){var a=new p_;Od(a,i),i=[];var l=8*a.g;56>a.c?Od(a,h_,56-a.c):Od(a,h_,a.b-(a.c-56));for(var h=63;56<=h;h--)a.f[h]=l&255,l/=256;for(Ad(a),h=l=0;h<a.i;h++)for(var m=24;0<=m;m-=8)i[l++]=a.a[h]>>m&255;return VC(i)}t.Pb=function(i,a){return a(new N("operation-not-supported-in-this-environment")),me()},t.Nb=function(){return ft(new N("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(i,a,l,h){if(this.c)return ft(new N("redirect-operation-pending"));var m=this,w=f.document,I=null,k=null,G=null,Z=null;return this.c=me().then(function(){return Kh(a),g_(m)}).then(function(){return RO(m,i,a,l,h)}).then(function(){return new je(function(De,Ze){k=function(){var Ke=ht("cordova.plugins.browsertab.close",f);return De(),typeof Ke=="function"&&Ke(),m.a&&typeof m.a.close=="function"&&(m.a.close(),m.a=null),!1},m.Ea(k),G=function(){I||(I=ko(2e3).then(function(){Ze(new N("redirect-cancelled-by-user"))}))},Z=function(){kh()&&G()},w.addEventListener("resume",G,!1),Vt().toLowerCase().match(/android/)||w.addEventListener("visibilitychange",Z,!1)}).o(function(De){return Nd(m).then(function(){throw De})})}).oa(function(){G&&w.removeEventListener("resume",G,!1),Z&&w.removeEventListener("visibilitychange",Z,!1),I&&I.cancel(),k&&m.Ta(k),m.c=null})};function RO(i,a,l,h,m){var w=OO(),I=new tr(a,h,null,w,new N("no-auth-event"),null,m),k=ht("BuildInfo.packageName",f);if(typeof k!="string")throw new N("invalid-cordova-configuration");var G=ht("BuildInfo.displayName",f),Z={};if(Vt().toLowerCase().match(/iphone|ipad|ipod/))Z.ibi=k;else if(Vt().toLowerCase().match(/android/))Z.apn=k;else return ft(new N("operation-not-supported-in-this-environment"));G&&(Z.appDisplayName=G),w=NO(w),Z.sessionId=w;var De=va(i.v,i.i,i.l,a,l,null,h,i.m,Z,i.u,m,i.s);return i.ma().then(function(){var Ze=i.h;return i.C.a.set(Dd,I.w(),Ze)}).then(function(){var Ze=ht("cordova.plugins.browsertab.isAvailable",f);if(typeof Ze!="function")throw new N("invalid-cordova-configuration");var Ke=null;Ze(function(Ft){if(Ft){if(Ke=ht("cordova.plugins.browsertab.openUrl",f),typeof Ke!="function")throw new N("invalid-cordova-configuration");Ke(De)}else{if(Ke=ht("cordova.InAppBrowser.open",f),typeof Ke!="function")throw new N("invalid-cordova-configuration");Ft=Vt(),i.a=Ke(De,Ft.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Ft.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function v_(i,a){for(var l=0;l<i.b.length;l++)try{i.b[l](a)}catch(h){}}function g_(i){return i.f||(i.f=i.ma().then(function(){return new je(function(a){function l(h){return a(h),i.Ta(l),!1}i.Ea(l),MO(i)})})),i.f}function Nd(i){var a=null;return kO(i.g).then(function(l){return a=l,l=i.g,Fo(l.b,Dd,l.a)}).then(function(){return a})}function MO(i){function a(I){h=!0,m&&m.cancel(),Nd(i).then(function(k){var G=l;if(k&&I&&I.url){var Z=null;G=u0(I.url),G.indexOf("/__/auth/callback")!=-1&&(Z=Tn(G),Z=No(Gn(Z,"firebaseError")||null),Z=(Z=typeof Z=="object"?Qe(Z):null)?new tr(k.c,k.b,null,null,Z,null,k.T()):new tr(k.c,k.b,G,k.f,null,null,k.T())),G=Z||l}v_(i,G)})}var l=new tr("unknown",null,null,null,new N("no-auth-event")),h=!1,m=ko(500).then(function(){return Nd(i).then(function(){h||v_(i,l)})}),w=f.handleOpenURL;f.handleOpenURL=function(I){if(I.toLowerCase().indexOf(ht("BuildInfo.packageName",f).toLowerCase()+"://")==0&&a({url:I}),typeof w=="function")try{w(I)}catch(k){console.error(k)}},zh||(zh=new QC),XC(a)}t.Ea=function(i){this.b.push(i),g_(this).o(function(a){a.code==="auth/invalid-cordova-configuration"&&(a=new tr("unknown",null,null,null,new N("no-auth-event")),i(a))})},t.Ta=function(i){Jn(this.b,function(a){return a==i})};function PO(i){this.a=i,this.b=wa()}var Rd={name:"pendingRedirect",F:"session"};function LO(i){return i.b.set(Rd,"pending",i.a)}function Md(i){return Fo(i.b,Rd,i.a)}function jO(i){return i.b.get(Rd,i.a).then(function(a){return a=="pending"})}function Dc(i,a,l,h){this.i={},this.u=0,this.D=i,this.v=a,this.m=l,this.J=h,this.h=[],this.f=!1,this.l=R(this.s,this),this.b=new Ac,this.C=new x_,this.g=new PO(S_(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=y_(this.D,this.v,this.m,ke,this.J)}function y_(i,a,l,h,m){var w=pe.SDK_VERSION||null;return Ih()?new m_(i,a,l,w,h,m):new W0(i,a,l,w,h,m)}Dc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=y_(this.D,this.v,this.m,null,this.J),this.i={}};function __(i){i.f||(i.f=!0,i.a.Ea(i.l));var a=i.a;return i.a.ma().o(function(l){throw i.a==a&&i.reset(),l})}function w_(i){i.a.Yb()&&__(i).o(function(a){var l=new tr("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Ld(a)&&i.s(l)}),i.a.Ub()||E_(i.b)}function Cc(i,a){kr(i.h,a)||i.h.push(a),i.f||jO(i.g).then(function(l){l?Md(i.g).then(function(){__(i).o(function(h){var m=new tr("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Ld(h)&&i.s(m)})}):w_(i)}).o(function(){w_(i)})}function Pd(i,a){Jn(i.h,function(l){return l==a})}Dc.prototype.s=function(i){if(!i)throw new N("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),i&&i.getUid()&&this.i.hasOwnProperty(i.getUid()))return!1;for(var a=!1,l=0;l<this.h.length;l++){var h=this.h[l];if(h.Gb(i.c,i.b)){(a=this.c[i.c])&&(a.h(i,h),i&&(i.f||i.b)&&(this.i[i.getUid()]=!0,this.u=Date.now())),a=!0;break}}return E_(this.b),a};var $O=new Xr(2e3,1e4),FO=new Xr(3e4,6e4);Dc.prototype.ra=function(){return this.b.ra()};function b_(i,a,l,h,m,w,I){return i.a.Nb(a,l,h,function(){i.f||(i.f=!0,i.a.Ea(i.l))},function(){i.reset()},m,w,I)}function Ld(i){return!!(i&&i.code=="auth/cordova-not-ready")}function I_(i,a,l,h,m){var w;return LO(i.g).then(function(){return i.a.Ob(a,l,h,m).o(function(I){if(Ld(I))throw new N("operation-not-supported-in-this-environment");return w=I,Md(i.g).then(function(){throw w})}).then(function(){return i.a.ac()?new je(function(){}):Md(i.g).then(function(){return i.ra()}).then(function(){}).o(function(){})})})}function T_(i,a,l,h,m){return i.a.Pb(h,function(w){a.na(l,null,w,m)},$O.get())}var jd={};function S_(i,a,l){return i=i+":"+a,l&&(i=i+":"+l.url),i}function $d(i,a,l,h){var m=S_(a,l,h);return jd[m]||(jd[m]=new Dc(i,a,l,h)),jd[m]}function Ac(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Ac.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ac.prototype.h=function(i,a){if(i){this.reset(),this.g=!0;var l=i.c,h=i.b,m=i.a&&i.a.code=="auth/web-storage-unsupported",w=i.a&&i.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!m&&!w),l!="unknown"||m||w?i.a?(Gi(this,!0,null,i.a),me()):a.Fa(l,h)?UO(this,i,a):ft(new N("invalid-auth-event")):(Gi(this,!1,null,null),me())}else ft(new N("invalid-auth-event"))};function E_(i){i.g||(i.g=!0,Gi(i,!1,null,null))}function Oc(i){i.g&&!i.i&&Gi(i,!1,null,null)}function UO(i,a,l){l=l.Fa(a.c,a.b);var h=a.g,m=a.f,w=a.i,I=a.T(),k=!!a.c.match(/Redirect$/);l(h,m,I,w).then(function(G){Gi(i,k,G,null)}).o(function(G){Gi(i,k,null,G)})}function qO(i,a){if(i.b=function(){return ft(a)},i.c.length)for(var l=0;l<i.c.length;l++)i.c[l](a)}function k_(i,a){if(i.b=function(){return me(a)},i.f.length)for(var l=0;l<i.f.length;l++)i.f[l](a)}function Gi(i,a,l,h){a?h?qO(i,h):k_(i,l):k_(i,{user:null}),i.f=[],i.c=[]}Ac.prototype.ra=function(){var i=this;return new je(function(a,l){i.b?i.b().then(a,l):(i.f.push(a),i.c.push(l),VO(i))})};function VO(i){var a=new N("timeout");i.a&&i.a.cancel(),i.a=ko(FO.get()).then(function(){i.b||(i.g=!0,Gi(i,!0,null,a))})}function x_(){}x_.prototype.h=function(i,a){if(i){var l=i.c,h=i.b;i.a?(a.na(i.c,null,i.a,i.b),me()):a.Fa(l,h)?BO(i,a):ft(new N("invalid-auth-event"))}else ft(new N("invalid-auth-event"))};function BO(i,a){var l=i.b,h=i.c;a.Fa(h,l)(i.g,i.f,i.T(),i.i).then(function(m){a.na(h,m,null,l)}).o(function(m){a.na(h,null,m,l)})}function D_(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(i){this.jb=i},enumerable:!1})}function Fd(i,a){this.a=a,ce(this,"verificationId",i)}Fd.prototype.confirm=function(i){return i=m0(this.verificationId,i),this.a(i)};function Ud(i,a,l,h){return new Cr(i).gb(a,l).then(function(m){return new Fd(m,h)})}function WO(i){var a=e0(i);if(!(a&&a.exp&&a.auth_time&&a.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");un(this,{token:i,expirationTime:ta(1e3*a.exp),authTime:ta(1e3*a.auth_time),issuedAtTime:ta(1e3*a.iat),signInProvider:a.firebase&&a.firebase.sign_in_provider?a.firebase.sign_in_provider:null,signInSecondFactor:a.firebase&&a.firebase.sign_in_second_factor?a.firebase.sign_in_second_factor:null,claims:a})}function qd(i,a,l){var h=a&&a[A_];if(!h)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=i,this.f=Kr(a),this.g=l,this.c=new sc(null,h),this.b=[];var m=this;mt(a[C_]||[],function(w){(w=Nh(w))&&m.b.push(w)}),ce(this,"auth",this.a),ce(this,"session",this.c),ce(this,"hints",this.b)}var C_="mfaInfo",A_="mfaPendingCredential";qd.prototype.Rc=function(i){var a=this;return i.tb(this.a.a,this.c).then(function(l){var h=Kr(a.f);return delete h[C_],delete h[A_],wn(h,l),a.g(h)})};function Vd(i,a,l,h){N.call(this,"multi-factor-auth-required",h,a),this.b=new qd(i,a,l),ce(this,"resolver",this.b)}Y(Vd,N);function O_(i,a,l){if(i&&S(i.serverResponse)&&i.code==="auth/multi-factor-auth-required")try{return new Vd(a,i.serverResponse,l,i.message)}catch(h){}return null}function N_(){}N_.prototype.tb=function(i,a,l){return a.type==oa?GO(this,i,a,l):HO(this,i,a)};function GO(i,a,l,h){return l.Ha().then(function(m){return m={idToken:m},typeof h!="undefined"&&(m.displayName=h),wn(m,{phoneVerificationInfo:sa(i.a)}),Fe(a,MA,m)})}function HO(i,a,l){return l.Ha().then(function(h){return h={mfaPendingCredential:h},wn(h,{phoneVerificationInfo:sa(i.a)}),Fe(a,PA,h)})}function Bd(i){ce(this,"factorId",i.fa),this.a=i}Y(Bd,N_);function R_(i){if(Bd.call(this,i),this.a.fa!=Cr.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}Y(R_,Bd);function Uo(i,a){In.call(this,i);for(var l in a)this[l]=a[l]}Y(Uo,In);function Wd(i,a){this.a=i,this.b=[],this.c=R(this.yc,this),Wn(this.a,"userReloaded",this.c);var l=[];a&&a.multiFactor&&a.multiFactor.enrolledFactors&&mt(a.multiFactor.enrolledFactors,function(h){var m=null,w={};if(h){h.uid&&(w[Mh]=h.uid),h.displayName&&(w[Fy]=h.displayName),h.enrollmentTime&&(w[Rh]=new Date(h.enrollmentTime).toISOString()),h.phoneNumber&&(w[Ph]=h.phoneNumber);try{m=new na(w)}catch(I){}h=m}else h=null;h&&l.push(h)}),Nc(this,l)}function KO(i){var a=[];return mt(i.mfaInfo||[],function(l){(l=Nh(l))&&a.push(l)}),a}t=Wd.prototype,t.yc=function(i){Nc(this,KO(i.hd))};function Nc(i,a){i.b=a,ce(i,"enrolledFactors",a)}t.Sb=function(){return this.a.I().then(function(i){return new sc(i,null)})},t.fc=function(i,a){var l=this,h=this.a.a;return this.Sb().then(function(m){return i.tb(h,m,a)}).then(function(m){return mr(l.a,m),l.a.reload()})},t.bd=function(i){var a=this,l=typeof i=="string"?i:i.uid,h=this.a.a;return this.a.I().then(function(m){return Fe(h,tO,{idToken:m,mfaEnrollmentId:l})}).then(function(m){var w=SD(a.b,function(I){return I.uid!=l});return Nc(a,w),mr(a.a,m),a.a.reload().o(function(I){if(I.code!="auth/user-token-expired")throw I})})},t.w=function(){return{multiFactor:{enrolledFactors:ju(this.b,function(i){return i.w()})}}};function Gd(i,a,l){if(this.h=i,this.i=a,this.g=l,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Gd.prototype.start=function(){this.a=this.c,Hd(this,!0)};function zO(i,a){return a?(i.a=i.c,i.g()):(a=i.a,i.a*=2,i.a>i.f&&(i.a=i.f),a)}function Hd(i,a){i.stop(),i.b=ko(zO(i,a)).then(function(){return SC()}).then(function(){return i.h()}).then(function(){Hd(i,!0)}).o(function(l){i.i(l)&&Hd(i,!1)})}Gd.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Kd(i){this.f=i,this.b=this.a=null,this.c=Date.now()}Kd.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function M_(i,a){typeof a=="undefined"&&(i.b?(a=i.b,a=a.a-a.g):a=0),i.c=Date.now()+1e3*a}function P_(i,a){i.b=ic(a[rr]||""),i.a=a.refreshToken,a=a.expiresIn,M_(i,typeof a!="undefined"?Number(a):void 0)}function YO(i,a){i.b=a.b,i.a=a.a,i.c=a.c}function QO(i,a){return yA(i.f,a).then(function(l){return i.b=ic(l.access_token),i.a=l.refresh_token,M_(i,l.expires_in),{accessToken:i.b.toString(),refreshToken:i.a}}).o(function(l){throw l.code=="auth/user-token-expired"&&(i.a=null),l})}Kd.prototype.getToken=function(i){return i=!!i,this.b&&!this.a?ft(new N("user-token-expired")):i||!this.b||Date.now()>this.c-3e4?this.a?QO(this,{grant_type:"refresh_token",refresh_token:this.a}):me(null):me({accessToken:this.b.toString(),refreshToken:this.a})};function Rc(i,a){this.a=i||null,this.b=a||null,un(this,{lastSignInTime:ta(a||null),creationTime:ta(i||null)})}function XO(i){return new Rc(i.a,i.b)}Rc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function JO(i,a,l,h,m,w){un(this,{uid:i,displayName:h||null,photoURL:m||null,email:l||null,phoneNumber:w||null,providerId:a})}function Rn(i,a,l){this.N=[],this.l=i.apiKey,this.m=i.appName,this.s=i.authDomain||null;var h=pe.SDK_VERSION?Ao(pe.SDK_VERSION):null;this.a=new nr(this.l,tt(ke),h),(this.u=i.emulatorConfig||null)&&bc(this.a,this.u),this.h=new Kd(this.a),ep(this,a[rr]),P_(this.h,a),ce(this,"refreshToken",this.h.a),j_(this,l||{}),an.call(this),this.P=!1,this.s&&Pi()&&(this.b=$d(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=ZO(this),this.ba=R(this.ib,this);var m=this;this.za=null,this.Pa=function(w){m.xa(w.h)},this.qa=null,this.Ba=function(w){zd(m,w.c)},this.$=null,this.aa=[],this.Oa=function(w){ba(m,w.f)},this.ja=null,this.S=new Wd(this,l),ce(this,"multiFactor",this.S)}Y(Rn,an),Rn.prototype.xa=function(i){this.za=i,O0(this.a,i)};function zd(i,a){i.u=a,bc(i.a,a),i.b&&(a=i.b,i.b=$d(i.s,i.l,i.m,i.u),i.P&&(Pd(a,i),Cc(i.b,i)))}Rn.prototype.la=function(){return this.za};function Yd(i,a){i.qa&&On(i.qa,"languageCodeChanged",i.Pa),(i.qa=a)&&Wn(a,"languageCodeChanged",i.Pa)}function Qd(i,a){i.$&&On(i.$,"emulatorConfigChanged",i.Ba),(i.$=a)&&Wn(a,"emulatorConfigChanged",i.Ba)}function ba(i,a){i.aa=a,N0(i.a,pe.SDK_VERSION?Ao(pe.SDK_VERSION,i.aa):null)}Rn.prototype.Ga=function(){return xi(this.aa)};function Xd(i,a){i.ja&&On(i.ja,"frameworkChanged",i.Oa),(i.ja=a)&&Wn(a,"frameworkChanged",i.Oa)}Rn.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function Jd(i){try{return pe.app(i.m).auth()}catch(a){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+i.m+"'!")}}function ZO(i){return new Gd(function(){return i.I(!0)},function(a){return!!(a&&a.code=="auth/network-request-failed")},function(){var a=i.h.c-Date.now()-3e5;return 0<a?a:0})}function L_(i){i.J||i.D.b||(i.D.start(),On(i,"tokenChanged",i.ba),Wn(i,"tokenChanged",i.ba))}function Zd(i){On(i,"tokenChanged",i.ba),i.D.stop()}function ep(i,a){i.Aa=a,ce(i,"_lat",a)}function eN(i,a){Jn(i.W,function(l){return l==a})}function Hi(i){for(var a=[],l=0;l<i.W.length;l++)a.push(i.W[l](i));return Jg(a).then(function(){return i})}function Ia(i){i.b&&!i.P&&(i.P=!0,Cc(i.b,i))}function j_(i,a){un(i,{uid:a.uid,displayName:a.displayName||null,photoURL:a.photoURL||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,isAnonymous:a.isAnonymous||!1,tenantId:a.tenantId||null,metadata:new Rc(a.createdAt,a.lastLoginAt),providerData:[]}),i.a.b=i.tenantId}ce(Rn.prototype,"providerId","firebase");function $_(){}function tp(i){return me().then(function(){if(i.J)throw new N("app-deleted")})}function np(i){return ju(i.providerData,function(a){return a.providerId})}function rp(i,a){a&&(F_(i,a.providerId),i.providerData.push(a))}function F_(i,a){Jn(i.providerData,function(l){return l.providerId==a})}function ei(i,a,l){(a!="uid"||l)&&i.hasOwnProperty(a)&&ce(i,a,l)}function Mc(i,a){i!=a&&(un(i,{uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,email:a.email,emailVerified:a.emailVerified,phoneNumber:a.phoneNumber,isAnonymous:a.isAnonymous,tenantId:a.tenantId,providerData:[]}),a.metadata?ce(i,"metadata",XO(a.metadata)):ce(i,"metadata",new Rc),mt(a.providerData,function(l){rp(i,l)}),YO(i.h,a.h),ce(i,"refreshToken",i.h.a),Nc(i.S,a.S.b))}t=Rn.prototype,t.reload=function(){var i=this;return Lt(this,tp(this).then(function(){return ip(i).then(function(){return Hi(i)}).then($_)}))};function ip(i){return i.I().then(function(a){var l=i.isAnonymous;return tN(i,a).then(function(){return l||ei(i,"isAnonymous",!1),a})})}t.oc=function(i){return this.I(i).then(function(a){return new WO(a)})},t.I=function(i){var a=this;return Lt(this,tp(this).then(function(){return a.h.getToken(i)}).then(function(l){if(!l)throw new N("internal-error");return l.accessToken!=a.Aa&&(ep(a,l.accessToken),a.dispatchEvent(new Uo("tokenChanged"))),ei(a,"refreshToken",l.refreshToken),l.accessToken}))};function mr(i,a){a[rr]&&i.Aa!=a[rr]&&(P_(i.h,a),i.dispatchEvent(new Uo("tokenChanged")),ep(i,a[rr]),ei(i,"refreshToken",i.h.a))}function tN(i,a){return Fe(i.a,LA,{idToken:a}).then(R(i.Kc,i))}t.Kc=function(i){if(i=i.users,!i||!i.length)throw new N("internal-error");i=i[0],j_(this,{uid:i.localId,displayName:i.displayName,photoURL:i.photoUrl,email:i.email,emailVerified:!!i.emailVerified,phoneNumber:i.phoneNumber,lastLoginAt:i.lastLoginAt,createdAt:i.createdAt,tenantId:i.tenantId});for(var a=nN(i),l=0;l<a.length;l++)rp(this,a[l]);ei(this,"isAnonymous",!(this.email&&i.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new Uo("userReloaded",{hd:i}))};function nN(i){return(i=i.providerUserInfo)&&i.length?ju(i,function(a){return new JO(a.rawId,a.providerId,a.email,a.displayName,a.photoUrl,a.phoneNumber)}):[]}t.Lc=function(i){return xh("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(i)},t.ub=function(i){var a=this,l=null;return Lt(this,i.c(this.a,this.uid).then(function(h){return mr(a,h),l=Ta(a,h,"reauthenticate"),a.i=null,a.reload()}).then(function(){return l}),!0)};function Pc(i,a){return ip(i).then(function(){if(kr(np(i),a))return Hi(i).then(function(){throw new N("provider-already-linked")})})}t.Cc=function(i){return xh("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(i)},t.rb=function(i){var a=this,l=null;return Lt(this,Pc(this,i.providerId).then(function(){return a.I()}).then(function(h){return i.b(a.a,h)}).then(function(h){return l=Ta(a,h,"link"),U_(a,h)}).then(function(){return l}))},t.Dc=function(i,a){var l=this;return Lt(this,Pc(this,"phone").then(function(){return Ud(Jd(l),i,a,R(l.rb,l))}))},t.Mc=function(i,a){var l=this;return Lt(this,me().then(function(){return Ud(Jd(l),i,a,R(l.ub,l))}),!0)};function Ta(i,a,l){var h=Hh(a);return a=n0(a),dr({user:i,credential:h,additionalUserInfo:a,operationType:l})}function U_(i,a){return mr(i,a),i.reload().then(function(){return i})}t.Cb=function(i){var a=this;return Lt(this,this.I().then(function(l){return a.a.Cb(l,i)}).then(function(l){return mr(a,l),a.reload()}))},t.ed=function(i){var a=this;return Lt(this,this.I().then(function(l){return i.b(a.a,l)}).then(function(l){return mr(a,l),a.reload()}))},t.Db=function(i){var a=this;return Lt(this,this.I().then(function(l){return a.a.Db(l,i)}).then(function(l){return mr(a,l),a.reload()}))},t.Eb=function(i){if(i.displayName===void 0&&i.photoURL===void 0)return tp(this);var a=this;return Lt(this,this.I().then(function(l){return a.a.Eb(l,{displayName:i.displayName,photoUrl:i.photoURL})}).then(function(l){return mr(a,l),ei(a,"displayName",l.displayName||null),ei(a,"photoURL",l.photoUrl||null),mt(a.providerData,function(h){h.providerId==="password"&&(ce(h,"displayName",a.displayName),ce(h,"photoURL",a.photoURL))}),Hi(a)}).then($_))},t.cd=function(i){var a=this;return Lt(this,ip(this).then(function(l){return kr(np(a),i)?EA(a.a,l,[i]).then(function(h){var m={};return mt(h.providerUserInfo||[],function(w){m[w.providerId]=!0}),mt(np(a),function(w){m[w]||F_(a,w)}),m[Cr.PROVIDER_ID]||ce(a,"phoneNumber",null),Hi(a)}):Hi(a).then(function(){throw new N("no-such-provider")})}))},t.delete=function(){var i=this;return Lt(this,this.I().then(function(a){return Fe(i.a,AA,{idToken:a})}).then(function(){i.dispatchEvent(new Uo("userDeleted"))})).then(function(){for(var a=0;a<i.N.length;a++)i.N[a].cancel("app-deleted");Yd(i,null),Qd(i,null),Xd(i,null),i.N=[],i.J=!0,Zd(i),ce(i,"refreshToken",null),i.b&&Pd(i.b,i)})},t.Gb=function(i,a){return!!(i=="linkViaPopup"&&(this.g||null)==a&&this.f||i=="reauthViaPopup"&&(this.g||null)==a&&this.f||i=="linkViaRedirect"&&(this.ga||null)==a||i=="reauthViaRedirect"&&(this.ga||null)==a)},t.na=function(i,a,l,h){i!="linkViaPopup"&&i!="reauthViaPopup"||h!=(this.g||null)||(l&&this.C?this.C(l):a&&!l&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(i,a){return i=="linkViaPopup"&&a==(this.g||null)?R(this.Lb,this):i=="reauthViaPopup"&&a==(this.g||null)?R(this.Mb,this):i=="linkViaRedirect"&&(this.ga||null)==a?R(this.Lb,this):i=="reauthViaRedirect"&&(this.ga||null)==a?R(this.Mb,this):null},t.Ec=function(i){var a=this;return q_(this,"linkViaPopup",i,function(){return Pc(a,i.providerId).then(function(){return Hi(a)})},!1)},t.Nc=function(i){return q_(this,"reauthViaPopup",i,function(){return me()},!0)};function q_(i,a,l,h,m){if(!Pi())return ft(new N("operation-not-supported-in-this-environment"));if(i.i&&!m)return ft(i.i);var w=Uh(l.providerId),I=Li(i.uid+":::"),k=null;(!Zs()||Th())&&i.s&&l.isOAuthProvider&&(k=va(i.s,i.l,i.m,a,l,null,I,pe.SDK_VERSION||null,null,null,i.tenantId,i.u));var G=Ay(k,w&&w.va,w&&w.ua);return h=h().then(function(){if(B_(i),!m)return i.I().then(function(){})}).then(function(){return b_(i.b,G,a,l,I,!!k,i.tenantId)}).then(function(){return new je(function(Z,De){i.na(a,null,new N("cancelled-popup-request"),i.g||null),i.f=Z,i.C=De,i.g=I,i.c=T_(i.b,i,a,G,I)})}).then(function(Z){return G&&Mi(G),Z?dr(Z):null}).o(function(Z){throw G&&Mi(G),Z}),Lt(i,h,m)}t.Fc=function(i){var a=this;return V_(this,"linkViaRedirect",i,function(){return Pc(a,i.providerId)},!1)},t.Oc=function(i){return V_(this,"reauthViaRedirect",i,function(){return me()},!0)};function V_(i,a,l,h,m){if(!Pi())return ft(new N("operation-not-supported-in-this-environment"));if(i.i&&!m)return ft(i.i);var w=null,I=Li(i.uid+":::");return h=h().then(function(){if(B_(i),!m)return i.I().then(function(){})}).then(function(){return i.ga=I,Hi(i)}).then(function(k){return i.ha&&(k=i.ha,k=k.b.set(op,i.w(),k.a)),k}).then(function(){return I_(i.b,a,l,I,i.tenantId)}).o(function(k){if(w=k,i.ha)return G_(i.ha);throw w}).then(function(){if(w)throw w}),Lt(i,h,m)}function B_(i){if(!i.b||!i.P)throw i.b&&!i.P?new N("internal-error"):new N("auth-domain-config-required")}t.Lb=function(i,a,l,h){var m=this;this.c&&(this.c.cancel(),this.c=null);var w=null;return l=this.I().then(function(I){return dd(m.a,{requestUri:i,postBody:h,sessionId:a,idToken:I})}).then(function(I){return w=Ta(m,I,"link"),U_(m,I)}).then(function(){return w}),Lt(this,l)},t.Mb=function(i,a,l,h){var m=this;this.c&&(this.c.cancel(),this.c=null);var w=null,I=me().then(function(){return Mo(pd(m.a,{requestUri:i,sessionId:a,postBody:h,tenantId:l}),m.uid)}).then(function(k){return w=Ta(m,k,"reauthenticate"),mr(m,k),m.i=null,m.reload()}).then(function(){return w});return Lt(this,I,!0)},t.vb=function(i){var a=this,l=null;return Lt(this,this.I().then(function(h){return l=h,typeof i=="undefined"||Di(i)?{}:nc(new tc(i))}).then(function(h){return a.a.vb(l,h)}).then(function(h){if(a.email!=h)return a.reload()}).then(function(){}))},t.Fb=function(i,a){var l=this,h=null;return Lt(this,this.I().then(function(m){return h=m,typeof a=="undefined"||Di(a)?{}:nc(new tc(a))}).then(function(m){return l.a.Fb(h,i,m)}).then(function(m){if(l.email!=m)return l.reload()}).then(function(){}))};function Lt(i,a,l){var h=rN(i,a,l);return i.N.push(h),h.oa(function(){$u(i.N,h)}),h.o(function(m){var w=null;throw m&&m.code==="auth/multi-factor-auth-required"&&(w=O_(m.w(),Jd(i),R(i.jc,i))),w||m})}t.jc=function(i){var a=null,l=this;return i=Mo(me(i),l.uid).then(function(h){return a=Ta(l,h,"reauthenticate"),mr(l,h),l.i=null,l.reload()}).then(function(){return a}),Lt(this,i,!0)};function rN(i,a,l){return i.i&&!l?(a.cancel(),ft(i.i)):a.o(function(h){throw!h||h.code!="auth/user-disabled"&&h.code!="auth/user-token-expired"||(i.i||i.dispatchEvent(new Uo("userInvalidated")),i.i=h),h})}t.toJSON=function(){return this.w()},t.w=function(){var i={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&wn(i,this.metadata.w()),mt(this.providerData,function(a){i.providerData.push(xC(a))}),wn(i,this.S.w()),i};function W_(i){if(!i.apiKey)return null;var a={apiKey:i.apiKey,authDomain:i.authDomain,appName:i.appName,emulatorConfig:i.emulatorConfig},l={};if(i.stsTokenManager&&i.stsTokenManager.accessToken){l[rr]=i.stsTokenManager.accessToken,l.refreshToken=i.stsTokenManager.refreshToken||null;var h=i.stsTokenManager.expirationTime;h&&(l.expiresIn=(h-Date.now())/1e3)}else return null;var m=new Rn(a,l,i);return i.providerData&&mt(i.providerData,function(w){w&&rp(m,dr(w))}),i.redirectEventId&&(m.ga=i.redirectEventId),m}function iN(i,a,l,h){var m=new Rn(i,a);return l&&(m.ha=l),h&&ba(m,h),m.reload().then(function(){return m})}function oN(i,a,l,h){var m=i.h,w={};return w[rr]=m.b&&m.b.toString(),w.refreshToken=m.a,a=new Rn(a||{apiKey:i.l,authDomain:i.s,appName:i.m},w),l&&(a.ha=l),h&&ba(a,h),Mc(a,i),a}function sN(i){this.a=i,this.b=wa()}var op={name:"redirectUser",F:"session"};function G_(i){return Fo(i.b,op,i.a)}function aN(i,a){return i.b.get(op,i.a).then(function(l){return l&&a&&(l.authDomain=a),W_(l||{})})}function sp(i){this.a=i,this.b=wa(),this.c=null,this.f=uN(this),this.b.addListener(vr("local"),this.a,R(this.g,this))}sp.prototype.g=function(){var i=this,a=vr("local");qo(this,function(){return me().then(function(){return i.c&&i.c.F!="local"?i.b.get(a,i.a):null}).then(function(l){if(l)return ap(i,"local").then(function(){i.c=a})})})};function ap(i,a){var l=[],h;for(h in jo)jo[h]!==a&&l.push(Fo(i.b,vr(jo[h]),i.a));return l.push(Fo(i.b,up,i.a)),XD(l)}function uN(i){var a=vr("local"),l=vr("session"),h=vr("none");return TO(i.b,a,i.a).then(function(){return i.b.get(l,i.a)}).then(function(m){return m?l:i.b.get(h,i.a).then(function(w){return w?h:i.b.get(a,i.a).then(function(I){return I?a:i.b.get(up,i.a).then(function(k){return k?vr(k):a})})})}).then(function(m){return i.c=m,ap(i,m.F)}).o(function(){i.c||(i.c=a)})}var up={name:"persistence",F:"session"};function vr(i){return{name:"authUser",F:i}}sp.prototype.yb=function(i){var a=null,l=this;return IO(i),qo(this,function(){return i!=l.c.F?l.b.get(l.c,l.a).then(function(h){return a=h,ap(l,i)}).then(function(){if(l.c=vr(i),a)return l.b.set(l.c,a,l.a)}):me()})};function cN(i){return qo(i,function(){return i.b.set(up,i.c.F,i.a)})}function H_(i,a){return qo(i,function(){return i.b.set(i.c,a.w(),i.a)})}function K_(i){return qo(i,function(){return Fo(i.b,i.c,i.a)})}function z_(i,a,l){return qo(i,function(){return i.b.get(i.c,i.a).then(function(h){return h&&a&&(h.authDomain=a),h&&l&&(h.emulatorConfig=l),W_(h||{})})})}function qo(i,a){return i.f=i.f.then(a,a),i.f}function ir(i){if(this.l=!1,ce(this,"settings",new D_),ce(this,"app",i),nt(this).options&&nt(this).options.apiKey)i=pe.SDK_VERSION?Ao(pe.SDK_VERSION):null,this.a=new nr(nt(this).options&&nt(this).options.apiKey,tt(ke),i);else throw new N("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=pe.INTERNAL.createSubscribe(R(this.zc,this)),this.W=void 0,this.ib=pe.INTERNAL.createSubscribe(R(this.Ac,this)),Vo(this,null),this.i=new sp(nt(this).options.apiKey+":"+nt(this).name),this.D=new sN(nt(this).options.apiKey+":"+nt(this).name),this.$=yt(this,mN(this)),this.h=yt(this,vN(this)),this.ba=!1,this.ja=R(this.Zc,this),this.Ba=R(this.da,this),this.qa=R(this.mc,this),this.za=R(this.wc,this),this.Aa=R(this.xc,this),this.b=null,hN(this),this.INTERNAL={},this.INTERNAL.delete=R(this.delete,this),this.INTERNAL.logFramework=R(this.Gc,this),this.u=0,an.call(this),fN(this),this.J=[],this.R=null}Y(ir,an);function Y_(i){In.call(this,"languageCodeChanged"),this.h=i}Y(Y_,In);function Q_(i){In.call(this,"emulatorConfigChanged"),this.c=i}Y(Q_,In);function X_(i){In.call(this,"frameworkChanged"),this.f=i}Y(X_,In),t=ir.prototype,t.yb=function(i){return i=this.i.yb(i),yt(this,i)},t.xa=function(i){this.aa===i||this.l||(this.aa=i,O0(this.a,this.aa),this.dispatchEvent(new Y_(this.la())))},t.la=function(){return this.aa},t.fd=function(){var i=f.navigator;this.xa(i&&(i.languages&&i.languages[0]||i.language||i.userLanguage)||null)},t.gd=function(i,a){if(!this.R){if(!/^https?:\/\//.test(i))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");a=a?!!a.disableWarnings:!1,lN(a),this.R={url:i,ec:a},this.settings.jb=!0,bc(this.a,this.R),this.dispatchEvent(new Q_(this.R))}};function lN(i){typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!i&&Ju().then(function(){var a=f.document.createElement("div");a.innerText="Running in emulator mode. Do not use with production credentials.",a.style.position="fixed",a.style.width="100%",a.style.backgroundColor="#ffffff",a.style.border=".1em solid #000000",a.style.color="#b50000",a.style.bottom="0px",a.style.left="0px",a.style.margin="0px",a.style.zIndex=1e4,a.style.textAlign="center",a.classList.add("firebase-emulator-warning"),f.document.body.appendChild(a)})}t.Gc=function(i){this.J.push(i),N0(this.a,pe.SDK_VERSION?Ao(pe.SDK_VERSION,this.J):null),this.dispatchEvent(new X_(this.J))},t.Ga=function(){return xi(this.J)},t.zb=function(i){this.S===i||this.l||(this.S=i,this.a.b=this.S)},t.T=function(){return this.S};function fN(i){Object.defineProperty(i,"lc",{get:function(){return this.la()},set:function(a){this.xa(a)},enumerable:!1}),i.aa=null,Object.defineProperty(i,"ti",{get:function(){return this.T()},set:function(a){this.zb(a)},enumerable:!1}),i.S=null,Object.defineProperty(i,"emulatorConfig",{get:function(){if(this.R){var a=Tn(this.R.url);a=dr({protocol:a.c,host:a.a,port:a.g,options:dr({disableWarnings:this.R.ec})})}else a=null;return a},enumerable:!1})}t.toJSON=function(){return{apiKey:nt(this).options.apiKey,authDomain:nt(this).options.authDomain,appName:nt(this).name,currentUser:Ne(this)&&Ne(this).w()}};function cp(i){return i.Oa||ft(new N("auth-domain-config-required"))}function hN(i){var a=nt(i).options.authDomain,l=nt(i).options.apiKey;a&&Pi()&&(i.Oa=i.$.then(function(){if(!i.l){if(i.b=$d(a,l,nt(i).name,i.R),Cc(i.b,i),Ne(i)&&Ia(Ne(i)),i.m){Ia(i.m);var h=i.m;h.xa(i.la()),Yd(h,i),h=i.m,ba(h,i.J),Xd(h,i),h=i.m,zd(h,i.R),Qd(h,i),i.m=null}return i.b}}))}t.Gb=function(i,a){switch(i){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==a&&!!this.f;default:return!1}},t.na=function(i,a,l,h){i=="signInViaPopup"&&this.g==h&&(l&&this.C?this.C(l):a&&!l&&this.f&&this.f(a),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(i,a){return i=="signInViaRedirect"||i=="signInViaPopup"&&this.g==a&&this.f?R(this.ic,this):null},t.ic=function(i,a,l,h){var m=this,w={requestUri:i,postBody:h,sessionId:a,tenantId:l};return this.c&&(this.c.cancel(),this.c=null),m.$.then(function(){return Ki(m,hd(m.a,w))})},t.Xc=function(i){if(!Pi())return ft(new N("operation-not-supported-in-this-environment"));var a=this,l=Uh(i.providerId),h=Li(),m=null;(!Zs()||Th())&&nt(this).options.authDomain&&i.isOAuthProvider&&(m=va(nt(this).options.authDomain,nt(this).options.apiKey,nt(this).name,"signInViaPopup",i,null,h,pe.SDK_VERSION||null,null,null,this.T(),this.R));var w=Ay(m,l&&l.va,l&&l.ua);return l=cp(this).then(function(I){return b_(I,w,"signInViaPopup",i,h,!!m,a.T())}).then(function(){return new je(function(I,k){a.na("signInViaPopup",null,new N("cancelled-popup-request"),a.g),a.f=I,a.C=k,a.g=h,a.c=T_(a.b,a,"signInViaPopup",w,h)})}).then(function(I){return w&&Mi(w),I?dr(I):null}).o(function(I){throw w&&Mi(w),I}),yt(this,l)},t.Yc=function(i){if(!Pi())return ft(new N("operation-not-supported-in-this-environment"));var a=this,l=cp(this).then(function(){return cN(a.i)}).then(function(){return I_(a.b,"signInViaRedirect",i,void 0,a.T())});return yt(this,l)};function J_(i){if(!Pi())return ft(new N("operation-not-supported-in-this-environment"));var a=cp(i).then(function(){return i.b.ra()}).then(function(l){return l?dr(l):null});return yt(i,a)}t.ra=function(){var i=this;return J_(this).then(function(a){return i.b&&Oc(i.b.b),a}).o(function(a){throw i.b&&Oc(i.b.b),a})},t.dd=function(i){if(!i)return ft(new N("null-user"));if(this.S!=i.tenantId)return ft(new N("tenant-id-mismatch"));var a=this,l={};l.apiKey=nt(this).options.apiKey,l.authDomain=nt(this).options.authDomain,l.appName=nt(this).name;var h=oN(i,l,a.D,a.Ga());return yt(this,this.h.then(function(){if(nt(a).options.apiKey!=i.l)return h.reload()}).then(function(){return Ne(a)&&i.uid==Ne(a).uid?(Mc(Ne(a),i),a.da(i)):(Vo(a,h),Ia(h),a.da(h))}).then(function(){Sa(a)}))};function dN(i,a){var l={};return l.apiKey=nt(i).options.apiKey,l.authDomain=nt(i).options.authDomain,l.appName=nt(i).name,i.R&&(l.emulatorConfig=i.R),i.$.then(function(){return iN(l,a,i.D,i.Ga())}).then(function(h){return Ne(i)&&h.uid==Ne(i).uid?(Mc(Ne(i),h),i.da(h)):(Vo(i,h),Ia(h),i.da(h))}).then(function(){Sa(i)})}function Vo(i,a){Ne(i)&&(eN(Ne(i),i.Ba),On(Ne(i),"tokenChanged",i.qa),On(Ne(i),"userDeleted",i.za),On(Ne(i),"userInvalidated",i.Aa),Zd(Ne(i))),a&&(a.W.push(i.Ba),Wn(a,"tokenChanged",i.qa),Wn(a,"userDeleted",i.za),Wn(a,"userInvalidated",i.Aa),0<i.u&&L_(a)),ce(i,"currentUser",a),a&&(a.xa(i.la()),Yd(a,i),ba(a,i.J),Xd(a,i),zd(a,i.R),Qd(a,i))}t.Bb=function(){var i=this,a=this.h.then(function(){return i.b&&Oc(i.b.b),Ne(i)?(Vo(i,null),K_(i.i).then(function(){Sa(i)})):me()});return yt(this,a)};function pN(i){var a=aN(i.D,nt(i).options.authDomain).then(function(l){return(i.m=l)&&(l.ha=i.D),G_(i.D)});return yt(i,a)}function mN(i){var a=nt(i).options.authDomain,l=pN(i).then(function(){return z_(i.i,a,i.R)}).then(function(h){return h?(h.ha=i.D,i.m&&(i.m.ga||null)==(h.ga||null)?h:h.reload().then(function(){return H_(i.i,h).then(function(){return h})}).o(function(m){return m.code=="auth/network-request-failed"?h:K_(i.i)})):null}).then(function(h){Vo(i,h||null)});return yt(i,l)}function vN(i){return i.$.then(function(){return J_(i)}).o(function(){}).then(function(){if(!i.l)return i.ja()}).o(function(){}).then(function(){if(!i.l){i.ba=!0;var a=i.i;a.b.addListener(vr("local"),a.a,i.ja)}})}t.Zc=function(){var i=this;return z_(this.i,nt(this).options.authDomain).then(function(a){if(!i.l){var l;if(l=Ne(i)&&a){l=Ne(i).uid;var h=a.uid;l=l==null||l===""||h===void 0||h===null||h===""?!1:l==h}if(l)return Mc(Ne(i),a),Ne(i).I();(Ne(i)||a)&&(Vo(i,a),a&&(Ia(a),a.ha=i.D),i.b&&Cc(i.b,i),Sa(i))}})},t.da=function(i){return H_(this.i,i)},t.mc=function(){Sa(this),this.da(Ne(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()};function Ki(i,a){var l=null,h=null;return yt(i,a.then(function(m){return l=Hh(m),h=n0(m),dN(i,m)},function(m){var w=null;throw m&&m.code==="auth/multi-factor-auth-required"&&(w=O_(m.w(),i,R(i.kc,i))),w||m}).then(function(){return dr({user:Ne(i),credential:l,additionalUserInfo:h,operationType:"signIn"})}))}t.kc=function(i){var a=this;return this.h.then(function(){return Ki(a,me(i))})},t.zc=function(i){var a=this;this.addAuthTokenListener(function(){i.next(Ne(a))})},t.Ac=function(i){var a=this;gN(this,function(){i.next(Ne(a))})},t.Ic=function(i,a,l){var h=this;return this.ba&&Promise.resolve().then(function(){typeof i=="function"?i(Ne(h)):typeof i.next=="function"&&i.next(Ne(h))}),this.Pa(i,a,l)},t.Hc=function(i,a,l){var h=this;return this.ba&&Promise.resolve().then(function(){h.W=h.getUid(),typeof i=="function"?i(Ne(h)):typeof i.next=="function"&&i.next(Ne(h))}),this.ib(i,a,l)},t.nc=function(i){var a=this,l=this.h.then(function(){return Ne(a)?Ne(a).I(i).then(function(h){return{accessToken:h}}):null});return yt(this,l)},t.Tc=function(i){var a=this;return this.h.then(function(){return Ki(a,Fe(a.a,XA,{token:i}))}).then(function(l){var h=l.user;return ei(h,"isAnonymous",!1),a.da(h),l})},t.Uc=function(i,a){var l=this;return this.h.then(function(){return Ki(l,Fe(l.a,q0,{email:i,password:a}))})},t.dc=function(i,a){var l=this;return this.h.then(function(){return Ki(l,Fe(l.a,DA,{email:i,password:a}))})},t.ab=function(i){var a=this;return this.h.then(function(){return Ki(a,i.ka(a.a))})},t.Sc=function(i){return xh("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(i)},t.Ab=function(){var i=this;return this.h.then(function(){var a=Ne(i);if(a&&a.isAnonymous){var l=dr({providerId:null,isNewUser:!1});return dr({user:a,credential:null,additionalUserInfo:l,operationType:"signIn"})}return Ki(i,i.a.Ab()).then(function(h){var m=h.user;return ei(m,"isAnonymous",!0),i.da(m),h})})};function nt(i){return i.app}function Ne(i){return i.currentUser}t.getUid=function(){return Ne(this)&&Ne(this).uid||null};function Lc(i){return Ne(i)&&Ne(i)._lat||null}function Sa(i){if(i.ba){for(var a=0;a<i.s.length;a++)i.s[a]&&i.s[a](Lc(i));if(i.W!==i.getUid()&&i.N.length)for(i.W=i.getUid(),a=0;a<i.N.length;a++)i.N[a]&&i.N[a](Lc(i))}}t.cc=function(i){this.addAuthTokenListener(i),this.u++,0<this.u&&Ne(this)&&L_(Ne(this))},t.Pc=function(i){var a=this;mt(this.s,function(l){l==i&&a.u--}),0>this.u&&(this.u=0),this.u==0&&Ne(this)&&Zd(Ne(this)),this.removeAuthTokenListener(i)},t.addAuthTokenListener=function(i){var a=this;this.s.push(i),yt(this,this.h.then(function(){a.l||kr(a.s,i)&&i(Lc(a))}))},t.removeAuthTokenListener=function(i){Jn(this.s,function(a){return a==i})};function gN(i,a){i.N.push(a),yt(i,i.h.then(function(){!i.l&&kr(i.N,a)&&i.W!==i.getUid()&&(i.W=i.getUid(),a(Lc(i)))}))}t.delete=function(){this.l=!0;for(var i=0;i<this.P.length;i++)this.P[i].cancel("app-deleted");return this.P=[],this.i&&(i=this.i,i.b.removeListener(vr("local"),i.a,this.ja)),this.b&&(Pd(this.b,this),Oc(this.b.b)),Promise.resolve()};function yt(i,a){return i.P.push(a),a.oa(function(){$u(i.P,a)}),a}t.hc=function(i){return yt(this,_A(this.a,i))},t.Bc=function(i){return!!Gh(i)},t.xb=function(i,a){var l=this;return yt(this,me().then(function(){var h=new tc(a);if(!h.c)throw new N("argument-error",$h+" must be true when sending sign in link to email");return nc(h)}).then(function(h){return l.a.xb(i,h)}).then(function(){}))},t.jd=function(i){return this.Sa(i).then(function(a){return a.data.email})},t.ob=function(i,a){return yt(this,this.a.ob(i,a).then(function(){}))},t.Sa=function(i){return yt(this,this.a.Sa(i).then(function(a){return new CC(a)}))},t.kb=function(i){return yt(this,this.a.kb(i).then(function(){}))},t.wb=function(i,a){var l=this;return yt(this,me().then(function(){return typeof a=="undefined"||Di(a)?{}:nc(new tc(a))}).then(function(h){return l.a.wb(i,h)}).then(function(){}))},t.Wc=function(i,a){return yt(this,Ud(this,i,a,R(this.ab,this)))},t.Vc=function(i,a){var l=this;return yt(this,me().then(function(){var h=a||Js(),m=p0(i,h);if(h=Gh(h),!h)throw new N("argument-error","Invalid email link!");if(h.tenantId!==l.T())throw new N("tenant-id-mismatch");return l.ab(m)}))};function Ea(){}Ea.prototype.render=function(){},Ea.prototype.reset=function(){},Ea.prototype.getResponse=function(){},Ea.prototype.execute=function(){};function Bo(){this.a={},this.b=1e12}var lp=null;Bo.prototype.render=function(i,a){return this.a[this.b.toString()]=new jc(i,a),this.b++},Bo.prototype.reset=function(i){var a=fp(this,i);i=Z_(i),a&&i&&(a.delete(),delete this.a[i])},Bo.prototype.getResponse=function(i){return(i=fp(this,i))?i.getResponse():null},Bo.prototype.execute=function(i){(i=fp(this,i))&&i.execute()};function fp(i,a){return(a=Z_(a))&&i.a[a]||null}function Z_(i){return(i=typeof i=="undefined"?1e12:i)?i.toString():null}function jc(i,a){this.g=!1,this.c=a,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Gs(i);var l=this;this.i=function(){l.execute()},this.h?this.execute():Wn(this.f,"click",this.i)}jc.prototype.getResponse=function(){return hp(this),this.b},jc.prototype.execute=function(){hp(this);var i=this;this.a||(this.a=setTimeout(function(){i.b=TC();var a=i.c.callback,l=i.c["expired-callback"];if(a)try{a(i.b)}catch(h){}i.a=setTimeout(function(){if(i.a=null,i.b=null,l)try{l()}catch(h){}i.h&&i.execute()},6e4)},500))},jc.prototype.delete=function(){hp(this),this.g=!0,clearTimeout(this.a),this.a=null,On(this.f,"click",this.i)};function hp(i){if(i.g)throw Error("reCAPTCHA mock was already deleted!")}function dp(){}ce(dp,"FACTOR_ID","phone");function pp(){}pp.prototype.g=function(){return lp||(lp=new Bo),me(lp)},pp.prototype.c=function(){};var mp=null;function vp(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yN=new lr(Fu,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_N=new Xr(3e4,6e4);vp.prototype.g=function(i){var a=this;return new je(function(l,h){var m=setTimeout(function(){h(new N("network-request-failed"))},_N.get());if(!f.grecaptcha||i!==a.f&&!a.b){f[a.a]=function(){if(f.grecaptcha){a.f=i;var I=f.grecaptcha.render;f.grecaptcha.render=function(k,G){return k=I(k,G),a.b++,k},clearTimeout(m),l(f.grecaptcha)}else clearTimeout(m),h(new N("internal-error"));delete f[a.a]};var w=Qf(yN,{onload:a.a,hl:i||""});me(od(w)).o(function(){clearTimeout(m),h(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(m),l(f.grecaptcha)})},vp.prototype.c=function(){this.b--};var gp=null;function yp(i,a,l,h,m,w,I){if(ce(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=a,this.g=null,I?(mp||(mp=new pp),I=mp):(gp||(gp=new vp),I=gp),this.m=I,this.a=l||{theme:"light",type:"image"},this.h=[],this.a[nw])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[wN]==="invisible",!f.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Gs(a)||!this.i&&Gs(a).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new nr(i,w||null,m||null),this.u=h||function(){return null};var k=this;this.l=[];var G=this.a[ew];this.a[ew]=function(De){if(rw(k,De),typeof G=="function")G(De);else if(typeof G=="string"){var Ze=ht(G,f);typeof Ze=="function"&&Ze(De)}};var Z=this.a[tw];this.a[tw]=function(){if(rw(k,null),typeof Z=="function")Z();else if(typeof Z=="string"){var De=ht(Z,f);typeof De=="function"&&De()}}}var ew="callback",tw="expired-callback",nw="sitekey",wN="size";function rw(i,a){for(var l=0;l<i.l.length;l++)try{i.l[l](a)}catch(h){}}function bN(i,a){Jn(i.l,function(l){return l==a})}function _p(i,a){return i.h.push(a),a.oa(function(){$u(i.h,a)}),a}t=yp.prototype,t.Ia=function(){var i=this;return this.f?this.f:this.f=_p(this,me().then(function(){if(Zu()&&!er())return Ju();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return i.m.g(i.u())}).then(function(a){return i.g=a,Fe(i.s,VA,{})}).then(function(a){i.a[nw]=a.recaptchaSiteKey}).o(function(a){throw i.f=null,a}))},t.render=function(){$c(this);var i=this;return _p(this,this.Ia().then(function(){if(i.c===null){var a=i.v;if(!i.i){var l=Gs(a);a=KD("DIV"),l.appendChild(a)}i.c=i.g.render(a,i.a)}return i.c}))},t.verify=function(){$c(this);var i=this;return _p(this,this.render().then(function(a){return new je(function(l){var h=i.g.getResponse(a);if(h)l(h);else{var m=function(w){w&&(bN(i,m),l(w))};i.l.push(m),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){$c(this),this.c!==null&&this.g.reset(this.c)};function $c(i){if(i.J)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){$c(this),this.J=!0,this.m.c();for(var i=0;i<this.h.length;i++)this.h[i].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){i=Gs(this.v);for(var a;a=i.firstChild;)i.removeChild(a)}};function wp(i,a,l){var h=!1;try{this.b=l||pe.app()}catch(I){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)l=this.b.options.apiKey;else throw new N("invalid-api-key");var m=this,w=null;try{w=this.b.auth().Ga()}catch(I){}try{h=this.b.auth().settings.appVerificationDisabledForTesting}catch(I){}w=pe.SDK_VERSION?Ao(pe.SDK_VERSION,w):null,yp.call(this,l,i,a,function(){try{var I=m.b.auth().la()}catch(k){I=null}return I},w,tt(ke),h)}Y(wp,yp);function iw(i,a,l,h){e:{l=Array.prototype.slice.call(l);for(var m=0,w=!1,I=0;I<a.length;I++)if(a[I].optional)w=!0;else{if(w)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");m++}if(w=a.length,l.length<m||w<l.length)h="Expected "+(m==w?m==1?"1 argument":m+" arguments":m+"-"+w+" arguments")+" but got "+l.length+".";else{for(m=0;m<l.length;m++)if(w=a[m].optional&&l[m]===void 0,!a[m].M(l[m])&&!w){if(a=a[m],0>m||m>=ow.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");l=ow[m],h=(h?"":l+" argument ")+(a.name?'"'+a.name+'" ':"")+"must be "+a.K+".";break e}h=null}}if(h)throw new N("argument-error",i+" failed: "+h)}var ow="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function ue(i,a){return{name:i||"",K:"a valid string",optional:!!a,M:function(l){return typeof l=="string"}}}function bp(i,a){return{name:i||"",K:"a boolean",optional:!!a,M:function(l){return typeof l=="boolean"}}}function kt(i,a){return{name:i||"",K:"a valid object",optional:!!a,M:S}}function Wo(i,a){return{name:i||"",K:"a function",optional:!!a,M:function(l){return typeof l=="function"}}}function gr(i,a){return{name:i||"",K:"null",optional:!!a,M:function(l){return l===null}}}function IN(){return{name:"",K:"an HTML element",optional:!1,M:function(i){return!!(i&&i instanceof Element)}}}function TN(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(i){return!!(i&&i instanceof ir)}}}function SN(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(i){return!!(i&&i instanceof pe.app.App)}}}function ti(i){return{name:i?i+"Credential":"credential",K:i?"a valid "+i+" credential":"a valid credential",optional:!1,M:function(a){if(!a)return!1;var l=!i||a.providerId===i;return!(!a.ka||!l)}}}function sw(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(i){return i?!!i.tb:!1}}}function Go(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(i){return!!(i&&i.providerId&&i.hasOwnProperty&&i.hasOwnProperty("isOAuthProvider"))}}}function Ip(i,a){return S(i)&&typeof i.type=="string"&&i.type===a&&typeof i.Ha=="function"}function aw(i){return S(i)&&typeof i.uid=="string"}function Fc(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(i){return!(!i||typeof i.type!="string"||typeof i.verify!="function")}}}function Tt(i,a,l,h){return{name:l||"",K:i.K+" or "+a.K,optional:!!h,M:function(m){return i.M(m)||a.M(m)}}}function vt(i,a){for(var l in a){var h=a[l].name;i[h]=cw(h,i[l],a[l].j)}}function uw(i,a){for(var l in a){var h=a[l].name;h!==l&&Object.defineProperty(i,h,{get:K(function(m){return this[m]},l),set:K(function(m,w,I,k){iw(m,[I],[k],!0),this[w]=k},h,l,a[l].lb),enumerable:!0})}}function St(i,a,l,h){i[a]=cw(a,l,h)}function cw(i,a,l){function h(){var I=Array.prototype.slice.call(arguments);return iw(m,l,I),a.apply(this,I)}if(!l)return a;var m=EN(i),w;for(w in a)h[w]=a[w];for(w in a.prototype)h.prototype[w]=a.prototype[w];return h}function EN(i){return i=i.split("."),i[i.length-1]}vt(ir.prototype,{kb:{name:"applyActionCode",j:[ue("code")]},Sa:{name:"checkActionCode",j:[ue("code")]},ob:{name:"confirmPasswordReset",j:[ue("code"),ue("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[ue("email"),ue("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[ue("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[ue("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Tt(kt(),Wo(),"nextOrObserver"),Wo("opt_error",!0),Wo("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Tt(kt(),Wo(),"nextOrObserver"),Wo("opt_error",!0),Wo("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[ue("email"),Tt(kt("opt_actionCodeSettings",!0),gr(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[ue("email"),kt("actionCodeSettings")]},yb:{name:"setPersistence",j:[ue("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ti()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ti()]},Tc:{name:"signInWithCustomToken",j:[ue("token")]},Uc:{name:"signInWithEmailAndPassword",j:[ue("email"),ue("password")]},Vc:{name:"signInWithEmailLink",j:[ue("email"),ue("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[ue("phoneNumber"),Fc()]},Xc:{name:"signInWithPopup",j:[Go()]},Yc:{name:"signInWithRedirect",j:[Go()]},dd:{name:"updateCurrentUser",j:[Tt(function(i){return{name:"user",K:"an instance of Firebase User",optional:!!i,M:function(a){return!!(a&&a instanceof Rn)}}}(),gr(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ue(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[ue("url"),kt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[ue("code")]}}),uw(ir.prototype,{lc:{name:"languageCode",lb:Tt(ue(),gr(),"languageCode")},ti:{name:"tenantId",lb:Tt(ue(),gr(),"tenantId")}}),ir.Persistence=jo,ir.Persistence.LOCAL="local",ir.Persistence.SESSION="session",ir.Persistence.NONE="none",vt(Rn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[bp("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[bp("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ti()]},rb:{name:"linkWithCredential",j:[ti()]},Dc:{name:"linkWithPhoneNumber",j:[ue("phoneNumber"),Fc()]},Ec:{name:"linkWithPopup",j:[Go()]},Fc:{name:"linkWithRedirect",j:[Go()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ti()]},ub:{name:"reauthenticateWithCredential",j:[ti()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[ue("phoneNumber"),Fc()]},Nc:{name:"reauthenticateWithPopup",j:[Go()]},Oc:{name:"reauthenticateWithRedirect",j:[Go()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Tt(kt("opt_actionCodeSettings",!0),gr(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ue(null,!0)]},cd:{name:"unlink",j:[ue("provider")]},Cb:{name:"updateEmail",j:[ue("email")]},Db:{name:"updatePassword",j:[ue("password")]},ed:{name:"updatePhoneNumber",j:[ti("phone")]},Eb:{name:"updateProfile",j:[kt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[ue("email"),Tt(kt("opt_actionCodeSettings",!0),gr(null,!0),"opt_actionCodeSettings",!0)]}}),vt(Bo.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),vt(Ea.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),vt(je.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),uw(D_.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:bp("appVerificationDisabledForTesting")}}),vt(Fd.prototype,{confirm:{name:"confirm",j:[ue("verificationCode")]}}),St(Ro,"fromJSON",function(i){i=typeof i=="string"?JSON.parse(i):i;for(var a,l=[KC,zC,YC,HC],h=0;h<l.length;h++)if(a=l[h](i))return a;return null},[Tt(ue(),kt(),"json")]),St(Hn,"credential",function(i,a){return new Jr(i,a)},[ue("email"),ue("password")]),vt(Jr.prototype,{w:{name:"toJSON",j:[ue(null,!0)]}}),vt(Fi.prototype,{Ca:{name:"addScope",j:[ue("scope")]},Ka:{name:"setCustomParameters",j:[kt("customOAuthParameters")]}}),St(Fi,"credential",l0,[Tt(ue(),kt(),"token")]),St(Hn,"credentialWithLink",p0,[ue("email"),ue("emailLink")]),vt(Ui.prototype,{Ca:{name:"addScope",j:[ue("scope")]},Ka:{name:"setCustomParameters",j:[kt("customOAuthParameters")]}}),St(Ui,"credential",f0,[Tt(ue(),kt(),"token")]),vt(qi.prototype,{Ca:{name:"addScope",j:[ue("scope")]},Ka:{name:"setCustomParameters",j:[kt("customOAuthParameters")]}}),St(qi,"credential",h0,[Tt(ue(),Tt(kt(),gr()),"idToken"),Tt(ue(),gr(),"accessToken",!0)]),vt(Po.prototype,{Ka:{name:"setCustomParameters",j:[kt("customOAuthParameters")]}}),St(Po,"credential",d0,[Tt(ue(),kt(),"token"),ue("secret",!0)]),vt(Nn.prototype,{Ca:{name:"addScope",j:[ue("scope")]},credential:{name:"credential",j:[Tt(ue(),Tt(kt(),gr()),"optionsOrIdToken"),Tt(ue(),gr(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[kt("customOAuthParameters")]}}),vt(Dr.prototype,{w:{name:"toJSON",j:[ue(null,!0)]}}),vt(ji.prototype,{w:{name:"toJSON",j:[ue(null,!0)]}}),St(Cr,"credential",m0,[ue("verificationId"),ue("verificationCode")]),vt(Cr.prototype,{gb:{name:"verifyPhoneNumber",j:[Tt(ue(),function(i,a){return{name:i||"phoneInfoOptions",K:"valid phone info options",optional:!!a,M:function(l){return l?l.session&&l.phoneNumber?Ip(l.session,oa)&&typeof l.phoneNumber=="string":l.session&&l.multiFactorHint?Ip(l.session,ac)&&aw(l.multiFactorHint):l.session&&l.multiFactorUid?Ip(l.session,ac)&&typeof l.multiFactorUid=="string":l.phoneNumber?typeof l.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),Fc()]}}),vt(Zr.prototype,{w:{name:"toJSON",j:[ue(null,!0)]}}),vt(N.prototype,{toJSON:{name:"toJSON",j:[ue(null,!0)]}}),vt(aa.prototype,{toJSON:{name:"toJSON",j:[ue(null,!0)]}}),vt(Yh.prototype,{toJSON:{name:"toJSON",j:[ue(null,!0)]}}),vt(Vd.prototype,{toJSON:{name:"toJSON",j:[ue(null,!0)]}}),vt(qd.prototype,{Rc:{name:"resolveSignIn",j:[sw()]}}),vt(Wd.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[sw(),ue("displayName",!0)]},bd:{name:"unenroll",j:[Tt({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:aw},ue(),"multiFactorInfoIdentifier")]}}),vt(wp.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),St(jh,"parseLink",Hy,[ue("link")]),St(dp,"assertion",function(i){return new R_(i)},[ti("phone")]),function(){if(typeof pe!="undefined"&&pe.INTERNAL&&pe.INTERNAL.registerComponent){var i={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ec,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Lh,VERIFY_AND_CHANGE_EMAIL:ra,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ir,AuthCredential:Ro,Error:N};St(i,"EmailAuthProvider",Hn,[]),St(i,"FacebookAuthProvider",Fi,[]),St(i,"GithubAuthProvider",Ui,[]),St(i,"GoogleAuthProvider",qi,[]),St(i,"TwitterAuthProvider",Po,[]),St(i,"OAuthProvider",Nn,[ue("providerId")]),St(i,"SAMLAuthProvider",c0,[ue("providerId")]),St(i,"PhoneAuthProvider",Cr,[TN()]),St(i,"RecaptchaVerifier",wp,[Tt(ue(),IN(),"recaptchaContainer"),kt("recaptchaParameters",!0),SN()]),St(i,"ActionCodeURL",jh,[]),St(i,"PhoneMultiFactorGenerator",dp,[]),pe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(a){return a=a.getProvider("app").getImmediate(),new ir(a)},multipleInstances:!1,serviceProps:i,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(a){a.getProvider("auth-internal").initialize()}}),pe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(a){return a=a.getProvider("auth").getImmediate(),{getUid:R(a.getUid,a),getToken:R(a.nc,a),addAuthTokenListener:R(a.cc,a),removeAuthTokenListener:R(a.Pc,a)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),pe.registerVersion("@firebase/auth","0.16.8"),pe.INTERNAL.extendNamespace({User:Rn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{});var Yp=function(t,e){return Yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Yp(t,e)};function Y2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yp(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function xb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Q2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},se,Qp=Qp||{},Ae=Q2||self;function rl(){}function Xp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ra(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function X2(t){return Object.prototype.hasOwnProperty.call(t,Jp)&&t[Jp]||(t[Jp]=++J2)}var Jp="closure_uid_"+(1e9*Math.random()>>>0),J2=0;function Z2(t,e,n){return t.call.apply(t.bind,arguments)}function eR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),t.apply(e,o)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bt=Z2:Bt=eR,Bt.apply(null,arguments)}function il(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Wt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,o,s){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return e.prototype[o].apply(r,u)}}function oi(){this.s=this.s,this.o=this.o}var tR=0,nR={};oi.prototype.s=!1;oi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),tR!=0)){var t=X2(this);delete nR[t]}};oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Db=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Cb=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,o=typeof t=="string"?t.split(""):t,s=0;s<r;s++)s in o&&e.call(n,o[s],s,t)};function rR(t){e:{for(var e=zR,n=t.length,r=typeof t=="string"?t.split(""):t,o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Ab(t){return Array.prototype.concat.apply([],arguments)}function Zp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ol(t){return/^[\s\xa0]*$/.test(t)}var Ob=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ln(t,e){return t.indexOf(e)!=-1}function em(t,e){return t<e?-1:t>e?1:0}var fn;e:{if(tm=Ae.navigator,tm&&(nm=tm.userAgent,nm)){fn=nm;break e}fn=""}var tm,nm;function rm(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Nb(t){var e={};for(var n in t)e[n]=t[n];return e}var Rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mb(t,e){for(var n,r,o=1;o<arguments.length;o++){r=arguments[o];for(n in r)t[n]=r[n];for(var s=0;s<Rb.length;s++)n=Rb[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function im(t){return im[" "](t),t}im[" "]=rl;function iR(t){var e=aR;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var oR=ln(fn,"Opera"),ts=ln(fn,"Trident")||ln(fn,"MSIE"),Pb=ln(fn,"Edge"),om=Pb||ts,Lb=ln(fn,"Gecko")&&!(ln(fn.toLowerCase(),"webkit")&&!ln(fn,"Edge"))&&!(ln(fn,"Trident")||ln(fn,"MSIE"))&&!ln(fn,"Edge"),sR=ln(fn.toLowerCase(),"webkit")&&!ln(fn,"Edge");function jb(){var t=Ae.document;return t?t.documentMode:void 0}var sl;e:{if(al="",ul=function(){var t=fn;if(Lb)return/rv:([^\);]+)(\)|;)/.exec(t);if(Pb)return/Edge\/([\d\.]+)/.exec(t);if(ts)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sR)return/WebKit\/(\S+)/.exec(t);if(oR)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ul&&(al=ul?ul[1]:""),ts&&(cl=jb(),cl!=null&&cl>parseFloat(al))){sl=String(cl);break e}sl=al}var al,ul,cl,aR={};function uR(){return iR(function(){for(var t=0,e=Ob(String(sl)).split("."),n=Ob("9").split("."),r=Math.max(e.length,n.length),o=0;t==0&&o<r;o++){var s=e[o]||"",u=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],s[0].length==0&&u[0].length==0)break;t=em(s[1].length==0?0:parseInt(s[1],10),u[1].length==0?0:parseInt(u[1],10))||em(s[2].length==0,u[2].length==0)||em(s[2],u[2]),s=s[3],u=u[3]}while(t==0)}return 0<=t})}var sm;Ae.document&&ts?(am=jb(),sm=am||parseInt(sl,10)||void 0):sm=void 0;var am,cR=sm,lR=function(){if(!Ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ae.addEventListener("test",rl,e),Ae.removeEventListener("test",rl,e)}catch(n){}return t}();function Jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};function Ma(t,e){if(Jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Lb){e:{try{im(e.nodeName);var o=!0;break e}catch(s){}o=!1}o||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:fR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ma.Z.h.call(this)}}Wt(Ma,Jt);var fR={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Pa="closure_listenable_"+(1e6*Math.random()|0),hR=0;function dR(t,e,n,r,o){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=o,this.key=++hR,this.ca=this.fa=!1}function ll(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function fl(t){this.src=t,this.g={},this.h=0}fl.prototype.add=function(t,e,n,r,o){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var u=cm(t,e,r,o);return-1<u?(e=t[u],n||(e.fa=!1)):(e=new dR(e,this.src,s,!!r,o),e.fa=n,t.push(e)),e};function um(t,e){var n=e.type;if(n in t.g){var r=t.g[n],o=Db(r,e),s;(s=0<=o)&&Array.prototype.splice.call(r,o,1),s&&(ll(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function cm(t,e,n,r){for(var o=0;o<t.length;++o){var s=t[o];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return o}return-1}var lm="closure_lm_"+(1e6*Math.random()|0),fm={};function $b(t,e,n,r,o){if(r&&r.once)return Ub(t,e,n,r,o);if(Array.isArray(e)){for(var s=0;s<e.length;s++)$b(t,e[s],n,r,o);return null}return n=mm(n),t&&t[Pa]?t.N(e,n,Ra(r)?!!r.capture:!!r,o):Fb(t,e,n,!1,r,o)}function Fb(t,e,n,r,o,s){if(!e)throw Error("Invalid event type");var u=Ra(o)?!!o.capture:!!o,c=dm(t);if(c||(t[lm]=c=new fl(t)),n=c.add(e,n,r,u,s),n.proxy)return n;if(r=pR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)lR||(o=u),o===void 0&&(o=!1),t.addEventListener(e.toString(),r,o);else if(t.attachEvent)t.attachEvent(Vb(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function pR(){function t(n){return e.call(t.src,t.listener,n)}var e=mR;return t}function Ub(t,e,n,r,o){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ub(t,e[s],n,r,o);return null}return n=mm(n),t&&t[Pa]?t.O(e,n,Ra(r)?!!r.capture:!!r,o):Fb(t,e,n,!0,r,o)}function qb(t,e,n,r,o){if(Array.isArray(e))for(var s=0;s<e.length;s++)qb(t,e[s],n,r,o);else r=Ra(r)?!!r.capture:!!r,n=mm(n),t&&t[Pa]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=cm(s,n,r,o),-1<n&&(ll(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=dm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=cm(e,n,r,o)),(n=-1<t?e[t]:null)&&hm(n))}function hm(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Pa])um(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dm(e))?(um(n,t),n.h==0&&(n.src=null,e[lm]=null)):ll(t)}}}function Vb(t){return t in fm?fm[t]:fm[t]="on"+t}function mR(t,e){if(t.ca)t=!0;else{e=new Ma(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&hm(t),t=n.call(r,e)}return t}function dm(t){return t=t[lm],t instanceof fl?t:null}var pm="__closure_events_fn_"+(1e9*Math.random()>>>0);function mm(t){return typeof t=="function"?t:(t[pm]||(t[pm]=function(e){return t.handleEvent(e)}),t[pm])}function Ut(){oi.call(this),this.i=new fl(this),this.P=this,this.I=null}Wt(Ut,oi);Ut.prototype[Pa]=!0;Ut.prototype.removeEventListener=function(t,e,n,r){qb(this,t,e,n,r)};function Gt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Jt(e,t);else if(e instanceof Jt)e.target=e.target||t;else{var o=e;e=new Jt(r,t),Mb(e,o)}if(o=!0,n)for(var s=n.length-1;0<=s;s--){var u=e.g=n[s];o=hl(u,r,!0,e)&&o}if(u=e.g=t,o=hl(u,r,!0,e)&&o,o=hl(u,r,!1,e)&&o,n)for(s=0;s<n.length;s++)u=e.g=n[s],o=hl(u,r,!1,e)&&o}Ut.prototype.M=function(){if(Ut.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ll(n[r]);delete t.g[e],t.h--}}this.I=null};Ut.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function hl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var o=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==n){var c=u.listener,f=u.ia||u.src;u.fa&&um(t.i,u),o=c.call(f,r)!==!1&&o}}return o&&!r.defaultPrevented}var vm=Ae.JSON.stringify;function vR(){var t=Wb,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var gR=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,n){var r=Bb.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r},t}(),Bb=new(function(){function t(e,n){this.i=e,this.j=n,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},t}())(function(){return new yR},function(t){return t.reset()}),yR=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,n){this.h=e,this.g=n,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function _R(t){Ae.setTimeout(function(){throw t},0)}function gm(t,e){ym||wR(),_m||(ym(),_m=!0),Wb.add(t,e)}var ym;function wR(){var t=Ae.Promise.resolve(void 0);ym=function(){t.then(bR)}}var _m=!1,Wb=new gR;function bR(){for(var t;t=vR();){try{t.h.call(t.g)}catch(n){_R(n)}var e=Bb;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_m=!1}function dl(t,e){Ut.call(this),this.h=t||1,this.g=e||Ae,this.j=Bt(this.kb,this),this.l=Date.now()}Wt(dl,Ut);se=dl.prototype;se.da=!1;se.S=null;se.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gt(this,"tick"),this.da&&(wm(this),this.start()))}};se.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wm(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}se.M=function(){dl.Z.M.call(this),wm(this),delete this.g};function bm(t,e,n){if(typeof t=="function")n&&(t=Bt(t,n));else if(t&&typeof t.handleEvent=="function")t=Bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ae.setTimeout(t,e||0)}function Gb(t){t.g=bm(function(){t.g=null,t.i&&(t.i=!1,Gb(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}var IR=function(t){Y2(e,t);function e(n,r){var o=t.call(this)||this;return o.m=n,o.j=r,o.h=null,o.i=!1,o.g=null,o}return e.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:Gb(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(oi);function La(t){oi.call(this),this.h=t,this.g={}}Wt(La,oi);var Hb=[];function Kb(t,e,n,r){Array.isArray(n)||(n&&(Hb[0]=n.toString()),n=Hb);for(var o=0;o<n.length;o++){var s=$b(e,n[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function zb(t){rm(t.g,function(e,n){this.g.hasOwnProperty(n)&&hm(e)},t),t.g={}}La.prototype.M=function(){La.Z.M.call(this),zb(this)};La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function pl(){this.g=!0}pl.prototype.Aa=function(){this.g=!1};function TR(t,e,n,r,o,s){t.info(function(){if(t.g)if(s)for(var u="",c=s.split("&"),f=0;f<c.length;f++){var p=c[f].split("=");if(1<p.length){var d=p[0];p=p[1];var g=d.split("_");u=2<=g.length&&g[1]=="type"?u+(d+"="+p+"&"):u+(d+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+`
`+n+`
`+u})}function SR(t,e,n,r,o,s,u){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+`
`+n+`
`+s+" "+u})}function ns(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kR(t,n)+(r?" "+r:"")})}function ER(t,e){t.info(function(){return"TIMEOUT: "+e})}pl.prototype.info=function(){};function kR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var s=o[0];if(s!="noop"&&s!="stop"&&s!="close")for(var u=1;u<o.length;u++)o[u]=""}}}}return vm(n)}catch(c){return e}}var Xi={},Yb=null;function ml(){return Yb=Yb||new Ut}Xi.Ma="serverreachability";function Qb(t){Jt.call(this,Xi.Ma,t)}Wt(Qb,Jt);function ja(t){var e=ml();Gt(e,new Qb(e,t))}Xi.STAT_EVENT="statevent";function Xb(t,e){Jt.call(this,Xi.STAT_EVENT,t),this.stat=e}Wt(Xb,Jt);function hn(t){var e=ml();Gt(e,new Xb(e,t))}Xi.Na="timingevent";function Jb(t,e){Jt.call(this,Xi.Na,t),this.size=e}Wt(Jb,Jt);function $a(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ae.setTimeout(function(){t()},e)}var vl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Im(){}Im.prototype.h=null;function e1(t){return t.h||(t.h=t.i())}function t1(){}var Fa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tm(){Jt.call(this,"d")}Wt(Tm,Jt);function Sm(){Jt.call(this,"c")}Wt(Sm,Jt);var Em;function gl(){}Wt(gl,Im);gl.prototype.g=function(){return new XMLHttpRequest};gl.prototype.i=function(){return{}};Em=new gl;function Ua(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new La(this),this.P=xR,t=om?125:void 0,this.W=new dl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new n1}function n1(){this.i=null,this.g="",this.h=!1}var xR=45e3,km={},yl={};se=Ua.prototype;se.setTimeout=function(t){this.P=t};function xm(t,e,n){t.K=1,t.v=Tl(Mr(e)),t.s=n,t.U=!0,r1(t,null)}function r1(t,e){t.F=Date.now(),qa(t),t.A=Mr(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),h1(n.h,"t",r),t.C=0,n=t.l.H,t.h=new n1,t.g=P1(t.l,n?e:null,!t.s),0<t.O&&(t.L=new IR(Bt(t.Ia,t,t.g),t.O)),Kb(t.V,t.g,"readystatechange",t.gb),e=t.H?Nb(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ja(1),TR(t.j,t.u,t.A,t.m,t.X,t.s)}se.gb=function(t){t=t.target;var e=this.L;e&&Pr(t)==3?e.l():this.Ia(t)};se.Ia=function(t){try{if(t==this.g)e:{var e=Pr(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(e!=3||om||this.g&&(this.h.h||this.g.ga()||S1(this.g)))){this.I||e!=4||n==7||(n==8||0>=r?ja(3):ja(2)),_l(this);var o=this.g.ba();this.N=o;t:if(i1(this)){var s=S1(this.g);t="";var u=s.length,c=Pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Ji(this),Va(this);var f="";break t}this.h.i=new Ae.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:c&&n==u-1});s.splice(0,u),this.h.g+=t,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=o==200,SR(this.j,this.u,this.A,this.m,this.X,e,o),this.i){if(this.$&&!this.J){t:{if(this.g){var p,d=this.g;if((p=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ol(p)){var g=p;break t}}g=null}if(o=g)ns(this.j,this.m,o,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dm(this,o);else{this.i=!1,this.o=3,hn(12),Ji(this),Va(this);break e}}this.U?(o1(this,e,f),om&&this.i&&e==3&&(Kb(this.V,this.W,"tick",this.fb),this.W.start())):(ns(this.j,this.m,f,null),Dm(this,f)),e==4&&Ji(this),this.i&&!this.I&&(e==4?O1(this.l,this):(this.i=!1,qa(this)))}else o==400&&0<f.indexOf("Unknown SID")?(this.o=3,hn(12)):(this.o=0,hn(13)),Ji(this),Va(this)}}}catch(v){}finally{}};function i1(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function o1(t,e,n){for(var r=!0,o;!t.I&&t.C<n.length;)if(o=DR(t,n),o==yl){e==4&&(t.o=4,hn(14),r=!1),ns(t.j,t.m,null,"[Incomplete Response]");break}else if(o==km){t.o=4,hn(15),ns(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ns(t.j,t.m,o,null),Dm(t,o);i1(t)&&o!=yl&&o!=km&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,hn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fm(e),e.L=!0,hn(11))):(ns(t.j,t.m,n,"[Invalid Chunked Response]"),Ji(t),Va(t))}se.fb=function(){if(this.g){var t=Pr(this.g),e=this.g.ga();this.C<e.length&&(_l(this),o1(this,t,e),this.i&&t!=4&&qa(this))}};function DR(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?yl:(n=Number(e.substring(n,r)),isNaN(n)?km:(r+=1,r+n>e.length?yl:(e=e.substr(r,n),t.C=r+n,e)))}se.cancel=function(){this.I=!0,Ji(this)};function qa(t){t.Y=Date.now()+t.P,s1(t,t.P)}function s1(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=$a(Bt(t.eb,t),e)}function _l(t){t.B&&(Ae.clearTimeout(t.B),t.B=null)}se.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(ER(this.j,this.A),this.K!=2&&(ja(3),hn(17)),Ji(this),this.o=2,Va(this)):s1(this,this.Y-t)};function Va(t){t.l.G==0||t.I||O1(t.l,t)}function Ji(t){_l(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,wm(t.W),zb(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Dm(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Om(n.i,t))){if(n.I=t.N,!t.J&&Om(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch(S){r=null}if(Array.isArray(r)&&r.length==3){var o=r;if(o[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Cl(n),xl(n);else break e;$m(n),hn(18)}else n.ta=o[1],0<n.ta-n.U&&37500>o[2]&&n.N&&n.A==0&&!n.v&&(n.v=$a(Bt(n.ab,n),6e3));if(1>=m1(n.i)&&n.ka){try{n.ka()}catch(S){}n.ka=void 0}}else to(n,11)}else if((t.J||n.g==t)&&Cl(n),!ol(e))for(o=n.Ca.g.parse(e),e=0;e<o.length;e++){var s=o[e];if(n.U=s[0],s=s[1],n.G==2)if(s[0]=="c"){n.J=s[1],n.la=s[2];var u=s[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));var c=s[4];c!=null&&(n.za=c,n.h.info("SVER="+n.za));var f=s[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var p=t.g;if(p){var d=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var g=r.i;!g.g&&(ln(d,"spdy")||ln(d,"quic")||ln(d,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Nm(g,g.h),g.h=null))}if(r.D){var v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.sa=v,pt(r.F,r.D,v))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var y=t;if(r.oa=M1(r,r.H?r.la:null,r.W),y.J){v1(r.i,y);var b=y,T=r.K;T&&b.setTimeout(T),b.B&&(_l(b),qa(b)),r.g=y}else C1(r);0<n.l.length&&Dl(n)}else s[0]!="stop"&&s[0]!="close"||to(n,7);else n.G==3&&(s[0]=="stop"||s[0]=="close"?s[0]=="stop"?to(n,7):Lm(n):s[0]!="noop"&&n.j&&n.j.wa(s),n.A=0)}}ja(4)}catch(S){}}function CR(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Xp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Cm(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xp(t)||typeof t=="string")Cb(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Xp(t)||typeof t=="string"){n=[];for(var r=t.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,t)n[r++]=o;r=CR(t),o=r.length;for(var s=0;s<o;s++)e.call(void 0,r[s],n&&n[s],t)}}function rs(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof rs)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}se=rs.prototype;se.R=function(){Am(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};se.T=function(){return Am(this),this.g.concat()};function Am(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Zi(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var o={};for(n=e=0;e<t.g.length;)r=t.g[e],Zi(o,r)||(t.g[n++]=r,o[r]=1),e++;t.g.length=n}}se.get=function(t,e){return Zi(this.h,t)?this.h[t]:e};se.set=function(t,e){Zi(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};se.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var o=n[r],s=this.get(o);t.call(e,s,o,this)}};function Zi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var a1=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function AR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),o=null;if(0<=r){var s=t[n].substring(0,r);o=t[n].substring(r+1)}else s=t[n];e(s,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function eo(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof eo){this.g=e!==void 0?e:t.g,wl(this,t.j),this.s=t.s,bl(this,t.i),Il(this,t.m),this.l=t.l,e=t.h;var n=new Ga;n.i=e.i,e.g&&(n.g=new rs(e.g),n.h=e.h),u1(this,n),this.o=t.o}else t&&(n=String(t).match(a1))?(this.g=!!e,wl(this,n[1]||"",!0),this.s=Ba(n[2]||""),bl(this,n[3]||"",!0),Il(this,n[4]),this.l=Ba(n[5]||"",!0),u1(this,n[6]||"",!0),this.o=Ba(n[7]||"")):(this.g=!!e,this.h=new Ga(null,this.g))}eo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wa(e,c1,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wa(e,c1,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Wa(n,n.charAt(0)=="/"?PR:MR,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wa(n,jR)),t.join("")};function Mr(t){return new eo(t)}function wl(t,e,n){t.j=n?Ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function bl(t,e,n){t.i=n?Ba(e,!0):e}function Il(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function u1(t,e,n){e instanceof Ga?(t.h=e,$R(t.h,t.g)):(n||(e=Wa(e,LR)),t.h=new Ga(e,t.g))}function pt(t,e,n){t.h.set(e,n)}function Tl(t){return pt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function OR(t){return t instanceof eo?Mr(t):new eo(t,void 0)}function NR(t,e,n,r){var o=new eo(null,void 0);return t&&wl(o,t),e&&bl(o,e),n&&Il(o,n),r&&(o.l=r),o}function Ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,RR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function RR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var c1=/[#\/\?@]/g,MR=/[#\?:]/g,PR=/[#\?]/g,LR=/[#\?@]/g,jR=/#/g;function Ga(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function si(t){t.g||(t.g=new rs,t.h=0,t.i&&AR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}se=Ga.prototype;se.add=function(t,e){si(this),this.i=null,t=is(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function l1(t,e){si(t),e=is(t,e),Zi(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Zi(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Am(t)))}function f1(t,e){return si(t),e=is(t,e),Zi(t.g.h,e)}se.forEach=function(t,e){si(this),this.g.forEach(function(n,r){Cb(n,function(o){t.call(e,o,r,this)},this)},this)};se.T=function(){si(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var o=t[r],s=0;s<o.length;s++)n.push(e[r]);return n};se.R=function(t){si(this);var e=[];if(typeof t=="string")f1(this,t)&&(e=Ab(e,this.g.get(is(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Ab(e,t[n])}return e};se.set=function(t,e){return si(this),this.i=null,t=is(this,t),f1(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};se.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function h1(t,e,n){l1(t,e),0<n.length&&(t.i=null,t.g.set(is(t,e),Zp(n)),t.h+=n.length)}se.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],o=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=o;r[s]!==""&&(u+="="+encodeURIComponent(String(r[s]))),t.push(u)}}return this.i=t.join("&")};function is(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function $R(t,e){e&&!t.j&&(si(t),t.i=null,t.g.forEach(function(n,r){var o=r.toLowerCase();r!=o&&(l1(this,r),h1(this,o,n))},t)),t.j=e}var FR=function(){function t(e,n){this.h=e,this.g=n}return t}();function d1(t){this.l=t||UR,Ae.PerformanceNavigationTiming?(t=Ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ae.g&&Ae.g.Ea&&Ae.g.Ea()&&Ae.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var UR=10;function p1(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function m1(t){return t.h?1:t.g?t.g.size:0}function Om(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Nm(t,e){t.g?t.g.add(e):t.h=e}function v1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}d1.prototype.cancel=function(){var t,e;if(this.i=g1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=xb(this.g.values()),r=n.next();!r.done;r=n.next()){var o=r.value;o.cancel()}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}};function g1(t){var e,n;if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){var r=t.i;try{for(var o=xb(t.g.values()),s=o.next();!s.done;s=o.next()){var u=s.value;r=r.concat(u.D)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return Zp(t.i)}function Rm(){}Rm.prototype.stringify=function(t){return Ae.JSON.stringify(t,void 0)};Rm.prototype.parse=function(t){return Ae.JSON.parse(t,void 0)};function qR(){this.g=new Rm}function VR(t,e,n){var r=n||"";try{Cm(t,function(o,s){var u=o;Ra(o)&&(u=vm(o)),e.push(r+s+"="+encodeURIComponent(u))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function BR(t,e){var n=new pl;if(Ae.Image){var r=new Image;r.onload=il(Sl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=il(Sl,n,r,"TestLoadImage: error",!1,e),r.onabort=il(Sl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=il(Sl,n,r,"TestLoadImage: timeout",!1,e),Ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Sl(t,e,n,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(s){}}function Ha(t){this.l=t.$b||null,this.j=t.ib||!1}Wt(Ha,Im);Ha.prototype.g=function(){return new El(this.l,this.j)};Ha.prototype.i=function(t){return function(){return t}}({});function El(t,e){Ut.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Mm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wt(El,Ut);var Mm=0;se=El.prototype;se.open=function(t,e){if(this.readyState!=Mm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,za(this)};se.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ae).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=Mm};se.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ae.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;y1(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function y1(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}se.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ka(this):za(this),this.readyState==3&&y1(this)}};se.Ua=function(t){this.g&&(this.response=this.responseText=t,Ka(this))};se.Ta=function(t){this.g&&(this.response=t,Ka(this))};se.ha=function(){this.g&&Ka(this)};function Ka(t){t.readyState=4,t.l=null,t.j=null,t.A=null,za(t)}se.setRequestHeader=function(t,e){this.v.append(t,e)};se.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};se.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function za(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var WR=Ae.JSON.parse;function Ct(t){Ut.call(this),this.headers=new rs,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_1,this.K=this.L=!1}Wt(Ct,Ut);var _1="",GR=/^https?$/i,HR=["POST","PUT"];se=Ct.prototype;se.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Em.g(),this.C=this.u?e1(this.u):e1(Em),this.g.onreadystatechange=Bt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){w1(this,s);return}t=n||"";var o=new rs(this.headers);r&&Cm(r,function(s,u){o.set(u,s)}),r=rR(o.T()),n=Ae.FormData&&t instanceof Ae.FormData,!(0<=Db(HR,e))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{T1(this),0<this.B&&((this.K=KR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.pa,this)):this.A=bm(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){w1(this,s)}};function KR(t){return ts&&uR()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function zR(t){return t.toLowerCase()=="content-type"}se.pa=function(){typeof Qp!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gt(this,"timeout"),this.abort(8))};function w1(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,b1(t),kl(t)}function b1(t){t.D||(t.D=!0,Gt(t,"complete"),Gt(t,"error"))}se.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gt(this,"complete"),Gt(this,"abort"),kl(this))};se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kl(this,!0)),Ct.Z.M.call(this)};se.Fa=function(){this.s||(this.F||this.v||this.l?I1(this):this.cb())};se.cb=function(){I1(this)};function I1(t){if(t.h&&typeof Qp!="undefined"&&(!t.C[1]||Pr(t)!=4||t.ba()!=2)){if(t.v&&Pr(t)==4)bm(t.Fa,0,t);else if(Gt(t,"readystatechange"),Pr(t)==4){t.h=!1;try{var e=t.ba();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var o;if(o=e===0){var s=String(t.H).match(a1)[1]||null;if(!s&&Ae.self&&Ae.self.location){var u=Ae.self.location.protocol;s=u.substr(0,u.length-1)}o=!GR.test(s?s.toLowerCase():"")}r=o}if(r)Gt(t,"complete"),Gt(t,"success");else{t.m=6;try{var c=2<Pr(t)?t.g.statusText:""}catch(f){c=""}t.j=c+" ["+t.ba()+"]",b1(t)}}finally{kl(t)}}}}function kl(t,e){if(t.g){T1(t);var n=t.g,r=t.C[0]?rl:null;t.g=null,t.C=null,e||Gt(t,"ready");try{n.onreadystatechange=r}catch(o){}}}function T1(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ae.clearTimeout(t.A),t.A=null)}function Pr(t){return t.g?t.g.readyState:0}se.ba=function(){try{return 2<Pr(this)?this.g.status:-1}catch(t){return-1}};se.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}};se.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),WR(e)}};function S1(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case _1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}se.Da=function(){return this.m};se.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function YR(t){var e="";return rm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Pm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=YR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pt(t,e,n))}function Ya(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function E1(t){this.za=0,this.l=[],this.h=new pl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ya("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ya("baseRetryDelayMs",5e3,t),this.$a=Ya("retryDelaySeedMs",1e4,t),this.Ya=Ya("forwardChannelMaxRetries",2,t),this.ra=Ya("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new d1(t&&t.concurrentRequestLimit),this.Ca=new qR,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}se=E1.prototype;se.ma=8;se.G=1;function Lm(t){if(k1(t),t.G==3){var e=t.V++,n=Mr(t.F);pt(n,"SID",t.J),pt(n,"RID",e),pt(n,"TYPE","terminate"),Qa(t,n),e=new Ua(t,t.h,e,void 0),e.K=2,e.v=Tl(Mr(n)),n=!1,Ae.navigator&&Ae.navigator.sendBeacon&&(n=Ae.navigator.sendBeacon(e.v.toString(),"")),!n&&Ae.Image&&(new Image().src=e.v,n=!0),n||(e.g=P1(e.l,null),e.g.ea(e.v)),e.F=Date.now(),qa(e)}R1(t)}se.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}};function xl(t){t.g&&(Fm(t),t.g.cancel(),t.g=null)}function k1(t){xl(t),t.u&&(Ae.clearTimeout(t.u),t.u=null),Cl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ae.clearTimeout(t.m),t.m=null)}function jm(t,e){t.l.push(new FR(t.Za++,e)),t.G==3&&Dl(t)}function Dl(t){p1(t.i)||t.m||(t.m=!0,gm(t.Ha,t),t.C=0)}function QR(t,e){return m1(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=$a(Bt(t.Ha,t,e),N1(t,t.C)),t.C++,!0)}se.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Ua(this,this.h,t,void 0),n=this.s;if(this.P&&(n?(n=Nb(n),Mb(n,this.P)):n=this.P),this.o===null&&(e.H=n),this.ja)e:{for(var r=0,o=0;o<this.l.length;o++){t:{var s=this.l[o];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=o;break e}if(r===4096||o===this.l.length-1){r=o+1;break e}}r=1e3}else r=1e3;r=D1(this,e,r),o=Mr(this.F),pt(o,"RID",t),pt(o,"CVER",22),this.D&&pt(o,"X-HTTP-Session-Id",this.D),Qa(this,o),this.o&&n&&Pm(o,this.o,n),Nm(this.i,e),this.Ra&&pt(o,"TYPE","init"),this.ja?(pt(o,"$req",r),pt(o,"SID","null"),e.$=!0,xm(e,o,null)):xm(e,o,r),this.G=2}}else this.G==3&&(t?x1(this,t):this.l.length==0||p1(this.i)||x1(this))};function x1(t,e){var n;e?n=e.m:n=t.V++;var r=Mr(t.F);pt(r,"SID",t.J),pt(r,"RID",n),pt(r,"AID",t.U),Qa(t,r),t.o&&t.s&&Pm(r,t.o,t.s),n=new Ua(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=D1(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Nm(t.i,n),xm(n,r,e)}function Qa(t,e){t.j&&Cm({},function(n,r){pt(e,r,n)})}function D1(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Bt(t.j.Oa,t.j,t):null;e:for(var o=t.l,s=-1;;){var u=["count="+n];s==-1?0<n?(s=o[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);for(var c=!0,f=0;f<n;f++){var p=o[f].h,d=o[f].g;if(p-=s,0>p)s=Math.max(0,o[f].h-100),c=!1;else try{VR(d,u,"req"+p+"_")}catch(g){r&&r(d)}}if(c){r=u.join("&");break e}}return t=t.l.splice(0,n),e.D=t,r}function C1(t){t.g||t.u||(t.Y=1,gm(t.Ga,t),t.A=0)}function $m(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=$a(Bt(t.Ga,t),N1(t,t.A)),t.A++,!0)}se.Ga=function(){if(this.u=null,A1(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=$a(Bt(this.bb,this),t)}};se.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hn(10),xl(this),A1(this))};function Fm(t){t.B!=null&&(Ae.clearTimeout(t.B),t.B=null)}function A1(t){t.g=new Ua(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Mr(t.oa);pt(e,"RID","rpc"),pt(e,"SID",t.J),pt(e,"CI",t.N?"0":"1"),pt(e,"AID",t.U),Qa(t,e),pt(e,"TYPE","xmlhttp"),t.o&&t.s&&Pm(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Tl(Mr(e)),n.s=null,n.U=!0,r1(n,t)}se.ab=function(){this.v!=null&&(this.v=null,xl(this),$m(this),hn(19))};function Cl(t){t.v!=null&&(Ae.clearTimeout(t.v),t.v=null)}function O1(t,e){var n=null;if(t.g==e){Cl(t),Fm(t),t.g=null;var r=2}else if(Om(t.i,e))n=e.D,v1(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var o=t.C;r=ml(),Gt(r,new Jb(r,n,e,o)),Dl(t)}else C1(t);else if(o=e.o,o==3||o==0&&0<t.I||!(r==1&&QR(t,e)||r==2&&$m(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),o){case 1:to(t,5);break;case 4:to(t,10);break;case 3:to(t,6);break;default:to(t,2)}}}function N1(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function to(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Bt(t.jb,t);n||(n=new eo("//www.google.com/images/cleardot.gif"),Ae.location&&Ae.location.protocol=="http"||wl(n,"https"),Tl(n)),BR(n.toString(),r)}else hn(2);t.G=0,t.j&&t.j.va(e),R1(t),k1(t)}se.jb=function(t){t?(this.h.info("Successfully pinged google.com"),hn(2)):(this.h.info("Failed to ping google.com"),hn(1))};function R1(t){t.G=0,t.I=-1,t.j&&((g1(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Zp(t.l),t.l.length=0),t.j.ua())}function M1(t,e,n){var r=OR(n);if(r.i!="")e&&bl(r,e+"."+r.i),Il(r,r.m);else{var o=Ae.location;r=NR(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,n)}return t.aa&&rm(t.aa,function(s,u){pt(r,u,s)}),e=t.D,n=t.sa,e&&n&&pt(r,e,n),pt(r,"VER",t.ma),Qa(t,r),r}function P1(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Ct(new Ha({ib:!0})):new Ct(t.qa),e.L=t.H,e}function L1(){}se=L1.prototype;se.xa=function(){};se.wa=function(){};se.va=function(){};se.ua=function(){};se.Oa=function(){};function Al(){if(ts&&!(10<=Number(cR)))throw Error("Environmental error: no available transport.")}Al.prototype.g=function(t,e){return new Pn(t,e)};function Pn(t,e){Ut.call(this),this.g=new E1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!ol(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ol(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new os(this)}Wt(Pn,Ut);Pn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),gm(Bt(t.hb,t,e))),hn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=M1(t,null,t.W),Dl(t)};Pn.prototype.close=function(){Lm(this.g)};Pn.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,jm(this.g,e)}else this.v?(e={},e.__data__=vm(t),jm(this.g,e)):jm(this.g,t)};Pn.prototype.M=function(){this.g.j=null,delete this.j,Lm(this.g),delete this.g,Pn.Z.M.call(this)};function j1(t){Tm.call(this);var e=t.__sm__;if(e){e:{for(var n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Wt(j1,Tm);function $1(){Sm.call(this),this.status=1}Wt($1,Sm);function os(t){this.g=t}Wt(os,L1);os.prototype.xa=function(){Gt(this.g,"a")};os.prototype.wa=function(t){Gt(this.g,new j1(t))};os.prototype.va=function(t){Gt(this.g,new $1(t))};os.prototype.ua=function(){Gt(this.g,"b")};Al.prototype.createWebChannel=Al.prototype.g;Pn.prototype.send=Pn.prototype.u;Pn.prototype.open=Pn.prototype.m;Pn.prototype.close=Pn.prototype.close;vl.NO_ERROR=0;vl.TIMEOUT=8;vl.HTTP_ERROR=6;Zb.COMPLETE="complete";t1.EventType=Fa;Fa.OPEN="a";Fa.CLOSE="b";Fa.ERROR="c";Fa.MESSAGE="d";Ut.prototype.listen=Ut.prototype.N;Ct.prototype.listenOnce=Ct.prototype.O;Ct.prototype.getLastError=Ct.prototype.La;Ct.prototype.getLastErrorCode=Ct.prototype.Da;Ct.prototype.getStatus=Ct.prototype.ba;Ct.prototype.getResponseJson=Ct.prototype.Qa;Ct.prototype.getResponseText=Ct.prototype.ga;Ct.prototype.send=Ct.prototype.ea;var F1=function(){return new Al},U1=function(){return ml()},Ol=vl,q1=Zb,V1=Xi,Um={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},B1=Ha,Xa=t1,W1=Ct;var Ln=function(){function t(e,n){var r=this;this.previousValue=e,n&&(n.sequenceNumberHandler=function(o){return r.t(o)},this.i=function(o){return n.writeSequenceNumber(o)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();Ln.o=-1;var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=function(t){function e(n,r){var o=this;return(o=t.call(this,r)||this).code=n,o.message=r,o.name="FirebaseError",o.toString=function(){return o.name+": [code="+o.code+"]: "+o.message},o}return ge(e,t),e}(Error),sr=new el("@firebase/firestore");function qm(){return sr.logLevel}function re(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sr.logLevel<=He.DEBUG){var r=e.map(Vm);sr.debug.apply(sr,dt(["Firestore (8.7.0): "+t],r))}}function At(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sr.logLevel<=He.ERROR){var r=e.map(Vm);sr.error.apply(sr,dt(["Firestore (8.7.0): "+t],r))}}function Nl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(sr.logLevel<=He.WARN){var r=e.map(Vm);sr.warn.apply(sr,dt(["Firestore (8.7.0): "+t],r))}}function Vm(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}function fe(t){t===void 0&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw At(e),new Error(e)}function Ee(t,e){t||fe()}function oe(t,e){return t}function XR(t){var e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var G1=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";r.length<20;)for(var o=XR(40),s=0;s<o.length;++s)r.length<20&&o[s]<n&&(r+=e.charAt(o[s]%e.length));return r},t}();function qe(t,e){return t<e?-1:t>e?1:0}function ss(t,e,n){return t.length===e.length&&t.every(function(r,o){return n(r,e[o])})}function H1(t){return t+"\0"}var dn=function(){function t(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Re=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new dn(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function K1(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z1(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Y1=function(){function t(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return t.comparator(this,e)===0},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(r){n.push(r)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return this.length===0},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0},t.prototype.forEach=function(e){for(var n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,n){for(var r=Math.min(e.length,n.length),o=0;o<r;o++){var s=e.get(o),u=n.get(o);if(s<u)return-1;if(s>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0},t}(),ze=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.construct=function(n,r,o){return new e(n,r,o)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=[],s=0,u=n;s<u.length;s++){var c=u[s];if(c.indexOf("//")>=0)throw new ee(B.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");o.push.apply(o,c.split("/").filter(function(f){return f.length>0}))}return new e(o)},e.emptyPath=function(){return new e([])},e}(Y1),JR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ar=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.construct=function(n,r,o){return new e(n,r,o)},e.isValidIdentifier=function(n){return JR.test(n)},e.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(n){for(var r=[],o="",s=0,u=function(){if(o.length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(o),o=""},c=!1;s<n.length;){var f=n[s];if(f==="\\"){if(s+1===n.length)throw new ee(B.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var p=n[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ee(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);o+=p,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(o+=f,s++):(u(),s++)}if(u(),c)throw new ee(B.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new e(r)},e.emptyPath=function(){return new e([])},e}(Y1),as=function(){function t(e){this.fields=e,e.sort(ar.comparator)}return t.prototype.covers=function(e){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return ss(this.fields,e.fields,function(n,r){return n.isEqual(r)})},t}(),pn=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(n){for(var r="",o=0;o<n.length;++o)r+=String.fromCharCode(n[o]);return r}(e))},t.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},t.prototype.toUint8Array=function(){return function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return qe(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();pn.EMPTY_BYTE_STRING=new pn("");var ZR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(Ee(!!t),typeof t=="string"){var e=0,n=ZR.exec(t);if(Ee(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var o=new Date(t);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function us(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}function Bm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Q1(t){var e=t.mapValue.fields.__previous_value__;return Bm(e)?Q1(e):e}function Ja(t){var e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}function ro(t){return t==null}function Rl(t){return t===0&&1/t==-1/0}function X1(t){return typeof t=="number"&&Number.isInteger(t)&&!Rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var de=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(ze.fromString(e))},t.fromName=function(e){return new t(ze.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&ze.comparator(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,n){return ze.comparator(e.path,n.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new ze(e.slice()))},t}();function io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bm(t)?4:10:fe()}function yr(t,e){var n=io(t);if(n!==io(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;var s=Lr(r.timestampValue),u=Lr(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return us(r.bytesValue).isEqual(us(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Ot(r.geoPointValue.latitude)===Ot(o.geoPointValue.latitude)&&Ot(r.geoPointValue.longitude)===Ot(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Ot(r.integerValue)===Ot(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){var s=Ot(r.doubleValue),u=Ot(o.doubleValue);return s===u?Rl(s)===Rl(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:return function(r,o){var s=r.mapValue.fields||{},u=o.mapValue.fields||{};if(K1(s)!==K1(u))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!yr(s[c],u[c])))return!1;return!0}(t,e);default:return fe()}}function Za(t,e){return(t.values||[]).find(function(n){return yr(n,e)})!==void 0}function cs(t,e){var n=io(t),r=io(e);if(n!==r)return qe(n,r);switch(n){case 0:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(o,s){var u=Ot(o.integerValue||o.doubleValue),c=Ot(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return J1(t.timestampValue,e.timestampValue);case 4:return J1(Ja(t),Ja(e));case 5:return qe(t.stringValue,e.stringValue);case 6:return function(o,s){var u=us(o),c=us(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){for(var u=o.split("/"),c=s.split("/"),f=0;f<u.length&&f<c.length;f++){var p=qe(u[f],c[f]);if(p!==0)return p}return qe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){var u=qe(Ot(o.latitude),Ot(s.latitude));return u!==0?u:qe(Ot(o.longitude),Ot(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){for(var u=o.values||[],c=s.values||[],f=0;f<u.length&&f<c.length;++f){var p=cs(u[f],c[f]);if(p)return p}return qe(u.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){var u=o.fields||{},c=Object.keys(u),f=s.fields||{},p=Object.keys(f);c.sort(),p.sort();for(var d=0;d<c.length&&d<p.length;++d){var g=qe(c[d],p[d]);if(g!==0)return g;var v=cs(u[c[d]],f[p[d]]);if(v!==0)return v}return qe(c.length,p.length)}(t.mapValue,e.mapValue);default:throw fe()}}function J1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);var n=Lr(t),r=Lr(e),o=qe(n.seconds,r.seconds);return o!==0?o:qe(n.nanos,r.nanos)}function Wm(t){return Gm(t)}function Gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){var o=Lr(r);return"time("+o.seconds+","+o.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?us(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,de.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(r){for(var o="[",s=!0,u=0,c=r.values||[];u<c.length;u++)s?s=!1:o+=",",o+=Gm(c[u]);return o+"]"}(t.arrayValue):"mapValue"in t?function(r){for(var o="{",s=!0,u=0,c=Object.keys(r.fields||{}).sort();u<c.length;u++){var f=c[u];s?s=!1:o+=",",o+=f+":"+Gm(r.fields[f])}return o+"}"}(t.mapValue):fe();var e,n}function Ml(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Hm(t){return!!t&&"integerValue"in t}function Km(t){return!!t&&"arrayValue"in t}function Z1(t){return!!t&&"nullValue"in t}function eI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Lr(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return no(t.mapValue.fields,function(o,s){return e.mapValue.fields[o]=eu(s)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=eu(t.arrayValue.values[r]);return n}return Object.assign({},t)}var jn=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var n=this.value,r=0;r<e.length-1;++r)if(!Pl(n=(n.mapValue.fields||{})[e.get(r)]))return null;return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)},t.prototype.setAll=function(e){var n=this,r=ar.emptyPath(),o={},s=[];e.forEach(function(c,f){if(!r.isImmediateParentOf(f)){var p=n.getFieldsMap(r);n.applyChanges(p,o,s),o={},s=[],r=f.popLast()}c?o[f.lastSegment()]=eu(c):s.push(f.lastSegment())});var u=this.getFieldsMap(r);this.applyChanges(u,o,s)},t.prototype.delete=function(e){var n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return yr(this.value,e.value)},t.prototype.getFieldsMap=function(e){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<e.length;++r){var o=n.mapValue.fields[e.get(r)];Pl(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields},t.prototype.applyChanges=function(e,n,r){no(n,function(c,f){return e[c]=f});for(var o=0,s=r;o<s.length;o++){var u=s[o];delete e[u]}},t.prototype.clone=function(){return new t(eu(this.value))},t}();function tI(t){var e=[];return no(t.fields,function(n,r){var o=new ar([n]);if(Pl(r)){var s=tI(r.mapValue).fields;if(s.length===0)e.push(o);else for(var u=0,c=s;u<c.length;u++){var f=c[u];e.push(o.child(f))}}else e.push(o)}),new as(e)}var Ht=function(){function t(e,n,r,o,s){this.key=e,this.documentType=n,this.version=r,this.data=o,this.documentState=s}return t.newInvalidDocument=function(e){return new t(e,0,Re.min(),jn.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,jn.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,jn.empty(),2)},t.prototype.convertToFoundDocument=function(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return this.documentType!==0},t.prototype.isFoundDocument=function(){return this.documentType===1},t.prototype.isNoDocument=function(){return this.documentType===2},t.prototype.isUnknownDocument=function(){return this.documentType===3},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),eM=function(t,e,n,r,o,s,u){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),u===void 0&&(u=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=s,this.endAt=u,this.h=null};function nI(t,e,n,r,o,s,u){return e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s=null),u===void 0&&(u=null),new eM(t,e,n,r,o,s,u)}function tu(t){var e=oe(t);if(e.h===null){var n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(r){return function(o){return o.field.canonicalString()+o.op.toString()+Wm(o.value)}(r)}).join(","),n+="|ob:",n+=e.orderBy.map(function(r){return function(o){return o.field.canonicalString()+o.dir}(r)}).join(","),ro(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=$l(e.startAt)),e.endAt&&(n+="|ub:",n+=$l(e.endAt)),e.h=n}return e.h}function Ll(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!uM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(o=t.filters[r],s=e.filters[r],o.op!==s.op||!o.field.isEqual(s.field)||!yr(o.value,s.value))return!1;var o,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oI(t.startAt,e.startAt)&&oI(t.endAt,e.endAt)}function jl(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var $n=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).field=n,s.op=r,s.value=o,s}return ge(e,t),e.create=function(n,r,o){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,o):new tM(n,r,o):r==="array-contains"?new iM(n,o):r==="in"?new oM(n,o):r==="not-in"?new sM(n,o):r==="array-contains-any"?new aM(n,o):new e(n,r,o)},e.l=function(n,r,o){return r==="in"?new nM(n,o):new rM(n,o)},e.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(cs(r,this.value)):r!==null&&io(this.value)===io(r)&&this.m(cs(r,this.value))},e.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return fe()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),tM=function(t){function e(n,r,o){var s=this;return(s=t.call(this,n,r,o)||this).key=de.fromName(o.referenceValue),s}return ge(e,t),e.prototype.matches=function(n){var r=de.comparator(n.key,this.key);return this.m(r)},e}($n),nM=function(t){function e(n,r){var o=this;return(o=t.call(this,n,"in",r)||this).keys=rI("in",r),o}return ge(e,t),e.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},e}($n),rM=function(t){function e(n,r){var o=this;return(o=t.call(this,n,"not-in",r)||this).keys=rI("not-in",r),o}return ge(e,t),e.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},e}($n);function rI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return de.fromName(r.referenceValue)})}var iM=function(t){function e(n,r){return t.call(this,n,"array-contains",r)||this}return ge(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return Km(r)&&Za(r.arrayValue,this.value)},e}($n),oM=function(t){function e(n,r){return t.call(this,n,"in",r)||this}return ge(e,t),e.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&Za(this.value.arrayValue,r)},e}($n),sM=function(t){function e(n,r){return t.call(this,n,"not-in",r)||this}return ge(e,t),e.prototype.matches=function(n){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!Za(this.value.arrayValue,r)},e}($n),aM=function(t){function e(n,r){return t.call(this,n,"array-contains-any",r)||this}return ge(e,t),e.prototype.matches=function(n){var r=this,o=n.data.field(this.field);return!(!Km(o)||!o.arrayValue.values)&&o.arrayValue.values.some(function(s){return Za(r.value.arrayValue,s)})},e}($n),nu=function(t,e){this.position=t,this.before=e};function $l(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return Wm(e)}).join(",")}var ls=function(t,e){e===void 0&&(e="asc"),this.field=t,this.dir=e};function uM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function iI(t,e,n){for(var r=0,o=0;o<t.position.length;o++){var s=e[o],u=t.position[o];if(r=s.field.isKeyField()?de.comparator(de.fromName(u.referenceValue),n.key):cs(u,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return t.before?r<=0:r<0}function oI(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yr(t.position[n],e.position[n]))return!1;return!0}var jr=function(t,e,n,r,o,s,u,c){e===void 0&&(e=null),n===void 0&&(n=[]),r===void 0&&(r=[]),o===void 0&&(o=null),s===void 0&&(s="F"),u===void 0&&(u=null),c===void 0&&(c=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.p=null,this.T=null,this.startAt,this.endAt};function sI(t,e,n,r,o,s,u,c){return new jr(t,e,n,r,o,s,u,c)}function fs(t){return new jr(t)}function Fl(t){return!ro(t.limit)&&t.limitType==="F"}function Ul(t){return!ro(t.limit)&&t.limitType==="L"}function zm(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ym(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qm(t){return t.collectionGroup!==null}function hs(t){var e=oe(t);if(e.p===null){e.p=[];var n=Ym(e),r=zm(e);if(n!==null&&r===null)n.isKeyField()||e.p.push(new ls(n)),e.p.push(new ls(ar.keyField(),"asc"));else{for(var o=!1,s=0,u=e.explicitOrderBy;s<u.length;s++){var c=u[s];e.p.push(c),c.field.isKeyField()&&(o=!0)}if(!o){var f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ls(ar.keyField(),f))}}}return e.p}function Qn(t){var e=oe(t);if(!e.T)if(e.limitType==="F")e.T=nI(e.path,e.collectionGroup,hs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,o=hs(e);r<o.length;r++){var s=o[r],u=s.dir==="desc"?"asc":"desc";n.push(new ls(s.field,u))}var c=e.endAt?new nu(e.endAt.position,!e.endAt.before):null,f=e.startAt?new nu(e.startAt.position,!e.startAt.before):null;e.T=nI(e.path,e.collectionGroup,n,e.filters,e.limit,c,f)}return e.T}function aI(t,e,n){return new jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ru(t,e){return Ll(Qn(t),Qn(e))&&t.limitType===e.limitType}function uI(t){return tu(Qn(t))+"|lt:"+t.limitType}function Xm(t){return"Query(target="+function(e){var n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map(function(r){return(o=r).field.canonicalString()+" "+o.op+" "+Wm(o.value);var o}).join(", ")+"]"),ro(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map(function(r){return function(o){return o.field.canonicalString()+" ("+o.dir+")"}(r)}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+$l(e.startAt)),e.endAt&&(n+=", endAt: "+$l(e.endAt)),"Target("+n+")"}(Qn(t))+"; limitType="+t.limitType+")"}function iu(t,e){return e.isFoundDocument()&&function(n,r){var o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):de.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,r){for(var o=0,s=n.explicitOrderBy;o<s.length;o++){var u=s[o];if(!u.field.isKeyField()&&r.data.field(u.field)===null)return!1}return!0}(t,e)&&function(n,r){for(var o=0,s=n.filters;o<s.length;o++)if(!s[o].matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!iI(n.startAt,hs(n),r))&&(!n.endAt||!iI(n.endAt,hs(n),r))}(t,e)}function cI(t){return function(e,n){for(var r=!1,o=0,s=hs(t);o<s.length;o++){var u=s[o],c=cM(u,e,n);if(c!==0)return c;r=r||u.field.isKeyField()}return 0}}function cM(t,e,n){var r=t.field.isKeyField()?de.comparator(e.key,n.key):function(o,s,u){var c=s.data.field(o),f=u.data.field(o);return c!==null&&f!==null?cs(c,f):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}function lI(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rl(e)?"-0":e}}function fI(t){return{integerValue:""+t}}function hI(t,e){return X1(e)?fI(e):lI(t,e)}var ql=function(){this._=void 0};function lM(t,e,n){return t instanceof ds?function(r,o){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof oo?pI(t,e):t instanceof so?mI(t,e):function(r,o){var s=dI(r,o),u=vI(s)+vI(r.A);return Hm(s)&&Hm(r.A)?fI(u):lI(r.R,u)}(t,e)}function fM(t,e,n){return t instanceof oo?pI(t,e):t instanceof so?mI(t,e):n}function dI(t,e){return t instanceof ps?Hm(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}var ds=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e}(ql),oo=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return ge(e,t),e}(ql);function pI(t,e){for(var n=gI(e),r=function(u){n.some(function(c){return yr(c,u)})||n.push(u)},o=0,s=t.elements;o<s.length;o++)r(s[o]);return{arrayValue:{values:n}}}var so=function(t){function e(n){var r=this;return(r=t.call(this)||this).elements=n,r}return ge(e,t),e}(ql);function mI(t,e){for(var n=gI(e),r=function(u){n=n.filter(function(c){return!yr(c,u)})},o=0,s=t.elements;o<s.length;o++)r(s[o]);return{arrayValue:{values:n}}}var ps=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).R=n,o.A=r,o}return ge(e,t),e}(ql);function vI(t){return Ot(t.integerValue||t.doubleValue)}function gI(t){return Km(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ou=function(t,e){this.field=t,this.transform=e},hM=function(t,e){this.version=t,this.transformResults=e},Zt=function(){function t(e,n){this.updateTime=e,this.exists=n}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function Vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Bl=function(){};function dM(t,e,n){t instanceof su?function(r,o,s){var u=r.value.clone(),c=bI(r.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ai?function(r,o,s){if(Vl(r.precondition,o)){var u=bI(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(wI(r)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}else o.convertToUnknownDocument(s.version)}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Jm(t,e,n){t instanceof su?function(r,o,s){if(Vl(r.precondition,o)){var u=r.value.clone(),c=II(r.fieldTransforms,s,o);u.setAll(c),o.convertToFoundDocument(_I(o),u).setHasLocalMutations()}}(t,e,n):t instanceof ai?function(r,o,s){if(Vl(r.precondition,o)){var u=II(r.fieldTransforms,s,o),c=o.data;c.setAll(wI(r)),c.setAll(u),o.convertToFoundDocument(_I(o),c).setHasLocalMutations()}}(t,e,n):function(r,o){Vl(r.precondition,o)&&o.convertToNoDocument(Re.min())}(t,e)}function pM(t,e){for(var n=null,r=0,o=t.fieldTransforms;r<o.length;r++){var s=o[r],u=e.data.field(s.field),c=dI(s.transform,u||null);c!=null&&(n==null&&(n=jn.empty()),n.set(s.field,c))}return n||null}function yI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ss(n,r,function(o,s){return function(u,c){return u.field.isEqual(c.field)&&function(f,p){return f instanceof oo&&p instanceof oo||f instanceof so&&p instanceof so?ss(f.elements,p.elements,yr):f instanceof ps&&p instanceof ps?yr(f.A,p.A):f instanceof ds&&p instanceof ds}(u.transform,c.transform)}(o,s)})}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function _I(t){return t.isFoundDocument()?t.version:Re.min()}var su=function(t){function e(n,r,o,s){s===void 0&&(s=[]);var u=this;return(u=t.call(this)||this).key=n,u.value=r,u.precondition=o,u.fieldTransforms=s,u.type=0,u}return ge(e,t),e}(Bl),ai=function(t){function e(n,r,o,s,u){u===void 0&&(u=[]);var c=this;return(c=t.call(this)||this).key=n,c.data=r,c.fieldMask=o,c.precondition=s,c.fieldTransforms=u,c.type=1,c}return ge(e,t),e}(Bl);function wI(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function bI(t,e,n){var r=new Map;Ee(t.length===n.length);for(var o=0;o<n.length;o++){var s=t[o],u=s.transform,c=e.data.field(s.field);r.set(s.field,fM(u,c,n[o]))}return r}function II(t,e,n){for(var r=new Map,o=0,s=t;o<s.length;o++){var u=s[o],c=u.transform,f=n.data.field(u.field);r.set(u.field,lM(c,f,e))}return r}var Nt,Ve,au=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).key=n,o.precondition=r,o.type=2,o.fieldTransforms=[],o}return ge(e,t),e}(Bl),Zm=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).key=n,o.precondition=r,o.type=3,o.fieldTransforms=[],o}return ge(e,t),e}(Bl),mM=function(t){this.count=t};function TI(t){switch(t){case B.OK:return fe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return fe()}}function SI(t){if(t===void 0)return At("GRPC error has no .code"),B.UNKNOWN;switch(t){case Nt.OK:return B.OK;case Nt.CANCELLED:return B.CANCELLED;case Nt.UNKNOWN:return B.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return B.INTERNAL;case Nt.UNAVAILABLE:return B.UNAVAILABLE;case Nt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Nt.NOT_FOUND:return B.NOT_FOUND;case Nt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Nt.ABORTED:return B.ABORTED;case Nt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Nt.DATA_LOSS:return B.DATA_LOSS;default:return fe()}}(Ve=Nt||(Nt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";var en=function(){function t(e,n){this.comparator=e,this.root=n||ui.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ui.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))},t.prototype.get=function(e){for(var n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},t.prototype.indexOf=function(e){for(var n=0,r=this.root;!r.isEmpty();){var o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(n,r){return e(n,r),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(n,r){return e.push(n+":"+r),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new Wl(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new Wl(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Wl(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new Wl(this.root,e,this.comparator,!0)},t}(),Wl=function(){function t(e,n,r,o){this.isReverse=o,this.nodeStack=[];for(var s=1;!e.isEmpty();)if(s=n?r(e.key,n):1,o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(this.nodeStack.length===0)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),ui=function(){function t(e,n,r,o,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=o??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,o,s){return new t(e??this.key,n??this.value,r??this.color,o??this.left,s??this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,n,r){var o=this,s=r(e,o.key);return(o=s<0?o.copy(null,null,null,o.left.insert(e,n,r),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();var e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)},t}();ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw fe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw fe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw fe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw fe()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw fe()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,n,r,o,s){return this},t.prototype.insert=function(e,n,r){return new ui(e,n)},t.prototype.remove=function(e,n){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var jt=function(){function t(e){this.comparator=e,this.data=new en(this.comparator)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.forEachInRange=function(e,n){for(var r=this.data.getIteratorFrom(e[0]);r.hasNext();){var o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}},t.prototype.forEachWhile=function(e,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null},t.prototype.getIterator=function(){return new EI(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new EI(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var n=this;return n.size<e.size&&(n=e,e=this),e.forEach(function(r){n=n.add(r)}),n},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var o=n.getNext().key,s=r.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(n){e.push(n)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(n){return e.push(n)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),EI=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),vM=new en(de.comparator);function Xn(){return vM}var gM=new en(de.comparator);function ev(){return gM}var yM=new en(de.comparator);function kI(){return yM}var _M=new jt(de.comparator);function et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=_M,r=0,o=t;r<o.length;r++){var s=o[r];n=n.add(s)}return n}var wM=new jt(qe);function Gl(){return wM}var tv=function(){function t(e,n,r,o,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,nv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Re.min(),r,Gl(),Xn(),et())},t}(),nv=function(){function t(e,n,r,o,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(pn.EMPTY_BYTE_STRING,n,et(),et(),et())},t}(),Hl=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},xI=function(t,e){this.targetId=t,this.V=e},DI=function(t,e,n,r){n===void 0&&(n=pn.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},CI=function(){function t(){this.S=0,this.D=OI(),this.C=pn.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},t.prototype.M=function(){var e=et(),n=et(),r=et();return this.D.forEach(function(o,s){switch(s){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:fe()}}),new nv(this.C,this.N,e,n,r)},t.prototype.L=function(){this.F=!1,this.D=OI()},t.prototype.B=function(e,n){this.F=!0,this.D=this.D.insert(e,n)},t.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),bM=function(){function t(e){this.W=e,this.G=new Map,this.H=Xn(),this.J=AI(),this.Y=new jt(qe)}return t.prototype.X=function(e){for(var n=0,r=e.v;n<r.length;n++){var o=r[n];e.P&&e.P.isFoundDocument()?this.Z(o,e.P):this.tt(o,e.key,e.P)}for(var s=0,u=e.removedTargetIds;s<u.length;s++)o=u[s],this.tt(o,e.key,e.P)},t.prototype.et=function(e){var n=this;this.forEachTarget(e,function(r){var o=n.nt(r);switch(e.state){case 0:n.st(r)&&o.O(e.resumeToken);break;case 1:o.K(),o.k||o.L(),o.O(e.resumeToken);break;case 2:o.K(),o.k||n.removeTarget(r);break;case 3:n.st(r)&&(o.j(),o.O(e.resumeToken));break;case 4:n.st(r)&&(n.it(r),o.O(e.resumeToken));break;default:fe()}})},t.prototype.forEachTarget=function(e,n){var r=this;e.targetIds.length>0?e.targetIds.forEach(n):this.G.forEach(function(o,s){r.st(s)&&n(s)})},t.prototype.rt=function(e){var n=e.targetId,r=e.V.count,o=this.ot(n);if(o){var s=o.target;if(jl(s))if(r===0){var u=new de(s.path);this.tt(n,u,Ht.newNoDocument(u,Re.min()))}else Ee(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},t.prototype.ut=function(e){var n=this,r=new Map;this.G.forEach(function(u,c){var f=n.ot(c);if(f){if(u.current&&jl(f.target)){var p=new de(f.target.path);n.H.get(p)!==null||n.at(c,p)||n.tt(c,p,Ht.newNoDocument(p,e))}u.$&&(r.set(c,u.M()),u.L())}});var o=et();this.J.forEach(function(u,c){var f=!0;c.forEachWhile(function(p){var d=n.ot(p);return!d||d.purpose===2||(f=!1,!1)}),f&&(o=o.add(u))});var s=new tv(e,r,this.Y,this.H,o);return this.H=Xn(),this.J=AI(),this.Y=new jt(qe),s},t.prototype.Z=function(e,n){if(this.st(e)){var r=this.at(e,n.key)?2:0;this.nt(e).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(e))}},t.prototype.tt=function(e,n,r){if(this.st(e)){var o=this.nt(e);this.at(e,n)?o.B(n,1):o.q(n),this.J=this.J.insert(n,this.ht(n).delete(e)),r&&(this.H=this.H.insert(n,r))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var n=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var n=this.G.get(e);return n||(n=new CI,this.G.set(e,n)),n},t.prototype.ht=function(e){var n=this.J.get(e);return n||(n=new jt(qe),this.J=this.J.insert(e,n)),n},t.prototype.st=function(e){var n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n},t.prototype.ot=function(e){var n=this.G.get(e);return n&&n.k?null:this.W.lt(e)},t.prototype.it=function(e){var n=this;this.G.set(e,new CI),this.W.getRemoteKeysForTarget(e).forEach(function(r){n.tt(e,r,null)})},t.prototype.at=function(e,n){return this.W.getRemoteKeysForTarget(e).has(n)},t}();function AI(){return new en(de.comparator)}function OI(){return new en(de.comparator)}var IM={asc:"ASCENDING",desc:"DESCENDING"},TM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SM=function(t,e){this.databaseId=t,this.I=e};function uu(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function NI(t,e){return t.I?e.toBase64():e.toUint8Array()}function EM(t,e){return uu(t,e.toTimestamp())}function Kt(t){return Ee(!!t),Re.fromTimestamp(function(e){var n=Lr(e);return new dn(n.seconds,n.nanos)}(t))}function rv(t,e){return function(n){return new ze(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function RI(t){var e=ze.fromString(t);return Ee(GI(e)),e}function cu(t,e){return rv(t.databaseId,e.path)}function _r(t,e){var n=RI(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(PI(n))}function iv(t,e){return rv(t.databaseId,e)}function MI(t){var e=RI(t);return e.length===4?ze.emptyPath():PI(e)}function lu(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PI(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LI(t,e,n){return{name:cu(t,e),fields:n.value.mapValue.fields}}function jI(t,e,n){var r=_r(t,e.name),o=Kt(e.updateTime),s=new jn({mapValue:{fields:e.fields}}),u=Ht.newFoundDocument(r,o,s);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Kl(t,e){var n;if(e instanceof su)n={update:LI(t,e.key,e.value)};else if(e instanceof au)n={delete:cu(t,e.key)};else if(e instanceof ai)n={update:LI(t,e.key,e.data),updateMask:AM(e.fieldMask)};else{if(!(e instanceof Zm))return fe();n={verify:cu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(r){return function(o,s){var u=s.transform;if(u instanceof ds)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof oo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof so)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ps)return{fieldPath:s.field.canonicalString(),increment:u.A};throw fe()}(0,r)})),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:EM(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function $I(t,e){var n=e.currentDocument?function(p){return p.updateTime!==void 0?Zt.updateTime(Kt(p.updateTime)):p.exists!==void 0?Zt.exists(p.exists):Zt.none()}(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map(function(p){return function(d,g){var v=null;if("setToServerValue"in g)Ee(g.setToServerValue==="REQUEST_TIME"),v=new ds;else if("appendMissingElements"in g){var y=g.appendMissingElements.values||[];v=new oo(y)}else if("removeAllFromArray"in g){var b=g.removeAllFromArray.values||[];v=new so(b)}else"increment"in g?v=new ps(d,g.increment):fe();var T=ar.fromServerFormat(g.fieldPath);return new ou(T,v)}(t,p)}):[];if(e.update){e.update.name;var o=_r(t,e.update.name),s=new jn({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=function(p){var d=p.fieldPaths||[];return new as(d.map(function(g){return ar.fromServerFormat(g)}))}(e.updateMask);return new ai(o,s,u,n,r)}return new su(o,s,n,r)}if(e.delete){var c=_r(t,e.delete);return new au(c,n)}if(e.verify){var f=_r(t,e.verify);return new Zm(f,n)}return fe()}function FI(t,e){return{documents:[iv(t,e.path)]}}function UI(t,e){var n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=iv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var o=function(c){if(c.length!==0){var f=c.map(function(p){return function(d){if(d.op==="=="){if(eI(d.value))return{unaryFilter:{field:ms(d.field),op:"IS_NAN"}};if(Z1(d.value))return{unaryFilter:{field:ms(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(eI(d.value))return{unaryFilter:{field:ms(d.field),op:"IS_NOT_NAN"}};if(Z1(d.value))return{unaryFilter:{field:ms(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(d.field),op:xM(d.op),value:d.value}}}(p)});return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}}(e.filters);o&&(n.structuredQuery.where=o);var s=function(c){if(c.length!==0)return c.map(function(f){return function(p){return{field:ms(p.field),direction:kM(p.dir)}}(f)})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);var u=function(c,f){return c.I||ro(f)?f:{value:f}}(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=BI(e.startAt)),e.endAt&&(n.structuredQuery.endAt=BI(e.endAt)),n}function qI(t){var e=MI(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,o=null;if(r>0){Ee(r===1);var s=n.from[0];s.allDescendants?o=s.collectionId:e=e.child(s.collectionId)}var u=[];n.where&&(u=VI(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(g){return function(v){return new ls(vs(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g)}));var f=null;n.limit&&(f=function(g){var v;return ro(v=typeof g=="object"?g.value:g)?null:v}(n.limit));var p=null;n.startAt&&(p=WI(n.startAt));var d=null;return n.endAt&&(d=WI(n.endAt)),sI(e,o,c,u,f,"F",p,d)}function VI(t){return t?t.unaryFilter!==void 0?[CM(t)]:t.fieldFilter!==void 0?[DM(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(function(e){return VI(e)}).reduce(function(e,n){return e.concat(n)}):fe():[]}function BI(t){return{before:t.before,values:t.position}}function WI(t){var e=!!t.before,n=t.values||[];return new nu(n,e)}function kM(t){return IM[t]}function xM(t){return TM[t]}function ms(t){return{fieldPath:t.canonicalString()}}function vs(t){return ar.fromServerFormat(t.fieldPath)}function DM(t){return $n.create(vs(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return fe()}}(t.fieldFilter.op),t.fieldFilter.value)}function CM(t){switch(t.unaryFilter.op){case"IS_NAN":var e=vs(t.unaryFilter.field);return $n.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=vs(t.unaryFilter.field);return $n.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vs(t.unaryFilter.field);return $n.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var o=vs(t.unaryFilter.field);return $n.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return fe()}}function AM(t){var e=[];return t.fields.forEach(function(n){return e.push(n.canonicalString())}),{fieldPaths:e}}function GI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function ur(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=HI(e)),e=OM(t.get(n),e);return HI(e)}function OM(t,e){for(var n=e,r=t.length,o=0;o<r;o++){var s=t.charAt(o);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function HI(t){return t+""}function $r(t){var e=t.length;if(Ee(e>=2),e===2)return Ee(t.charAt(0)===""&&t.charAt(1)===""),ze.emptyPath();for(var n=e-2,r=[],o="",s=0;s<e;){var u=t.indexOf("",s);switch((u<0||u>n)&&fe(),t.charAt(u+1)){case"":var c=t.substring(s,u),f=void 0;o.length===0?f=c:(f=o+=c,o=""),r.push(f);break;case"":o+=t.substring(s,u),o+="\0";break;case"":o+=t.substring(s,u+1);break;default:fe()}s=u+2}return new ze(r)}var NM=function(t,e){this.seconds=t,this.nanoseconds=e},Fn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Fn.store="owner",Fn.key="owner";var ci=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ci.store="mutationQueues",ci.keyPath="userId";var lt=function(t,e,n,r,o){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o};lt.store="mutations",lt.keyPath="batchId",lt.userMutationsIndex="userMutationsIndex",lt.userMutationsKeyPath=["userId","batchId"];var tn=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,n){return[e,ur(n)]},t.key=function(e,n,r){return[e,ur(n),r]},t}();tn.store="documentMutations",tn.PLACEHOLDER=new tn;var RM=function(t,e){this.path=t,this.readTime=e},MM=function(t,e){this.path=t,this.version=e},_t=function(t,e,n,r,o,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=o,this.parentPath=s};_t.store="remoteDocuments",_t.readTimeIndex="readTimeIndex",_t.readTimeIndexPath="readTime",_t.collectionReadTimeIndex="collectionReadTimeIndex",_t.collectionReadTimeIndexPath=["parentPath","readTime"];var wr=function(t){this.byteSize=t};wr.store="remoteDocumentGlobal",wr.key="remoteDocumentGlobalKey";var kn=function(t,e,n,r,o,s,u){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=s,this.query=u};kn.store="targets",kn.keyPath="targetId",kn.queryTargetsIndexName="queryTargetsIndex",kn.queryTargetsKeyPath=["canonicalId","targetId"];var zt=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};zt.store="targetDocuments",zt.keyPath=["targetId","path"],zt.documentTargetsIndex="documentTargetsIndex",zt.documentTargetsKeyPath=["path","targetId"];var Un=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Un.key="targetGlobalKey",Un.store="targetGlobal";var ao=function(t,e){this.collectionId=t,this.parent=e};ao.store="collectionParents",ao.keyPath=["collectionId","parent"];var Fr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Fr.store="clientMetadata",Fr.keyPath="clientId";var gs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gs.store="bundles",gs.keyPath="bundleId";var ys=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ys.store="namedQueries",ys.keyPath="name";var PM=dt(dt([],dt(dt([],dt(dt([],dt(dt([],[ci.store,lt.store,tn.store,_t.store,kn.store,Fn.store,Un.store,zt.store]),[Fr.store])),[wr.store])),[ao.store])),[gs.store,ys.store]),KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zI=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),mn=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},te=function(){function t(e){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(o,s){r.nextCallback=function(u){r.wrapSuccess(e,u).next(o,s)},r.catchCallback=function(u){r.wrapFailure(n,u).next(o,s)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(n,r){e.next(n,r)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(n,r){n(e)})},t.reject=function(e){return new t(function(n,r){r(e)})},t.waitFor=function(e){return new t(function(n,r){var o=0,s=0,u=!1;e.forEach(function(c){++o,c.next(function(){++s,u&&s===o&&n()},function(f){return r(f)})}),u=!0,s===o&&n()})},t.or=function(e){for(var n=t.resolve(!1),r=function(u){n=n.next(function(c){return c?t.resolve(c):u()})},o=0,s=e;o<s.length;o++)r(s[o]);return n},t.forEach=function(e,n){var r=this,o=[];return e.forEach(function(s,u){o.push(n.call(r,s,u))}),this.waitFor(o)},t}(),YI=function(){function t(e,n){var r=this;this.action=e,this.transaction=n,this.aborted=!1,this.ft=new mn,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new fu(e,n.error)):r.ft.resolve()},this.transaction.onerror=function(o){var s=ov(o.target.error);r.ft.reject(new fu(e,s))}}return t.open=function(e,n,r,o){try{return new t(n,e.transaction(o,r))}catch(s){throw new fu(n,s)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var n=this.transaction.objectStore(e);return new jM(n)},t}(),_s=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,t._t(ri())===12.2&&At("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return re("SimpleDb","Removing database:",e),co(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if(typeof indexedDB=="undefined")return!1;if(t.gt())return!0;var e=ri(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.Tt)==="YES"},t.It=function(e,n){return e.store(n)},t._t=function(e){var n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},t.Et=function(e){var n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},t.prototype.At=function(e){return z(this,void 0,void 0,function(){var n,r=this;return H(this,function(o){switch(o.label){case 0:return this.db?[3,2]:(re("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,u){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(f){var p=f.target.result;s(p)},c.onblocked=function(){u(new fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(f){var p=f.target.error;p.name==="VersionError"?u(new ee(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u(new fu(e,p))},c.onupgradeneeded=function(f){re("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',f.oldVersion);var p=f.target.result;r.wt.Rt(p,c.transaction,f.oldVersion,r.version).next(function(){re("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=o.sent(),o.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(s){return r.bt(s)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(n){return e(n)})},t.prototype.runTransaction=function(e,n,r,o){return z(this,void 0,void 0,function(){var s,u,c,f,p;return H(this,function(d){switch(d.label){case 0:s=n==="readonly",u=0,c=function(){var g,v,y,b,T;return H(this,function(S){switch(S.label){case 0:++u,S.label=1;case 1:return S.trys.push([1,4,,5]),[4,f.At(e)];case 2:return f.db=S.sent(),g=YI.open(f.db,e,s?"readonly":"readwrite",r),v=o(g).catch(function(A){return g.abort(A),te.reject(A)}).toPromise(),y={},v.catch(function(){}),[4,g.dt];case 3:return[2,(y.value=(S.sent(),v),y)];case 4:return b=S.sent(),T=b.name!=="FirebaseError"&&u<3,re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),f.close(),T?[3,5]:[2,{value:Promise.reject(b)}];case 5:return[2]}})},f=this,d.label=1;case 1:return[5,c()];case 2:if(typeof(p=d.sent())=="object")return[2,p.value];d.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),LM=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return co(this.Pt.delete())},t}(),fu=function(t){function e(n,r){var o=this;return(o=t.call(this,B.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",o}return ge(e,t),e}(ee);function uo(t){return t.name==="IndexedDbTransactionError"}var jM=function(){function t(e){this.store=e}return t.prototype.put=function(e,n){var r;return n!==void 0?(re("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),co(r)},t.prototype.add=function(e){return re("SimpleDb","ADD",this.store.name,e,e),co(this.store.add(e))},t.prototype.get=function(e){var n=this;return co(this.store.get(e)).next(function(r){return r===void 0&&(r=null),re("SimpleDb","GET",n.store.name,e,r),r})},t.prototype.delete=function(e){return re("SimpleDb","DELETE",this.store.name,e),co(this.store.delete(e))},t.prototype.count=function(){return re("SimpleDb","COUNT",this.store.name),co(this.store.count())},t.prototype.Nt=function(e,n){var r=this.cursor(this.options(e,n)),o=[];return this.xt(r,function(s,u){o.push(u)}).next(function(){return o})},t.prototype.Ft=function(e,n){re("SimpleDb","DELETE ALL",this.store.name);var r=this.options(e,n);r.kt=!1;var o=this.cursor(r);return this.xt(o,function(s,u,c){return c.delete()})},t.prototype.$t=function(e,n){var r;n?r=e:(r={},n=e);var o=this.cursor(r);return this.xt(o,n)},t.prototype.Ot=function(e){var n=this.cursor({});return new te(function(r,o){n.onerror=function(s){var u=ov(s.target.error);o(u)},n.onsuccess=function(s){var u=s.target.result;u?e(u.primaryKey,u.value).next(function(c){c?u.continue():r()}):r()}})},t.prototype.xt=function(e,n){var r=[];return new te(function(o,s){e.onerror=function(u){s(u.target.error)},e.onsuccess=function(u){var c=u.target.result;if(c){var f=new LM(c),p=n(c.primaryKey,c.value,f);if(p instanceof te){var d=p.catch(function(g){return f.done(),te.reject(g)});r.push(d)}f.isDone?o():f.Dt===null?c.continue():c.continue(f.Dt)}else o()}}).next(function(){return te.waitFor(r)})},t.prototype.options=function(e,n){var r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}},t.prototype.cursor=function(e){var n="next";if(e.reverse&&(n="prev"),e.index){var r=this.store.index(e.index);return e.kt?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)},t}();function co(t){return new te(function(e,n){t.onsuccess=function(r){var o=r.target.result;e(o)},t.onerror=function(r){var o=ov(r.target.error);n(o)}})}var QI=!1;function ov(t){var e=_s._t(ri());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ee("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return QI||(QI=!0,setTimeout(function(){throw r},0)),r}}return t}var XI=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).Mt=n,o.currentSequenceNumber=r,o}return ge(e,t),e}(zI);function xn(t,e){var n=oe(t);return _s.It(n.Mt,e)}var sv=function(){function t(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}return t.prototype.applyToRemoteDocument=function(e,n){for(var r=n.mutationResults,o=0;o<this.mutations.length;o++){var s=this.mutations[o];s.key.isEqual(e.key)&&dM(s,e,r[o])}},t.prototype.applyToLocalView=function(e){for(var n=0,r=this.baseMutations;n<r.length;n++)(u=r[n]).key.isEqual(e.key)&&Jm(u,e,this.localWriteTime);for(var o=0,s=this.mutations;o<s.length;o++){var u;(u=s[o]).key.isEqual(e.key)&&Jm(u,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var n=this;this.mutations.forEach(function(r){var o=e.get(r.key),s=o;n.applyToLocalView(s),o.isValidDocument()||s.convertToNoDocument(Re.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,n){return e.add(n.key)},et())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,function(n,r){return yI(n,r)})&&ss(this.baseMutations,e.baseMutations,function(n,r){return yI(n,r)})},t}(),$M=function(){function t(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}return t.from=function(e,n,r){Ee(e.mutations.length===r.length);for(var o=kI(),s=e.mutations,u=0;u<s.length;u++)o=o.insert(s[u].key,r[u].version);return new t(e,n,r,o)},t}(),zl=function(){function t(e,n,r,o,s,u,c){s===void 0&&(s=Re.min()),u===void 0&&(u=Re.min()),c===void 0&&(c=pn.EMPTY_BYTE_STRING),this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),JI=function(t){this.Lt=t};function av(t,e){if(e.document)return jI(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=de.fromSegments(e.noDocument.path),r=bs(e.noDocument.readTime),o=Ht.newNoDocument(n,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){var s=de.fromSegments(e.unknownDocument.path);return r=bs(e.unknownDocument.version),Ht.newUnknownDocument(s,r)}return fe()}function ZI(t,e,n){var r=uv(n),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s=function(g,v){return{name:cu(g,v.key),fields:v.data.value.mapValue.fields,updateTime:uu(g,v.version.toTimestamp())}}(t.Lt,e),u=e.hasCommittedMutations;return new _t(null,null,s,u,r,o)}if(e.isNoDocument()){var c=e.key.path.toArray(),f=ws(e.version);return u=e.hasCommittedMutations,new _t(null,new RM(c,f),null,u,r,o)}if(e.isUnknownDocument()){var p=e.key.path.toArray(),d=ws(e.version);return new _t(new MM(p,d),null,null,!0,r,o)}return fe()}function uv(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eT(t){var e=new dn(t[0],t[1]);return Re.fromTimestamp(e)}function ws(t){var e=t.toTimestamp();return new NM(e.seconds,e.nanoseconds)}function bs(t){var e=new dn(t.seconds,t.nanoseconds);return Re.fromTimestamp(e)}function Is(t,e){for(var n=(e.baseMutations||[]).map(function(f){return $I(t.Lt,f)}),r=0;r<e.mutations.length-1;++r){var o=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){var s=e.mutations[r+1];o.updateTransforms=s.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var u=e.mutations.map(function(f){return $I(t.Lt,f)}),c=dn.fromMillis(e.localWriteTimeMs);return new sv(e.batchId,c,n,u)}function hu(t){var e,n,r=bs(t.readTime),o=t.lastLimboFreeSnapshotVersion!==void 0?bs(t.lastLimboFreeSnapshotVersion):Re.min();return t.query.documents!==void 0?(Ee((n=t.query).documents.length===1),e=Qn(fs(MI(n.documents[0])))):e=function(s){return Qn(qI(s))}(t.query),new zl(e,t.targetId,0,t.lastListenSequenceNumber,r,o,pn.fromBase64String(t.resumeToken))}function tT(t,e){var n,r=ws(e.snapshotVersion),o=ws(e.lastLimboFreeSnapshotVersion);n=jl(e.target)?FI(t.Lt,e.target):UI(t.Lt,e.target);var s=e.resumeToken.toBase64();return new kn(e.targetId,tu(e.target),r,s,e.sequenceNumber,o,n)}function cv(t){var e=qI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?aI(e,e.limit,"L"):e}var FM=function(){function t(){}return t.prototype.getBundleMetadata=function(e,n){return nT(e).get(n).next(function(r){if(r)return{id:(o=r).bundleId,createTime:bs(o.createTime),version:o.version};var o})},t.prototype.saveBundleMetadata=function(e,n){return nT(e).put({bundleId:(r=n).id,createTime:ws(Kt(r.createTime)),version:r.version});var r},t.prototype.getNamedQuery=function(e,n){return rT(e).get(n).next(function(r){if(r)return{name:(o=r).name,query:cv(o.bundledQuery),readTime:bs(o.readTime)};var o})},t.prototype.saveNamedQuery=function(e,n){return rT(e).put(function(r){return{name:r.name,readTime:ws(Kt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},t}();function nT(t){return xn(t,gs.store)}function rT(t){return xn(t,ys.store)}var UM=function(){function t(){this.Bt=new lv}return t.prototype.addToCollectionParentIndex=function(e,n){return this.Bt.add(n),te.resolve()},t.prototype.getCollectionParents=function(e,n){return te.resolve(this.Bt.getEntries(n))},t}(),lv=function(){function t(){this.index={}}return t.prototype.add=function(e){var n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new jt(ze.comparator),s=!o.has(r);return this.index[n]=o.add(r),s},t.prototype.has=function(e){var n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)},t.prototype.getEntries=function(e){return(this.index[e]||new jt(ze.comparator)).toArray()},t}(),qM=function(){function t(){this.qt=new lv}return t.prototype.addToCollectionParentIndex=function(e,n){var r=this;if(!this.qt.has(n)){var o=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(function(){r.qt.add(n)});var u={collectionId:o,parent:ur(s)};return iT(e).put(u)}return te.resolve()},t.prototype.getCollectionParents=function(e,n){var r=[],o=IDBKeyRange.bound([n,""],[H1(n),""],!1,!0);return iT(e).Nt(o).next(function(s){for(var u=0,c=s;u<c.length;u++){var f=c[u];if(f.collectionId!==n)break;r.push($r(f.parent))}return r})},t}();function iT(t){return xn(t,ao.store)}var oT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},br=function(){function t(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function sT(t,e,n){var r=t.store(lt.store),o=t.store(tn.store),s=[],u=IDBKeyRange.only(n.batchId),c=0,f=r.$t({range:u},function(b,T,S){return c++,S.delete()});s.push(f.next(function(){Ee(c===1)}));for(var p=[],d=0,g=n.mutations;d<g.length;d++){var v=g[d],y=tn.key(e,v.key.path,n.batchId);s.push(o.delete(y)),p.push(v.key)}return te.waitFor(s).next(function(){return p})}function Yl(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fe();e=t.noDocument}return JSON.stringify(e).length}br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(41943040,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);var VM=function(){function t(e,n,r,o){this.userId=e,this.R=n,this.Ut=r,this.referenceDelegate=o,this.Kt={}}return t.Qt=function(e,n,r,o){return Ee(e.uid!==""),new t(e.isAuthenticated()?e.uid:"",n,r,o)},t.prototype.checkEmpty=function(e){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).$t({index:lt.userMutationsIndex,range:r},function(o,s,u){n=!1,u.done()}).next(function(){return n})},t.prototype.addMutationBatch=function(e,n,r,o){var s=this,u=Ts(e),c=li(e);return c.add({}).next(function(f){Ee(typeof f=="number");for(var p=new sv(f,n,r,o),d=function(A,V,q){var L=q.baseMutations.map(function(R){return Kl(A.Lt,R)}),O=q.mutations.map(function(R){return Kl(A.Lt,R)});return new lt(V,q.batchId,q.localWriteTime.toMillis(),L,O)}(s.R,s.userId,p),g=[],v=new jt(function(A,V){return qe(A.canonicalString(),V.canonicalString())}),y=0,b=o;y<b.length;y++){var T=b[y],S=tn.key(s.userId,T.key.path,f);v=v.add(T.key.path.popLast()),g.push(c.put(d)),g.push(u.put(S,tn.PLACEHOLDER))}return v.forEach(function(A){g.push(s.Ut.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(function(){s.Kt[f]=p.keys()}),te.waitFor(g).next(function(){return p})})},t.prototype.lookupMutationBatch=function(e,n){var r=this;return li(e).get(n).next(function(o){return o?(Ee(o.userId===r.userId),Is(r.R,o)):null})},t.prototype.jt=function(e,n){var r=this;return this.Kt[n]?te.resolve(this.Kt[n]):this.lookupMutationBatch(e,n).next(function(o){if(o){var s=o.keys();return r.Kt[n]=s,s}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=this,o=n+1,s=IDBKeyRange.lowerBound([this.userId,o]),u=null;return li(e).$t({index:lt.userMutationsIndex,range:s},function(c,f,p){f.userId===r.userId&&(Ee(f.batchId>=o),u=Is(r.R,f)),p.done()}).next(function(){return u})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return li(e).$t({index:lt.userMutationsIndex,range:n,reverse:!0},function(o,s,u){r=s.batchId,u.done()}).next(function(){return r})},t.prototype.getAllMutationBatches=function(e){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).Nt(lt.userMutationsIndex,r).next(function(o){return o.map(function(s){return Is(n.R,s)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,o=tn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(o),u=[];return Ts(e).$t({range:s},function(c,f,p){var d=c[0],g=c[1],v=c[2],y=$r(g);if(d===r.userId&&n.path.isEqual(y))return li(e).get(v).next(function(b){if(!b)throw fe();Ee(b.userId===r.userId),u.push(Is(r.R,b))});p.done()}).next(function(){return u})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,o=new jt(qe),s=[];return n.forEach(function(u){var c=tn.prefixForPath(r.userId,u.path),f=IDBKeyRange.lowerBound(c),p=Ts(e).$t({range:f},function(d,g,v){var y=d[0],b=d[1],T=d[2],S=$r(b);y===r.userId&&u.path.isEqual(S)?o=o.add(T):v.done()});s.push(p)}),te.waitFor(s).next(function(){return r.Wt(e,o)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=this,o=n.path,s=o.length+1,u=tn.prefixForPath(this.userId,o),c=IDBKeyRange.lowerBound(u),f=new jt(qe);return Ts(e).$t({range:c},function(p,d,g){var v=p[0],y=p[1],b=p[2],T=$r(y);v===r.userId&&o.isPrefixOf(T)?T.length===s&&(f=f.add(b)):g.done()}).next(function(){return r.Wt(e,f)})},t.prototype.Wt=function(e,n){var r=this,o=[],s=[];return n.forEach(function(u){s.push(li(e).get(u).next(function(c){if(c===null)throw fe();Ee(c.userId===r.userId),o.push(Is(r.R,c))}))}),te.waitFor(s).next(function(){return o})},t.prototype.removeMutationBatch=function(e,n){var r=this;return sT(e.Mt,this.userId,n).next(function(o){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),te.forEach(o,function(s){return r.referenceDelegate.markPotentiallyOrphaned(e,s)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var n=this;return this.checkEmpty(e).next(function(r){if(!r)return te.resolve();var o=IDBKeyRange.lowerBound(tn.prefixForUser(n.userId)),s=[];return Ts(e).$t({range:o},function(u,c,f){if(u[0]===n.userId){var p=$r(u[1]);s.push(p)}else f.done()}).next(function(){Ee(s.length===0)})})},t.prototype.containsKey=function(e,n){return aT(e,this.userId,n)},t.prototype.zt=function(e){var n=this;return uT(e).get(this.userId).next(function(r){return r||new ci(n.userId,-1,"")})},t}();function aT(t,e,n){var r=tn.prefixForPath(e,n.path),o=r[1],s=IDBKeyRange.lowerBound(r),u=!1;return Ts(t).$t({range:s,kt:!0},function(c,f,p){var d=c[0],g=c[1];c[2],d===e&&g===o&&(u=!0),p.done()}).next(function(){return u})}function li(t){return xn(t,lt.store)}function Ts(t){return xn(t,tn.store)}function uT(t){return xn(t,ci.store)}var Ql=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),BM=function(){function t(e,n){this.referenceDelegate=e,this.R=n}return t.prototype.allocateTargetId=function(e){var n=this;return this.Xt(e).next(function(r){var o=new Ql(r.highestTargetId);return r.highestTargetId=o.next(),n.Zt(e,r).next(function(){return r.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(n){return Re.fromTimestamp(new dn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(n){return n.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,n,r){var o=this;return this.Xt(e).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),o.Zt(e,s)})},t.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(o){return o.targetCount+=1,r.ee(n,o),r.Zt(e,o)})})},t.prototype.updateTargetData=function(e,n){return this.te(e,n)},t.prototype.removeTargetData=function(e,n){var r=this;return this.removeMatchingKeysForTargetId(e,n.targetId).next(function(){return Ss(e).delete(n.targetId)}).next(function(){return r.Xt(e)}).next(function(o){return Ee(o.targetCount>0),o.targetCount-=1,r.Zt(e,o)})},t.prototype.removeTargets=function(e,n,r){var o=this,s=0,u=[];return Ss(e).$t(function(c,f){var p=hu(f);p.sequenceNumber<=n&&r.get(p.targetId)===null&&(s++,u.push(o.removeTargetData(e,p)))}).next(function(){return te.waitFor(u)}).next(function(){return s})},t.prototype.forEachTarget=function(e,n){return Ss(e).$t(function(r,o){var s=hu(o);n(s)})},t.prototype.Xt=function(e){return cT(e).get(Un.key).next(function(n){return Ee(n!==null),n})},t.prototype.Zt=function(e,n){return cT(e).put(Un.key,n)},t.prototype.te=function(e,n){return Ss(e).put(tT(this.R,n))},t.prototype.ee=function(e,n){var r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(n){return n.targetCount})},t.prototype.getTargetData=function(e,n){var r=tu(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ss(e).$t({range:o,index:kn.queryTargetsIndexName},function(u,c,f){var p=hu(c);Ll(n,p.target)&&(s=p,f.done())}).next(function(){return s})},t.prototype.addMatchingKeys=function(e,n,r){var o=this,s=[],u=fi(e);return n.forEach(function(c){var f=ur(c.path);s.push(u.put(new zt(r,f))),s.push(o.referenceDelegate.addReference(e,r,c))}),te.waitFor(s)},t.prototype.removeMatchingKeys=function(e,n,r){var o=this,s=fi(e);return te.forEach(n,function(u){var c=ur(u.path);return te.waitFor([s.delete([r,c]),o.referenceDelegate.removeReference(e,r,u)])})},t.prototype.removeMatchingKeysForTargetId=function(e,n){var r=fi(e),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),o=fi(e),s=et();return o.$t({range:r,kt:!0},function(u,c,f){var p=$r(u[1]),d=new de(p);s=s.add(d)}).next(function(){return s})},t.prototype.containsKey=function(e,n){var r=ur(n.path),o=IDBKeyRange.bound([r],[H1(r)],!1,!0),s=0;return fi(e).$t({index:zt.documentTargetsIndex,kt:!0,range:o},function(u,c,f){var p=u[0];u[1],p!==0&&(s++,f.done())}).next(function(){return s>0})},t.prototype.lt=function(e,n){return Ss(e).get(n).next(function(r){return r?hu(r):null})},t}();function Ss(t){return xn(t,kn.store)}function cT(t){return xn(t,Un.store)}function fi(t){return xn(t,zt.store)}function lo(t){return z(this,void 0,void 0,function(){return H(this,function(e){if(t.code!==B.FAILED_PRECONDITION||t.message!==KI)throw t;return re("LocalStore","Unexpectedly lost primary lease"),[2]})})}function lT(t,e){var n=t[0],r=t[1],o=e[0],s=e[1],u=qe(n,o);return u===0?qe(r,s):u}var WM=function(){function t(e){this.ne=e,this.buffer=new jt(lT),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var n=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();lT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),GM=function(){function t(e,n){this.garbageCollector=e,this.asyncQueue=n,this.oe=!1,this.ce=null}return t.prototype.start=function(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var n=this,r=this.oe?3e5:6e4;re("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return z(n,void 0,void 0,function(){var o;return H(this,function(s){switch(s.label){case 0:this.ce=null,this.oe=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return s.sent(),[3,7];case 3:return uo(o=s.sent())?(re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o),[3,6]):[3,4];case 4:return[4,lo(o)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return s.sent(),[2]}})})})},t}(),HM=function(){function t(e,n){this.ae=e,this.params=n}return t.prototype.calculateTargetCount=function(e,n){return this.ae.he(e).next(function(r){return Math.floor(n/100*r)})},t.prototype.nthSequenceNumber=function(e,n){var r=this;if(n===0)return te.resolve(Ln.o);var o=new WM(n);return this.ae.forEachTarget(e,function(s){return o.re(s.sequenceNumber)}).next(function(){return r.ae.le(e,function(s){return o.re(s)})}).next(function(){return o.maxValue})},t.prototype.removeTargets=function(e,n,r){return this.ae.removeTargets(e,n,r)},t.prototype.removeOrphanedDocuments=function(e,n){return this.ae.removeOrphanedDocuments(e,n)},t.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(oT)):this.getCacheSize(e).next(function(o){return o<r.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector","Garbage collection skipped; Cache size "+o+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),oT):r.fe(e,n)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,n){var r,o,s,u,c,f,p,d=this,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(v){return v>d.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+d.params.maximumSequenceNumbersToCollect+" from "+v),o=d.params.maximumSequenceNumbersToCollect):o=v,u=Date.now(),d.nthSequenceNumber(e,o)}).next(function(v){return r=v,c=Date.now(),d.removeTargets(e,r,n)}).next(function(v){return s=v,f=Date.now(),d.removeOrphanedDocuments(e,r)}).next(function(v){return p=Date.now(),qm()<=He.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(u-g)+`ms
	Determined least recently used `+o+" in "+(c-u)+`ms
	Removed `+s+" targets in "+(f-c)+`ms
	Removed `+v+" documents in "+(p-f)+`ms
Total Duration: `+(p-g)+"ms"),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:v})})},t}(),KM=function(){function t(e,n){this.db=e,this.garbageCollector=function(r,o){return new HM(r,o)}(this,n)}return t.prototype.he=function(e){var n=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(r){return n.next(function(o){return r+o})})},t.prototype.de=function(e){var n=0;return this.le(e,function(r){n++}).next(function(){return n})},t.prototype.forEachTarget=function(e,n){return this.db.getTargetCache().forEachTarget(e,n)},t.prototype.le=function(e,n){return this.we(e,function(r,o){return n(o)})},t.prototype.addReference=function(e,n,r){return Xl(e,r)},t.prototype.removeReference=function(e,n,r){return Xl(e,r)},t.prototype.removeTargets=function(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)},t.prototype.markPotentiallyOrphaned=function(e,n){return Xl(e,n)},t.prototype._e=function(e,n){return function(r,o){var s=!1;return uT(r).Ot(function(u){return aT(r,u,o).next(function(c){return c&&(s=!0),te.resolve(!c)})}).next(function(){return s})}(e,n)},t.prototype.removeOrphanedDocuments=function(e,n){var r=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.we(e,function(c,f){if(f<=n){var p=r._e(e,c).next(function(d){if(!d)return u++,o.getEntry(e,c).next(function(){return o.removeEntry(c),fi(e).delete([0,ur(c.path)])})});s.push(p)}}).next(function(){return te.waitFor(s)}).next(function(){return o.apply(e)}).next(function(){return u})},t.prototype.removeTarget=function(e,n){var r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)},t.prototype.updateLimboDocument=function(e,n){return Xl(e,n)},t.prototype.we=function(e,n){var r,o=fi(e),s=Ln.o;return o.$t({index:zt.documentTargetsIndex},function(u,c){var f=u[0];u[1];var p=c.path,d=c.sequenceNumber;f===0?(s!==Ln.o&&n(new de($r(r)),s),s=d,r=p):s=Ln.o}).next(function(){s!==Ln.o&&n(new de($r(r)),s)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function Xl(t,e){return fi(t).put(function(n,r){return new zt(0,ur(n.path),r)}(e,t.currentSequenceNumber))}var Es=function(){function t(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}return t.prototype.get=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0)for(var o=0,s=r;o<s.length;o++){var u=s[o],c=u[0],f=u[1];if(this.equalsFn(c,e))return f}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,n){var r=this.mapKeyFn(e),o=this.inner[r];if(o!==void 0){for(var s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,n]);o.push([e,n])}else this.inner[r]=[[e,n]]},t.prototype.delete=function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(var o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),!0;return!1},t.prototype.forEach=function(e){no(this.inner,function(n,r){for(var o=0,s=r;o<s.length;o++){var u=s[o],c=u[0],f=u[1];e(c,f)}})},t.prototype.isEmpty=function(){return z1(this.inner)},t}(),fT=function(){function t(){this.changes=new Es(function(e){return e.toString()},function(e,n){return e.isEqual(n)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var n=this.changes.get(e);return n?n.readTime:Re.min()},t.prototype.addEntry=function(e,n){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:n})},t.prototype.removeEntry=function(e,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(e,{document:Ht.newInvalidDocument(e),readTime:n})},t.prototype.getEntry=function(e,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?te.resolve(r.document):this.getFromCache(e,n)},t.prototype.getEntries=function(e,n){return this.getAllFromCache(e,n)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),zM=function(){function t(e,n){this.R=e,this.Ut=n}return t.prototype.addEntry=function(e,n,r){return hi(e).put(Jl(n),r)},t.prototype.removeEntry=function(e,n){var r=hi(e),o=Jl(n);return r.delete(o)},t.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(o){return o.byteSize+=n,r.me(e,o)})},t.prototype.getEntry=function(e,n){var r=this;return hi(e).get(Jl(n)).next(function(o){return r.ye(n,o)})},t.prototype.ge=function(e,n){var r=this;return hi(e).get(Jl(n)).next(function(o){return{document:r.ye(n,o),size:Yl(o)}})},t.prototype.getEntries=function(e,n){var r=this,o=Xn();return this.pe(e,n,function(s,u){var c=r.ye(s,u);o=o.insert(s,c)}).next(function(){return o})},t.prototype.Ee=function(e,n){var r=this,o=Xn(),s=new en(de.comparator);return this.pe(e,n,function(u,c){var f=r.ye(u,c);o=o.insert(u,f),s=s.insert(u,Yl(c))}).next(function(){return{documents:o,Te:s}})},t.prototype.pe=function(e,n,r){if(n.isEmpty())return te.resolve();var o=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator(),u=s.getNext();return hi(e).$t({range:o},function(c,f,p){for(var d=de.fromSegments(c);u&&de.comparator(u,d)<0;)r(u,null),u=s.getNext();u&&u.isEqual(d)&&(r(u,f),u=s.hasNext()?s.getNext():null),u?p.Ct(u.path.toArray()):p.done()}).next(function(){for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){var o=this,s=Xn(),u=n.path.length+1,c={};if(r.isEqual(Re.min())){var f=n.path.toArray();c.range=IDBKeyRange.lowerBound(f)}else{var p=n.path.toArray(),d=uv(r);c.range=IDBKeyRange.lowerBound([p,d],!0),c.index=_t.collectionReadTimeIndex}return hi(e).$t(c,function(g,v,y){if(g.length===u){var b=av(o.R,v);n.path.isPrefixOf(b.key.path)?iu(n,b)&&(s=s.insert(b.key,b)):y.done()}}).next(function(){return s})},t.prototype.newChangeBuffer=function(e){return new YM(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(n){return n.byteSize})},t.prototype.getMetadata=function(e){return hT(e).get(wr.key).next(function(n){return Ee(!!n),n})},t.prototype.me=function(e,n){return hT(e).put(wr.key,n)},t.prototype.ye=function(e,n){if(n){var r=av(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(Re.min()))return r}return Ht.newInvalidDocument(e)},t}(),YM=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).Ie=n,o.trackRemovals=r,o.Ae=new Es(function(s){return s.toString()},function(s,u){return s.isEqual(u)}),o}return ge(e,t),e.prototype.applyChanges=function(n){var r=this,o=[],s=0,u=new jt(function(c,f){return qe(c.canonicalString(),f.canonicalString())});return this.changes.forEach(function(c,f){var p=r.Ae.get(c);if(f.document.isValidDocument()){var d=ZI(r.Ie.R,f.document,r.getReadTime(c));u=u.add(c.path.popLast());var g=Yl(d);s+=g-p,o.push(r.Ie.addEntry(n,c,d))}else if(s-=p,r.trackRemovals){var v=ZI(r.Ie.R,Ht.newNoDocument(c,Re.min()),r.getReadTime(c));o.push(r.Ie.addEntry(n,c,v))}else o.push(r.Ie.removeEntry(n,c))}),u.forEach(function(c){o.push(r.Ie.Ut.addToCollectionParentIndex(n,c))}),o.push(this.Ie.updateMetadata(n,s)),te.waitFor(o)},e.prototype.getFromCache=function(n,r){var o=this;return this.Ie.ge(n,r).next(function(s){return o.Ae.set(r,s.size),s.document})},e.prototype.getAllFromCache=function(n,r){var o=this;return this.Ie.Ee(n,r).next(function(s){var u=s.documents;return s.Te.forEach(function(c,f){o.Ae.set(c,f)}),u})},e}(fT);function hT(t){return xn(t,wr.store)}function hi(t){return xn(t,_t.store)}function Jl(t){return t.path.toArray()}var QM=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,n,r,o){var s=this;Ee(r<o&&r>=0&&o<=11);var u=new YI("createOrUpgrade",n);r<1&&o>=1&&(function(f){f.createObjectStore(Fn.store)}(e),function(f){f.createObjectStore(ci.store,{keyPath:ci.keyPath}),f.createObjectStore(lt.store,{keyPath:lt.keyPath,autoIncrement:!0}).createIndex(lt.userMutationsIndex,lt.userMutationsKeyPath,{unique:!0}),f.createObjectStore(tn.store)}(e),dT(e),function(f){f.createObjectStore(_t.store)}(e));var c=te.resolve();return r<3&&o>=3&&(r!==0&&(function(f){f.deleteObjectStore(zt.store),f.deleteObjectStore(kn.store),f.deleteObjectStore(Un.store)}(e),dT(e)),c=c.next(function(){return function(f){var p=f.store(Un.store),d=new Un(0,0,Re.min().toTimestamp(),0);return p.put(Un.key,d)}(u)})),r<4&&o>=4&&(r!==0&&(c=c.next(function(){return function(f,p){return p.store(lt.store).Nt().next(function(d){f.deleteObjectStore(lt.store),f.createObjectStore(lt.store,{keyPath:lt.keyPath,autoIncrement:!0}).createIndex(lt.userMutationsIndex,lt.userMutationsKeyPath,{unique:!0});var g=p.store(lt.store),v=d.map(function(y){return g.put(y)});return te.waitFor(v)})}(e,u)})),c=c.next(function(){(function(f){f.createObjectStore(Fr.store,{keyPath:Fr.keyPath})})(e)})),r<5&&o>=5&&(c=c.next(function(){return s.Re(u)})),r<6&&o>=6&&(c=c.next(function(){return function(f){f.createObjectStore(wr.store)}(e),s.be(u)})),r<7&&o>=7&&(c=c.next(function(){return s.ve(u)})),r<8&&o>=8&&(c=c.next(function(){return s.Pe(e,u)})),r<9&&o>=9&&(c=c.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){var p=f.objectStore(_t.store);p.createIndex(_t.readTimeIndex,_t.readTimeIndexPath,{unique:!1}),p.createIndex(_t.collectionReadTimeIndex,_t.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&o>=10&&(c=c.next(function(){return s.Ve(u)})),r<11&&o>=11&&(c=c.next(function(){(function(f){f.createObjectStore(gs.store,{keyPath:gs.keyPath})})(e),function(f){f.createObjectStore(ys.store,{keyPath:ys.keyPath})}(e)})),c},t.prototype.be=function(e){var n=0;return e.store(_t.store).$t(function(r,o){n+=Yl(o)}).next(function(){var r=new wr(n);return e.store(wr.store).put(wr.key,r)})},t.prototype.Re=function(e){var n=this,r=e.store(ci.store),o=e.store(lt.store);return r.Nt().next(function(s){return te.forEach(s,function(u){var c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return o.Nt(lt.userMutationsIndex,c).next(function(f){return te.forEach(f,function(p){Ee(p.userId===u.userId);var d=Is(n.R,p);return sT(e,u.userId,d).next(function(){})})})})})},t.prototype.ve=function(e){var n=e.store(zt.store),r=e.store(_t.store);return e.store(Un.store).get(Un.key).next(function(o){var s=[];return r.$t(function(u,c){var f=new ze(u),p=function(d){return[0,ur(d)]}(f);s.push(n.get(p).next(function(d){return d?te.resolve():function(g){return n.put(new zt(0,ur(g),o.highestListenSequenceNumber))}(f)}))}).next(function(){return te.waitFor(s)})})},t.prototype.Pe=function(e,n){e.createObjectStore(ao.store,{keyPath:ao.keyPath});var r=n.store(ao.store),o=new lv,s=function(u){if(o.add(u)){var c=u.lastSegment(),f=u.popLast();return r.put({collectionId:c,parent:ur(f)})}};return n.store(_t.store).$t({kt:!0},function(u,c){var f=new ze(u);return s(f.popLast())}).next(function(){return n.store(tn.store).$t({kt:!0},function(u,c){u[0];var f=u[1];u[2];var p=$r(f);return s(p.popLast())})})},t.prototype.Ve=function(e){var n=this,r=e.store(kn.store);return r.$t(function(o,s){var u=hu(s),c=tT(n.R,u);return r.put(c)})},t}();function dT(t){t.createObjectStore(zt.store,{keyPath:zt.keyPath}).createIndex(zt.documentTargetsIndex,zt.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(kn.store,{keyPath:kn.keyPath}).createIndex(kn.queryTargetsIndexName,kn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Un.store)}var fv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",XM=function(){function t(e,n,r,o,s,u,c,f,p,d){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=s,this.window=u,this.document=c,this.De=p,this.Ce=d,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(g){return Promise.resolve()},!t.yt())throw new ee(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KM(this,o),this.Le=n+"main",this.R=new JI(f),this.Be=new _s(this.Le,11,new QM(this.R)),this.qe=new BM(this.referenceDelegate,this.R),this.Ut=new qM,this.Ue=function(g,v){return new zM(g,v)}(this.R,this.Ut),this.Ke=new FM,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,d===!1&&At("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ee(B.FAILED_PRECONDITION,fv);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return e.qe.getHighestSequenceNumber(n)})}).then(function(n){e.Ne=new Ln(n,e.De)}).then(function(){e.xe=!0}).catch(function(n){return e.Be&&e.Be.close(),Promise.reject(n)})},t.prototype.He=function(e){var n=this;return this.Me=function(r){return z(n,void 0,void 0,function(){return H(this,function(o){return this.started?[2,e(r)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var n=this;this.Be.vt(function(r){return z(n,void 0,void 0,function(){return H(this,function(o){switch(o.label){case 0:return r.newVersion===null?[4,e()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return z(n,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Zl(n).put(new Fr(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(n).next(function(r){r||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(n)}).next(function(r){return e.isPrimary&&!r?e.Xe(n).next(function(){return!1}):!!r&&e.Ze(n).next(function(){return!0})})}).catch(function(n){if(uo(n))return re("IndexedDbPersistence","Failed to extend owner lease: ",n),e.isPrimary;if(!e.allowTabSynchronization)throw n;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){e.isPrimary!==n&&e.Se.enqueueRetryable(function(){return e.Me(n)}),e.isPrimary=n})},t.prototype.Je=function(e){var n=this;return du(e).get(Fn.key).next(function(r){return te.resolve(n.tn(r))})},t.prototype.en=function(e){return Zl(e).delete(this.clientId)},t.prototype.nn=function(){return z(this,void 0,void 0,function(){var e,n,r,o,s=this;return H(this,function(u){switch(u.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var f=xn(c,Fr.store);return f.Nt().next(function(p){var d=s.rn(p,18e5),g=p.filter(function(v){return d.indexOf(v)===-1});return te.forEach(g,function(v){return f.delete(v.clientId)}).next(function(){return g})})}).catch(function(){return[]})]);case 1:if(e=u.sent(),this.Qe)for(n=0,r=e;n<r.length;n++)o=r[n],this.Qe.removeItem(this.on(o.clientId));u.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var n=this;return this.Ce?te.resolve(!0):du(e).get(Fn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new ee(B.FAILED_PRECONDITION,fv);return!1}}return!(!n.networkEnabled||!n.inForeground)||Zl(e).Nt().next(function(o){return n.rn(o,5e3).find(function(s){if(n.clientId!==s.clientId){var u=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,f=n.networkEnabled===s.networkEnabled;if(u||c&&f)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&re("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},t.prototype.shutdown=function(){return z(this,void 0,void 0,function(){var e=this;return H(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Fn.store,Fr.store],function(r){var o=new XI(r,Ln.o);return e.Xe(o).next(function(){return e.en(o)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,n){var r=this;return e.filter(function(o){return r.sn(o.updateTimeMs,n)&&!r.cn(o.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(n){return Zl(n).Nt().next(function(r){return e.rn(r,18e5).map(function(o){return o.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return VM.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var o=this;re("IndexedDbPersistence","Starting transaction:",e);var s,u=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(e,u,PM,function(c){return s=new XI(c,o.Ne?o.Ne.next():Ln.o),n==="readwrite-primary"?o.Je(s).next(function(f){return!!f||o.Ye(s)}).next(function(f){if(!f)throw At("Failed to obtain primary lease for action '"+e+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new ee(B.FAILED_PRECONDITION,KI);return r(s)}).next(function(f){return o.Ze(s).next(function(){return f})}):o.dn(s).next(function(){return r(s)})}).then(function(c){return s.raiseOnCommittedEvent(),c})},t.prototype.dn=function(e){var n=this;return du(e).get(Fn.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new ee(B.FAILED_PRECONDITION,fv)})},t.prototype.Ze=function(e){var n=new Fn(this.clientId,this.allowTabSynchronization,Date.now());return du(e).put(Fn.key,n)},t.yt=function(){return _s.yt()},t.prototype.Xe=function(e){var n=this,r=du(e);return r.get(Fn.key).next(function(o){return n.tn(o)?(re("IndexedDbPersistence","Releasing primary lease."),r.delete(Fn.key)):te.resolve()})},t.prototype.sn=function(e,n){var r=Date.now();return!(e<r-n||e>r&&(At("Detected an update time that is in the future: "+e+" > "+r),1))},t.prototype.We=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ke=function(){e.Se.enqueueAndForget(function(){return e.inForeground=e.document.visibilityState==="visible",e.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground=this.document.visibilityState==="visible")},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var e,n=this;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Fe=function(){n.un(),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(e){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(e)))!==null;return re("IndexedDbPersistence","Client '"+e+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(o){return At("IndexedDbPersistence","Failed to get zombied client id.",o),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){At("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function du(t){return xn(t,Fn.store)}function Zl(t){return xn(t,Fr.store)}function hv(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var JM=function(t,e){this.progress=t,this.wn=e},pT=function(){function t(e,n,r){this.Ue=e,this._n=n,this.Ut=r}return t.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(o){return r.yn(e,n,o)})},t.prototype.yn=function(e,n,r){return this.Ue.getEntry(e,n).next(function(o){for(var s=0,u=r;s<u.length;s++)u[s].applyToLocalView(o);return o})},t.prototype.gn=function(e,n){e.forEach(function(r,o){for(var s=0,u=n;s<u.length;s++)u[s].applyToLocalView(o)})},t.prototype.pn=function(e,n){var r=this;return this.Ue.getEntries(e,n).next(function(o){return r.En(e,o).next(function(){return o})})},t.prototype.En=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,n).next(function(o){return r.gn(n,o)})},t.prototype.getDocumentsMatchingQuery=function(e,n,r){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.Tn(e,n.path):Qm(n)?this.In(e,n,r):this.An(e,n,r)},t.prototype.Tn=function(e,n){return this.mn(e,new de(n)).next(function(r){var o=ev();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})},t.prototype.In=function(e,n,r){var o=this,s=n.collectionGroup,u=ev();return this.Ut.getCollectionParents(e,s).next(function(c){return te.forEach(c,function(f){var p=function(d,g){return new jr(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,f.child(s));return o.An(e,p,r).next(function(d){d.forEach(function(g,v){u=u.insert(g,v)})})}).next(function(){return u})})},t.prototype.An=function(e,n,r){var o,s,u=this;return this.Ue.getDocumentsMatchingQuery(e,n,r).next(function(c){return o=c,u._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(c){return s=c,u.Rn(e,s,o).next(function(f){o=f;for(var p=0,d=s;p<d.length;p++)for(var g=d[p],v=0,y=g.mutations;v<y.length;v++){var b=y[v],T=b.key,S=o.get(T);S==null&&(S=Ht.newInvalidDocument(T),o=o.insert(T,S)),Jm(b,S,g.localWriteTime),S.isFoundDocument()||(o=o.remove(T))}})}).next(function(){return o.forEach(function(c,f){iu(n,f)||(o=o.remove(c))}),o})},t.prototype.Rn=function(e,n,r){for(var o=et(),s=0,u=n;s<u.length;s++)for(var c=0,f=u[s].mutations;c<f.length;c++){var p=f[c];p instanceof ai&&r.get(p.key)===null&&(o=o.add(p.key))}var d=r;return this.Ue.getEntries(e,o).next(function(g){return g.forEach(function(v,y){y.isFoundDocument()&&(d=d.insert(v,y))}),d})},t}(),ZM=function(){function t(e,n,r,o){this.targetId=e,this.fromCache=n,this.bn=r,this.vn=o}return t.Pn=function(e,n){for(var r=et(),o=et(),s=0,u=n.docChanges;s<u.length;s++){var c=u[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}}return new t(e,n.fromCache,r,o)},t}(),mT=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,n,r,o){var s=this;return function(u){return u.filters.length===0&&u.limit===null&&u.startAt==null&&u.endAt==null&&(u.explicitOrderBy.length===0||u.explicitOrderBy.length===1&&u.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(Re.min())?this.Dn(e,n):this.Sn.pn(e,o).next(function(u){var c=s.Cn(n,u);return(Fl(n)||Ul(n))&&s.Nn(n.limitType,c,o,r)?s.Dn(e,n):(qm()<=He.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xm(n)),s.Sn.getDocumentsMatchingQuery(e,n,r).next(function(f){return c.forEach(function(p){f=f.insert(p.key,p)}),f}))})},t.prototype.Cn=function(e,n){var r=new jt(cI(e));return n.forEach(function(o,s){iu(e,s)&&(r=r.add(s))}),r},t.prototype.Nn=function(e,n,r,o){if(r.size!==n.size)return!0;var s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)},t.prototype.Dn=function(e,n){return qm()<=He.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Xm(n)),this.Sn.getDocumentsMatchingQuery(e,n,Re.min())},t}(),eP=function(){function t(e,n,r,o){this.persistence=e,this.xn=n,this.R=o,this.Fn=new en(qe),this.kn=new Es(function(s){return tu(s)},Ll),this.$n=Re.min(),this._n=e.getMutationQueue(r),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new pT(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return e.collect(r,n.Fn)})},t}();function vT(t,e,n,r){return new eP(t,e,n,r)}function gT(t,e){return z(this,void 0,void 0,function(){var n,r,o,s;return H(this,function(u){switch(u.label){case 0:return n=oe(t),r=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var f;return n._n.getAllMutationBatches(c).next(function(p){return f=p,r=n.persistence.getMutationQueue(e),o=new pT(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(c)}).next(function(p){for(var d=[],g=[],v=et(),y=0,b=f;y<b.length;y++){var T=b[y];d.push(T.batchId);for(var S=0,A=T.mutations;S<A.length;S++){var V=A[S];v=v.add(V.key)}}for(var q=0,L=p;q<L.length;q++){var O=L[q];g.push(O.batchId);for(var R=0,K=O.mutations;R<K.length;R++){var ie=K[R];v=v.add(ie.key)}}return o.pn(c,v).next(function(Y){return{Ln:Y,removedBatchIds:d,addedBatchIds:g}})})})];case 1:return s=u.sent(),[2,(n._n=r,n.Mn=o,n.xn.Vn(n.Mn),s)]}})})}function tP(t,e){var n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var o=e.batch.keys(),s=n.On.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){var d=f.batch,g=d.keys(),v=te.resolve();return g.forEach(function(y){v=v.next(function(){return p.getEntry(c,y)}).next(function(b){var T=f.docVersions.get(y);Ee(T!==null),b.version.compareTo(T)<0&&(d.applyToRemoteDocument(b,f),b.isValidDocument()&&p.addEntry(b,f.commitVersion))})}),v.next(function(){return u._n.removeMutationBatch(c,d)})}(n,r,e,s).next(function(){return s.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,o)})})}function yT(t){var e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return e.qe.getLastRemoteSnapshotVersion(n)})}function nP(t,e){var n=oe(t),r=e.snapshotVersion,o=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var u=n.On.newChangeBuffer({trackRemovals:!0});o=n.Fn;var c=[];e.targetChanges.forEach(function(d,g){var v=o.get(g);if(v){c.push(n.qe.removeMatchingKeys(s,d.removedDocuments,g).next(function(){return n.qe.addMatchingKeys(s,d.addedDocuments,g)}));var y=d.resumeToken;if(y.approximateByteSize()>0){var b=v.withResumeToken(y,r).withSequenceNumber(s.currentSequenceNumber);o=o.insert(g,b),function(T,S,A){return Ee(S.resumeToken.approximateByteSize()>0),T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,b,d)&&c.push(n.qe.updateTargetData(s,b))}}});var f=Xn();if(e.documentUpdates.forEach(function(d,g){e.resolvedLimboDocuments.has(d)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),c.push(_T(s,u,e.documentUpdates,r,void 0).next(function(d){f=d})),!r.isEqual(Re.min())){var p=n.qe.getLastRemoteSnapshotVersion(s).next(function(d){return n.qe.setTargetsMetadata(s,s.currentSequenceNumber,r)});c.push(p)}return te.waitFor(c).next(function(){return u.apply(s)}).next(function(){return n.Mn.En(s,f)}).next(function(){return f})}).then(function(s){return n.Fn=o,s})}function _T(t,e,n,r,o){var s=et();return n.forEach(function(u){return s=s.add(u)}),e.getEntries(t,s).next(function(u){var c=Xn();return n.forEach(function(f,p){var d=u.get(f),g=(o==null?void 0:o.get(f))||r;p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(f,g),c=c.insert(f,p)):!d.isValidDocument()||p.version.compareTo(d.version)>0||p.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(p,g),c=c.insert(f,p)):re("LocalStore","Ignoring outdated watch update for ",f,". Current version:",d.version," Watch version:",p.version)}),c})}function rP(t,e){var n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return e===void 0&&(e=-1),n._n.getNextMutationBatchAfterBatchId(r,e)})}function ks(t,e){var n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var o;return n.qe.getTargetData(r,e).next(function(s){return s?(o=s,te.resolve(o)):n.qe.allocateTargetId(r).next(function(u){return o=new zl(e,u,0,r.currentSequenceNumber),n.qe.addTargetData(r,o).next(function(){return o})})})}).then(function(r){var o=n.Fn.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(r.targetId,r),n.kn.set(e,r.targetId)),r})}function xs(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u;return H(this,function(c){switch(c.label){case 0:r=oe(t),o=r.Fn.get(e),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(f){return r.persistence.referenceDelegate.removeTarget(f,o)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!uo(u=c.sent()))throw u;return re("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(o.target),[2]}})})}function ef(t,e,n){var r=oe(t),o=Re.min(),s=et();return r.persistence.runTransaction("Execute query","readonly",function(u){return function(c,f,p){var d=oe(c),g=d.kn.get(p);return g!==void 0?te.resolve(d.Fn.get(g)):d.qe.getTargetData(f,p)}(r,u,Qn(e)).next(function(c){if(c)return o=c.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(u,c.targetId).next(function(f){s=f})}).next(function(){return r.xn.getDocumentsMatchingQuery(u,e,n?o:Re.min(),n?s:et())}).next(function(c){return{documents:c,Bn:s}})})}function wT(t,e){var n=oe(t),r=oe(n.qe),o=n.Fn.get(e);return o?Promise.resolve(o.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.lt(s,e).next(function(u){return u?u.target:null})})}function bT(t){var e=oe(t);return e.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,o,s){var u=oe(r),c=Xn(),f=uv(s),p=hi(o),d=IDBKeyRange.lowerBound(f,!0);return p.$t({index:_t.readTimeIndex,range:d},function(g,v){var y=av(u.R,v);c=c.insert(y.key,y),f=v.readTime}).next(function(){return{wn:c,readTime:eT(f)}})}(e.On,n,e.$n)}).then(function(n){var r=n.wn,o=n.readTime;return e.$n=o,r})}function iP(t){return z(this,void 0,void 0,function(){var e;return H(this,function(n){return[2,(e=oe(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(o){var s=hi(o),u=Re.min();return s.$t({index:_t.readTimeIndex,reverse:!0},function(c,f,p){f.readTime&&(u=eT(f.readTime)),p.done()}).next(function(){return u})}(r)}).then(function(r){e.$n=r})]})})}function oP(t,e,n,r){return z(this,void 0,void 0,function(){var o,s,u,c,f,p,d,g,v,y;return H(this,function(b){switch(b.label){case 0:for(o=oe(t),s=et(),u=Xn(),c=kI(),f=0,p=n;f<p.length;f++)d=p[f],g=e.qn(d.metadata.name),d.document&&(s=s.add(g)),u=u.insert(g,e.Un(d)),c=c.insert(g,e.Kn(d.metadata.readTime));return v=o.On.newChangeBuffer({trackRemovals:!0}),[4,ks(o,function(T){return Qn(fs(ze.fromString("__bundle__/docs/"+T)))}(r))];case 1:return y=b.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",function(T){return _T(T,v,u,Re.min(),c).next(function(S){return v.apply(T),S}).next(function(S){return o.qe.removeMatchingKeysForTargetId(T,y.targetId).next(function(){return o.qe.addMatchingKeys(T,s,y.targetId)}).next(function(){return o.Mn.En(T,S)}).next(function(){return S})})})]}})})}function sP(t,e,n){return n===void 0&&(n=et()),z(this,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:return[4,ks(t,Qn(cv(e.bundledQuery)))];case 1:return r=s.sent(),[2,(o=oe(t)).persistence.runTransaction("Save named query","readwrite",function(u){var c=Kt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Ke.saveNamedQuery(u,e);var f=r.withResumeToken(pn.EMPTY_BYTE_STRING,c);return o.Fn=o.Fn.insert(f.targetId,f),o.qe.updateTargetData(u,f).next(function(){return o.qe.removeMatchingKeysForTargetId(u,r.targetId)}).next(function(){return o.qe.addMatchingKeys(u,n,r.targetId)}).next(function(){return o.Ke.saveNamedQuery(u,e)})})]}})})}var aP=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,n){return te.resolve(this.Qn.get(n))},t.prototype.saveBundleMetadata=function(e,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:Kt(r.createTime)}),te.resolve()},t.prototype.getNamedQuery=function(e,n){return te.resolve(this.jn.get(n))},t.prototype.saveNamedQuery=function(e,n){return this.jn.set(n.name,function(r){return{name:r.name,query:cv(r.bundledQuery),readTime:Kt(r.readTime)}}(n)),te.resolve()},t}(),dv=function(){function t(){this.Wn=new jt(qt.Gn),this.zn=new jt(qt.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,n){var r=new qt(e,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},t.prototype.Jn=function(e,n){var r=this;e.forEach(function(o){return r.addReference(o,n)})},t.prototype.removeReference=function(e,n){this.Yn(new qt(e,n))},t.prototype.Xn=function(e,n){var r=this;e.forEach(function(o){return r.removeReference(o,n)})},t.prototype.Zn=function(e){var n=this,r=new de(new ze([])),o=new qt(r,e),s=new qt(r,e+1),u=[];return this.zn.forEachInRange([o,s],function(c){n.Yn(c),u.push(c.key)}),u},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(n){return e.Yn(n)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var n=new de(new ze([])),r=new qt(n,e),o=new qt(n,e+1),s=et();return this.zn.forEachInRange([r,o],function(u){s=s.add(u.key)}),s},t.prototype.containsKey=function(e){var n=new qt(e,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)},t}(),qt=function(){function t(e,n){this.key=e,this.ns=n}return t.Gn=function(e,n){return de.comparator(e.key,n.key)||qe(e.ns,n.ns)},t.Hn=function(e,n){return qe(e.ns,n.ns)||de.comparator(e.key,n.key)},t}(),uP=function(){function t(e,n){this.Ut=e,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new jt(qt.Gn)}return t.prototype.checkEmpty=function(e){return te.resolve(this._n.length===0)},t.prototype.addMutationBatch=function(e,n,r,o){var s=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var u=new sv(s,n,r,o);this._n.push(u);for(var c=0,f=o;c<f.length;c++){var p=f[c];this.rs=this.rs.add(new qt(p.key,s)),this.Ut.addToCollectionParentIndex(e,p.key.path.popLast())}return te.resolve(u)},t.prototype.lookupMutationBatch=function(e,n){return te.resolve(this.os(n))},t.prototype.getNextMutationBatchAfterBatchId=function(e,n){var r=n+1,o=this.cs(r),s=o<0?0:o;return te.resolve(this._n.length>s?this._n[s]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return te.resolve(this._n.length===0?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return te.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,o=new qt(n,0),s=new qt(n,Number.POSITIVE_INFINITY),u=[];return this.rs.forEachInRange([o,s],function(c){var f=r.os(c.ns);u.push(f)}),te.resolve(u)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,n){var r=this,o=new jt(qe);return n.forEach(function(s){var u=new qt(s,0),c=new qt(s,Number.POSITIVE_INFINITY);r.rs.forEachInRange([u,c],function(f){o=o.add(f.ns)})}),te.resolve(this.us(o))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,n){var r=n.path,o=r.length+1,s=r;de.isDocumentKey(s)||(s=s.child(""));var u=new qt(new de(s),0),c=new jt(qe);return this.rs.forEachWhile(function(f){var p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(c=c.add(f.ns)),!0)},u),te.resolve(this.us(c))},t.prototype.us=function(e){var n=this,r=[];return e.forEach(function(o){var s=n.os(o);s!==null&&r.push(s)}),r},t.prototype.removeMutationBatch=function(e,n){var r=this;Ee(this.hs(n.batchId,"removed")===0),this._n.shift();var o=this.rs;return te.forEach(n.mutations,function(s){var u=new qt(s.key,n.batchId);return o=o.delete(u),r.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(function(){r.rs=o})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,n){var r=new qt(n,0),o=this.rs.firstAfterOrEqual(r);return te.resolve(n.isEqual(o&&o.key))},t.prototype.performConsistencyCheck=function(e){return this._n.length,te.resolve()},t.prototype.hs=function(e,n){return this.cs(e)},t.prototype.cs=function(e){return this._n.length===0?0:e-this._n[0].batchId},t.prototype.os=function(e){var n=this.cs(e);return n<0||n>=this._n.length?null:this._n[n]},t}(),cP=function(){function t(e,n){this.Ut=e,this.ls=n,this.docs=new en(de.comparator),this.size=0}return t.prototype.addEntry=function(e,n,r){var o=n.key,s=this.docs.get(o),u=s?s.size:0,c=this.ls(n);return this.docs=this.docs.insert(o,{document:n.clone(),size:c,readTime:r}),this.size+=c-u,this.Ut.addToCollectionParentIndex(e,o.path.popLast())},t.prototype.removeEntry=function(e){var n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)},t.prototype.getEntry=function(e,n){var r=this.docs.get(n);return te.resolve(r?r.document.clone():Ht.newInvalidDocument(n))},t.prototype.getEntries=function(e,n){var r=this,o=Xn();return n.forEach(function(s){var u=r.docs.get(s);o=o.insert(s,u?u.document.clone():Ht.newInvalidDocument(s))}),te.resolve(o)},t.prototype.getDocumentsMatchingQuery=function(e,n,r){for(var o=Xn(),s=new de(n.path.child("")),u=this.docs.getIteratorFrom(s);u.hasNext();){var c=u.getNext(),f=c.key,p=c.value,d=p.document,g=p.readTime;if(!n.path.isPrefixOf(f.path))break;g.compareTo(r)<=0||iu(n,d)&&(o=o.insert(d.key,d.clone()))}return te.resolve(o)},t.prototype.fs=function(e,n){return te.forEach(this.docs,function(r){return n(r)})},t.prototype.newChangeBuffer=function(e){return new lP(this)},t.prototype.getSize=function(e){return te.resolve(this.size)},t}(),lP=function(t){function e(n){var r=this;return(r=t.call(this)||this).Ie=n,r}return ge(e,t),e.prototype.applyChanges=function(n){var r=this,o=[];return this.changes.forEach(function(s,u){u.document.isValidDocument()?o.push(r.Ie.addEntry(n,u.document,r.getReadTime(s))):r.Ie.removeEntry(s)}),te.waitFor(o)},e.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},e.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},e}(fT),fP=function(){function t(e){this.persistence=e,this.ds=new Es(function(n){return tu(n)},Ll),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ws=0,this._s=new dv,this.targetCount=0,this.ys=Ql.Jt()}return t.prototype.forEachTarget=function(e,n){return this.ds.forEach(function(r,o){return n(o)}),te.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return te.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return te.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),te.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),te.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var n=e.targetId;n>this.highestTargetId&&(this.ys=new Ql(n),this.highestTargetId=n),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,n){return this.te(n),this.targetCount+=1,te.resolve()},t.prototype.updateTargetData=function(e,n){return this.te(n),te.resolve()},t.prototype.removeTargetData=function(e,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,te.resolve()},t.prototype.removeTargets=function(e,n,r){var o=this,s=0,u=[];return this.ds.forEach(function(c,f){f.sequenceNumber<=n&&r.get(f.targetId)===null&&(o.ds.delete(c),u.push(o.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),te.waitFor(u).next(function(){return s})},t.prototype.getTargetCount=function(e){return te.resolve(this.targetCount)},t.prototype.getTargetData=function(e,n){var r=this.ds.get(n)||null;return te.resolve(r)},t.prototype.addMatchingKeys=function(e,n,r){return this._s.Jn(n,r),te.resolve()},t.prototype.removeMatchingKeys=function(e,n,r){this._s.Xn(n,r);var o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(function(u){s.push(o.markPotentiallyOrphaned(e,u))}),te.waitFor(s)},t.prototype.removeMatchingKeysForTargetId=function(e,n){return this._s.Zn(n),te.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,n){var r=this._s.es(n);return te.resolve(r)},t.prototype.containsKey=function(e,n){return te.resolve(this._s.containsKey(n))},t}(),hP=function(){function t(e,n){var r=this;this.gs={},this.Ne=new Ln(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new fP(this),this.Ut=new UM,this.Ue=function(o,s){return new cP(o,function(u){return r.referenceDelegate.ps(u)})}(this.Ut),this.R=new JI(n),this.Ke=new aP(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var n=this.gs[e.toKey()];return n||(n=new uP(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=n),n},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,n,r){var o=this;re("MemoryPersistence","Starting transaction:",e);var s=new dP(this.Ne.next());return this.referenceDelegate.Es(),r(s).next(function(u){return o.referenceDelegate.Ts(s).next(function(){return u})}).toPromise().then(function(u){return s.raiseOnCommittedEvent(),u})},t.prototype.Is=function(e,n){return te.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(e,n)}}))},t}(),dP=function(t){function e(n){var r=this;return(r=t.call(this)||this).currentSequenceNumber=n,r}return ge(e,t),e}(zI),pP=function(){function t(e){this.persistence=e,this.As=new dv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw fe()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),te.resolve()},t.prototype.removeReference=function(e,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),te.resolve()},t.prototype.markPotentiallyOrphaned=function(e,n){return this.vs.add(n.toString()),te.resolve()},t.prototype.removeTarget=function(e,n){var r=this;this.As.Zn(n.targetId).forEach(function(s){return r.vs.add(s.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(function(s){s.forEach(function(u){return r.vs.add(u.toString())})}).next(function(){return o.removeTargetData(e,n)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.vs,function(o){var s=de.fromPath(o);return n.Ps(e,s).next(function(u){u||r.removeEntry(s)})}).next(function(){return n.Rs=null,r.apply(e)})},t.prototype.updateLimboDocument=function(e,n){var r=this;return this.Ps(e,n).next(function(o){o?r.vs.delete(n.toString()):r.vs.add(n.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,n){var r=this;return te.or([function(){return te.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(e,n)},function(){return r.persistence.Is(e,n)}])},t}(),Dn=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return this.uid!=null},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();function IT(t,e){return"firestore_clients_"+t+"_"+e}function TT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function pv(t,e){return"firestore_targets_"+t+"_"+e}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid");var ST=function(){function t(e,n,r,o){this.user=e,this.batchId=n,this.state=r,this.error=o}return t.Vs=function(e,n,r){var o,s=JSON.parse(r),u=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(o=new ee(s.error.code,s.error.message)),u?new t(e,n,s.state,o):(At("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),mv=function(){function t(e,n,r){this.targetId=e,this.state=n,this.error=r}return t.Vs=function(e,n){var r,o=JSON.parse(n),s=typeof o=="object"&&["not-current","current","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(r=new ee(o.error.code,o.error.message)),s?new t(e,o.state,r):(At("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),ET=function(){function t(e,n){this.clientId=e,this.activeTargetIds=n}return t.Vs=function(e,n){for(var r=JSON.parse(n),o=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Gl(),u=0;o&&u<r.activeTargetIds.length;++u)o=X1(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return o?new t(e,s):(At("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),mP=function(){function t(e,n){this.clientId=e,this.onlineState=n}return t.Vs=function(e){var n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(At("SharedClientState","Failed to parse online state: "+e),null)},t}(),vv=function(){function t(){this.activeTargetIds=Gl()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),gv=function(){function t(e,n,r,o,s){this.window=e,this.Se=n,this.persistenceKey=r,this.Ns=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new en(qe),this.started=!1,this.$s=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Os=IT(this.persistenceKey,this.Ns),this.Ms=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new vv),this.Ls=new RegExp("^firestore_clients_"+u+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+u+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+u+"_(\\d+)$"),this.Us=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.Ks=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return z(this,void 0,void 0,function(){var e,n,r,o,s,u,c,f,p,d,g,v=this;return H(this,function(y){switch(y.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=y.sent(),n=0,r=e;n<r.length;n++)(o=r[n])!==this.Ns&&(s=this.getItem(IT(this.persistenceKey,o)))&&(u=ET.Vs(o,s))&&(this.ks=this.ks.insert(u.clientId,u));for(this.Qs(),(c=this.storage.getItem(this.Us))&&(f=this.js(c))&&this.Ws(f),p=0,d=this.$s;p<d.length;p++)g=d[p],this.Fs(g);return this.$s=[],this.window.addEventListener("pagehide",function(){return v.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(e){var n=!1;return this.ks.forEach(function(r,o){o.activeTargetIds.has(e)&&(n=!0)}),n},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,n,r){this.zs(e,n,r),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var n="not-current";if(this.isActiveQueryTarget(e)){var r=this.storage.getItem(pv(this.persistenceKey,e));if(r){var o=mv.Vs(e,r);o&&(n=o.state)}}return this.Js.Ds(e),this.Qs(),n},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(pv(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,n,r){this.Ys(e,n,r)},t.prototype.handleUserChange=function(e,n,r){var o=this;n.forEach(function(s){o.Hs(s)}),this.currentUser=e,r.forEach(function(s){o.addPendingMutation(s)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var n=this.storage.getItem(e);return re("SharedClientState","READ",e,n),n},t.prototype.setItem=function(e,n){re("SharedClientState","SET",e,n),this.storage.setItem(e,n)},t.prototype.removeItem=function(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.Fs=function(e){var n=this,r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void At("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return z(n,void 0,void 0,function(){var o,s,u,c,f,p;return H(this,function(d){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return o=this.ti(r.key),[2,this.ei(o,null)];if(s=this.ni(r.key,r.newValue))return[2,this.ei(s.clientId,s)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(u=this.si(r.key,r.newValue)))return[2,this.ii(u)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(c=this.ri(r.key,r.newValue)))return[2,this.oi(c)]}else if(r.key===this.Us){if(r.newValue!==null&&(f=this.js(r.newValue)))return[2,this.Ws(f)]}else if(r.key===this.Ms)(p=function(g){var v=Ln.o;if(g!=null)try{var y=JSON.parse(g);Ee(typeof y=="number"),v=y}catch(b){At("SharedClientState","Failed to read sequence number from WebStorage",b)}return v}(r.newValue))!==Ln.o&&this.sequenceNumberHandler(p);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,n,r){var o=new ST(this.currentUser,e,n,r),s=TT(this.persistenceKey,this.currentUser,e);this.setItem(s,o.Ss())},t.prototype.Hs=function(e){var n=TT(this.persistenceKey,this.currentUser,e);this.removeItem(n)},t.prototype.Xs=function(e){var n={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(n))},t.prototype.Ys=function(e,n,r){var o=pv(this.persistenceKey,e),s=new mv(e,n,r);this.setItem(o,s.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var n=this.Ls.exec(e);return n?n[1]:null},t.prototype.ni=function(e,n){var r=this.ti(e);return ET.Vs(r,n)},t.prototype.si=function(e,n){var r=this.Bs.exec(e),o=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ST.Vs(new Dn(s),o,n)},t.prototype.ri=function(e,n){var r=this.qs.exec(e),o=Number(r[1]);return mv.Vs(o,n)},t.prototype.js=function(e){return mP.Vs(e)},t.prototype.ii=function(e){return z(this,void 0,void 0,function(){return H(this,function(n){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(re("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,n){var r=this,o=n?this.ks.insert(e,n):this.ks.remove(e),s=this.Gs(this.ks),u=this.Gs(o),c=[],f=[];return u.forEach(function(p){s.has(p)||c.push(p)}),s.forEach(function(p){u.has(p)||f.push(p)}),this.syncEngine.hi(c,f).then(function(){r.ks=o})},t.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var n=Gl();return e.forEach(function(r,o){n=n.unionWith(o.activeTargetIds)}),n},t}(),kT=function(){function t(){this.li=new vv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,n,r){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,n,r){this.fi[e]=n},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new vv,Promise.resolve()},t.prototype.handleUserChange=function(e,n,r){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),vP=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),xT=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(0)},t.prototype.yi=function(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,n=this.gi;e<n.length;e++)(0,n[e])(1)},t.yt=function(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yP=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),_P=function(t){function e(n){var r=this;return(r=t.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return ge(e,t),e.prototype.ki=function(n,r,o,s){return new Promise(function(u,c){var f=new W1;f.listenOnce(q1.COMPLETE,function(){try{switch(f.getLastErrorCode()){case Ol.NO_ERROR:var d=f.getResponseJson();re("Connection","XHR received:",JSON.stringify(d)),u(d);break;case Ol.TIMEOUT:re("Connection",'RPC "'+n+'" timed out'),c(new ee(B.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:var g=f.getStatus();if(re("Connection",'RPC "'+n+'" failed with status:',g,"response text:",f.getResponseText()),g>0){var v=f.getResponseJson().error;if(v&&v.status&&v.message){var y=function(b){var T=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(T)>=0?T:B.UNKNOWN}(v.status);c(new ee(y,v.message))}else c(new ee(B.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new ee(B.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{re("Connection",'RPC "'+n+'" completed.')}});var p=JSON.stringify(s);f.send(r,"POST",p,o,15)})},e.prototype.Oi=function(n,r){var o=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=F1(),u=U1(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new B1({})),this.Fi(c.initMessageHeaders,r),lb()||pb()||mb()||vb()||gb()||db()||(c.httpHeadersOverwriteParam="$httpHeaders");var f=o.join("");re("Connection","Creating WebChannel: "+f,c);var p=s.createWebChannel(f,c),d=!1,g=!1,v=new yP({Ei:function(b){g?re("Connection","Not sending because WebChannel is closed:",b):(d||(re("Connection","Opening WebChannel transport."),p.open(),d=!0),re("Connection","WebChannel sending:",b),p.send(b))},Ti:function(){return p.close()}}),y=function(b,T,S){b.listen(T,function(A){try{S(A)}catch(V){setTimeout(function(){throw V},0)}})};return y(p,Xa.EventType.OPEN,function(){g||re("Connection","WebChannel transport opened.")}),y(p,Xa.EventType.CLOSE,function(){g||(g=!0,re("Connection","WebChannel transport closed"),v.Vi())}),y(p,Xa.EventType.ERROR,function(b){g||(g=!0,Nl("Connection","WebChannel transport errored:",b),v.Vi(new ee(B.UNAVAILABLE,"The operation could not be completed")))}),y(p,Xa.EventType.MESSAGE,function(b){var T;if(!g){var S=b.data[0];Ee(!!S);var A=S,V=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(V){re("Connection","WebChannel received error:",V);var q=V.status,L=function(R){var K=Nt[R];if(K!==void 0)return SI(K)}(q),O=V.message;L===void 0&&(L=B.INTERNAL,O="Unknown error status: "+q+" with message "+V.message),g=!0,v.Vi(new ee(L,O)),p.close()}else re("Connection","WebChannel received:",S),v.Si(S)}}),y(u,V1.STAT_EVENT,function(b){b.stat===Um.PROXY?re("Connection","Detected buffering proxy"):b.stat===Um.NOPROXY&&re("Connection","Detected no buffering proxy")}),setTimeout(function(){v.Pi()},0),v},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.Di=n+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,n,r,o){var s=this.xi(e,n);re("RestConnection","Sending: ",s,r);var u={};return this.Fi(u,o),this.ki(e,s,u,r).then(function(c){return re("RestConnection","Received: ",c),c},function(c){throw Nl("RestConnection",e+" failed with error: ",c,"url: ",s,"request:",r),c})},t.prototype.$i=function(e,n,r,o){return this.Ni(e,n,r,o)},t.prototype.Fi=function(e,n){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(e[r]=n.authHeaders[r])},t.prototype.xi=function(e,n){var r=gP[e];return this.Di+"/v1/"+n+":"+r},t}());function DT(){return typeof window!="undefined"?window:null}function tf(){return typeof document!="undefined"?document:null}function nf(t){return new SM(t,!0)}var yv=function(){function t(e,n,r,o,s){r===void 0&&(r=1e3),o===void 0&&(o=1.5),s===void 0&&(s=6e4),this.Se=e,this.timerId=n,this.Mi=r,this.Li=o,this.Bi=s,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),o=Math.max(0,Date.now()-this.Ki),s=Math.max(0,r-o);s>0&&re("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+o+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,s,function(){return n.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),CT=function(){function t(e,n,r,o,s,u){this.Se=e,this.zi=r,this.Hi=o,this.Ji=s,this.listener=u,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new yv(e,n)}return t.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},t.prototype.er=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.nr()},t.prototype.stop=function(){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return z(this,void 0,void 0,function(){return H(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,n){return z(this,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(At(n.toString()),At("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===B.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(o){e.Yi===r&&e.lr(o)},function(o){n(function(){var s=new ee(B.UNKNOWN,"Fetching auth token failed: "+o.message);return e.dr(s)})})},t.prototype.lr=function(e){var n=this,r=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(o){r(function(){return n.dr(o)})}),this.stream.onMessage(function(o){r(function(){return n.onMessage(o)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return z(e,void 0,void 0,function(){return H(this,function(n){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return re("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===e?r():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),wP=function(t){function e(n,r,o,s,u){var c=this;return(c=t.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,o,u)||this).R=s,c}return ge(e,t),e.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},e.prototype.onMessage=function(n){this.Zi.reset();var r=function(s,u){var c;if("targetChange"in u){u.targetChange;var f=function(S){return S==="NO_CHANGE"?0:S==="ADD"?1:S==="REMOVE"?2:S==="CURRENT"?3:S==="RESET"?4:fe()}(u.targetChange.targetChangeType||"NO_CHANGE"),p=u.targetChange.targetIds||[],d=function(S,A){return S.I?(Ee(A===void 0||typeof A=="string"),pn.fromBase64String(A||"")):(Ee(A===void 0||A instanceof Uint8Array),pn.fromUint8Array(A||new Uint8Array))}(s,u.targetChange.resumeToken),g=(v=u.targetChange.cause)&&function(S){var A=S.code===void 0?B.UNKNOWN:SI(S.code);return new ee(A,S.message||"")}(v);c=new DI(f,p,d,g||null)}else if("documentChange"in u){u.documentChange,(f=u.documentChange).document,f.document.name,f.document.updateTime,p=_r(s,f.document.name),d=Kt(f.document.updateTime);var v=new jn({mapValue:{fields:f.document.fields}}),y=(g=Ht.newFoundDocument(p,d,v),f.targetIds||[]),b=f.removedTargetIds||[];c=new Hl(y,b,g.key,g)}else if("documentDelete"in u)u.documentDelete,(f=u.documentDelete).document,p=_r(s,f.document),d=f.readTime?Kt(f.readTime):Re.min(),v=Ht.newNoDocument(p,d),g=f.removedTargetIds||[],c=new Hl([],g,v.key,v);else if("documentRemove"in u)u.documentRemove,(f=u.documentRemove).document,p=_r(s,f.document),d=f.removedTargetIds||[],c=new Hl([],d,p,null);else{if(!("filter"in u))return fe();u.filter;var T=u.filter;T.targetId,f=T.count||0,p=new mM(f),d=T.targetId,c=new xI(d,p)}return c}(this.R,n),o=function(s){if(!("targetChange"in s))return Re.min();var u=s.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Kt(u.readTime):Re.min()}(n);return this.listener._r(r,o)},e.prototype.mr=function(n){var r={};r.database=lu(this.R),r.addTarget=function(s,u){var c,f=u.target;return(c=jl(f)?{documents:FI(s,f)}:{query:UI(s,f)}).targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=NI(s,u.resumeToken):u.snapshotVersion.compareTo(Re.min())>0&&(c.readTime=uu(s,u.snapshotVersion.toTimestamp())),c}(this.R,n);var o=function(s,u){var c=function(f,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fe()}}(0,u.purpose);return c==null?null:{"goog-listen-tags":c}}(this.R,n);o&&(r.labels=o),this.cr(r)},e.prototype.yr=function(n){var r={};r.database=lu(this.R),r.removeTarget=n,this.cr(r)},e}(CT),bP=function(t){function e(n,r,o,s,u){var c=this;return(c=t.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,o,u)||this).R=s,c.gr=!1,c}return ge(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(n){return this.Hi.Oi("Write",n)},e.prototype.onMessage=function(n){if(Ee(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(s,u){return s&&s.length>0?(Ee(u!==void 0),s.map(function(c){return function(f,p){var d=f.updateTime?Kt(f.updateTime):Kt(p);return d.isEqual(Re.min())&&(d=Kt(p)),new hM(d,f.transformResults||[])}(c,u)})):[]}(n.writeResults,n.commitTime),o=Kt(n.commitTime);return this.listener.Tr(o,r)}return Ee(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var n={};n.database=lu(this.R),this.cr(n)},e.prototype.Er=function(n){var r=this,o={streamToken:this.lastStreamToken,writes:n.map(function(s){return Kl(r.R,s)})};this.cr(o)},e}(CT),IP=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).credentials=n,s.Hi=r,s.R=o,s.Rr=!1,s}return ge(e,t),e.prototype.br=function(){if(this.Rr)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(n,r,o){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.Ni(n,r,o,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===B.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new ee(B.UNKNOWN,u.toString())})},e.prototype.$i=function(n,r,o){var s=this;return this.br(),this.credentials.getToken().then(function(u){return s.Hi.$i(n,r,o,u)}).catch(function(u){throw u.name==="FirebaseError"?(u.code===B.UNAUTHENTICATED&&s.credentials.invalidateToken(),u):new ee(B.UNKNOWN,u.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),TP=function(){function t(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.Fr(),this.vr=0,e==="Online"&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var n="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(At(n),this.Vr=!1):re("OnlineStateTracker",n)},t.prototype.Fr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},t}(),SP=function(t,e,n,r,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di(function(u){n.enqueueAndForget(function(){return z(s,void 0,void 0,function(){return H(this,function(c){switch(c.label){case 0:return di(this)?(re("RemoteStore","Restarting streams for network reachability change."),[4,function(f){return z(this,void 0,void 0,function(){var p;return H(this,function(d){switch(d.label){case 0:return(p=oe(f)).Or.add(4),[4,Ds(p)];case 1:return d.sent(),p.Br.set("Unknown"),p.Or.delete(4),[4,pu(p)];case 2:return d.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Br=new TP(n,r)};function pu(t){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:if(!di(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ds(t){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function rf(t,e){var n=oe(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),bv(n)?wv(n):As(n).er()&&_v(n,e))}function mu(t,e){var n=oe(t),r=As(n);n.$r.delete(e),r.er()&&AT(n,e),n.$r.size===0&&(r.er()?r.ir():di(n)&&n.Br.set("Unknown"))}function _v(t,e){t.qr.U(e.targetId),As(t).mr(e)}function AT(t,e){t.qr.U(e),As(t).yr(e)}function wv(t){t.qr=new bM({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),As(t).start(),t.Br.Sr()}function bv(t){return di(t)&&!As(t).tr()&&t.$r.size>0}function di(t){return oe(t).Or.size===0}function OT(t){t.qr=void 0}function EP(t){return z(this,void 0,void 0,function(){return H(this,function(e){return t.$r.forEach(function(n,r){_v(t,n)}),[2]})})}function kP(t,e){return z(this,void 0,void 0,function(){return H(this,function(n){return OT(t),bv(t)?(t.Br.Nr(e),wv(t)):t.Br.set("Unknown"),[2]})})}function xP(t,e,n){return z(this,void 0,void 0,function(){var r,o,s;return H(this,function(u){switch(u.label){case 0:if(t.Br.set("Online"),!(e instanceof DI&&e.state===2&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(c,f){return z(this,void 0,void 0,function(){var p,d,g,v;return H(this,function(y){switch(y.label){case 0:p=f.cause,d=0,g=f.targetIds,y.label=1;case 1:return d<g.length?(v=g[d],c.$r.has(v)?[4,c.remoteSyncer.rejectListen(v,p)]:[3,3]):[3,5];case 2:y.sent(),c.$r.delete(v),c.qr.removeTarget(v),y.label=3;case 3:y.label=4;case 4:return d++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,of(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Hl?t.qr.X(e):e instanceof xI?t.qr.rt(e):t.qr.et(e),n.isEqual(Re.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,yT(t.localStore)];case 8:return o=u.sent(),n.compareTo(o)>=0?[4,function(c,f){var p=c.qr.ut(f);return p.targetChanges.forEach(function(d,g){if(d.resumeToken.approximateByteSize()>0){var v=c.$r.get(g);v&&c.$r.set(g,v.withResumeToken(d.resumeToken,f))}}),p.targetMismatches.forEach(function(d){var g=c.$r.get(d);if(g){c.$r.set(d,g.withResumeToken(pn.EMPTY_BYTE_STRING,g.snapshotVersion)),AT(c,d);var v=new zl(g.target,d,1,g.sequenceNumber);_v(c,v)}}),c.remoteSyncer.applyRemoteEvent(p)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return re("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,of(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}})})}function of(t,e,n){return z(this,void 0,void 0,function(){var r=this;return H(this,function(o){switch(o.label){case 0:if(!uo(e))throw e;return t.Or.add(1),[4,Ds(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return yT(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return z(r,void 0,void 0,function(){return H(this,function(s){switch(s.label){case 0:return re("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),t.Or.delete(1),[4,pu(t)];case 2:return s.sent(),[2]}})})}),[2]}})})}function NT(t,e){return e().catch(function(n){return of(t,n,e)})}function Cs(t){return z(this,void 0,void 0,function(){var e,n,r,o,s;return H(this,function(u){switch(u.label){case 0:e=oe(t),n=pi(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,u.label=1;case 1:if(!function(c){return di(c)&&c.kr.length<10}(e))return[3,7];u.label=2;case 2:return u.trys.push([2,4,,6]),[4,rP(e.localStore,r)];case 3:return(o=u.sent())===null?(e.kr.length===0&&n.ir(),[3,7]):(r=o.batchId,function(c,f){c.kr.push(f);var p=pi(c);p.er()&&p.pr&&p.Er(f.mutations)}(e,o),[3,6]);case 4:return s=u.sent(),[4,of(e,s)];case 5:return u.sent(),[3,6];case 6:return[3,1];case 7:return RT(e)&&MT(e),[2]}})})}function RT(t){return di(t)&&!pi(t).tr()&&t.kr.length>0}function MT(t){pi(t).start()}function DP(t){return z(this,void 0,void 0,function(){return H(this,function(e){return pi(t).Ar(),[2]})})}function CP(t){return z(this,void 0,void 0,function(){var e,n,r,o;return H(this,function(s){for(e=pi(t),n=0,r=t.kr;n<r.length;n++)o=r[n],e.Er(o.mutations);return[2]})})}function AP(t,e,n){return z(this,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:return r=t.kr.shift(),o=$M.from(r,e,n),[4,NT(t,function(){return t.remoteSyncer.applySuccessfulWrite(o)})];case 1:return s.sent(),[4,Cs(t)];case 2:return s.sent(),[2]}})})}function OP(t,e){return z(this,void 0,void 0,function(){return H(this,function(n){switch(n.label){case 0:return e&&pi(t).pr?[4,function(r,o){return z(this,void 0,void 0,function(){var s,u;return H(this,function(c){switch(c.label){case 0:return TI(u=o.code)&&u!==B.ABORTED?(s=r.kr.shift(),pi(r).sr(),[4,NT(r,function(){return r.remoteSyncer.rejectFailedWrite(s.batchId,o)})]):[3,3];case 1:return c.sent(),[4,Cs(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return RT(t)&&MT(t),[2]}})})}function Iv(t,e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return n=oe(t),e?(n.Or.delete(2),[4,pu(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Ds(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function As(t){var e=this;return t.Ur||(t.Ur=function(n,r,o){var s=oe(n);return s.br(),new wP(r,s.Hi,s.credentials,s.R,o)}(t.datastore,t.asyncQueue,{Ii:EP.bind(null,t),Ri:kP.bind(null,t),_r:xP.bind(null,t)}),t.Mr.push(function(n){return z(e,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return n?(t.Ur.sr(),bv(t)?wv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:r.sent(),OT(t),r.label=3;case 3:return[2]}})})})),t.Ur}function pi(t){var e=this;return t.Kr||(t.Kr=function(n,r,o){var s=oe(n);return s.br(),new bP(r,s.Hi,s.credentials,s.R,o)}(t.datastore,t.asyncQueue,{Ii:DP.bind(null,t),Ri:OP.bind(null,t),Ir:CP.bind(null,t),Tr:AP.bind(null,t)}),t.Mr.push(function(n){return z(e,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return n?(t.Kr.sr(),[4,Cs(t)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:r.sent(),t.kr.length>0&&(re("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),r.label=4;case 4:return[2]}})})})),t.Kr}var NP=function(){function t(e,n,r,o,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return t.createAndSchedule=function(e,n,r,o,s){var u=new t(e,n,Date.now()+r,o,s);return u.start(r),u},t.prototype.start=function(e){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.timerHandle!==null?(e.clearTimeout(),e.op().then(function(n){return e.deferred.resolve(n)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Os(t,e){if(At("AsyncQueue",e+": "+t),uo(t))return new ee(B.UNAVAILABLE,e+": "+t);throw t}var PT=function(){function t(e){this.comparator=e?function(n,r){return e(n,r)||de.comparator(n.key,r.key)}:function(n,r){return de.comparator(n.key,r.key)},this.keyedMap=ev(),this.sortedSet=new en(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return this.keyedMap.get(e)!=null},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(n,r){return e(n),!1})},t.prototype.add=function(e){var n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))},t.prototype.delete=function(e){var n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(n){e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),LT=function(){function t(){this.Qr=new en(de.comparator)}return t.prototype.track=function(e){var n=e.doc.key,r=this.Qr.get(n);r?e.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,e):e.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Qr=this.Qr.remove(n):e.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:e.doc}):fe():this.Qr=this.Qr.insert(n,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(n,r){e.push(r)}),e},t}(),sf=function(){function t(e,n,r,o,s,u,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=f}return t.fromInitialDocuments=function(e,n,r,o){var s=[];return n.forEach(function(u){s.push({type:0,doc:u})}),new t(e,n,PT.emptySet(n),s,r,o,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0},t}(),RP=function(){this.Wr=void 0,this.listeners=[]},MP=function(){this.queries=new Es(function(t){return uI(t)},ru),this.onlineState="Unknown",this.Gr=new Set};function Tv(t,e){return z(this,void 0,void 0,function(){var n,r,o,s,u,c,f;return H(this,function(p){switch(p.label){case 0:if(n=oe(t),r=e.query,o=!1,(s=n.queries.get(r))||(o=!0,s=new RP),!o)return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),u=s,[4,n.onListen(r)];case 2:return u.Wr=p.sent(),[3,4];case 3:return c=p.sent(),f=Os(c,"Initialization of query '"+Xm(e.query)+"' failed"),[2,void e.onError(f)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Ev(n),[2]}})})}function Sv(t,e){return z(this,void 0,void 0,function(){var n,r,o,s,u;return H(this,function(c){return n=oe(t),r=e.query,o=!1,(s=n.queries.get(r))&&(u=s.listeners.indexOf(e))>=0&&(s.listeners.splice(u,1),o=s.listeners.length===0),o?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function PP(t,e){for(var n=oe(t),r=!1,o=0,s=e;o<s.length;o++){var u=s[o],c=u.query,f=n.queries.get(c);if(f){for(var p=0,d=f.listeners;p<d.length;p++)d[p].Hr(u)&&(r=!0);f.Wr=u}}r&&Ev(n)}function LP(t,e,n){var r=oe(t),o=r.queries.get(e);if(o)for(var s=0,u=o.listeners;s<u.length;s++)u[s].onError(n);r.queries.delete(e)}function Ev(t){t.Gr.forEach(function(e){e.next()})}var kv=function(){function t(e,n,r){this.query=e,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var n=[],r=0,o=e.docChanges;r<o.length;r++){var s=o[r];s.type!==3&&n.push(s)}e=new sf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var u=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),u=!0):this.eo(e,this.onlineState)&&(this.no(e),u=!0),this.Xr=e,u},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),n=!0),n},t.prototype.eo=function(e,n){if(!e.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||e.docs.isEmpty()&&n!=="Offline")},t.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},t.prototype.no=function(e){e=sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}(),jP=function(){function t(e,n){this.payload=e,this.byteLength=n}return t.prototype.io=function(){return"metadata"in this.payload},t}(),jT=function(){function t(e){this.R=e}return t.prototype.qn=function(e){return _r(this.R,e)},t.prototype.Un=function(e){return e.metadata.exists?jI(this.R,e.document,!1):Ht.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},t.prototype.Kn=function(e){return Kt(e)},t}(),UU=function(){function t(e,n,r){this.ro=e,this.localStore=n,this.R=r,this.queries=[],this.documents=[],this.progress=$P(e)}return t.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var n=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},t.prototype.co=function(e){for(var n=new Map,r=new jT(this.R),o=0,s=e;o<s.length;o++){var u=s[o];if(u.metadata.queries)for(var c=r.qn(u.metadata.name),f=0,p=u.metadata.queries;f<p.length;f++){var d=p[f],g=(n.get(d)||et()).add(c);n.set(d,g)}}return n},t.prototype.complete=function(){return z(this,void 0,void 0,function(){var e,n,r,o,s;return H(this,function(u){switch(u.label){case 0:return[4,oP(this.localStore,new jT(this.R),this.documents,this.ro.id)];case 1:e=u.sent(),n=this.co(this.documents),r=0,o=this.queries,u.label=2;case 2:return r<o.length?(s=o[r],[4,sP(this.localStore,s,n.get(s.name))]):[3,5];case 3:u.sent(),u.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new JM(Object.assign({},this.progress),e))]}})})},t}();function $P(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var $T=function(t){this.key=t},FT=function(t){this.key=t},UT=function(){function t(e,n){this.query=e,this.uo=n,this.ao=null,this.current=!1,this.ho=et(),this.mutatedKeys=et(),this.lo=cI(e),this.fo=new PT(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,n){var r=this,o=n?n.mo:new LT,s=n?n.fo:this.fo,u=n?n.mutatedKeys:this.mutatedKeys,c=s,f=!1,p=Fl(this.query)&&s.size===this.query.limit?s.last():null,d=Ul(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(function(v,y){var b=s.get(v),T=iu(r.query,y)?y:null,S=!!b&&r.mutatedKeys.has(b.key),A=!!T&&(T.hasLocalMutations||r.mutatedKeys.has(T.key)&&T.hasCommittedMutations),V=!1;b&&T?b.data.isEqual(T.data)?S!==A&&(o.track({type:3,doc:T}),V=!0):r.yo(b,T)||(o.track({type:2,doc:T}),V=!0,(p&&r.lo(T,p)>0||d&&r.lo(T,d)<0)&&(f=!0)):!b&&T?(o.track({type:0,doc:T}),V=!0):b&&!T&&(o.track({type:1,doc:b}),V=!0,(p||d)&&(f=!0)),V&&(T?(c=c.add(T),u=A?u.add(v):u.delete(v)):(c=c.delete(v),u=u.delete(v)))}),Fl(this.query)||Ul(this.query))for(;c.size>this.query.limit;){var g=Fl(this.query)?c.last():c.first();c=c.delete(g.key),u=u.delete(g.key),o.track({type:1,doc:g})}return{fo:c,mo:o,Nn:f,mutatedKeys:u}},t.prototype.yo=function(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},t.prototype.applyChanges=function(e,n,r){var o=this,s=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var u=e.mo.jr();u.sort(function(d,g){return function(v,y){var b=function(T){switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return b(v)-b(y)}(d.type,g.type)||o.lo(d.doc,g.doc)}),this.po(r);var c=n?this.Eo():[],f=this.ho.size===0&&this.current?1:0,p=f!==this.ao;return this.ao=f,u.length!==0||p?{snapshot:new sf(this.query,e.fo,s,u,e.mutatedKeys,f===0,p,!1),To:c}:{To:c}},t.prototype.zr=function(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new LT,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var n=this;e&&(e.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),e.modifiedDocuments.forEach(function(r){}),e.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=et(),this.fo.forEach(function(o){e.Io(o.key)&&(e.ho=e.ho.add(o.key))});var r=[];return n.forEach(function(o){e.ho.has(o)||r.push(new FT(o))}),this.ho.forEach(function(o){n.has(o)||r.push(new $T(o))}),r},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=et();var n=this._o(e.documents);return this.applyChanges(n,!0)},t.prototype.Ro=function(){return sf.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},t}(),FP=function(t,e,n){this.query=t,this.targetId=e,this.view=n},UP=function(t){this.key=t,this.bo=!1},qP=function(){function t(e,n,r,o,s,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.vo={},this.Po=new Es(function(c){return uI(c)},ru),this.Vo=new Map,this.So=new Set,this.Do=new en(de.comparator),this.Co=new Map,this.No=new dv,this.xo={},this.Fo=new Map,this.ko=Ql.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),t}();function VP(t,e){return z(this,void 0,void 0,function(){var n,r,o,s,u,c;return H(this,function(f){switch(f.label){case 0:return n=Nv(t),(s=n.Po.get(e))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,ks(n.localStore,Qn(e))];case 2:return u=f.sent(),c=n.sharedClientState.addLocalQueryTarget(u.targetId),r=u.targetId,[4,xv(n,e,r,c==="current")];case 3:o=f.sent(),n.isPrimaryClient&&rf(n.remoteStore,u),f.label=4;case 4:return[2,o]}})})}function xv(t,e,n,r){return z(this,void 0,void 0,function(){var o,s,u,c,f,p;return H(this,function(d){switch(d.label){case 0:return t.Oo=function(g,v,y){return function(b,T,S,A){return z(this,void 0,void 0,function(){var V,q,L;return H(this,function(O){switch(O.label){case 0:return V=T.view._o(S),V.Nn?[4,ef(b.localStore,T.query,!1).then(function(R){var K=R.documents;return T.view._o(K,V)})]:[3,2];case 1:V=O.sent(),O.label=2;case 2:return q=A&&A.targetChanges.get(T.targetId),L=T.view.applyChanges(V,b.isPrimaryClient,q),[2,(Av(b,T.targetId,L.To),L.snapshot)]}})})}(t,g,v,y)},[4,ef(t.localStore,e,!0)];case 1:return o=d.sent(),s=new UT(e,o.Bn),u=s._o(o.documents),c=nv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),f=s.applyChanges(u,t.isPrimaryClient,c),Av(t,n,f.To),p=new FP(e,n,s),[2,(t.Po.set(e,p),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),f.snapshot)]}})})}function BP(t,e){return z(this,void 0,void 0,function(){var n,r,o;return H(this,function(s){switch(s.label){case 0:return n=oe(t),r=n.Po.get(e),(o=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,o.filter(function(u){return!ru(u,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,xs(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),mu(n.remoteStore,r.targetId),Ns(n,r.targetId)}).catch(lo)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Ns(n,r.targetId),[4,xs(n.localStore,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function WP(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u;return H(this,function(c){switch(c.label){case 0:r=Rv(t),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(f,p){var d,g=oe(f),v=dn.now(),y=p.reduce(function(b,T){return b.add(T.key)},et());return g.persistence.runTransaction("Locally write mutations","readwrite",function(b){return g.Mn.pn(b,y).next(function(T){d=T;for(var S=[],A=0,V=p;A<V.length;A++){var q=V[A],L=pM(q,d.get(q.key));L!=null&&S.push(new ai(q.key,L,tI(L.value.mapValue),Zt.exists(!0)))}return g._n.addMutationBatch(b,v,S,p)})}).then(function(b){return b.applyToLocalDocumentSet(d),{batchId:b.batchId,changes:d}})}(r.localStore,e)];case 2:return o=c.sent(),r.sharedClientState.addPendingMutation(o.batchId),function(f,p,d){var g=f.xo[f.currentUser.toKey()];g||(g=new en(qe)),g=g.insert(p,d),f.xo[f.currentUser.toKey()]=g}(r,o.batchId,n),[4,mi(r,o.changes)];case 3:return c.sent(),[4,Cs(r.remoteStore)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),u=Os(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}})})}function qT(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(o){switch(o.label){case 0:n=oe(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,nP(n.localStore,e)];case 2:return r=o.sent(),e.targetChanges.forEach(function(s,u){var c=n.Co.get(u);c&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.bo=!0:s.modifiedDocuments.size>0?Ee(c.bo):s.removedDocuments.size>0&&(Ee(c.bo),c.bo=!1))}),[4,mi(n,r,e)];case 3:return o.sent(),[3,6];case 4:return[4,lo(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function VT(t,e,n){var r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var o=[];r.Po.forEach(function(s,u){var c=u.view.zr(e);c.snapshot&&o.push(c.snapshot)}),function(s,u){var c=oe(s);c.onlineState=u;var f=!1;c.queries.forEach(function(p,d){for(var g=0,v=d.listeners;g<v.length;g++)v[g].zr(u)&&(f=!0)}),f&&Ev(c)}(r.eventManager,e),o.length&&r.vo._r(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function GP(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u,c,f;return H(this,function(p){switch(p.label){case 0:return(r=oe(t)).sharedClientState.updateQueryState(e,"rejected",n),o=r.Co.get(e),(s=o&&o.key)?(u=(u=new en(de.comparator)).insert(s,Ht.newNoDocument(s,Re.min())),c=et().add(s),f=new tv(Re.min(),new Map,new jt(qe),u,c),[4,qT(r,f)]):[3,2];case 1:return p.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),Ov(r),[3,4];case 2:return[4,xs(r.localStore,e,!1).then(function(){return Ns(r,e,n)}).catch(lo)];case 3:p.sent(),p.label=4;case 4:return[2]}})})}function HP(t,e){return z(this,void 0,void 0,function(){var n,r,o;return H(this,function(s){switch(s.label){case 0:n=oe(t),r=e.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,tP(n.localStore,e)];case 2:return o=s.sent(),Cv(n,r,null),Dv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,mi(n,o)];case 3:return s.sent(),[3,6];case 4:return[4,lo(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function KP(t,e,n){return z(this,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:r=oe(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(u,c){var f=oe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",function(p){var d;return f._n.lookupMutationBatch(p,c).next(function(g){return Ee(g!==null),d=g.keys(),f._n.removeMutationBatch(p,g)}).next(function(){return f._n.performConsistencyCheck(p)}).next(function(){return f.Mn.pn(p,d)})})}(r.localStore,e)];case 2:return o=s.sent(),Cv(r,e,n),Dv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,mi(r,o)];case 3:return s.sent(),[3,6];case 4:return[4,lo(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function zP(t,e){return z(this,void 0,void 0,function(){var n,r,o,s,u;return H(this,function(c){switch(c.label){case 0:di((n=oe(t)).remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(f){var p=oe(f);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(d){return p._n.getHighestUnacknowledgedBatchId(d)})}(n.localStore)];case 2:return(r=c.sent())===-1?[2,void e.resolve()]:((o=n.Fo.get(r)||[]).push(e),n.Fo.set(r,o),[3,4]);case 3:return s=c.sent(),u=Os(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}})})}function Dv(t,e){(t.Fo.get(e)||[]).forEach(function(n){n.resolve()}),t.Fo.delete(e)}function Cv(t,e,n){var r=oe(t),o=r.xo[r.currentUser.toKey()];if(o){var s=o.get(e);s&&(n?s.reject(n):s.resolve(),o=o.remove(e)),r.xo[r.currentUser.toKey()]=o}}function Ns(t,e,n){n===void 0&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,o=t.Vo.get(e);r<o.length;r++){var s=o[r];t.Po.delete(s),n&&t.vo.Mo(s,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(u){t.No.containsKey(u)||BT(t,u)})}function BT(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);n!==null&&(mu(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ov(t))}function Av(t,e,n){for(var r=0,o=n;r<o.length;r++){var s=o[r];s instanceof $T?(t.No.addReference(s.key,e),YP(t,s)):s instanceof FT?(re("SyncEngine","Document no longer in limbo: "+s.key),t.No.removeReference(s.key,e),t.No.containsKey(s.key)||BT(t,s.key)):fe()}}function YP(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(re("SyncEngine","New document in limbo: "+n),t.So.add(r),Ov(t))}function Ov(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new de(ze.fromString(e)),r=t.ko.next();t.Co.set(r,new UP(n)),t.Do=t.Do.insert(n,r),rf(t.remoteStore,new zl(Qn(fs(n.path)),r,2,Ln.o))}}function mi(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u;return H(this,function(c){switch(c.label){case 0:return r=oe(t),o=[],s=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(f,p){u.push(r.Oo(p,e,n).then(function(d){if(d){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,d.fromCache?"not-current":"current"),o.push(d);var g=ZM.Pn(p.targetId,d);s.push(g)}}))}),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(o),[4,function(f,p){return z(this,void 0,void 0,function(){var d,g,v,y,b,T,S,A,V;return H(this,function(q){switch(q.label){case 0:d=oe(f),q.label=1;case 1:return q.trys.push([1,3,,4]),[4,d.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(L){return te.forEach(p,function(O){return te.forEach(O.bn,function(R){return d.persistence.referenceDelegate.addReference(L,O.targetId,R)}).next(function(){return te.forEach(O.vn,function(R){return d.persistence.referenceDelegate.removeReference(L,O.targetId,R)})})})})];case 2:return q.sent(),[3,4];case 3:if(!uo(g=q.sent()))throw g;return re("LocalStore","Failed to update sequence numbers: "+g),[3,4];case 4:for(v=0,y=p;v<y.length;v++)b=y[v],T=b.targetId,b.fromCache||(S=d.Fn.get(T),A=S.snapshotVersion,V=S.withLastLimboFreeSnapshotVersion(A),d.Fn=d.Fn.insert(T,V));return[2]}})})}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function QP(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(o){switch(o.label){case 0:return(n=oe(t)).currentUser.isEqual(e)?[3,3]:(re("SyncEngine","User change. New user:",e.toKey()),[4,gT(n.localStore,e)]);case 1:return r=o.sent(),n.currentUser=e,function(s,u){s.Fo.forEach(function(c){c.forEach(function(f){f.reject(new ee(B.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,mi(n,r.Ln)];case 2:o.sent(),o.label=3;case 3:return[2]}})})}function XP(t,e){var n=oe(t),r=n.Co.get(e);if(r&&r.bo)return et().add(r.key);var o=et(),s=n.Vo.get(e);if(!s)return o;for(var u=0,c=s;u<c.length;u++){var f=c[u],p=n.Po.get(f);o=o.unionWith(p.view.wo)}return o}function JP(t,e){return z(this,void 0,void 0,function(){var n,r,o;return H(this,function(s){switch(s.label){case 0:return[4,ef((n=oe(t)).localStore,e.query,!0)];case 1:return r=s.sent(),o=e.view.Ao(r),[2,(n.isPrimaryClient&&Av(n,e.targetId,o.To),o)]}})})}function ZP(t){return z(this,void 0,void 0,function(){var e;return H(this,function(n){return[2,bT((e=oe(t)).localStore).then(function(r){return mi(e,r)})]})})}function eL(t,e,n,r){return z(this,void 0,void 0,function(){var o,s;return H(this,function(u){switch(u.label){case 0:return[4,function(c,f){var p=oe(c),d=oe(p._n);return p.persistence.runTransaction("Lookup mutation documents","readonly",function(g){return d.jt(g,f).next(function(v){return v?p.Mn.pn(g,v):te.resolve(null)})})}((o=oe(t)).localStore,e)];case 1:return(s=u.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Cs(o.remoteStore)];case 2:return u.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(Cv(o,e,r||null),Dv(o,e),function(c,f){oe(oe(c)._n).Gt(f)}(o.localStore,e)):fe(),u.label=4;case 4:return[4,mi(o,s)];case 5:return u.sent(),[3,7];case 6:re("SyncEngine","Cannot apply mutation batch with id: "+e),u.label=7;case 7:return[2]}})})}function tL(t,e){return z(this,void 0,void 0,function(){var n,r,o,s,u,c,f,p;return H(this,function(d){switch(d.label){case 0:return Nv(n=oe(t)),Rv(n),e!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,WT(n,r.toArray())]);case 1:return o=d.sent(),n.$o=!0,[4,Iv(n.remoteStore,!0)];case 2:for(d.sent(),s=0,u=o;s<u.length;s++)c=u[s],rf(n.remoteStore,c);return[3,7];case 3:return e!==!1||n.$o===!1?[3,7]:(f=[],p=Promise.resolve(),n.Vo.forEach(function(g,v){n.sharedClientState.isLocalQueryTarget(v)?f.push(v):p=p.then(function(){return Ns(n,v),xs(n.localStore,v,!0)}),mu(n.remoteStore,v)}),[4,p]);case 4:return d.sent(),[4,WT(n,f)];case 5:return d.sent(),function(g){var v=oe(g);v.Co.forEach(function(y,b){mu(v.remoteStore,b)}),v.No.ts(),v.Co=new Map,v.Do=new en(de.comparator)}(n),n.$o=!1,[4,Iv(n.remoteStore,!1)];case 6:d.sent(),d.label=7;case 7:return[2]}})})}function WT(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u,c,f,p,d,g,v,y,b,T,S;return H(this,function(A){switch(A.label){case 0:r=oe(t),o=[],s=[],u=0,c=e,A.label=1;case 1:return u<c.length?(f=c[u],p=void 0,(d=r.Vo.get(f))&&d.length!==0?[4,ks(r.localStore,Qn(d[0]))]:[3,7]):[3,13];case 2:p=A.sent(),g=0,v=d,A.label=3;case 3:return g<v.length?(y=v[g],b=r.Po.get(y),[4,JP(r,b)]):[3,6];case 4:(T=A.sent()).snapshot&&s.push(T.snapshot),A.label=5;case 5:return g++,[3,3];case 6:return[3,11];case 7:return[4,wT(r.localStore,f)];case 8:return S=A.sent(),[4,ks(r.localStore,S)];case 9:return p=A.sent(),[4,xv(r,GT(S),f,!1)];case 10:A.sent(),A.label=11;case 11:o.push(p),A.label=12;case 12:return u++,[3,1];case 13:return[2,(r.vo._r(s),o)]}})})}function GT(t){return sI(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function nL(t){var e=oe(t);return oe(oe(e.localStore).persistence).fn()}function rL(t,e,n,r){return z(this,void 0,void 0,function(){var o,s,u;return H(this,function(c){switch(c.label){case 0:return(o=oe(t)).$o?(re("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,bT(o.localStore)];case 3:return s=c.sent(),u=tv.createSynthesizedRemoteEventForCurrentChange(e,n==="current"),[4,mi(o,s,u)];case 4:return c.sent(),[3,8];case 5:return[4,xs(o.localStore,e,!0)];case 6:return c.sent(),Ns(o,e,r),[3,8];case 7:fe(),c.label=8;case 8:return[2]}})})}function iL(t,e,n){return z(this,void 0,void 0,function(){var r,o,s,u,c,f,p,d,g,v;return H(this,function(y){switch(y.label){case 0:if(!(r=Nv(t)).$o)return[3,10];o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],r.Vo.has(u)?(re("SyncEngine","Adding an already active target "+u),[3,5]):[4,wT(r.localStore,u)]):[3,6];case 2:return c=y.sent(),[4,ks(r.localStore,c)];case 3:return f=y.sent(),[4,xv(r,GT(c),f.targetId,!1)];case 4:y.sent(),rf(r.remoteStore,f),y.label=5;case 5:return o++,[3,1];case 6:p=function(b){return H(this,function(T){switch(T.label){case 0:return r.Vo.has(b)?[4,xs(r.localStore,b,!1).then(function(){mu(r.remoteStore,b),Ns(r,b)}).catch(lo)]:[3,2];case 1:T.sent(),T.label=2;case 2:return[2]}})},d=0,g=n,y.label=7;case 7:return d<g.length?(v=g[d],[5,p(v)]):[3,10];case 8:y.sent(),y.label=9;case 9:return d++,[3,7];case 10:return[2]}})})}function Nv(t){var e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GP.bind(null,e),e.vo._r=PP.bind(null,e.eventManager),e.vo.Mo=LP.bind(null,e.eventManager),e}function Rv(t){var e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KP.bind(null,e),e}var HT=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return z(this,void 0,void 0,function(){return H(this,function(n){switch(n.label){case 0:return this.R=nf(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return vT(this.persistence,new mT,e.initialUser,this.R)},t.prototype.qo=function(e){return new hP(pP.bs,this.R)},t.prototype.Bo=function(e){return new kT},t.prototype.terminate=function(){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),KT=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).Qo=n,s.cacheSizeBytes=r,s.forceOwnership=o,s.synchronizeTabs=!1,s}return ge(e,t),e.prototype.initialize=function(n){return z(this,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return r.sent(),[4,iP(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,n)];case 3:return r.sent(),[4,Rv(this.Qo.syncEngine)];case 4:return r.sent(),[4,Cs(this.Qo.remoteStore)];case 5:return r.sent(),[2]}})})},e.prototype.Ko=function(n){return vT(this.persistence,new mT,n.initialUser,this.R)},e.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new GM(r,n.asyncQueue)},e.prototype.qo=function(n){var r=hv(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),o=this.cacheSizeBytes!==void 0?br.withCacheSize(this.cacheSizeBytes):br.DEFAULT;return new XM(this.synchronizeTabs,r,n.clientId,o,n.asyncQueue,DT(),tf(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(n){return new kT},e}(HT),oL=function(t){function e(n,r){var o=this;return(o=t.call(this,n,r,!1)||this).Qo=n,o.cacheSizeBytes=r,o.synchronizeTabs=!0,o}return ge(e,t),e.prototype.initialize=function(n){return z(this,void 0,void 0,function(){var r,o=this;return H(this,function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof gv?(this.sharedClientState.syncEngine={ui:eL.bind(null,r),ai:rL.bind(null,r),hi:iL.bind(null,r),fn:nL.bind(null,r),ci:ZP.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.He(function(u){return z(o,void 0,void 0,function(){return H(this,function(c){switch(c.label){case 0:return[4,tL(this.Qo.syncEngine,u)];case 1:return c.sent(),this.gcScheduler&&(u&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):u||this.gcScheduler.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},e.prototype.Bo=function(n){var r=DT();if(!gv.yt(r))throw new ee(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var o=hv(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new gv(r,n.asyncQueue,o,n.clientId,n.initialUser)},e}(KT),Mv=function(){function t(){}return t.prototype.initialize=function(e,n){return z(this,void 0,void 0,function(){var r=this;return H(this,function(o){switch(o.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(s){return VT(r.syncEngine,s,1)},this.remoteStore.remoteSyncer.handleCredentialChange=QP.bind(null,this.syncEngine),[4,Iv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:o.sent(),o.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new MP},t.prototype.createDatastore=function(e){var n,r=nf(e.databaseInfo.databaseId),o=(n=e.databaseInfo,new _P(n));return function(s,u,c){return new IP(s,u,c)}(e.credentials,o,r)},t.prototype.createRemoteStore=function(e){var n,r,o,s,u,c=this;return n=this.localStore,r=this.datastore,o=e.asyncQueue,s=function(f){return VT(c.syncEngine,f,0)},u=xT.yt()?new xT:new vP,new SP(n,r,o,s,u)},t.prototype.createSyncEngine=function(e,n){return function(r,o,s,u,c,f,p){var d=new qP(r,o,s,u,c,f);return p&&(d.$o=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)},t.prototype.terminate=function(){return function(e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return n=oe(e),re("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,Ds(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();var af=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,n){var r=this;this.muted||setTimeout(function(){r.muted||e(n)},0)},t}(),qU=function(){function t(e,n){var r=this;this.Go=e,this.R=n,this.metadata=new mn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(o){o&&o.io()?r.metadata.resolve(o.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(o==null?void 0:o.payload)))},function(o){return r.metadata.reject(o)})}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return z(this,void 0,void 0,function(){return H(this,function(e){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return z(this,void 0,void 0,function(){var e,n,r,o;return H(this,function(s){switch(s.label){case 0:return[4,this.Jo()];case 1:return(e=s.sent())===null?[2,null]:(n=this.zo.decode(e),r=Number(n),isNaN(r)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(r)]);case 2:return o=s.sent(),[2,new jP(JSON.parse(o),e.length+r)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},t.prototype.Jo=function(){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},t.prototype.Xo=function(e){return z(this,void 0,void 0,function(){var n;return H(this,function(r){switch(r.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:r.sent()&&this.Yo("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),n)]}})})},t.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},t.prototype.tc=function(){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:return[4,this.Go.read()];case 1:return(e=r.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},t}(),sL=function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return z(this,void 0,void 0,function(){var n,r=this;return H(this,function(o){switch(o.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ee(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return z(this,void 0,void 0,function(){var c,f,p,d,g,v;return H(this,function(y){switch(y.label){case 0:return c=oe(s),f=lu(c.R)+"/documents",p={documents:u.map(function(b){return cu(c.R,b)})},[4,c.$i("BatchGetDocuments",f,p)];case 1:return d=y.sent(),g=new Map,d.forEach(function(b){var T=function(S,A){return"found"in A?function(V,q){Ee(!!q.found),q.found.name,q.found.updateTime;var L=_r(V,q.found.name),O=Kt(q.found.updateTime),R=new jn({mapValue:{fields:q.found.fields}});return Ht.newFoundDocument(L,O,R)}(S,A):"missing"in A?function(V,q){Ee(!!q.missing),Ee(!!q.readTime);var L=_r(V,q.missing),O=Kt(q.readTime);return Ht.newNoDocument(L,O)}(S,A):fe()}(c.R,b);g.set(T.key.toString(),T)}),v=[],[2,(u.forEach(function(b){var T=g.get(b.toString());Ee(!!T),v.push(T)}),v)]}})})}(this.datastore,e)];case 1:return[2,((n=o.sent()).forEach(function(s){return r.recordVersion(s)}),n)]}})})},t.prototype.set=function(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new au(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return z(this,void 0,void 0,function(){var e,n=this;return H(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(o){e.delete(o.key.toString())}),e.forEach(function(o,s){var u=de.fromPath(s);n.mutations.push(new Zm(u,n.precondition(u)))}),[4,function(o,s){return z(this,void 0,void 0,function(){var u,c,f;return H(this,function(p){switch(p.label){case 0:return u=oe(o),c=lu(u.R)+"/documents",f={writes:s.map(function(d){return Kl(u.R,d)})},[4,u.Ni("Commit",c,f)];case 1:return p.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw fe();n=Re.min()}var r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ee(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)},t.prototype.precondition=function(e){var n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?Zt.updateTime(n):Zt.none()},t.prototype.preconditionForUpdate=function(e){var n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new ee(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}(),aL=function(){function t(e,n,r,o){this.asyncQueue=e,this.datastore=n,this.updateFunction=r,this.deferred=o,this.ec=5,this.Zi=new yv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return z(e,void 0,void 0,function(){var n,r,o=this;return H(this,function(s){return n=new sL(this.datastore),(r=this.sc(n))&&r.then(function(u){o.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){o.deferred.resolve(u)}).catch(function(c){o.ic(c)})})}).catch(function(u){o.ic(u)}),[2]})})})},t.prototype.sc=function(e){try{var n=this.updateFunction(e);return!ro(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},t.prototype.ic=function(e){var n=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if(e.name==="FirebaseError"){var n=e.code;return n==="aborted"||n==="failed-precondition"||!TI(n)}return!1},t}(),uL=function(){function t(e,n,r){var o=this;this.credentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Dn.UNAUTHENTICATED,this.clientId=G1.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(s){return z(o,void 0,void 0,function(){return H(this,function(u){switch(u.label){case 0:return re("FirestoreClient","Received user=",s.uid),[4,this.credentialListener(s)];case 1:return u.sent(),this.user=s,[2]}})})})}return t.prototype.getConfiguration=function(){return z(this,void 0,void 0,function(){return H(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ee(B.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var n=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return z(e,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=s.sent(),o=Os(r,"Failed to shutdown persistence"),n.reject(o),[3,6];case 6:return[2]}})})}),n.promise},t}();function zT(t,e){return z(this,void 0,void 0,function(){var n,r,o=this;return H(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener(function(u){return z(o,void 0,void 0,function(){return H(this,function(c){switch(c.label){case 0:return r.isEqual(u)?[3,2]:[4,gT(e.localStore,u)];case 1:c.sent(),r=u,c.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function YT(t,e){return z(this,void 0,void 0,function(){var n,r;return H(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Pv(t)];case 1:return n=o.sent(),re("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.setCredentialChangeListener(function(s){return function(u,c){return z(this,void 0,void 0,function(){var f,p;return H(this,function(d){switch(d.label){case 0:return(f=oe(u)).asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials"),p=di(f),f.Or.add(3),[4,Ds(f)];case 1:return d.sent(),p&&f.Br.set("Unknown"),[4,f.remoteSyncer.handleCredentialChange(c)];case 2:return d.sent(),f.Or.delete(3),[4,pu(f)];case 3:return d.sent(),[2]}})})}(e.remoteStore,s)}),t.onlineComponents=e,[2]}})})}function Pv(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(re("FirestoreClient","Using default OfflineComponentProvider"),[4,zT(t,new HT)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function uf(t){return z(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(re("FirestoreClient","Using default OnlineComponentProvider"),[4,YT(t,new Mv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function QT(t){return Pv(t).then(function(e){return e.persistence})}function XT(t){return Pv(t).then(function(e){return e.localStore})}function JT(t){return uf(t).then(function(e){return e.remoteStore})}function ZT(t){return uf(t).then(function(e){return e.syncEngine})}function Rs(t){return z(this,void 0,void 0,function(){var e,n;return H(this,function(r){switch(r.label){case 0:return[4,uf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=VP.bind(null,e.syncEngine),n.onUnlisten=BP.bind(null,e.syncEngine),n)]}})})}function eS(t,e,n){var r=this;n===void 0&&(n={});var o=new mn;return t.asyncQueue.enqueueAndForget(function(){return z(r,void 0,void 0,function(){var s;return H(this,function(u){switch(u.label){case 0:return s=function(c,f,p,d,g){var v=new af({next:function(b){f.enqueueAndForget(function(){return Sv(c,y)});var T=b.docs.has(p);!T&&b.fromCache?g.reject(new ee(B.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&b.fromCache&&d&&d.source==="server"?g.reject(new ee(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),y=new kv(fs(p.path),v,{includeMetadataChanges:!0,so:!0});return Tv(c,y)},[4,Rs(t)];case 1:return[2,s.apply(void 0,[u.sent(),t.asyncQueue,e,n,o])]}})})}),o.promise}function tS(t,e,n){var r=this;n===void 0&&(n={});var o=new mn;return t.asyncQueue.enqueueAndForget(function(){return z(r,void 0,void 0,function(){var s;return H(this,function(u){switch(u.label){case 0:return s=function(c,f,p,d,g){var v=new af({next:function(b){f.enqueueAndForget(function(){return Sv(c,y)}),b.fromCache&&d.source==="server"?g.reject(new ee(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:function(b){return g.reject(b)}}),y=new kv(p,v,{includeMetadataChanges:!0,so:!0});return Tv(c,y)},[4,Rs(t)];case 1:return[2,s.apply(void 0,[u.sent(),t.asyncQueue,e,n,o])]}})})}),o.promise}var cL=function(t,e,n,r,o,s,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.useFetchStreams=c},cf=function(){function t(e,n){this.projectId=e,this.database=n||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),nS=new Map,rS=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},iS=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){this.changeListener=n,e.enqueueRetryable(function(){return n(Dn.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),lL=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,n){var r=this;this.changeListener=n,e.enqueueRetryable(function(){return n(r.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fL=function(){function t(e){var n=this;this.currentUser=Dn.UNAUTHENTICATED,this.oc=new mn,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(o){re("FirebaseCredentialsProvider","Auth detected"),n.auth=o,n.auth.addAuthTokenListener(n.uc)};e.onInit(function(o){return r(o)}),setTimeout(function(){if(!n.auth){var o=e.getImmediate({optional:!0});o?r(o):(re("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(o){return e.cc!==n?(re("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):o?(Ee(typeof o.accessToken=="string"),new rS(o.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,n){var r=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return z(r,void 0,void 0,function(){return H(this,function(o){switch(o.label){case 0:return[4,this.oc.promise];case 1:return o.sent(),[4,n(this.currentUser)];case 2:return o.sent(),this.changeListener=n,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Dn(e)},t}(),hL=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(e.Authorization=n),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),dL=function(){function t(e,n,r){this.hc=e,this.lc=n,this.fc=r}return t.prototype.getToken=function(){return Promise.resolve(new hL(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,n){e.enqueueRetryable(function(){return n(Dn.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Lv(t,e,n){if(!n)throw new ee(B.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function jv(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ee(B.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function oS(t,e,n,r){if(e===!0&&r===!0)throw new ee(B.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function sS(t){if(!de.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function aS(t){if(de.isDocumentKey(t))throw new ee(B.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":fe()}function Xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lf(t);throw new ee(B.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function uS(t,e){if(e<=0)throw new ee(B.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var cS=function(){function t(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),vu=function(){function t(e,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,e instanceof cf?(this._databaseId=e,this._credentials=new iS):(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ee(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cf(r.options.projectId)}(e),this._credentials=new fL(n))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),e.credentials!==void 0&&(this._credentials=function(n){if(!n)return new iS;switch(n.type){case"gapi":var r=n.client;return Ee(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new dL(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new ee(B.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return e=this,(n=nS.get(e))&&(re("ComponentProvider","Removing Datastore"),nS.delete(e),n.terminate()),Promise.resolve();var e,n},t}(),gt=function(){function t(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new vi(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),qn=function(){function t(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),vi=function(t){function e(n,r,o){var s=this;return(s=t.call(this,n,r,fs(o))||this)._path=o,s.type="collection",s}return ge(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new gt(this.firestore,null,new de(n))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(n){return new e(this.firestore,n,this._path)},e}(qn);function lS(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=Et(t),Lv("collection","path",e),t instanceof vu)return aS(n=ze.fromString.apply(ze,dt([e],r))),new vi(t,null,n);if(!(t instanceof gt||t instanceof vi))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return aS(n=ze.fromString.apply(ze,dt([t.path],r)).child(ze.fromString(e))),new vi(t.firestore,null,n)}function ff(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=Et(t),arguments.length===1&&(e=G1.u()),Lv("doc","path",e),t instanceof vu)return sS(n=ze.fromString.apply(ze,dt([e],r))),new gt(t,null,new de(n));if(!(t instanceof gt||t instanceof vi))throw new ee(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return sS(n=t._path.child(ze.fromString.apply(ze,dt([e],r)))),new gt(t.firestore,t instanceof vi?t.converter:null,new de(n))}function fS(t,e){return t=Et(t),e=Et(e),(t instanceof gt||t instanceof vi)&&(e instanceof gt||e instanceof vi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hS(t,e){return t=Et(t),e=Et(e),t instanceof qn&&e instanceof qn&&t.firestore===e.firestore&&ru(t._query,e._query)&&t.converter===e.converter}var pL=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new yv(this,"async_queue_retry"),this.Tc=function(){var r=tf();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),e.Zi.Gi()};var n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ic(),this.Ac(e)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var e=tf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(e){return this.Ic(),this._c?new Promise(function(n){}):this.Ac(e)},t.prototype.enqueueRetryable=function(e){var n=this;this.enqueueAndForget(function(){return n.wc.push(e),n.Rc()})},t.prototype.Rc=function(){return z(this,void 0,void 0,function(){var e,n=this;return H(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!uo(e=r.sent()))throw e;return re("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.Rc()}),r.label=5;case 5:return[2]}})})},t.prototype.Ac=function(e){var n=this,r=this.dc.then(function(){return n.gc=!0,e().catch(function(o){throw n.yc=o,n.gc=!1,At("INTERNAL UNHANDLED ERROR: ",function(s){var u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(o)),o}).then(function(o){return n.gc=!1,o})});return this.dc=r,r},t.prototype.enqueueAfterDelay=function(e,n,r){var o=this;this.Ic(),this.Ec.indexOf(e)>-1&&(n=0);var s=NP.createAndSchedule(this,e,n,r,function(u){return o.bc(u)});return this.mc.push(s),s},t.prototype.Ic=function(){this.yc&&fe()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return z(this,void 0,void 0,function(){var e;return H(this,function(n){switch(n.label){case 0:return[4,e=this.dc];case 1:n.sent(),n.label=2;case 2:if(e!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},t.prototype.Pc=function(e){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===e)return!0;return!1},t.prototype.Vc=function(e){var n=this;return this.vc().then(function(){n.mc.sort(function(u,c){return u.targetTimeMs-c.targetTimeMs});for(var r=0,o=n.mc;r<o.length;r++){var s=o[r];if(s.skipDelay(),e!=="all"&&s.timerId===e)break}return n.vc()})},t.prototype.Sc=function(e){this.Ec.push(e)},t.prototype.bc=function(e){var n=this.mc.indexOf(e);this.mc.splice(n,1)},t}();function Ms(t){return function(e,n){if(typeof e!="object"||e===null)return!1;for(var r=e,o=0,s=["next","error","complete"];o<s.length;o++){var u=s[o];if(u in r&&typeof r[u]=="function")return!0}return!1}(t)}var VU=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new mn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(e,n,r){this._progressObserver={next:e,error:n,complete:r}},t.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},t.prototype.then=function(e,n){return this._taskCompletionResolver.promise.then(e,n)},t.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},t.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},t.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},t}(),dS=-1,Rt=function(t){function e(n,r){var o=this;return(o=t.call(this,n,r)||this).type="firestore",o._queue=new pL,o._persistenceKey="name"in n?n.name:"[DEFAULT]",o}return ge(e,t),e.prototype._terminate=function(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()},e}(vu);function nn(t){return t._firestoreClient||pS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pS(t){var e,n=t._freezeSettings(),r=function(o,s,u,c){return new cL(o,s,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new uL(t._credentials,t._queue,r)}function mS(t,e,n){var r=this,o=new mn;return t.asyncQueue.enqueue(function(){return z(r,void 0,void 0,function(){var s;return H(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,zT(t,n)];case 1:return u.sent(),[4,YT(t,e)];case 2:return u.sent(),o.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===B.FAILED_PRECONDITION||c.code===B.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=u.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),o.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function vS(t){if(t._initialized||t._terminated)throw new ee(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ir=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0;r<e.length;++r)if(e[r].length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),fo=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(pn.fromBase64String(e))}catch(n){throw new ee(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(pn.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),ho=function(t){this._methodName=t},gu=function(){function t(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return qe(this._lat,e._lat)||qe(this._long,e._long)},t}(),mL=/^__.*__$/,vL=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return this.fieldMask!==null?new ai(e,this.data,this.fieldMask,n,this.fieldTransforms):new su(e,this.data,n,this.fieldTransforms)},t}(),gS=function(){function t(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}return t.prototype.toMutation=function(e,n){return new ai(e,this.data,this.fieldMask,n,this.fieldTransforms)},t}();function yS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}var _S=function(){function t(e,n,r,o,s,u){this.settings=e,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=o,s===void 0&&this.Dc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Nc({path:r,Fc:!1});return o.kc(e),o},t.prototype.$c=function(e){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Nc({path:r,Fc:!1});return o.Dc(),o},t.prototype.Oc=function(e){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(e){return df(e,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(e){return this.fieldMask.find(function(n){return e.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return e.isPrefixOf(n.field)})!==void 0},t.prototype.Dc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.kc(this.path.get(e))},t.prototype.kc=function(e){if(e.length===0)throw this.Mc("Document fields must not be empty");if(yS(this.Cc)&&mL.test(e))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),gL=function(){function t(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.R=r||nf(e)}return t.prototype.qc=function(e,n,r,o){return o===void 0&&(o=!1),new _S({Cc:e,methodName:n,Bc:r,path:ar.emptyPath(),Fc:!1,Lc:o},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function po(t){var e=t._freezeSettings(),n=nf(t._databaseId);return new gL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hf(t,e,n,r,o,s){s===void 0&&(s={});var u=t.qc(s.merge||s.mergeFields?2:0,e,n,o);qv("Data must be an object, but it was:",u,r);var c,f,p=IS(r,u);if(s.merge)c=new as(u.fieldMask),f=u.fieldTransforms;else if(s.mergeFields){for(var d=[],g=0,v=s.mergeFields;g<v.length;g++){var y=Vv(e,v[g],n);if(!u.contains(y))throw new ee(B.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");SS(d,y)||d.push(y)}c=new as(d),f=u.fieldTransforms.filter(function(b){return c.covers(b.field)})}else c=null,f=u.fieldTransforms;return new vL(new jn(p),c,f)}var $v=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype._toFieldTransform=function(n){if(n.Cc!==2)throw n.Cc===1?n.Mc(this._methodName+"() can only appear at the top level of your update data"):n.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},e.prototype.isEqual=function(n){return n instanceof e},e}(ho);function wS(t,e,n){return new _S({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var yL=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype._toFieldTransform=function(n){return new ou(n.path,new ds)},e.prototype.isEqual=function(n){return n instanceof e},e}(ho),_L=function(t){function e(n,r){var o=this;return(o=t.call(this,n)||this).Uc=r,o}return ge(e,t),e.prototype._toFieldTransform=function(n){var r=wS(this,n,!0),o=this.Uc.map(function(u){return mo(u,r)}),s=new oo(o);return new ou(n.path,s)},e.prototype.isEqual=function(n){return this===n},e}(ho),wL=function(t){function e(n,r){var o=this;return(o=t.call(this,n)||this).Uc=r,o}return ge(e,t),e.prototype._toFieldTransform=function(n){var r=wS(this,n,!0),o=this.Uc.map(function(u){return mo(u,r)}),s=new so(o);return new ou(n.path,s)},e.prototype.isEqual=function(n){return this===n},e}(ho),bL=function(t){function e(n,r){var o=this;return(o=t.call(this,n)||this).Kc=r,o}return ge(e,t),e.prototype._toFieldTransform=function(n){var r=new ps(n.R,hI(n.R,this.Kc));return new ou(n.path,r)},e.prototype.isEqual=function(n){return this===n},e}(ho);function Fv(t,e,n,r){var o=t.qc(1,e,n);qv("Data must be an object, but it was:",o,r);var s=[],u=jn.empty();no(r,function(f,p){var d=Bv(e,f,n);p=Et(p);var g=o.$c(d);if(p instanceof $v)s.push(d);else{var v=mo(p,g);v!=null&&(s.push(d),u.set(d,v))}});var c=new as(s);return new gS(u,c,o.fieldTransforms)}function Uv(t,e,n,r,o,s){var u=t.qc(1,e,n),c=[Vv(e,r,n)],f=[o];if(s.length%2!=0)throw new ee(B.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var p=0;p<s.length;p+=2)c.push(Vv(e,s[p])),f.push(s[p+1]);for(var d=[],g=jn.empty(),v=c.length-1;v>=0;--v)if(!SS(d,c[v])){var y=c[v],b=f[v];b=Et(b);var T=u.$c(y);if(b instanceof $v)d.push(y);else{var S=mo(b,T);S!=null&&(d.push(y),g.set(y,S))}}var A=new as(d);return new gS(g,A,u.fieldTransforms)}function bS(t,e,n,r){return r===void 0&&(r=!1),mo(n,t.qc(r?4:3,e))}function mo(t,e){if(TS(t=Et(t)))return qv("Unsupported field value:",e,t),IS(t,e);if(t instanceof ho)return function(n,r){if(!yS(r.Cc))throw r.Mc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Mc(n._methodName+"() is not currently supported inside arrays");var o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.Cc!==4)throw e.Mc("Nested arrays are not supported");return function(n,r){for(var o=[],s=0,u=0,c=n;u<c.length;u++){var f=mo(c[u],r.Oc(s));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,r){if((n=Et(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return hI(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var o=dn.fromDate(n);return{timestampValue:uu(r.R,o)}}if(n instanceof dn)return o=new dn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:uu(r.R,o)};if(n instanceof gu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof fo)return{bytesValue:NI(r.R,n._byteString)};if(n instanceof gt){o=r.databaseId;var s=n.firestore._databaseId;if(!s.isEqual(o))throw r.Mc("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+o.projectId+"/"+o.database);return{referenceValue:rv(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Mc("Unsupported field value: "+lf(n))}(t,e)}function IS(t,e){var n={};return z1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,function(r,o){var s=mo(o,e.xc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dn||t instanceof gu||t instanceof fo||t instanceof gt||t instanceof ho)}function qv(t,e,n){if(!TS(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){var r=lf(n);throw r==="an object"?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function Vv(t,e,n){if((e=Et(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return Bv(t,e);throw df("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var IL=new RegExp("[~\\*/\\[\\]]");function Bv(t,e,n){if(e.search(IL)>=0)throw df("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return new(Ir.bind.apply(Ir,dt([void 0],e.split("."))))()._internalPath}catch(r){throw df("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function df(t,e,n,r,o){var s=r&&!r.isEmpty(),u=o!==void 0,c="Function "+e+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var f="";return(s||u)&&(f+=" (found",s&&(f+=" in field "+r),u&&(f+=" in document "+o),f+=")"),new ee(B.INVALID_ARGUMENT,(c+=". ")+t+f)}function SS(t,e){return t.some(function(n){return n.isEqual(e)})}var yu=function(){function t(e,n,r,o,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=s}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return this._document!==null},t.prototype.data=function(){if(this._document){if(this._converter){var e=new TL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var n=this._document.data.field(pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}},t}(),TL=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(yu);function pf(t,e){return typeof e=="string"?Bv(t,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}var vo=function(){function t(e,n){this.hasPendingWrites=e,this.fromCache=n}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),Ur=function(t){function e(n,r,o,s,u,c){var f=this;return(f=t.call(this,n,r,o,s,c)||this)._firestore=n,f._firestoreImpl=n,f.metadata=u,f}return ge(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},e.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var o=this._document.data.field(pf("DocumentSnapshot.get",n));if(o!==null)return this._userDataWriter.convertValue(o,r.serverTimestamps)}},e}(yu),_u=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.data=function(n){return n===void 0&&(n={}),t.prototype.data.call(this,n)},e}(Ur),gi=function(){function t(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new vo(o.hasPendingWrites,o.fromCache),this.query=r}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(n){return e.push(n)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(o){e.call(n,new _u(r._firestore,r._userDataWriter,o.key,o,new vo(r._snapshot.mutatedKeys.has(o.key),r._snapshot.fromCache),r.query.converter))})},t.prototype.docChanges=function(e){e===void 0&&(e={});var n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){var s=0;return r._snapshot.docChanges.map(function(c){return{type:"added",doc:new _u(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}})}var u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(c){return o||c.type!==3}).map(function(c){var f=new _u(r._firestore,r._userDataWriter,c.doc.key,c.doc,new vo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),p=-1,d=-1;return c.type!==0&&(p=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(d=(u=u.add(c.doc)).indexOf(c.doc.key)),{type:SL(c.type),doc:f,oldIndex:p,newIndex:d}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},t}();function SL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}function ES(t,e){return t instanceof Ur&&e instanceof Ur?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof gi&&e instanceof gi&&t._firestore===e._firestore&&hS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function kS(t){if(Ul(t)&&t.explicitOrderBy.length===0)throw new ee(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wu=function(){};function yi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,o=e;r<o.length;r++){var s=o[r];t=s._apply(t)}return t}var EL=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).Qc=n,s.jc=r,s.Wc=o,s.type="where",s}return ge(e,t),e.prototype._apply=function(n){var r=po(n.firestore),o=function(s,u,c,f,p,d,g){var v;if(p.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(B.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+d+"' queries on FieldPath.documentId().");if(d==="in"||d==="not-in"){NS(g,d);for(var y=[],b=0,T=g;b<T.length;b++){var S=T[b];y.push(OS(f,s,S))}v={arrayValue:{values:y}}}else v=OS(f,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||NS(g,d),v=bS(c,"where",g,d==="in"||d==="not-in");var A=$n.create(p,d,v);return function(V,q){if(q.g()){var L=Ym(V);if(L!==null&&!L.isEqual(q.field))throw new ee(B.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+L.toString()+"' and '"+q.field.toString()+"'");var O=zm(V);O!==null&&RS(V,q.field,O)}var R=function(K,ie){for(var Y=0,ye=K.filters;Y<ye.length;Y++){var N=ye[Y];if(ie.indexOf(N.op)>=0)return N.op}return null}(V,function(K){switch(K){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(R!==null)throw R===q.op?new ee(B.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+q.op.toString()+"' filter."):new ee(B.INVALID_ARGUMENT,"Invalid query. You cannot use '"+q.op.toString()+"' filters with '"+R.toString()+"' filters.")}(s,A),A}(n._query,0,r,n.firestore._databaseId,this.Qc,this.jc,this.Wc);return new qn(n.firestore,n.converter,function(s,u){var c=s.filters.concat([u]);return new jr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n._query,o))},e}(wu),kL=function(t){function e(n,r){var o=this;return(o=t.call(this)||this).Qc=n,o.Gc=r,o.type="orderBy",o}return ge(e,t),e.prototype._apply=function(n){var r=function(o,s,u){if(o.startAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ee(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new ls(s,u);return function(f,p){if(zm(f)===null){var d=Ym(f);d!==null&&RS(f,d,p.field)}}(o,c),c}(n._query,this.Qc,this.Gc);return new qn(n.firestore,n.converter,function(o,s){var u=o.explicitOrderBy.concat([s]);return new jr(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(n._query,r))},e}(wu),xS=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).type=n,s.zc=r,s.Hc=o,s}return ge(e,t),e.prototype._apply=function(n){return new qn(n.firestore,n.converter,aI(n._query,this.zc,this.Hc))},e}(wu),DS=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).type=n,s.Jc=r,s.Yc=o,s}return ge(e,t),e.prototype._apply=function(n){var r=AS(n,this.type,this.Jc,this.Yc);return new qn(n.firestore,n.converter,function(o,s){return new jr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,s,o.endAt)}(n._query,r))},e}(wu),CS=function(t){function e(n,r,o){var s=this;return(s=t.call(this)||this).type=n,s.Jc=r,s.Yc=o,s}return ge(e,t),e.prototype._apply=function(n){var r=AS(n,this.type,this.Jc,this.Yc);return new qn(n.firestore,n.converter,function(o,s){return new jr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,s)}(n._query,r))},e}(wu);function AS(t,e,n,r){if(n[0]=Et(n[0]),n[0]instanceof yu)return function(s,u,c,f,p){if(!f)throw new ee(B.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var d=[],g=0,v=hs(s);g<v.length;g++){var y=v[g];if(y.field.isKeyField())d.push(Ml(u,f.key));else{var b=f.data.field(y.field);if(Bm(b))throw new ee(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){var T=y.field.canonicalString();throw new ee(B.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+T+"' (used as the orderBy) does not exist.")}d.push(b)}}return new nu(d,p)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=po(t.firestore);return function(s,u,c,f,p,d){var g=s.explicitOrderBy;if(p.length>g.length)throw new ee(B.INVALID_ARGUMENT,"Too many arguments provided to "+f+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var v=[],y=0;y<p.length;y++){var b=p[y];if(g[y].field.isKeyField()){if(typeof b!="string")throw new ee(B.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+f+"(), but got a "+typeof b);if(!Qm(s)&&b.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+f+"() must be a plain document ID, but '"+b+"' contains a slash.");var T=s.path.child(ze.fromString(b));if(!de.isDocumentKey(T))throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+f+"() must result in a valid document path, but '"+T+"' is not because it contains an odd number of segments.");var S=new de(T);v.push(Ml(u,S))}else{var A=bS(c,f,b);v.push(A)}}return new nu(v,d)}(t._query,t.firestore._databaseId,o,e,n,r)}function OS(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qm(e)&&n.indexOf("/")!==-1)throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ze.fromString(n));if(!de.isDocumentKey(r))throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ml(t,new de(r))}if(n instanceof gt)return Ml(t,n._key);throw new ee(B.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+lf(n)+".")}function NS(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(B.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ee(B.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function RS(t,e,n){if(!n.isEqual(e))throw new ee(B.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Wv=function(){function t(){}return t.prototype.convertValue=function(e,n){switch(n===void 0&&(n="none"),io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw fe()}},t.prototype.convertObject=function(e,n){var r=this,o={};return no(e.fields,function(s,u){o[s]=r.convertValue(u,n)}),o},t.prototype.convertGeoPoint=function(e){return new gu(Ot(e.latitude),Ot(e.longitude))},t.prototype.convertArray=function(e,n){var r=this;return(e.values||[]).map(function(o){return r.convertValue(o,n)})},t.prototype.convertServerTimestamp=function(e,n){switch(n){case"previous":var r=Q1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}},t.prototype.convertTimestamp=function(e){var n=Lr(e);return new dn(n.seconds,n.nanos)},t.prototype.convertDocumentKey=function(e,n){var r=ze.fromString(e);Ee(GI(r));var o=new cf(r.get(1),r.get(3)),s=new de(r.popFirst(5));return o.isEqual(n)||At("Document "+s+" contains a document reference within a different database ("+o.projectId+"/"+o.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},t}();function mf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var xL=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return ge(e,t),e.prototype.convertBytes=function(n){return new fo(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new gt(this.firestore,null,r)},e}(Wv),DL=function(){function t(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=po(e)}return t.prototype.set=function(e,n,r){this._verifyNotCommitted();var o=_i(e,this._firestore),s=mf(o.converter,n,r),u=hf(this._dataReader,"WriteBatch.set",o._key,s,o.converter!==null,r);return this._mutations.push(u.toMutation(o._key,Zt.none())),this},t.prototype.update=function(e,n,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this._verifyNotCommitted();var u,c=_i(e,this._firestore);return u=typeof(n=Et(n))=="string"||n instanceof Ir?Uv(this._dataReader,"WriteBatch.update",c._key,n,r,o):Fv(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(u.toMutation(c._key,Zt.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var n=_i(e,this._firestore);return this._mutations=this._mutations.concat(new au(n._key,Zt.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ee(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function _i(t,e){if((t=Et(t)).firestore!==e)throw new ee(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var go=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return ge(e,t),e.prototype.convertBytes=function(n){return new fo(n)},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new gt(this.firestore,null,r)},e}(Wv);function MS(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Xe(t,gt);var s=Xe(t.firestore,Rt),u=po(s);return bu(s,[(typeof(e=Et(e))=="string"||e instanceof Ir?Uv(u,"updateDoc",t._key,e,n,r):Fv(u,"updateDoc",t._key,e)).toMutation(t._key,Zt.exists(!0))])}function PS(t){for(var e,n,r,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t=Et(t);var u={includeMetadataChanges:!1},c=0;typeof o[c]!="object"||Ms(o[c])||(u=o[c],c++);var f,p,d,g={includeMetadataChanges:u.includeMetadataChanges};if(Ms(o[c])){var v=o[c];o[c]=(e=v.next)===null||e===void 0?void 0:e.bind(v),o[c+1]=(n=v.error)===null||n===void 0?void 0:n.bind(v),o[c+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}if(t instanceof gt)p=Xe(t.firestore,Rt),d=fs(t._key.path),f={next:function(T){o[c]&&o[c](Gv(p,t,T))},error:o[c+1],complete:o[c+2]};else{var y=Xe(t,qn);p=Xe(y.firestore,Rt),d=y._query;var b=new go(p);f={next:function(T){o[c]&&o[c](new gi(p,b,y,T))},error:o[c+1],complete:o[c+2]},kS(t._query)}return function(T,S,A,V){var q=this,L=new af(V),O=new kv(S,L,A);return T.asyncQueue.enqueueAndForget(function(){return z(q,void 0,void 0,function(){var R;return H(this,function(K){switch(K.label){case 0:return R=Tv,[4,Rs(T)];case 1:return[2,R.apply(void 0,[K.sent(),O])]}})})}),function(){L.Wo(),T.asyncQueue.enqueueAndForget(function(){return z(q,void 0,void 0,function(){var R;return H(this,function(K){switch(K.label){case 0:return R=Sv,[4,Rs(T)];case 1:return[2,R.apply(void 0,[K.sent(),O])]}})})})}}(nn(p),d,g,f)}function bu(t,e){return function(n,r){var o=this,s=new mn;return n.asyncQueue.enqueueAndForget(function(){return z(o,void 0,void 0,function(){var u;return H(this,function(c){switch(c.label){case 0:return u=WP,[4,ZT(n)];case 1:return[2,u.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(nn(t),e)}function Gv(t,e,n){var r=n.docs.get(e._key),o=new go(t);return new Ur(t,o,e._key,r,new vo(n.hasPendingWrites,n.fromCache),e.converter)}var CL=function(t){function e(n,r){var o=this;return(o=t.call(this,n,r)||this)._firestore=n,o}return ge(e,t),e.prototype.get=function(n){var r=this,o=_i(n,this._firestore),s=new go(this._firestore);return t.prototype.get.call(this,n).then(function(u){return new Ur(r._firestore,s,o._key,u._document,new vo(!1,!1),o.converter)})},e}(function(){function t(e,n){this._firestore=e,this._transaction=n,this._dataReader=po(e)}return t.prototype.get=function(e){var n=this,r=_i(e,this._firestore),o=new xL(this._firestore);return this._transaction.lookup([r._key]).then(function(s){if(!s||s.length!==1)return fe();var u=s[0];if(u.isFoundDocument())return new yu(n._firestore,o,u.key,u,r.converter);if(u.isNoDocument())return new yu(n._firestore,o,r._key,null,r.converter);throw fe()})},t.prototype.set=function(e,n,r){var o=_i(e,this._firestore),s=mf(o.converter,n,r),u=hf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,u),this},t.prototype.update=function(e,n,r){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u,c=_i(e,this._firestore);return u=typeof(n=Et(n))=="string"||n instanceof Ir?Uv(this._dataReader,"Transaction.update",c._key,n,r,o):Fv(this._dataReader,"Transaction.update",c._key,n),this._transaction.update(c._key,u),this},t.prototype.delete=function(e){var n=_i(e,this._firestore);return this._transaction.delete(n._key),this},t}());function LS(){if(typeof Uint8Array=="undefined")throw new ee(B.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jS(){if(typeof atob=="undefined")throw new ee(B.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Hv=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return jS(),new t(fo.fromBase64String(e))},t.fromUint8Array=function(e){return LS(),new t(fo.fromUint8Array(e))},t.prototype.toBase64=function(){return jS(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return LS(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),$S=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,n){return function(r,o){vS(r=Xe(r,Rt));var s=nn(r),u=r._freezeSettings(),c=new Mv;return mS(s,c,new KT(c,u.cacheSizeBytes,o==null?void 0:o.forceOwnership))}(e._delegate,{forceOwnership:n})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(n){vS(n=Xe(n,Rt));var r=nn(n),o=n._freezeSettings(),s=new Mv;return mS(r,s,new oL(s,o.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new ee(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var o=new mn;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return z(r,void 0,void 0,function(){var s;return H(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,function(c){return z(this,void 0,void 0,function(){var f;return H(this,function(p){switch(p.label){case 0:return _s.yt()?(f=c+"main",[4,_s.delete(f)]):[2,Promise.resolve()];case 1:return p.sent(),[2]}})})}(hv(n._databaseId,n._persistenceKey))];case 1:return u.sent(),o.resolve(),[3,3];case 2:return s=u.sent(),o.reject(s),[3,3];case 3:return[2]}})})}),o.promise}(e._delegate)},t}(),Kv=function(){function t(e,n,r){var o=this;this._delegate=n,this.Xc=r,this.INTERNAL={delete:function(){return o.terminate()}},e instanceof cf||(this.Zc=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var n=this._delegate._getSettings();e.merge||n.host===e.host||Nl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,n,r){r===void 0&&(r={}),function(o,s,u,c){c===void 0&&(c={});var f=(o=Xe(o,vu))._getSettings();if(f.host!=="firestore.googleapis.com"&&f.host!==s&&Nl("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},f),{host:s+":"+u,ssl:!1})),c.mockUserToken){var p=cb(c.mockUserToken),d=c.mockUserToken.sub||c.mockUserToken.user_id;if(!d)throw new ee(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o._credentials=new lL(new rS(p,new Dn(d)))}}(this._delegate,e,n,r)},t.prototype.enableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return z(n,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:return[4,QT(e)];case 1:return r=s.sent(),[4,JT(e)];case 2:return o=s.sent(),[2,(r.setNetworkEnabled(!0),function(u){var c=oe(u);return c.Or.delete(0),pu(c)}(o))]}})})})}(nn(Xe(this._delegate,Rt)))},t.prototype.disableNetwork=function(){return function(e){var n=this;return e.asyncQueue.enqueue(function(){return z(n,void 0,void 0,function(){var r,o;return H(this,function(s){switch(s.label){case 0:return[4,QT(e)];case 1:return r=s.sent(),[4,JT(e)];case 2:return o=s.sent(),[2,(r.setNetworkEnabled(!1),function(u){return z(this,void 0,void 0,function(){var c;return H(this,function(f){switch(f.label){case 0:return(c=oe(u)).Or.add(0),[4,Ds(c)];case 1:return f.sent(),c.Br.set("Offline"),[2]}})})}(o))]}})})})}(nn(Xe(this._delegate,Rt)))},t.prototype.enablePersistence=function(e){var n=!1,r=!1;return e&&oS("synchronizeTabs",n=!!e.synchronizeTabs,"experimentalForceOwningTab",r=!!e.experimentalForceOwningTab),n?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,r)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var n=this,r=new mn;return e.asyncQueue.enqueueAndForget(function(){return z(n,void 0,void 0,function(){var o;return H(this,function(s){switch(s.label){case 0:return o=zP,[4,ZT(e)];case 1:return[2,o.apply(void 0,[s.sent(),r])]}})})}),r.promise}(nn(Xe(this._delegate,Rt)))},t.prototype.onSnapshotsInSync=function(e){return function(n,r){return function(o,s){var u=this,c=new af(s);return o.asyncQueue.enqueueAndForget(function(){return z(u,void 0,void 0,function(){var f;return H(this,function(p){switch(p.label){case 0:return f=function(d,g){oe(d).Gr.add(g),g.next()},[4,Rs(o)];case 1:return[2,f.apply(void 0,[p.sent(),c])]}})})}),function(){c.Wo(),o.asyncQueue.enqueueAndForget(function(){return z(u,void 0,void 0,function(){var f;return H(this,function(p){switch(p.label){case 0:return f=function(d,g){oe(d).Gr.delete(g)},[4,Rs(o)];case 1:return[2,f.apply(void 0,[p.sent(),c])]}})})})}}(nn(n=Xe(n,Rt)),Ms(r)?r:{next:r})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new ee(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new Tu(this,lS(this._delegate,e))}catch(n){throw vn(n,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new wi(this,ff(this._delegate,e))}catch(n){throw vn(n,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new Iu(this,function(n,r){if(n=Xe(n,vu),Lv("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new ee(B.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new qn(n,null,function(o){return new jr(ze.emptyPath(),o)}(r))}(this._delegate,e))}catch(n){throw vn(n,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var n=this;return function(r,o){return function(s,u){var c=this,f=new mn;return s.asyncQueue.enqueueAndForget(function(){return z(c,void 0,void 0,function(){var p;return H(this,function(d){switch(d.label){case 0:return[4,function(g){return uf(g).then(function(v){return v.datastore})}(s)];case 1:return p=d.sent(),new aL(s.asyncQueue,p,u,f).run(),[2]}})})}),f.promise}(nn(r),function(s){return o(new CL(r,s))})}(this._delegate,function(r){return e(new zv(n,r))})},t.prototype.batch=function(){var e=this;return nn(this._delegate),new Yv(new DL(this._delegate,function(n){return bu(e._delegate,n)}))},t.prototype.loadBundle=function(e){throw new ee(B.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new ee(B.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vf=function(t){function e(n){var r=this;return(r=t.call(this)||this).firestore=n,r}return ge(e,t),e.prototype.convertBytes=function(n){return new Hv(new fo(n))},e.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return wi.tu(r,this.firestore,null)},e}(Wv);function FS(t){var e;e=t,sr.setLogLevel(e)}var zv=function(){function t(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}return t.prototype.get=function(e){var n=this,r=yo(e);return this._delegate.get(r).then(function(o){return new Ps(n._firestore,new Ur(n._firestore._delegate,n._userDataWriter,o._key,o._document,o.metadata,r.converter))})},t.prototype.set=function(e,n,r){var o=yo(e);return r?(jv("Transaction.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this},t.prototype.update=function(e,n,r){for(var o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=yo(e);return arguments.length===2?this._delegate.update(c,n):(o=this._delegate).update.apply(o,dt([c,n,r],s)),this},t.prototype.delete=function(e){var n=yo(e);return this._delegate.delete(n),this},t}(),Yv=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,n,r){var o=yo(e);return r?(jv("WriteBatch.set",r),this._delegate.set(o,n,r)):this._delegate.set(o,n),this},t.prototype.update=function(e,n,r){for(var o,s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c=yo(e);return arguments.length===2?this._delegate.update(c,n):(o=this._delegate).update.apply(o,dt([c,n,r],s)),this},t.prototype.delete=function(e){var n=yo(e);return this._delegate.delete(n),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),gf=function(){function t(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}return t.prototype.fromFirestore=function(e,n){var r=new _u(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ls(this._firestore,r),n??{})},t.prototype.toFirestore=function(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)},t.eu=function(e,n){var r=t.nu,o=r.get(e);o||(o=new WeakMap,r.set(e,o));var s=o.get(n);return s||(s=new t(e,new vf(e),n),o.set(n,s)),s},t}();gf.nu=new WeakMap;var wi=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}return t.su=function(e,n,r){if(e.length%2!=0)throw new ee(B.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new gt(n._delegate,r,new de(e)))},t.tu=function(e,n,r){return new t(n,new gt(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Tu(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new Tu(this.firestore,lS(this._delegate,e))}catch(n){throw vn(n,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=Et(e))instanceof gt&&fS(this._delegate,e)},t.prototype.set=function(e,n){n=jv("DocumentReference.set",n);try{return function(r,o,s){r=Xe(r,gt);var u=Xe(r.firestore,Rt),c=mf(r.converter,o,s);return bu(u,[hf(po(u),"setDoc",r._key,c,r.converter!==null,s).toMutation(r._key,Zt.none())])}(this._delegate,e,n)}catch(r){throw vn(r,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];try{return arguments.length===1?MS(this._delegate,e):MS.apply(void 0,dt([this._delegate,e,n],r))}catch(s){throw vn(s,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return bu(Xe((e=this._delegate).firestore,Rt),[new au(e._key,Zt.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=US(n),s=qS(n,function(u){return new Ps(e.firestore,new Ur(e.firestore._delegate,e._userDataWriter,u._key,u._document,u.metadata,e._delegate.converter))});return PS(this._delegate,o,s)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=Xe(r,gt);var o=Xe(r.firestore,Rt),s=nn(o),u=new go(o);return function(c,f){var p=this,d=new mn;return c.asyncQueue.enqueueAndForget(function(){return z(p,void 0,void 0,function(){var g;return H(this,function(v){switch(v.label){case 0:return g=function(y,b,T){return z(this,void 0,void 0,function(){var S,A;return H(this,function(V){switch(V.label){case 0:return V.trys.push([0,2,,3]),[4,function(q,L){var O=oe(q);return O.persistence.runTransaction("read document","readonly",function(R){return O.Mn.mn(R,L)})}(y,b)];case 1:return(A=V.sent()).isFoundDocument()?T.resolve(A):A.isNoDocument()?T.resolve(null):T.reject(new ee(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return S=V.sent(),A=Os(S,"Failed to get document '"+b+" from cache"),T.reject(A),[3,3];case 3:return[2]}})})},[4,XT(c)];case 1:return[2,g.apply(void 0,[v.sent(),f,d])]}})})}),d.promise}(s,r._key).then(function(c){return new Ur(o,u,r._key,c,new vo(c!==null&&c.hasLocalMutations,!0),r.converter)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=Xe(r,gt);var o=Xe(r.firestore,Rt);return eS(nn(o),r._key,{source:"server"}).then(function(s){return Gv(o,r,s)})}(this._delegate):function(r){r=Xe(r,gt);var o=Xe(r.firestore,Rt);return eS(nn(o),r._key).then(function(s){return Gv(o,r,s)})}(this._delegate)).then(function(r){return new Ps(n.firestore,new Ur(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(gf.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function vn(t,e,n){return t.message=t.message.replace(e,n),t}function US(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(typeof r=="object"&&!Ms(r))return r}return{}}function qS(t,e){var n,r,o;return{next:function(s){o.next&&o.next(e(s))},error:(n=(o=Ms(t[0])?t[0]:Ms(t[1])?t[1]:typeof t[0]=="function"?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)===null||n===void 0?void 0:n.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}var Ps=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"ref",{get:function(){return new wi(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,n){return this._delegate.get(e,n)},t.prototype.isEqual=function(e){return ES(this._delegate,e._delegate)},t}(),Ls=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return ge(e,t),e.prototype.data=function(n){return this._delegate.data(n)},e}(Ps),Iu=function(){function t(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vf(e)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,yi(this._delegate,function(o,s,u){var c=s,f=pf("where",o);return new EL(f,c,u)}(e,n,r)))}catch(o){throw vn(o,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,yi(this._delegate,function(r,o){o===void 0&&(o="asc");var s=o,u=pf("orderBy",r);return new kL(u,s)}(e,n)))}catch(r){throw vn(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,yi(this._delegate,function(n){return uS("limit",n),new xS("limit",n,"F")}(e)))}catch(n){throw vn(n,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,yi(this._delegate,function(n){return uS("limitToLast",n),new xS("limitToLast",n,"L")}(e)))}catch(n){throw vn(n,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yi(this._delegate,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new DS("startAt",r,!0)}.apply(void 0,e)))}catch(r){throw vn(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yi(this._delegate,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new DS("startAfter",r,!1)}.apply(void 0,e)))}catch(r){throw vn(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yi(this._delegate,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new CS("endBefore",r,!0)}.apply(void 0,e)))}catch(r){throw vn(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,yi(this._delegate,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new CS("endAt",r,!1)}.apply(void 0,e)))}catch(r){throw vn(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return hS(this._delegate,e._delegate)},t.prototype.get=function(e){var n=this;return((e==null?void 0:e.source)==="cache"?function(r){r=Xe(r,qn);var o=Xe(r.firestore,Rt),s=nn(o),u=new go(o);return function(c,f){var p=this,d=new mn;return c.asyncQueue.enqueueAndForget(function(){return z(p,void 0,void 0,function(){var g;return H(this,function(v){switch(v.label){case 0:return g=function(y,b,T){return z(this,void 0,void 0,function(){var S,A,V,q,L;return H(this,function(O){switch(O.label){case 0:return O.trys.push([0,2,,3]),[4,ef(y,b,!0)];case 1:return L=O.sent(),S=new UT(b,L.Bn),A=S._o(L.documents),V=S.applyChanges(A,!1),T.resolve(V.snapshot),[3,3];case 2:return q=O.sent(),L=Os(q,"Failed to execute query '"+b+" against cache"),T.reject(L),[3,3];case 3:return[2]}})})},[4,XT(c)];case 1:return[2,g.apply(void 0,[v.sent(),f,d])]}})})}),d.promise}(s,r._query).then(function(c){return new gi(o,u,r,c)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(r){r=Xe(r,qn);var o=Xe(r.firestore,Rt),s=nn(o),u=new go(o);return tS(s,r._query,{source:"server"}).then(function(c){return new gi(o,u,r,c)})}(this._delegate):function(r){r=Xe(r,qn);var o=Xe(r.firestore,Rt),s=nn(o),u=new go(o);return kS(r._query),tS(s,r._query).then(function(c){return new gi(o,u,r,c)})}(this._delegate)).then(function(r){return new yf(n.firestore,new gi(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=US(n),s=qS(n,function(u){return new yf(e.firestore,new gi(e.firestore._delegate,e._userDataWriter,e._delegate,u._snapshot))});return PS(this._delegate,o,s)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(gf.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),AL=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Ls(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),yf=function(){function t(e,n){this._firestore=e,this._delegate=n}return Object.defineProperty(t.prototype,"query",{get:function(){return new Iu(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(n){return new Ls(e._firestore,n)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var n=this;return this._delegate.docChanges(e).map(function(r){return new AL(n._firestore,r)})},t.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(o){e.call(n,new Ls(r._firestore,o))})},t.prototype.isEqual=function(e){return ES(this._delegate,e._delegate)},t}(),Tu=function(t){function e(n,r){var o=this;return(o=t.call(this,n,r)||this).firestore=n,o._delegate=r,o}return ge(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new wi(this.firestore,n):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(n){try{return new wi(this.firestore,n===void 0?ff(this._delegate):ff(this._delegate,n))}catch(r){throw vn(r,"doc()","CollectionReference.doc()")}},e.prototype.add=function(n){var r=this;return function(o,s){var u=Xe(o.firestore,Rt),c=ff(o),f=mf(o.converter,s);return bu(u,[hf(po(o.firestore),"addDoc",c._key,f,o.converter!==null,{}).toMutation(c._key,Zt.exists(!1))]).then(function(){return c})}(this._delegate,n).then(function(o){return new wi(r.firestore,o)})},e.prototype.isEqual=function(n){return fS(this._delegate,n._delegate)},e.prototype.withConverter=function(n){return new e(this.firestore,n?this._delegate.withConverter(gf.eu(this.firestore,n)):this._delegate.withConverter(null))},e}(Iu);function yo(t){return Xe(t,gt)}var VS=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._delegate=new(Ir.bind.apply(Ir,dt([void 0],e)))}return t.documentId=function(){return new t(ar.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=Et(e))instanceof Ir&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),BS=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new yL("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new $v("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return new _L("arrayUnion",o)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return new wL("arrayRemove",o)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(r){return new bL("increment",r)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}();var OL={Firestore:Kv,GeoPoint:gu,Timestamp:dn,Blob:Hv,Transaction:zv,WriteBatch:Yv,DocumentReference:wi,DocumentSnapshot:Ps,Query:Iu,QueryDocumentSnapshot:Ls,QuerySnapshot:yf,CollectionReference:Tu,FieldPath:VS,FieldValue:BS,setLogLevel:FS,CACHE_SIZE_UNLIMITED:dS};function NL(t){(function(e,n){e.INTERNAL.registerComponent(new Xo("firestore",function(r){var o=r.getProvider("app").getImmediate();return n(o,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},OL)))})(t,function(e,n){return new Kv(e,new Rt(e,n),new $S)}),t.registerVersion("@firebase/firestore","2.3.8")}NL(pe);var WS={apiKey:"AIzaSyDW5bcXuTHnusF2gQeRsKtW9R0up74wSn0",authDomain:"cuiapp-bb7e8.firebaseapp.com",databaseURL:"https://cuiapp-bb7e8-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"cuiapp-bb7e8",storageBucket:"cuiapp-bb7e8.appspot.com",messagingSenderId:"65737428529",appId:"1:65737428529:web:6f4e11b0f6d7c13ceb4f10",measurementId:"G-P900XLMX5V"};pe.initializeApp(WS);pe.firestore().settings({cacheSizeBytes:pe.firestore.CACHE_SIZE_UNLIMITED});pe.firestore().enablePersistence().catch(console.warn);var Su=pe.auth(),GS=new pe.auth.GoogleAuthProvider,Yt=pe.firestore();var HS=5e3,KS=5e3;var it="common/setErrorMessage",rn="common/setSucessMessage",Me="common/setPending",Qv="common/setServicesLoaded",Xv,Jv,zS=t=>{t.on("@init",()=>({errorMessage:null,successMessage:null,isPending:!1,isServicesLoaded:!1})),t.on(Me,(e,n)=>({isPending:n})),t.on(Qv,()=>({isServicesLoaded:!0})),t.on(it,(e,n)=>(Jv&&clearTimeout(Jv),n&&(Jv=setTimeout(()=>t.dispatch(it,null),KS)),{errorMessage:n})),t.on(rn,(e,n)=>(Xv&&clearTimeout(Xv),n&&(Xv=setTimeout(()=>t.dispatch(rn,null),HS)),{successMessage:n}))};var Zv="user/setIsSignedIn",eg="user/setUserData",tg="user/clearUserData",_f="user/signIn",wf="user/signOut",YS={id:"",name:"",email:"",picture:""},QS=t=>{t.on("@init",()=>({user:{isSignedIn:!1,...YS}})),t.on(Zv,({user:e},n)=>({user:{...e,isSignedIn:n}})),t.on(tg,({user:e})=>({user:{...e,...YS}})),t.on(eg,({user:e},{id:n,name:r,email:o,picture:s})=>({user:{...e,id:n,name:r,email:o,picture:s}})),t.on(_f,async()=>{t.dispatch(Me,!0);try{await Su.signInWithPopup(GS)}catch(e){t.dispatch(it,"\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),console.warn(`error on ${_f}`),console.error(e)}t.dispatch(Me,!1)}),t.on(wf,async()=>{t.dispatch(Me,!0);try{await Su.signOut(),localStorage.clear()}catch(e){t.dispatch(it,"\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u044B\u0445\u043E\u0434\u0430 \u0438\u0437 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430"),console.warn(`error on ${wf}`),console.error(e)}t.dispatch(Me,!1)})};var bf="clients",XS=()=>"cached-clients",JS=({client:t,userId:e})=>{let n=Yt.collection(bf).doc();return n.set({...t,createdAt:new Date,userId:e}).then(),n.id},ZS=async({userId:t})=>(await Yt.collection(bf).where("userId","==",t).get()).docs.map(r=>{let o=r.data();return{id:r.id,...r.data(),createdAt:o.createdAt.toDate()}}).sort((r,o)=>o.createdAt-r.createdAt),eE=async({clientId:t})=>Yt.collection(bf).doc(t).delete(),tE=async({client:t})=>Yt.collection(bf).doc(t.id).update(t),nE=()=>{let t=XS(),e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(n){return console.warn("error on clientGetFormCache"),console.error(n),localStorage.removeItem(t),null}},rE=({clients:t})=>{if(!t||!t.length)return;let e=XS();try{let n=JSON.stringify(t);localStorage.setItem(e,n)}catch(n){console.warn("error on clientSetToCache"),console.error(n)}};var iE="clients/push",If="clients/fetch",Tf="clients/create",oE="clients/set",sE="clients/updateLocally",Sf="clients/update",Ef="clients/delete",aE="clients/deleteLocally",uE=t=>{t.on(iE,({clients:e},n)=>({clients:[n,...e]})),t.on(oE,(e,n)=>({clients:n})),t.on(sE,({clients:e},n)=>({clients:e.map(o=>o.id===n.id?n:o)})),t.on(aE,({clients:e},n)=>({clients:e.filter(r=>r.id!==n)})),t.on(Tf,async({user:e},n)=>{t.dispatch(Me,!0);try{let r=JS({client:n,userId:e.id});t.dispatch(iE,{...n,id:r}),t.dispatch(rn,"\u041A\u043B\u0438\u0435\u043D\u0442 \u0441\u043E\u0437\u0434\u0430\u043D")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430"),console.warn(`error on ${Tf}`),console.error(r)}t.dispatch(Me,!1)}),t.on(If,async({user:e})=>{t.dispatch(Me,!0);try{t.dispatch(oE,await ZS({userId:e.id}))}catch(n){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432"),console.warn(`error on ${If}`),console.error(n)}t.dispatch(Me,!1)}),t.on(Ef,async(e,n)=>{t.dispatch(Me,!0);try{eE({clientId:n}),t.dispatch(aE,n),t.dispatch(rn,"\u041A\u043B\u0438\u0435\u043D\u0442 \u0443\u0434\u0430\u043B\u0451\u043D")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430"),console.warn(`error on ${Ef}`),console.error(r)}t.dispatch(Me,!1)}),t.on(Sf,async(e,n)=>{t.dispatch(Me,!0);try{tE({client:n}),t.dispatch(sE,n),t.dispatch(rn,"\u041A\u043B\u0438\u0435\u043D\u0442 \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430"),console.warn(`error on ${Sf}`),console.error(r)}t.dispatch(Me,!1)}),t.on("@init",()=>({clients:nE()||[]})),t.on("@changed",({clients:e})=>{e&&rE({clients:e})})};var cE;typeof navigator!="undefined"&&navigator.product!=="ReactNative"?cE=(t,e,n)=>{typeof n!="undefined"?console.log("%c"+t+" %c"+e,"color: #070","color: #070; font-weight: 700",n):console.log("%c"+t+" %c"+e,"color: #070","color: #070; font-weight: 700")}:cE=(t,e,n)=>{typeof n!="undefined"?console.log(t,e,n):console.log(t,e)};var kf="services",lE=()=>"cached-services",fE=({userId:t,service:e})=>{e={...e,createdAt:new Date,userId:t};let n=Yt.collection(kf).doc();return n.set(e).then(),n.id},hE=async({userId:t})=>(await Yt.collection(kf).where("userId","==",t).get()).docs.map(r=>{let o=r.data();return{id:r.id,...r.data(),createdAt:o.createdAt.toDate()}}).sort((r,o)=>o.createdAt-r.createdAt),dE=async({serviceId:t})=>Yt.collection(kf).doc(t).delete(),pE=async({service:t})=>Yt.collection(kf).doc(t.id).update(t),mE=()=>{let t=lE(),e=localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(n){return localStorage.removeItem(t),console.warn("error on serviceGetFormCache"),console.error(n),null}},vE=({services:t})=>{if(!t||!t.length)return;let e=lE();try{let n=JSON.stringify(t);localStorage.setItem(e,n)}catch(n){console.warn("error on serviceSetToCache"),console.error(n)}};var gE="services/push",xf="services/fetch",Df="services/create",yE="services/set",_E="services/updateLocally",Cf="services/update",Af="services/delete",wE="services/deleteLocally",bE=t=>{t.on(gE,({services:e},n)=>({services:[n,...e]})),t.on(yE,(e,n)=>(t.dispatch(Qv),{services:n})),t.on(_E,({services:e},n)=>({services:e.map(o=>o.id===n.id?n:o)})),t.on(wE,({services:e},n)=>({services:e.filter(r=>r.id!==n)})),t.on(Df,async({user:e},n)=>{t.dispatch(Me,!0);try{let r=fE({service:n,userId:e.id});t.dispatch(gE,{...n,id:r}),t.dispatch(rn,"\u0423\u0441\u043B\u0443\u0433\u0430 \u0441\u043E\u0437\u0434\u0430\u043D\u0430")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443"),console.warn(`error on ${Df}`),console.error(r)}t.dispatch(Me,!1)}),t.on(xf,async({user:e})=>{t.dispatch(Me,!0);try{t.dispatch(yE,await hE({userId:e.id}))}catch(n){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0438"),console.warn(`error on ${xf}`),console.error(n)}t.dispatch(Me,!1)}),t.on(Af,async(e,n)=>{t.dispatch(Me,!0);try{dE({serviceId:n}),t.dispatch(wE,n),t.dispatch(rn,"\u0423\u0441\u0443\u0433\u0430 \u0443\u0434\u0430\u043B\u0435\u043D\u0430")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443"),console.warn(`error on ${Af}`),console.error(r)}t.dispatch(Me,!1)}),t.on(Cf,async(e,n)=>{t.dispatch(Me,!0);try{pE({service:n}),t.dispatch(_E,n),t.dispatch(rn,"\u0423\u0441\u043B\u0443\u0433\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u043D\u0430")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443"),console.warn(`error on ${Cf}`),console.error(r)}t.dispatch(Me,!1)}),t.on("@init",()=>({services:mE()||[]})),t.on("@changed",({services:e})=>{e&&vE(e)})};function Oe(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function he(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function xe(t){he(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function bi(t,e){he(2,arguments);var n=xe(t),r=Oe(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Tr(t,e){he(2,arguments);var n=xe(t),r=Oe(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var o=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var u=s.getDate();return o>=u?s:(n.setFullYear(s.getFullYear(),s.getMonth(),o),n)}function Eu(t,e){if(he(2,arguments),!e||typeof e!="object")return new Date(NaN);var n="years"in e?Oe(e.years):0,r="months"in e?Oe(e.months):0,o="weeks"in e?Oe(e.weeks):0,s="days"in e?Oe(e.days):0,u="hours"in e?Oe(e.hours):0,c="minutes"in e?Oe(e.minutes):0,f="seconds"in e?Oe(e.seconds):0,p=xe(t),d=r||n?Tr(p,r+n*12):p,g=s||o?bi(d,s+o*7):d,v=c+u*60,y=f+v*60,b=y*1e3,T=new Date(g.getTime()+b);return T}function ng(t,e){he(2,arguments);var n=xe(t).getTime(),r=Oe(e);return new Date(n+r)}function rg(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function ig(t){he(1,arguments);var e=xe(t);return!isNaN(e)}function js(t){he(1,arguments);var e=xe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function $s(t,e){he(1,arguments);var n=t||{},r=xe(n.start),o=xe(n.end),s=o.getTime();if(!(r.getTime()<=s))throw new RangeError("Invalid interval");var u=[],c=r;c.setHours(0,0,0,0);var f=e&&"step"in e?Number(e.step):1;if(f<1||isNaN(f))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=s;)u.push(xe(c)),c.setDate(c.getDate()+f),c.setHours(0,0,0,0);return u}function gn(t){he(1,arguments);var e=xe(t);return e.setDate(1),e.setHours(0,0,0,0),e}var Of={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function og(t,e,n){n=n||{};var r;return typeof Of[t]=="string"?r=Of[t]:e===1?r=Of[t].one:r=Of[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r}function qr(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth,o=t.formats[r]||t.formats[t.defaultWidth];return o}}var RL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ML={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LL={date:qr({formats:RL,defaultWidth:"full"}),time:qr({formats:ML,defaultWidth:"full"}),dateTime:qr({formats:PL,defaultWidth:"full"})},IE=LL;var jL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function sg(t,e,n,r){return jL[t]}function Vn(t){return function(e,n){var r=n||{},o=r.context?String(r.context):"standalone",s;if(o==="formatting"&&t.formattingValues){var u=t.defaultFormattingWidth||t.defaultWidth,c=r.width?String(r.width):u;s=t.formattingValues[c]||t.formattingValues[u]}else{var f=t.defaultWidth,p=r.width?String(r.width):t.defaultWidth;s=t.values[p]||t.values[f]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var $L={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},FL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},UL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function WL(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"}var GL={ordinalNumber:WL,era:Vn({values:$L,defaultWidth:"wide"}),quarter:Vn({values:FL,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Vn({values:UL,defaultWidth:"wide"}),day:Vn({values:qL,defaultWidth:"wide"}),dayPeriod:Vn({values:VL,defaultWidth:"wide",formattingValues:BL,defaultFormattingWidth:"wide"})},TE=GL;function ku(t){return function(e,n){var r=String(e),o=n||{},s=r.match(t.matchPattern);if(!s)return null;var u=s[0],c=r.match(t.parsePattern);if(!c)return null;var f=t.valueCallback?t.valueCallback(c[0]):c[0];return f=o.valueCallback?o.valueCallback(f):f,{value:f,rest:r.slice(u.length)}}}function Bn(t){return function(e,n){var r=String(e),o=n||{},s=o.width,u=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],c=r.match(u);if(!c)return null;var f=c[0],p=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],d;return Object.prototype.toString.call(p)==="[object Array]"?d=KL(p,function(g){return g.test(f)}):d=HL(p,function(g){return g.test(f)}),d=t.valueCallback?t.valueCallback(d):d,d=o.valueCallback?o.valueCallback(d):d,{value:d,rest:r.slice(f.length)}}}function HL(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function KL(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}var zL=/^(\d+)(th|st|nd|rd)?/i,YL=/\d+/i,QL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XL={any:[/^b/i,/^(a|c)/i]},JL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ZL={any:[/1/i,/2/i,/3/i,/4/i]},ej={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},nj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ij={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sj={ordinalNumber:ku({matchPattern:zL,parsePattern:YL,valueCallback:function(t){return parseInt(t,10)}}),era:Bn({matchPatterns:QL,defaultMatchWidth:"wide",parsePatterns:XL,defaultParseWidth:"any"}),quarter:Bn({matchPatterns:JL,defaultMatchWidth:"wide",parsePatterns:ZL,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Bn({matchPatterns:ej,defaultMatchWidth:"wide",parsePatterns:tj,defaultParseWidth:"any"}),day:Bn({matchPatterns:nj,defaultMatchWidth:"wide",parsePatterns:rj,defaultParseWidth:"any"}),dayPeriod:Bn({matchPatterns:ij,defaultMatchWidth:"any",parsePatterns:oj,defaultParseWidth:"any"})},SE=sj;var aj={code:"en-US",formatDistance:og,formatLong:IE,formatRelative:sg,localize:TE,match:SE,options:{weekStartsOn:0,firstWeekContainsDate:1}},EE=aj;function ag(t,e){he(2,arguments);var n=Oe(e);return ng(t,-n)}function Ye(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var uj={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return Ye(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):Ye(n+1,2)},d:function(t,e){return Ye(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return Ye(t.getUTCHours()%12||12,e.length)},H:function(t,e){return Ye(t.getUTCHours(),e.length)},m:function(t,e){return Ye(t.getUTCMinutes(),e.length)},s:function(t,e){return Ye(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),o=Math.floor(r*Math.pow(10,n-3));return Ye(o,e.length)}},Vr=uj;var cj=864e5;function ug(t){he(1,arguments);var e=xe(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),o=n-r;return Math.floor(o/cj)+1}function Ii(t){he(1,arguments);var e=1,n=xe(t),r=n.getUTCDay(),o=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-o),n.setUTCHours(0,0,0,0),n}function xu(t){he(1,arguments);var e=xe(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=Ii(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var u=Ii(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=u.getTime()?n:n-1}function cg(t){he(1,arguments);var e=xu(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Ii(n);return r}var lj=6048e5;function lg(t){he(1,arguments);var e=xe(t),n=Ii(e).getTime()-cg(e).getTime();return Math.round(n/lj)+1}function cr(t,e){he(1,arguments);var n=e||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,s=o==null?0:Oe(o),u=n.weekStartsOn==null?s:Oe(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=xe(t),f=c.getUTCDay(),p=(f<u?7:0)+f-u;return c.setUTCDate(c.getUTCDate()-p),c.setUTCHours(0,0,0,0),c}function Du(t,e){he(1,arguments);var n=xe(t,e),r=n.getUTCFullYear(),o=e||{},s=o.locale,u=s&&s.options&&s.options.firstWeekContainsDate,c=u==null?1:Oe(u),f=o.firstWeekContainsDate==null?c:Oe(o.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(r+1,0,f),p.setUTCHours(0,0,0,0);var d=cr(p,e),g=new Date(0);g.setUTCFullYear(r,0,f),g.setUTCHours(0,0,0,0);var v=cr(g,e);return n.getTime()>=d.getTime()?r+1:n.getTime()>=v.getTime()?r:r-1}function fg(t,e){he(1,arguments);var n=e||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,s=o==null?1:Oe(o),u=n.firstWeekContainsDate==null?s:Oe(n.firstWeekContainsDate),c=Du(t,e),f=new Date(0);f.setUTCFullYear(c,0,u),f.setUTCHours(0,0,0,0);var p=cr(f,e);return p}var fj=6048e5;function hg(t,e){he(1,arguments);var n=xe(t),r=cr(n,e).getTime()-fg(n,e).getTime();return Math.round(r/fj)+1}var Fs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hj={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Vr.y(t,e)},Y:function(t,e,n,r){var o=Du(t,r),s=o>0?o:1-o;if(e==="YY"){var u=s%100;return Ye(u,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Ye(s,e.length)},R:function(t,e){var n=xu(t);return Ye(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return Ye(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ye(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ye(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return Vr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return Ye(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var o=hg(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):Ye(o,e.length)},I:function(t,e,n){var r=lg(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ye(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Vr.d(t,e)},D:function(t,e,n){var r=ug(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ye(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var o=t.getUTCDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ye(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var o=t.getUTCDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ye(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return Ye(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),o=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),o;switch(r===12?o=Fs.noon:r===0?o=Fs.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),o;switch(r>=17?o=Fs.evening:r>=12?o=Fs.afternoon:r>=4?o=Fs.morning:o=Fs.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Vr.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ye(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ye(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Vr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Vr.s(t,e)},S:function(t,e){return Vr.S(t,e)},X:function(t,e,n,r){var o=r._originalDate||t,s=o.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return xE(s);case"XXXX":case"XX":return _o(s);case"XXXXX":case"XXX":default:return _o(s,":")}},x:function(t,e,n,r){var o=r._originalDate||t,s=o.getTimezoneOffset();switch(e){case"x":return xE(s);case"xxxx":case"xx":return _o(s);case"xxxxx":case"xxx":default:return _o(s,":")}},O:function(t,e,n,r){var o=r._originalDate||t,s=o.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kE(s,":");case"OOOO":default:return"GMT"+_o(s,":")}},z:function(t,e,n,r){var o=r._originalDate||t,s=o.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kE(s,":");case"zzzz":default:return"GMT"+_o(s,":")}},t:function(t,e,n,r){var o=r._originalDate||t,s=Math.floor(o.getTime()/1e3);return Ye(s,e.length)},T:function(t,e,n,r){var o=r._originalDate||t,s=o.getTime();return Ye(s,e.length)}};function kE(t,e){var n=t>0?"-":"+",r=Math.abs(t),o=Math.floor(r/60),s=r%60;if(s===0)return n+String(o);var u=e||"";return n+String(o)+u+Ye(s,2)}function xE(t,e){if(t%60==0){var n=t>0?"-":"+";return n+Ye(Math.abs(t)/60,2)}return _o(t,e)}function _o(t,e){var n=e||"",r=t>0?"-":"+",o=Math.abs(t),s=Ye(Math.floor(o/60),2),u=Ye(o%60,2);return r+s+n+u}var DE=hj;function CE(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function AE(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}function dj(t,e){var n=t.match(/(P+)(p+)?/),r=n[1],o=n[2];if(!o)return CE(t,e);var s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",CE(r,e)).replace("{{time}}",AE(o,e))}var pj={p:AE,P:dj},OE=pj;var mj=["D","DD"],vj=["YY","YYYY"];function NE(t){return mj.indexOf(t)!==-1}function RE(t){return vj.indexOf(t)!==-1}function dg(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var gj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_j=/^'([^]*?)'?$/,wj=/''/g,bj=/[a-zA-Z]/;function Qt(t,e,n){he(2,arguments);var r=String(e),o=n||{},s=o.locale||EE,u=s.options&&s.options.firstWeekContainsDate,c=u==null?1:Oe(u),f=o.firstWeekContainsDate==null?c:Oe(o.firstWeekContainsDate);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=s.options&&s.options.weekStartsOn,d=p==null?0:Oe(p),g=o.weekStartsOn==null?d:Oe(o.weekStartsOn);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!s.localize)throw new RangeError("locale must contain localize property");if(!s.formatLong)throw new RangeError("locale must contain formatLong property");var v=xe(t);if(!ig(v))throw new RangeError("Invalid time value");var y=rg(v),b=ag(v,y),T={firstWeekContainsDate:f,weekStartsOn:g,locale:s,_originalDate:v},S=r.match(yj).map(function(A){var V=A[0];if(V==="p"||V==="P"){var q=OE[V];return q(A,s.formatLong,T)}return A}).join("").match(gj).map(function(A){if(A==="''")return"'";var V=A[0];if(V==="'")return Ij(A);var q=DE[V];if(q)return!o.useAdditionalWeekYearTokens&&RE(A)&&dg(A,e,t),!o.useAdditionalDayOfYearTokens&&NE(A)&&dg(A,e,t),q(b,A,s.localize,T);if(V.match(bj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return A}).join("");return S}function Ij(t){return t.match(_j)[1].replace(wj,"'")}function Ti(t){he(1,arguments);var e=xe(t),n=e.getDate();return n}function Nf(t){he(1,arguments);var e=xe(t),n=e.getDay();return n}function Us(t,e){he(2,arguments);var n=Oe(e);return bi(t,-n)}function Si(t,e){he(2,arguments);var n=Oe(e);return Tr(t,-n)}function Cu(t,e){if(he(2,arguments),!e||typeof e!="object")return new Date(NaN);var n="years"in e?Oe(e.years):0,r="months"in e?Oe(e.months):0,o="weeks"in e?Oe(e.weeks):0,s="days"in e?Oe(e.days):0,u="hours"in e?Oe(e.hours):0,c="minutes"in e?Oe(e.minutes):0,f="seconds"in e?Oe(e.seconds):0,p=Si(xe(t),r+n*12),d=Us(p,s+o*7),g=c+u*60,v=f+g*60,y=v*1e3,b=new Date(d.getTime()-y);return b}function Rf(t,e){he(2,arguments);var n=xe(t),r=xe(e);return n.getTime()<r.getTime()}function wo(t,e){he(2,arguments);var n=xe(t),r=xe(e);return n.getTime()===r.getTime()}var Tj="records",Sj=t=>{try{return`cached-month-records_${Qt(t,"LL-yyyy")}`}catch(e){return console.warn("error on getPersistentKey of statistic"),console.error(e),null}},pg=async({userId:t,date:e,endDateAsToday:n})=>{let r=gn(e);r.setHours(0,0,0);let o=n?new Date:js(e);return o.setHours(23,59,59),(await Yt.collection(Tj).where("userId","==",t).where("date",">=",r).where("date","<=",o).get()).docs.map(u=>{let c=u.data();return{...c,date:c.date.toDate(),createdAt:c.date.toDate()}})},mg=({records:t})=>{if(!!t)return t.reduce((e,{date:n})=>{let r=Ti(n);return e[r]=(e?.[r]||0)+1,e},{})},ME=({records:t,services:e})=>{if(!!t)return{records:t.length,money:t.reduce((n,r)=>{let o=e.filter(s=>r.serviceIds.includes(s.id));return n+o.reduce((s,{price:u})=>s+ +u,0)},0)}},PE=({date:t})=>{let e=Sj(t),n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(o=>({...o,date:new Date(o.date),createdAt:new Date(o.createdAt)}))}catch(r){return console.warn("error on statisticGetMonthRecordsFromCache"),console.error(r),[]}};var Au="statistic/calcMonthCounts",Br="statistic/calcMonthDaysCount",Ou="statistic/setMonthDaysCount",LE="statistic/setMonthRecords",vg="statisitc/setMonthCounts",jE=t=>{t.on(Ou,(e,n)=>({monthDaysCount:n})),t.on(vg,(e,n)=>({monthCounts:n})),t.on(LE,(e,n)=>({monthRecords:n})),t.on(Au,async({services:e,user:n},r)=>{t.dispatch(Me,!0);try{let o=new Date;if(Rf(o,r)){t.dispatch(vg,{money:0,records:0}),t.dispatch(Me,!1);return}let s=await pg({userId:n.id,date:r,endDateAsToday:wo(gn(r),gn(o))});t.dispatch(vg,ME({records:s,services:e}))}catch(o){t.dispatch(it,"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0441\u0447\u0435\u0442\u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043A\u043E\u0432 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044F"),console.warn(`error on ${Br}`),console.error(o)}t.dispatch(Me,!1)}),t.on(Br,async({user:e,recordsDate:n})=>{t.dispatch(Me,!0);try{let r=await pg({userId:e.id,date:n}),o=mg({records:r});t.dispatch(LE,r),t.dispatch(Ou,o)}catch(r){t.dispatch(it,"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0441\u0447\u0435\u0442\u0430 \u0441\u0447\u0435\u0442\u0447\u0438\u043A\u043E\u0432 \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u044F"),console.warn(`error on ${Br}`),console.error(r)}t.dispatch(Me,!1)}),t.on("@init",({recordsDate:e})=>{let n=PE({date:e});return{monthDaysCount:mg({records:n})||{},monthRecords:n||[],monthCounts:{money:0,records:0}}})};var Mf="records",$E=t=>{try{return`cached-records_${Qt(t,"dd-LL-yyyy")}`}catch(e){return console.warn("error on getPersistentKey in records api"),console.error(e),null}},FE=async({recordId:t})=>Yt.collection(Mf).doc(t).delete(),UE=async({record:t})=>Yt.collection(Mf).doc(t.id).update(t),qE=({userId:t,record:e})=>{e={...e,createdAt:new Date,date:new Date(e.date),userId:t};let n=Yt.collection(Mf).doc();return n.set(e).then(),n.id},VE=async({userId:t,date:e})=>{let n=e?new Date(e.getTime()):new Date;n.setHours(0,0,0);let r=e?new Date(e.getTime()):new Date;return r.setHours(23,59,59),(await Yt.collection(Mf).where("userId","==",t).where("date",">=",n).where("date","<=",r).get()).docs.map(u=>{let c=u.data();return{id:u.id,...c,date:c.date.toDate(),createdAt:c.createdAt.toDate()}}).sort((u,c)=>c.date-u.date).reverse()},BE=({date:t})=>{let e=$E(t),n=localStorage.getItem(e);if(n)try{return JSON.parse(n).map(o=>({...o,date:new Date(o.date),createdAt:new Date(o.createdAt)}))}catch(r){localStorage.removeItem(e),console.warn("error on recordGetFromCache"),console.error(r)}},WE=({records:t,date:e})=>{if(!t||!t.length)return;let n=$E(e);try{let r=JSON.stringify(t);localStorage.setItem(n,r)}catch(r){console.warn("error on recordSetToCache"),console.error(r)}};var Wr="records/setDate",GE="records/setDateLocally",HE="records/set",KE="records/push",Nu="records/fetch",zE="records/updateLocally",Pf="records/update",YE="records/deleteLocally",Lf="records/delete",jf="records/create",QE=t=>{t.on(Wr,async(e,n)=>{t.dispatch(GE,n),t.dispatch(Nu)}),t.on(GE,(e,n)=>({recordsDate:n})),t.on(YE,({records:e},n)=>({records:e.filter(r=>r.id!==n)})),t.on(zE,({records:e},n)=>({records:e.map(o=>o.id===n.id?n:o)})),t.on(KE,({records:e},n)=>({records:[n,...e]})),t.on(HE,(e,n)=>({records:n})),t.on(Lf,async(e,n)=>{t.dispatch(Me,!0);try{FE({recordId:n}),t.dispatch(YE,n),t.dispatch(rn,"\u0417\u0430\u043F\u0438\u0441\u044C \u0443\u0434\u0430\u043B\u0435\u043D\u0430"),t.dispatch(Br)}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C"),console.warn(`error on ${Lf}`),console.error(r)}t.dispatch(Me,!1)}),t.on(Pf,async(e,n)=>{t.dispatch(Me,!0);try{UE({record:n}),t.dispatch(zE,n),t.dispatch(rn,"\u0423\u0441\u043B\u0443\u0433\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430")}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C"),console.warn(`error on ${Pf}`),console.error(r)}t.dispatch(Me,!1)}),t.on(jf,async({user:e},n)=>{t.dispatch(Me,!0);try{let r=qE({record:n,userId:e.id});t.dispatch(KE,{...n,id:r}),t.dispatch(rn,"\u0417\u0430\u043F\u0438\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u0430"),t.dispatch(Br)}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C"),console.warn(`error on ${jf}`),console.error(r)}t.dispatch(Me,!1)}),t.on(Nu,async({user:e,recordsDate:n})=>{t.dispatch(Me,!0);try{let r=await VE({userId:e.id,date:n});t.dispatch(HE,r),t.dispatch(Br)}catch(r){t.dispatch(it,"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u0438"),console.warn(`error on ${Nu}`),console.error(r)}t.dispatch(Me,!1)}),t.on("@init",({recordsDate:e})=>{let n=e||new Date;return{recordsDate:new Date,records:BE({date:n})||[]}}),t.on("@changed",({records:e,recordsDate:n})=>{let r=n||new Date;e&&WE({date:r,records:e})})};var XE=jw([QS,uE,bE,QE,zS,jE]);function JE(t){if(!t)throw Error("Parameter args is required");if(!t.component==!t.asyncComponent)throw Error("One and only one of component and asyncComponent is required");if(t.component&&(t.asyncComponent=()=>Promise.resolve(t.component)),typeof t.asyncComponent!="function")throw Error("Parameter asyncComponent must be a function");if(t.conditions){Array.isArray(t.conditions)||(t.conditions=[t.conditions]);for(let n=0;n<t.conditions.length;n++)if(!t.conditions[n]||typeof t.conditions[n]!="function")throw Error("Invalid parameter conditions["+n+"]")}return t.loadingComponent&&(t.asyncComponent.loading=t.loadingComponent,t.asyncComponent.loadingParams=t.loadingParams||void 0),{component:t.asyncComponent,userData:t.userData,conditions:t.conditions&&t.conditions.length?t.conditions:void 0,props:t.props&&Object.keys(t.props).length?t.props:{},_sveltesparouter:!0}}var gg=JE;function $f(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,s,u=[],c="",f=t.split("/");for(f[0]||f.shift();o=f.shift();)n=o[0],n==="*"?(u.push("wild"),c+="/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),u.push(o.substring(1,~r?r:~s?s:o.length)),c+=!!~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(c+=(~r?"?":"")+"\\"+o.substring(s))):c+="/"+o;return{keys:u,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function Ej(t){let e,n,r,o=[t[2]];var s=t[0];function u(c){let f={};for(let p=0;p<o.length;p+=1)f=ae(f,o[p]);return{props:f}}return s&&(e=new s(u(t)),e.$on("routeEvent",t[7])),{c(){e&&U(e.$$.fragment),n=rt()},m(c,f){e&&F(e,c,f),P(c,n,f),r=!0},p(c,f){let p=f&4?We(o,[Ge(c[2])]):{};if(s!==(s=c[0])){if(e){Te();let d=e;D(d.$$.fragment,1,0,()=>{$(d,1)}),Se()}s?(e=new s(u(c)),e.$on("routeEvent",c[7]),U(e.$$.fragment),E(e.$$.fragment,1),F(e,n.parentNode,n)):e=null}else s&&e.$set(p)},i(c){r||(e&&E(e.$$.fragment,c),r=!0)},o(c){e&&D(e.$$.fragment,c),r=!1},d(c){c&&M(n),e&&$(e,c)}}}function kj(t){let e,n,r,o=[{params:t[1]},t[2]];var s=t[0];function u(c){let f={};for(let p=0;p<o.length;p+=1)f=ae(f,o[p]);return{props:f}}return s&&(e=new s(u(t)),e.$on("routeEvent",t[6])),{c(){e&&U(e.$$.fragment),n=rt()},m(c,f){e&&F(e,c,f),P(c,n,f),r=!0},p(c,f){let p=f&6?We(o,[f&2&&{params:c[1]},f&4&&Ge(c[2])]):{};if(s!==(s=c[0])){if(e){Te();let d=e;D(d.$$.fragment,1,0,()=>{$(d,1)}),Se()}s?(e=new s(u(c)),e.$on("routeEvent",c[6]),U(e.$$.fragment),E(e.$$.fragment,1),F(e,n.parentNode,n)):e=null}else s&&e.$set(p)},i(c){r||(e&&E(e.$$.fragment,c),r=!0)},o(c){e&&D(e.$$.fragment,c),r=!1},d(c){c&&M(n),e&&$(e,c)}}}function xj(t){let e,n,r,o,s=[kj,Ej],u=[];function c(f,p){return f[1]?0:1}return e=c(t,-1),n=u[e]=s[e](t),{c(){n.c(),r=rt()},m(f,p){u[e].m(f,p),P(f,r,p),o=!0},p(f,[p]){let d=e;e=c(f,p),e===d?u[e].p(f,p):(Te(),D(u[d],1,1,()=>{u[d]=null}),Se(),n=u[e],n?n.p(f,p):(n=u[e]=s[e](f),n.c()),E(n,1),n.m(r.parentNode,r))},i(f){o||(E(n),o=!0)},o(f){D(n),o=!1},d(f){u[e].d(f),f&&M(r)}}}function ZE(){let t=window.location.href.indexOf("#/"),e=t>-1?window.location.href.substr(t+1):"/",n=e.indexOf("?"),r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}var Ru=qp(null,function(e){e(ZE());let n=()=>{e(ZE())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),Ff=Vp(Ru,t=>t.location),t5=Vp(Ru,t=>t.querystring),ek=Yi(void 0);async function wt(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ca(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}async function tk(){await Ca(),window.history.back()}function Cn(t,e){if(e=rk(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return nk(t,e),{update(n){n=rk(n),nk(t,n)}}}function nk(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||Dj(r.currentTarget.getAttribute("href"))})}function rk(t){return t&&typeof t=="string"?{href:t}:t||{}}function Dj(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=t}function Cj(t,e,n){let{routes:r={}}=e,{prefix:o=""}=e,{restoreScrollState:s=!1}=e;class u{constructor(O,R){if(!R||typeof R!="function"&&(typeof R!="object"||R._sveltesparouter!==!0))throw Error("Invalid component object");if(!O||typeof O=="string"&&(O.length<1||O.charAt(0)!="/"&&O.charAt(0)!="*")||typeof O=="object"&&!(O instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');let{pattern:K,keys:ie}=$f(O);this.path=O,typeof R=="object"&&R._sveltesparouter===!0?(this.component=R.component,this.conditions=R.conditions||[],this.userData=R.userData,this.props=R.props||{}):(this.component=()=>Promise.resolve(R),this.conditions=[],this.props={}),this._pattern=K,this._keys=ie}match(O){if(o){if(typeof o=="string")if(O.startsWith(o))O=O.substr(o.length)||"/";else return null;else if(o instanceof RegExp){let Y=O.match(o);if(Y&&Y[0])O=O.substr(Y[0].length)||"/";else return null}}let R=this._pattern.exec(O);if(R===null)return null;if(this._keys===!1)return R;let K={},ie=0;for(;ie<this._keys.length;){try{K[this._keys[ie]]=decodeURIComponent(R[ie+1]||"")||null}catch(Y){K[this._keys[ie]]=null}ie++}return K}async checkConditions(O){for(let R=0;R<this.conditions.length;R++)if(!await this.conditions[R](O))return!1;return!0}}let c=[];r instanceof Map?r.forEach((L,O)=>{c.push(new u(O,L))}):Object.keys(r).forEach(L=>{c.push(new u(L,r[L]))});let f=null,p=null,d={},g=cn();async function v(L,O){await Ca(),g(L,O)}let y=null,b=null;s&&(b=L=>{L.state&&L.state.__svelte_spa_router_scrollY?y=L.state:y=null},window.addEventListener("popstate",b),Np(()=>{y?window.scrollTo(y.__svelte_spa_router_scrollX,y.__svelte_spa_router_scrollY):window.scrollTo(0,0)}));let T=null,S=null,A=Ru.subscribe(async L=>{T=L;let O=0;for(;O<c.length;){let R=c[O].match(L.location);if(!R){O++;continue}let K={route:c[O].path,location:L.location,querystring:L.querystring,userData:c[O].userData,params:R&&typeof R=="object"&&Object.keys(R).length?R:null};if(!await c[O].checkConditions(K)){n(0,f=null),S=null,v("conditionsFailed",K);return}v("routeLoading",Object.assign({},K));let ie=c[O].component;if(S!=ie){ie.loading?(n(0,f=ie.loading),S=ie,n(1,p=ie.loadingParams),n(2,d={}),v("routeLoaded",Object.assign({},K,{component:f,name:f.name,params:p}))):(n(0,f=null),S=null);let Y=await ie();if(L!=T)return;n(0,f=Y&&Y.default||Y),S=ie}R&&typeof R=="object"&&Object.keys(R).length?n(1,p=R):n(1,p=null),n(2,d=c[O].props),v("routeLoaded",Object.assign({},K,{component:f,name:f.name,params:p})).then(()=>{ek.set(p)});return}n(0,f=null),S=null,ek.set(void 0)});Rp(()=>{A(),b&&window.removeEventListener("popstate",b)});function V(L){ni.call(this,t,L)}function q(L){ni.call(this,t,L)}return t.$$set=L=>{"routes"in L&&n(3,r=L.routes),"prefix"in L&&n(4,o=L.prefix),"restoreScrollState"in L&&n(5,s=L.restoreScrollState)},t.$$.update=()=>{if(t.$$.dirty&32){e:history.scrollRestoration=s?"manual":"auto"}},[f,p,d,r,o,s,V,q]}var ik=class extends X{constructor(e){super();J(this,e,Cj,xj,Q,{routes:3,prefix:4,restoreScrollState:5})}},ok=ik;function Aj(t){let e,n;return{c(){e=Ue("svg"),n=Ue("circle"),C(n,"class","path svelte-13pbiu3"),C(n,"cx","25"),C(n,"cy","25"),C(n,"r","20"),C(n,"fill","none"),C(n,"stroke-width","5"),C(e,"class","spinner svelte-13pbiu3"),C(e,"viewBox","0 0 50 50")},m(r,o){P(r,e,o),x(e,n)},p:le,i:le,o:le,d(r){r&&M(e)}}}var sk=class extends X{constructor(e){super();J(this,e,null,Aj,Q,{})}},Uf=sk;function Oj(t){let e,n,r;return n=new Uf({}),{c(){e=j("div"),U(n.$$.fragment),C(e,"class","loading svelte-1qq5snj")},m(o,s){P(o,e,s),F(n,e,null),r=!0},p:le,i(o){r||(E(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&M(e),$(n)}}}var ak=class extends X{constructor(e){super();J(this,e,null,Oj,Q,{})}},uk=ak;function An(t,{delay:e=0,duration:n=400,easing:r=qc}={}){let o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*o}`}}function ck(t){let e,n;return{c(){e=Ue("title"),n=ne(t[0])},m(r,o){P(r,e,o),x(e,n)},p(r,o){o&1&&ve(n,r[0])},d(r){r&&M(e)}}}function Nj(t){let e,n,r,o=t[0]&&ck(t),s=t[3].default,u=zn(s,t,t[2],null);return{c(){e=Ue("svg"),o&&o.c(),n=rt(),u&&u.c(),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox",t[1]),C(e,"class","svelte-1i9ae5p")},m(c,f){P(c,e,f),o&&o.m(e,null),x(e,n),u&&u.m(e,null),r=!0},p(c,[f]){c[0]?o?o.p(c,f):(o=ck(c),o.c(),o.m(e,n)):o&&(o.d(1),o=null),u&&u.p&&(!r||f&4)&&Yn(u,s,c,c[2],r?f:-1,null,null),(!r||f&2)&&C(e,"viewBox",c[1])},i(c){r||(E(u,c),r=!0)},o(c){D(u,c),r=!1},d(c){c&&M(e),o&&o.d(),u&&u.d(c)}}}function Rj(t,e,n){let{$$slots:r={},$$scope:o}=e,{title:s=null}=e,{viewBox:u}=e;return t.$$set=c=>{"title"in c&&n(0,s=c.title),"viewBox"in c&&n(1,u=c.viewBox),"$$scope"in c&&n(2,o=c.$$scope)},[s,u,o,r]}var lk=class extends X{constructor(e){super();J(this,e,Rj,Nj,Q,{title:0,viewBox:1})}},Je=lk;function Mj(t){let e;return{c(){e=Ue("path"),C(e,"d","M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function Pj(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[Mj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Lj(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var fk=class extends X{constructor(e){super();J(this,e,Lj,Pj,Q,{})}},qs=fk;function jj(t){let e;return{c(){e=Ue("path"),C(e,"d","M18 10h-4v-4c0-1.104-.896-2-2-2s-2 .896-2 2l.071 4h-4.071c-1.104 0-2 .896-2 2s.896 2 2 2l4.071-.071-.071 4.071c0 1.104.896 2 2 2s2-.896 2-2v-4.071l4 .071c1.104 0 2-.896 2-2s-.896-2-2-2z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function $j(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[jj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Fj(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var hk=class extends X{constructor(e){super();J(this,e,Fj,$j,Q,{})}},dk=hk;function pk(t){let e,n,r,o,s,u,c,f;return n=new dk({}),{c(){e=j("a"),U(n.$$.fragment),r=ne("\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),C(e,"href",o=`${t[0]}/create`),C(e,"class","navbar__add-button svelte-plov1e")},m(p,d){P(p,e,d),F(n,e,null),x(e,r),u=!0,c||(f=xt(s=Cn.call(null,e)),c=!0)},p(p,d){(!u||d&1&&o!==(o=`${p[0]}/create`))&&C(e,"href",o)},i(p){u||(E(n.$$.fragment,p),u=!0)},o(p){D(n.$$.fragment,p),u=!1},d(p){p&&M(e),$(n),c=!1,f()}}}function Uj(t){let e,n,r,o,s,u=t[1].includes(t[0]),c,f,p;r=new qs({});let d=u&&pk(t);return{c(){e=j("div"),n=j("button"),U(r.$$.fragment),o=ne(" \u041D\u0430\u0437\u0430\u0434"),s=W(),d&&d.c(),C(n,"class","navbar__back-button svelte-plov1e"),C(e,"class","navbar svelte-plov1e")},m(g,v){P(g,e,v),x(e,n),F(r,n,null),x(n,o),x(e,s),d&&d.m(e,null),c=!0,f||(p=Ie(n,"click",t[2]),f=!0)},p(g,[v]){v&1&&(u=g[1].includes(g[0])),u?d?(d.p(g,v),v&1&&E(d,1)):(d=pk(g),d.c(),E(d,1),d.m(e,null)):d&&(Te(),D(d,1,1,()=>{d=null}),Se())},i(g){c||(E(r.$$.fragment,g),E(d),c=!0)},o(g){D(r.$$.fragment,g),D(d),c=!1},d(g){g&&M(e),$(r),d&&d.d(),f=!1,p()}}}function qj(t,e,n){let r;return be(t,Ff,u=>n(0,r=u)),[r,["/clients","/services","/records"],()=>tk()]}var mk=class extends X{constructor(e){super();J(this,e,qj,Uj,Q,{})}},vk=mk;function gk(t){let e,n,r,o,s,u;return{c(){e=j("button"),n=ne(t[0]),C(e,"class","message success-message svelte-scab68")},m(c,f){P(c,e,f),x(e,n),o=!0,s||(u=Ie(e,"click",t[4]),s=!0)},p(c,f){(!o||f&1)&&ve(n,c[0])},i(c){o||(Mn(()=>{r||(r=En(e,An,{},!0)),r.run(1)}),o=!0)},o(c){r||(r=En(e,An,{},!1)),r.run(0),o=!1},d(c){c&&M(e),c&&r&&r.end(),s=!1,u()}}}function yk(t){let e,n,r,o,s,u;return{c(){e=j("button"),n=ne(t[1]),C(e,"class","message error-message svelte-scab68")},m(c,f){P(c,e,f),x(e,n),o=!0,s||(u=Ie(e,"click",t[5]),s=!0)},p(c,f){(!o||f&2)&&ve(n,c[1])},i(c){o||(Mn(()=>{r||(r=En(e,An,{},!0)),r.run(1)}),o=!0)},o(c){r||(r=En(e,An,{},!1)),r.run(0),o=!1},d(c){c&&M(e),c&&r&&r.end(),s=!1,u()}}}function Vj(t){let e,n,r,o=t[0]&&gk(t),s=t[1]&&yk(t);return{c(){e=j("div"),o&&o.c(),n=W(),s&&s.c(),C(e,"class","notifications svelte-scab68")},m(u,c){P(u,e,c),o&&o.m(e,null),x(e,n),s&&s.m(e,null),r=!0},p(u,[c]){u[0]?o?(o.p(u,c),c&1&&E(o,1)):(o=gk(u),o.c(),E(o,1),o.m(e,n)):o&&(Te(),D(o,1,1,()=>{o=null}),Se()),u[1]?s?(s.p(u,c),c&2&&E(s,1)):(s=yk(u),s.c(),E(s,1),s.m(e,null)):s&&(Te(),D(s,1,1,()=>{s=null}),Se())},i(u){r||(E(o),E(s),r=!0)},o(u){D(o),D(s),r=!1},d(u){u&&M(e),o&&o.d(),s&&s.d()}}}function Bj(t,e,n){let r,o,{dispatch:s,errorMessage:u,successMessage:c}=Pe("errorMessage","successMessage");be(t,u,d=>n(1,o=d)),be(t,c,d=>n(0,r=d));function f(){s(rn,"")}function p(){s(it,"")}return[r,o,u,c,f,p]}var _k=class extends X{constructor(e){super();J(this,e,Bj,Vj,Q,{})}},wk=_k;function Wj(t){let e;return{c(){e=Ue("path"),C(e,"d","M48 82.7v346.7c0 19.1 15.5 34.7 34.7 34.7h346.7c19.1 0 34.7-15.5 34.7-34.7V82.7c0-19.1-15.5-34.7-34.7-34.7H82.7C63.5 48 48 63.5 48 82.7zm89.3 297.1c-13.1 1.7-24.1-9.3-22.4-22.4 1.1-8.9 8.3-16.1 17.2-17.2 13.1-1.7 24.1 9.3 22.4 22.4-1.1 8.9-8.3 16.1-17.2 17.2zm0-104c-13.1 1.7-24.1-9.3-22.4-22.4 1.1-8.9 8.3-16.1 17.2-17.2 13.1-1.7 24.1 9.3 22.4 22.4-1.1 8.9-8.3 16.1-17.2 17.2zm0-104c-13.1 1.7-24.1-9.3-22.4-22.4 1.1-8.9 8.3-16.1 17.2-17.2 13.1-1.7 24.1 9.3 22.4 22.4-1.1 8.9-8.3 16.1-17.2 17.2zM384.7 374h-180c-7.7 0-14-6.3-14-14s6.3-14 14-14h180c7.7 0 14 6.3 14 14s-6.3 14-14 14zm0-104h-180c-7.7 0-14-6.3-14-14s6.3-14 14-14h180c7.7 0 14 6.3 14 14s-6.3 14-14 14zm0-104h-180c-7.7 0-14-6.3-14-14s6.3-14 14-14h180c7.7 0 14 6.3 14 14s-6.3 14-14 14z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function Gj(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[Wj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Hj(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var bk=class extends X{constructor(e){super();J(this,e,Hj,Gj,Q,{})}},Ik=bk;function Kj(t){let e;return{c(){e=Ue("path"),C(e,"d","M17 9c0-1.381-.56-2.631-1.464-3.535-.905-.905-2.155-1.465-3.536-1.465s-2.631.56-3.536 1.465c-.904.904-1.464 2.154-1.464 3.535s.56 2.631 1.464 3.535c.905.905 2.155 1.465 3.536 1.465s2.631-.56 3.536-1.465c.904-.904 1.464-2.154 1.464-3.535zM6 19c0 1 2.25 2 6 2 3.518 0 6-1 6-2 0-2-2.354-4-6-4-3.75 0-6 2-6 4z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function zj(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[Kj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Yj(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Tk=class extends X{constructor(e){super();J(this,e,Yj,zj,Q,{})}},Sk=Tk;function Qj(t){let e;return{c(){e=Ue("path"),C(e,"d","M12 14c1.381 0 2.631-.56 3.536-1.465.904-.904 1.464-2.154 1.464-3.535s-.56-2.631-1.464-3.535c-.905-.905-2.155-1.465-3.536-1.465s-2.631.56-3.536 1.465c-.904.904-1.464 2.154-1.464 3.535s.56 2.631 1.464 3.535c.905.905 2.155 1.465 3.536 1.465zM20 15c.69 0 1.315-.279 1.768-.731.453-.452.732-1.077.732-1.769 0-.69-.279-1.315-.732-1.768-.453-.453-1.078-.732-1.768-.732-.691 0-1.316.279-1.769.732-.452.453-.731 1.078-.731 1.768 0 .691.279 1.316.731 1.769s1.078.731 1.769.731zM20 15.59c-1.331 0-2.332.406-2.917.968-1.115-.917-2.878-1.558-5.083-1.558-2.266 0-3.995.648-5.092 1.564-.596-.565-1.608-.974-2.908-.974-2.188 0-3.5 1.09-3.5 2.182 0 .545 1.312 1.092 3.5 1.092.604 0 1.146-.051 1.623-.133l-.04.27c0 1 2.406 2 6.417 2 3.762 0 6.417-1 6.417-2l-.02-.255c.463.073.995.118 1.603.118 2.051 0 3.5-.547 3.5-1.092 0-1.092-1.373-2.182-3.5-2.182zM4 15c.69 0 1.315-.279 1.768-.732.453-.453.732-1.078.732-1.768 0-.689-.279-1.314-.732-1.768-.453-.452-1.078-.732-1.768-.732-.691 0-1.316.28-1.769.732-.452.454-.731 1.079-.731 1.768 0 .69.279 1.315.731 1.768.453.453 1.078.732 1.769.732z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function Xj(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[Qj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Jj(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Ek=class extends X{constructor(e){super();J(this,e,Jj,Xj,Q,{})}},kk=Ek;function Zj(t){let e;return{c(){e=Ue("path"),C(e,"d","M19 6.184v-.184c0-1.657-1.343-3-3-3s-3 1.343-3 3h-2c0-1.657-1.343-3-3-3s-3 1.343-3 3v.184c-1.161.415-2 1.514-2 2.816v9c0 1.654 1.346 3 3 3h12c1.654 0 3-1.346 3-3v-9c0-1.302-.839-2.401-2-2.816zm-4-.184c0-.552.447-1 1-1s1 .448 1 1v2c0 .552-.447 1-1 1s-1-.448-1-1v-2zm-8 0c0-.552.447-1 1-1s1 .448 1 1v2c0 .552-.447 1-1 1s-1-.448-1-1v-2zm12 12c0 .551-.448 1-1 1h-12c-.552 0-1-.449-1-1v-6h14v6z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function e$(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[Zj]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function t$(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var xk=class extends X{constructor(e){super();J(this,e,t$,e$,Q,{})}},Dk=xk;function n$(t){let e;return{c(){e=Ue("path"),C(e,"d","M20 6c0-.587-.257-1.167-.75-1.562-.863-.69-2.121-.551-2.812.312l-2.789 3.486-2.449-1.836c-.864-.648-2.087-.493-2.762.351l-4 5c-.294.368-.438.811-.438 1.249v3h16v-10zM20 19h-16c-.552 0-1 .447-1 1s.448 1 1 1h16c.552 0 1-.447 1-1s-.448-1-1-1z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function r$(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[n$]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function i$(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Ck=class extends X{constructor(e){super();J(this,e,i$,r$,Q,{})}},Ak=Ck;var qf=[],Ok;function Nk(t){let e=t.pattern.test(Ok);Rk(t,t.className,e),Rk(t,t.inactiveClassName,!e)}function Rk(t,e,n){(e||"").split(" ").forEach(r=>{!r||(t.node.classList.remove(r),n&&t.node.classList.add(r))})}Ru.subscribe(t=>{Ok=t.location+(t.querystring?"?"+t.querystring:""),qf.map(Nk)});function bo(t,e){if(e&&(typeof e=="string"||typeof e=="object"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&t.hasAttribute("href")&&(e.path=t.getAttribute("href"),e.path&&e.path.length>1&&e.path.charAt(0)=="#"&&(e.path=e.path.substring(1))),e.className||(e.className="active"),!e.path||typeof e.path=="string"&&(e.path.length<1||e.path.charAt(0)!="/"&&e.path.charAt(0)!="*"))throw Error('Invalid value for "path" argument');let{pattern:n}=typeof e.path=="string"?$f(e.path):{pattern:e.path},r={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return qf.push(r),Nk(r),{destroy(){qf.splice(qf.indexOf(r),1)}}}function o$(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T,S,A,V,q,L,O,R,K,ie,Y,ye,N,Qe,_e,at,we,tt,ke;return o=new Dk({}),d=new kk({}),S=new Ik({}),R=new Ak({}),Qe=new Sk({}),{c(){e=j("ul"),n=j("li"),r=j("a"),U(o.$$.fragment),c=W(),f=j("li"),p=j("a"),U(d.$$.fragment),y=W(),b=j("li"),T=j("a"),U(S.$$.fragment),q=W(),L=j("li"),O=j("a"),U(R.$$.fragment),Y=W(),ye=j("li"),N=j("a"),U(Qe.$$.fragment),C(r,"href","/"),C(r,"class","tabbar__link svelte-h454bl"),C(n,"class","tabbar__item svelte-h454bl"),C(p,"href","/clients"),C(p,"class","tabbar__link svelte-h454bl"),C(f,"class","tabbar__item svelte-h454bl"),C(T,"href","/services"),C(T,"class","tabbar__link svelte-h454bl"),C(b,"class","tabbar__item svelte-h454bl"),C(O,"href","/statistic"),C(O,"class","tabbar__link svelte-h454bl"),C(L,"class","tabbar__item svelte-h454bl"),C(N,"href","/account"),C(N,"class","tabbar__link svelte-h454bl"),C(ye,"class","tabbar__item svelte-h454bl"),C(e,"class","tabbar svelte-h454bl")},m(Le,ut){P(Le,e,ut),x(e,n),x(n,r),F(o,r,null),x(e,c),x(e,f),x(f,p),F(d,p,null),x(e,y),x(e,b),x(b,T),F(S,T,null),x(e,q),x(e,L),x(L,O),F(R,O,null),x(e,Y),x(e,ye),x(ye,N),F(Qe,N,null),we=!0,tt||(ke=[xt(s=Cn.call(null,r)),xt(u=bo.call(null,r)),xt(g=Cn.call(null,p)),xt(v=bo.call(null,p)),xt(A=Cn.call(null,T)),xt(V=bo.call(null,T)),xt(K=Cn.call(null,O)),xt(ie=bo.call(null,O)),xt(_e=Cn.call(null,N)),xt(at=bo.call(null,N))],tt=!0)},p:le,i(Le){we||(E(o.$$.fragment,Le),E(d.$$.fragment,Le),E(S.$$.fragment,Le),E(R.$$.fragment,Le),E(Qe.$$.fragment,Le),we=!0)},o(Le){D(o.$$.fragment,Le),D(d.$$.fragment,Le),D(S.$$.fragment,Le),D(R.$$.fragment,Le),D(Qe.$$.fragment,Le),we=!1},d(Le){Le&&M(e),$(o),$(d),$(S),$(R),$(Qe),tt=!1,ct(ke)}}}var Mk=class extends X{constructor(e){super();J(this,e,null,o$,Q,{})}},Pk=Mk;function Lk(t){let e,n,r,o;return n=new Uf({}),{c(){e=j("div"),U(n.$$.fragment),C(e,"class","pending svelte-10ng85o")},m(s,u){P(s,e,u),F(n,e,null),o=!0},i(s){o||(E(n.$$.fragment,s),Mn(()=>{r||(r=En(e,An,{duration:500},!0)),r.run(1)}),o=!0)},o(s){D(n.$$.fragment,s),r||(r=En(e,An,{duration:500},!1)),r.run(0),o=!1},d(s){s&&M(e),$(n),s&&r&&r.end()}}}function jk(t){let e,n,r;return n=new Pk({}),{c(){e=j("div"),U(n.$$.fragment),C(e,"class","page-container__tabbar svelte-10ng85o")},m(o,s){P(o,e,s),F(n,e,null),r=!0},i(o){r||(E(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&M(e),$(n)}}}function s$(t){let e,n,r,o,s,u,c,f,p,d,g=t[1]&&Lk(t);o=new vk({});let v=t[4].default,y=zn(v,t,t[3],null),b=!t[0]&&jk(t);return p=new wk({}),{c(){g&&g.c(),e=W(),n=j("main"),r=j("div"),U(o.$$.fragment),s=W(),u=j("div"),y&&y.c(),c=W(),b&&b.c(),f=W(),U(p.$$.fragment),C(r,"class","page-container__navbar svelte-10ng85o"),C(u,"class","page-container__content svelte-10ng85o"),C(n,"class","page-container svelte-10ng85o"),$e(n,"page-container--with-out-tabbar",t[0])},m(T,S){g&&g.m(T,S),P(T,e,S),P(T,n,S),x(n,r),F(o,r,null),x(n,s),x(n,u),y&&y.m(u,null),x(n,c),b&&b.m(n,null),x(n,f),F(p,n,null),d=!0},p(T,[S]){T[1]?g?S&2&&E(g,1):(g=Lk(T),g.c(),E(g,1),g.m(e.parentNode,e)):g&&(Te(),D(g,1,1,()=>{g=null}),Se()),y&&y.p&&(!d||S&8)&&Yn(y,v,T,T[3],d?S:-1,null,null),T[0]?b&&(Te(),D(b,1,1,()=>{b=null}),Se()):b?S&1&&E(b,1):(b=jk(T),b.c(),E(b,1),b.m(n,f)),S&1&&$e(n,"page-container--with-out-tabbar",T[0])},i(T){d||(E(g),E(o.$$.fragment,T),E(y,T),E(b),E(p.$$.fragment,T),d=!0)},o(T){D(g),D(o.$$.fragment,T),D(y,T),D(b),D(p.$$.fragment,T),d=!1},d(T){g&&g.d(T),T&&M(e),T&&M(n),$(o),y&&y.d(T),b&&b.d(),$(p)}}}function a$(t,e,n){let r,{$$slots:o={},$$scope:s}=e,{hideTabBar:u=!1}=e,{isPending:c}=Pe("isPending");return be(t,c,f=>n(1,r=f)),t.$$set=f=>{"hideTabBar"in f&&n(0,u=f.hideTabBar),"$$scope"in f&&n(3,s=f.$$scope)},[u,r,c,s,o]}var $k=class extends X{constructor(e){super();J(this,e,a$,s$,Q,{hideTabBar:0})}},Fk=$k;function u$(t){let e;return{c(){e=Ue("path"),C(e,"d","M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function c$(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[u$]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function l$(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Uk=class extends X{constructor(e){super();J(this,e,l$,c$,Q,{})}},Ei=Uk;function qk(t,e,n){let r=t.slice();return r[3]=e[n],r}var f$=t=>({item:t&1}),Vk=t=>({item:t[3]});function Bk(t,e){let n,r,o=e[2].default,s=zn(o,e,e[1],Vk);return{key:t,first:null,c(){n=rt(),s&&s.c(),this.first=n},m(u,c){P(u,n,c),s&&s.m(u,c),r=!0},p(u,c){e=u,s&&s.p&&(!r||c&3)&&Yn(s,o,e,e[1],r?c:-1,f$,Vk)},i(u){r||(E(s,u),r=!0)},o(u){D(s,u),r=!1},d(u){u&&M(n),s&&s.d(u)}}}function h$(t){let e,n=[],r=new Map,o,s=t[0],u=c=>c[3].id;for(let c=0;c<s.length;c+=1){let f=qk(t,s,c),p=u(f);r.set(p,n[c]=Bk(p,f))}return{c(){e=j("ul");for(let c=0;c<n.length;c+=1)n[c].c();C(e,"class","list svelte-1e8w6uw")},m(c,f){P(c,e,f);for(let p=0;p<n.length;p+=1)n[p].m(e,null);o=!0},p(c,[f]){f&3&&(s=c[0],Te(),n=xw(n,f,u,1,c,s,r,e,kw,Bk,null,qk),Se())},i(c){if(!o){for(let f=0;f<s.length;f+=1)E(n[f]);o=!0}},o(c){for(let f=0;f<n.length;f+=1)D(n[f]);o=!1},d(c){c&&M(e);for(let f=0;f<n.length;f+=1)n[f].d()}}}function d$(t,e,n){let{$$slots:r={},$$scope:o}=e,{items:s=[]}=e;return t.$$set=u=>{"items"in u&&n(0,s=u.items),"$$scope"in u&&n(1,o=u.$$scope)},[s,o,r]}var Wk=class extends X{constructor(e){super();J(this,e,d$,h$,Q,{items:0})}},Sr=Wk;function p$(t){let e,n;return{c(){e=j("h2"),n=ne(t[0]),C(e,"class","title svelte-1854tpe")},m(r,o){P(r,e,o),x(e,n)},p(r,[o]){o&1&&ve(n,r[0])},i:le,o:le,d(r){r&&M(e)}}}function m$(t,e,n){let{title:r="Title of page"}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title)},[r]}var Gk=class extends X{constructor(e){super();J(this,e,m$,p$,Q,{title:0})}},st=Gk;function v$(t){let e;return{c(){e=ne(t[2])},m(n,r){P(n,e,r)},p(n,r){r&4&&ve(e,n[2])},d(n){n&&M(e)}}}function g$(t){let e,n;return{c(){e=j("img"),e.src!==(n=t[1])&&C(e,"src",n),C(e,"class","avatar__image svelte-srgkw5"),C(e,"alt","Avatar of user")},m(r,o){P(r,e,o)},p(r,o){o&2&&e.src!==(n=r[1])&&C(e,"src",n)},d(r){r&&M(e)}}}function y$(t){let e;function n(s,u){return s[1]?g$:v$}let r=n(t,-1),o=r(t);return{c(){e=j("div"),o.c(),C(e,"class","avatar svelte-srgkw5"),$e(e,"avatar--rounded",t[0])},m(s,u){P(s,e,u),o.m(e,null)},p(s,[u]){r===(r=n(s,u))&&o?o.p(s,u):(o.d(1),o=r(s),o&&(o.c(),o.m(e,null))),u&1&&$e(e,"avatar--rounded",s[0])},i:le,o:le,d(s){s&&M(e),o.d()}}}function _$(t,e,n){let{initials:r}=e,{rounded:o=!0}=e,{src:s}=e,u,c;return t.$$set=f=>{"initials"in f&&n(3,r=f.initials),"rounded"in f&&n(0,o=f.rounded),"src"in f&&n(1,s=f.src)},t.$$.update=()=>{if(t.$$.dirty&26){e:s||(n(4,u=r.split(" ").slice(0,2)),n(2,c=u.length<2?r.substring(0,2):u.map(f=>f.charAt(0)).join("")))}},[o,s,c,r,u]}var Hk=class extends X{constructor(e){super();J(this,e,_$,y$,Q,{initials:3,rounded:0,src:1})}},Gr=Hk;function w$(t){let e;return{c(){e=Ue("path"),C(e,"d","M337.509 305.372h-17.501l-6.571-5.486c20.791-25.232 33.922-57.054 33.922-93.257C347.358 127.632 283.896 64 205.135 64 127.452 64 64 127.632 64 206.629s63.452 142.628 142.225 142.628c35.011 0 67.831-13.167 92.991-34.008l6.561 5.487v17.551L415.18 448 448 415.086 337.509 305.372zm-131.284 0c-54.702 0-98.463-43.887-98.463-98.743 0-54.858 43.761-98.742 98.463-98.742 54.7 0 98.462 43.884 98.462 98.742 0 54.856-43.762 98.743-98.462 98.743z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function b$(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[w$]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function I$(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Kk=class extends X{constructor(e){super();J(this,e,I$,b$,Q,{})}},zk=Kk;function T$(t){let e;return{c(){e=Ue("path"),C(e,"d","M278.6 256l68.2-68.2c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-68.2-68.2c-6.2-6.2-16.4-6.2-22.6 0-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3l68.2 68.2-68.2 68.2c-3.1 3.1-4.7 7.2-4.7 11.3 0 4.1 1.6 8.2 4.7 11.3 6.2 6.2 16.4 6.2 22.6 0l68.2-68.2 68.2 68.2c6.2 6.2 16.4 6.2 22.6 0 6.2-6.2 6.2-16.4 0-22.6L278.6 256z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function S$(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[T$]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function E$(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Yk=class extends X{constructor(e){super();J(this,e,E$,S$,Q,{})}},Vs=Yk;function k$(t){let e,n,r,o,s,u,c,f,p,d,g,v;return o=new zk({}),p=new Vs({}),{c(){e=j("div"),n=j("div"),r=j("div"),U(o.$$.fragment),s=W(),u=j("input"),c=W(),f=j("div"),U(p.$$.fragment),C(r,"class","searchbar__leading-icon svelte-1p0yx5m"),C(u,"type","text"),C(u,"placeholder","\u041F\u043E\u0438\u0441\u043A"),C(u,"class","searchbar__input svelte-1p0yx5m"),C(f,"class","searchbar__clear-button svelte-1p0yx5m"),$e(f,"searchbar__clear-button--active",t[1]?.length),C(n,"class","searchbar__fake-input svelte-1p0yx5m"),C(e,"class","searchbar svelte-1p0yx5m")},m(y,b){P(y,e,b),x(e,n),x(n,r),F(o,r,null),x(n,s),x(n,u),Ap(u,t[1]),t[5](u),x(n,c),x(n,f),F(p,f,null),d=!0,g||(v=[Ie(u,"input",t[4]),Ie(u,"change",t[3]),Ie(u,"input",t[3]),Ie(f,"click",t[2])],g=!0)},p(y,[b]){b&2&&u.value!==y[1]&&Ap(u,y[1]),b&2&&$e(f,"searchbar__clear-button--active",y[1]?.length)},i(y){d||(E(o.$$.fragment,y),E(p.$$.fragment,y),d=!0)},o(y){D(o.$$.fragment,y),D(p.$$.fragment,y),d=!1},d(y){y&&M(e),$(o),t[5](null),$(p),g=!1,ct(v)}}}function x$(t,e,n){let r,o,s=cn(),u=()=>{r&&(n(1,o=""),r.focus(),n(0,r.value="",r),s("input",{value:""}))},c=({target:d})=>{s("input",{value:d.value})};function f(){o=this.value,n(1,o)}function p(d){Hc[d?"unshift":"push"](()=>{r=d,n(0,r)})}return[r,o,u,c,f,p]}var Qk=class extends X{constructor(e){super();J(this,e,x$,k$,Q,{})}},ki=Qk;function D$(t){let e,n;return{c(){e=j("div"),n=ne(t[0]),C(e,"class","empty-message svelte-wmkbwt")},m(r,o){P(r,e,o),x(e,n)},p(r,[o]){o&1&&ve(n,r[0])},i:le,o:le,d(r){r&&M(e)}}}function C$(t,e,n){let{message:r="\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"}=e;return t.$$set=o=>{"message"in o&&n(0,r=o.message)},[r]}var Xk=class extends X{constructor(e){super();J(this,e,C$,D$,Q,{message:0})}},on=Xk;function A$(t){let e,n;return e=new on({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function O$(t){let e,n;return e=new Sr({props:{items:t[0],$$slots:{default:[N$,({item:r})=>({5:r}),({item:r})=>r?32:0]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.items=r[0]),o&96&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function N$(t){let e,n,r,o,s,u,c,f,p,d,g,v,y=t[5].name+"",b,T,S,A=t[5].description+"",V,q,L,O,R,K,ie;return f=new Gr({props:{initials:t[5].name}}),O=new Ei({}),{c(){e=j("li"),n=j("a"),r=ne("\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430"),u=W(),c=j("div"),U(f.$$.fragment),p=W(),d=j("div"),g=j("div"),v=j("h2"),b=ne(y),T=W(),S=j("h3"),V=ne(A),q=W(),L=j("div"),U(O.$$.fragment),C(n,"title","\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043A\u043B\u0438\u0435\u043D\u0442\u0430"),C(n,"href",o=`/clients/${t[5].id}`),C(n,"class","list__event-button"),C(c,"class","list__item-avatar"),C(g,"class","list__item-content"),C(L,"class","list__item-end"),C(d,"class","list__item")},m(Y,ye){P(Y,e,ye),x(e,n),x(n,r),x(e,u),x(e,c),F(f,c,null),x(e,p),x(e,d),x(d,g),x(g,v),x(v,b),x(g,T),x(g,S),x(S,V),x(d,q),x(d,L),F(O,L,null),R=!0,K||(ie=xt(s=Cn.call(null,n)),K=!0)},p(Y,ye){(!R||ye&32&&o!==(o=`/clients/${Y[5].id}`))&&C(n,"href",o);let N={};ye&32&&(N.initials=Y[5].name),f.$set(N),(!R||ye&32)&&y!==(y=Y[5].name+"")&&ve(b,y),(!R||ye&32)&&A!==(A=Y[5].description+"")&&ve(V,A)},i(Y){R||(E(f.$$.fragment,Y),E(O.$$.fragment,Y),R=!0)},o(Y){D(f.$$.fragment,Y),D(O.$$.fragment,Y),R=!1},d(Y){Y&&M(e),$(f),$(O),K=!1,ie()}}}function R$(t){let e,n,r,o,s,u,c,f;e=new st({props:{title:"\u041C\u043E\u0438 \u043A\u043B\u0438\u0435\u043D\u0442\u044B"}}),r=new ki({}),r.$on("input",t[2]);let p=[O$,A$],d=[];function g(v,y){return v[0].length?0:1}return s=g(t,-1),u=d[s]=p[s](t),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment),o=W(),u.c(),c=rt()},m(v,y){F(e,v,y),P(v,n,y),F(r,v,y),P(v,o,y),d[s].m(v,y),P(v,c,y),f=!0},p(v,[y]){let b=s;s=g(v,y),s===b?d[s].p(v,y):(Te(),D(d[b],1,1,()=>{d[b]=null}),Se(),u=d[s],u?u.p(v,y):(u=d[s]=p[s](v),u.c()),E(u,1),u.m(c.parentNode,c))},i(v){f||(E(e.$$.fragment,v),E(r.$$.fragment,v),E(u),f=!0)},o(v){D(e.$$.fragment,v),D(r.$$.fragment,v),D(u),f=!1},d(v){$(e,v),v&&M(n),$(r,v),v&&M(o),d[s].d(v),v&&M(c)}}}function M$(t,e,n){let r,o,{clients:s}=Pe("clients");be(t,s,f=>n(4,o=f));let u="",c=({detail:f})=>{n(3,u=f.value)};return t.$$.update=()=>{if(t.$$.dirty&24){e:n(0,r=o.filter(({name:f,description:p})=>f.toLowerCase().includes(u.toLowerCase())||p.toLowerCase().includes(u.toLowerCase())))}},[r,s,c,u,o]}var Jk=class extends X{constructor(e){super();J(this,e,M$,R$,Q,{})}},Zk=Jk;function P$(t){let e,n,r=t[1].default,o=zn(r,t,t[0],null);return{c(){e=j("div"),o&&o.c(),C(e,"class","form-item svelte-1shymh7")},m(s,u){P(s,e,u),o&&o.m(e,null),n=!0},p(s,[u]){o&&o.p&&(!n||u&1)&&Yn(o,r,s,s[0],n?u:-1,null,null)},i(s){n||(E(o,s),n=!0)},o(s){D(o,s),n=!1},d(s){s&&M(e),o&&o.d(s)}}}function L$(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=s=>{"$$scope"in s&&n(0,o=s.$$scope)},[o,r]}var ex=class extends X{constructor(e){super();J(this,e,L$,P$,Q,{})}},Mt=ex;function tx(t){let e,n;return{c(){e=j("label"),n=ne(t[0]),C(e,"class","input__label svelte-1an8i2r"),C(e,"for",t[3])},m(r,o){P(r,e,o),x(e,n)},p(r,o){o&1&&ve(n,r[0]),o&8&&C(e,"for",r[3])},d(r){r&&M(e)}}}function j$(t){let e,n,r,o,s,u=t[0]&&tx(t);return{c(){e=j("div"),u&&u.c(),n=W(),r=j("input"),C(r,"class","input__input svelte-1an8i2r"),C(r,"placeholder",t[4]),r.required=t[2],C(r,"type",t[1]),C(r,"id",t[3]),r.value=t[5],C(r,"name",t[3]),C(e,"class","input svelte-1an8i2r")},m(c,f){P(c,e,f),u&&u.m(e,null),x(e,n),x(e,r),o||(s=[Ie(r,"blur",t[6]),Ie(r,"change",t[7])],o=!0)},p(c,[f]){c[0]?u?u.p(c,f):(u=tx(c),u.c(),u.m(e,n)):u&&(u.d(1),u=null),f&16&&C(r,"placeholder",c[4]),f&4&&(r.required=c[2]),f&2&&C(r,"type",c[1]),f&8&&C(r,"id",c[3]),f&32&&r.value!==c[5]&&(r.value=c[5]),f&8&&C(r,"name",c[3])},i:le,o:le,d(c){c&&M(e),u&&u.d(),o=!1,ct(s)}}}function $$(t,e,n){let{label:r}=e,{type:o}=e,{required:s=!1}=e,{name:u}=e,{placeholder:c}=e,{value:f=""}=e;function p(g){ni.call(this,t,g)}function d(g){ni.call(this,t,g)}return t.$$set=g=>{"label"in g&&n(0,r=g.label),"type"in g&&n(1,o=g.type),"required"in g&&n(2,s=g.required),"name"in g&&n(3,u=g.name),"placeholder"in g&&n(4,c=g.placeholder),"value"in g&&n(5,f=g.value)},[r,o,s,u,c,f,p,d]}var nx=class extends X{constructor(e){super();J(this,e,$$,j$,Q,{label:0,type:1,required:2,name:3,placeholder:4,value:5})}},Hr=nx;function F$(t){let e,n;return e=new Hr({props:{required:!0,value:t[0].name,placeholder:"\u0412\u043E\u043D\u044F\u0435\u0432\u0430 \u041C\u0430\u0440\u0438\u043D\u0430",type:"text",label:"\u0418\u043C\u044F",name:"name"}}),e.$on("change",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.value=r[0].name),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function U$(t){let e,n;return e=new Hr({props:{value:t[0].description,placeholder:"\u0412\u043E\u043D\u044F\u0435\u0442 \u0442\u0443\u0445\u043B\u044B\u043C \u0441\u044B\u0440\u043E\u043C",type:"text",label:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",name:"description"}}),e.$on("change",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.value=r[0].description),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function q$(t){let e;return{c(){e=ne(t[1])},m(n,r){P(n,e,r)},p(n,r){r&2&&ve(e,n[1])},d(n){n&&M(e)}}}function V$(t){let e,n;return e=new Dt({props:{fullWidth:!0,$$slots:{default:[q$]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&34&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function B$(t){let e,n,r,o,s,u,c,f,p;return n=new Mt({props:{$$slots:{default:[F$]},$$scope:{ctx:t}}}),o=new Mt({props:{$$slots:{default:[U$]},$$scope:{ctx:t}}}),u=new Mt({props:{$$slots:{default:[V$]},$$scope:{ctx:t}}}),{c(){e=j("form"),U(n.$$.fragment),r=W(),U(o.$$.fragment),s=W(),U(u.$$.fragment)},m(d,g){P(d,e,g),F(n,e,null),x(e,r),F(o,e,null),x(e,s),F(u,e,null),c=!0,f||(p=Ie(e,"submit",Ko(t[2])),f=!0)},p(d,[g]){let v={};g&33&&(v.$$scope={dirty:g,ctx:d}),n.$set(v);let y={};g&33&&(y.$$scope={dirty:g,ctx:d}),o.$set(y);let b={};g&34&&(b.$$scope={dirty:g,ctx:d}),u.$set(b)},i(d){c||(E(n.$$.fragment,d),E(o.$$.fragment,d),E(u.$$.fragment,d),c=!0)},o(d){D(n.$$.fragment,d),D(o.$$.fragment,d),D(u.$$.fragment,d),c=!1},d(d){d&&M(e),$(n),$(o),$(u),f=!1,p()}}}function W$(t,e,n){let{client:r={name:"",description:""}}=e,{buttonText:o="\u0421\u043E\u0437\u0434\u0430\u0442\u044C"}=e,s=cn();function u(){s("submit",{client:r})}function c({target:f}){n(0,r[f.name]=f.value,r)}return t.$$set=f=>{"client"in f&&n(0,r=f.client),"buttonText"in f&&n(1,o=f.buttonText)},[r,o,u,c]}var rx=class extends X{constructor(e){super();J(this,e,W$,B$,Q,{client:0,buttonText:1})}},Vf=rx;function G$(t){let e,n;return e=new on({props:{message:"\u041A\u043B\u0438\u0435\u043D\u0442 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D"}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function H$(t){let e,n,r,o;return e=new Vf({props:{buttonText:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",client:t[0]}}),e.$on("submit",t[2]),r=new Mt({props:{$$slots:{default:[z$]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p(s,u){let c={};u&1&&(c.client=s[0]),e.$set(c);let f={};u&128&&(f.$$scope={dirty:u,ctx:s}),r.$set(f)},i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function K$(t){let e;return{c(){e=ne("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function z$(t){let e,n;return e=new Dt({props:{onlyBorder:!0,danger:!0,fullWidth:!0,$$slots:{default:[K$]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&128&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Y$(t){let e,n,r,o,s,u;e=new st({props:{title:"\u0420\u0435\u0434. \u043A\u043B\u0438\u0435\u043D\u0442\u0430"}});let c=[H$,G$],f=[];function p(d,g){return d[0]?0:1}return r=p(t,-1),o=f[r]=c[r](t),{c(){U(e.$$.fragment),n=W(),o.c(),s=rt()},m(d,g){F(e,d,g),P(d,n,g),f[r].m(d,g),P(d,s,g),u=!0},p(d,[g]){let v=r;r=p(d,g),r===v?f[r].p(d,g):(Te(),D(f[v],1,1,()=>{f[v]=null}),Se(),o=f[r],o?o.p(d,g):(o=f[r]=c[r](d),o.c()),E(o,1),o.m(s.parentNode,s))},i(d){u||(E(e.$$.fragment,d),E(o),u=!0)},o(d){D(e.$$.fragment,d),D(o),u=!1},d(d){$(e,d),d&&M(n),f[r].d(d),d&&M(s)}}}function Q$(t,e,n){let r,o,{params:s={}}=e,{clients:u,dispatch:c}=Pe("clients");be(t,u,d=>n(5,o=d));let f=({detail:d})=>{c(Sf,d.client),wt("/clients")},p=()=>{!confirm("\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C")||(c(Ef,r.id),wt("/clients"))};return t.$$set=d=>{"params"in d&&n(4,s=d.params)},t.$$.update=()=>{if(t.$$.dirty&48){e:n(0,r=o.find(d=>d.id===s?.id))}},[r,u,f,p,s,o]}var ix=class extends X{constructor(e){super();J(this,e,Q$,Y$,Q,{params:4})}},ox=ix;function X$(t){let e,n,r,o;return e=new st({props:{title:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0430"}}),r=new Vf({}),r.$on("submit",t[0]),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p:le,i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function J$(t){let{dispatch:e}=Pe();return[({detail:r})=>{e(Tf,r.client),wt("/clients")}]}var sx=class extends X{constructor(e){super();J(this,e,J$,X$,Q,{})}},ax=sx;function Z$(t){let e,n;return e=new on({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function e4(t){let e,n;return e=new Sr({props:{items:t[0],$$slots:{default:[t4,({item:r})=>({5:r}),({item:r})=>r?32:0]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.items=r[0]),o&96&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function t4(t){let e,n,r,o,s,u,c,f,p,d=t[5].name+"",g,v,y,b=t[5].price+"",T,S,A,V,q,L,O,R;return q=new Ei({}),{c(){e=j("li"),n=j("a"),r=ne("\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443"),u=W(),c=j("div"),f=j("div"),p=j("h2"),g=ne(d),v=W(),y=j("h3"),T=ne(b),S=ne(" \u0440\u0443\u0431\u043B\u0435\u0439"),A=W(),V=j("div"),U(q.$$.fragment),C(n,"title","\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0443\u0441\u043B\u0443\u0433\u0443"),C(n,"href",o=`/services/${t[5].id}`),C(n,"class","list__event-button"),C(f,"class","list__item-content"),C(V,"class","list__item-end"),C(c,"class","list__item")},m(K,ie){P(K,e,ie),x(e,n),x(n,r),x(e,u),x(e,c),x(c,f),x(f,p),x(p,g),x(f,v),x(f,y),x(y,T),x(y,S),x(c,A),x(c,V),F(q,V,null),L=!0,O||(R=xt(s=Cn.call(null,n)),O=!0)},p(K,ie){(!L||ie&32&&o!==(o=`/services/${K[5].id}`))&&C(n,"href",o),(!L||ie&32)&&d!==(d=K[5].name+"")&&ve(g,d),(!L||ie&32)&&b!==(b=K[5].price+"")&&ve(T,b)},i(K){L||(E(q.$$.fragment,K),L=!0)},o(K){D(q.$$.fragment,K),L=!1},d(K){K&&M(e),$(q),O=!1,R()}}}function n4(t){let e,n,r,o,s,u,c,f;e=new st({props:{title:"\u041C\u043E\u0438 \u0443\u0441\u043B\u0443\u0433\u0438"}}),r=new ki({}),r.$on("input",t[2]),r.$on("change",t[2]);let p=[e4,Z$],d=[];function g(v,y){return v[0].length?0:1}return s=g(t,-1),u=d[s]=p[s](t),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment),o=W(),u.c(),c=rt()},m(v,y){F(e,v,y),P(v,n,y),F(r,v,y),P(v,o,y),d[s].m(v,y),P(v,c,y),f=!0},p(v,[y]){let b=s;s=g(v,y),s===b?d[s].p(v,y):(Te(),D(d[b],1,1,()=>{d[b]=null}),Se(),u=d[s],u?u.p(v,y):(u=d[s]=p[s](v),u.c()),E(u,1),u.m(c.parentNode,c))},i(v){f||(E(e.$$.fragment,v),E(r.$$.fragment,v),E(u),f=!0)},o(v){D(e.$$.fragment,v),D(r.$$.fragment,v),D(u),f=!1},d(v){$(e,v),v&&M(n),$(r,v),v&&M(o),d[s].d(v),v&&M(c)}}}function r4(t,e,n){let r,o,{services:s}=Pe("services");be(t,s,f=>n(4,o=f));let u="",c=({detail:f})=>{n(3,u=f.value)};return t.$$.update=()=>{if(t.$$.dirty&24){e:n(0,r=o.filter(({name:f,price:p})=>f.toLowerCase().includes(u.toLowerCase())||p.toString().includes(u.toLowerCase())))}},[r,s,c,u,o]}var ux=class extends X{constructor(e){super();J(this,e,r4,n4,Q,{})}},cx=ux;function i4(t){let e,n;return e=new Hr({props:{required:!0,value:t[0].name,placeholder:"\u041E\u043F\u0438\u043B \u0436\u043E\u043F\u044B",type:"text",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",name:"name"}}),e.$on("change",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.value=r[0].name),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function o4(t){let e,n;return e=new Hr({props:{required:!0,value:t[0].price,placeholder:"1000",type:"number",label:"\u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",name:"price"}}),e.$on("change",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.value=r[0].price),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function s4(t){let e;return{c(){e=ne(t[1])},m(n,r){P(n,e,r)},p(n,r){r&2&&ve(e,n[1])},d(n){n&&M(e)}}}function a4(t){let e,n;return e=new Dt({props:{fullWidth:!0,$$slots:{default:[s4]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&34&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function u4(t){let e,n,r,o,s,u,c,f,p;return n=new Mt({props:{$$slots:{default:[i4]},$$scope:{ctx:t}}}),o=new Mt({props:{$$slots:{default:[o4]},$$scope:{ctx:t}}}),u=new Mt({props:{$$slots:{default:[a4]},$$scope:{ctx:t}}}),{c(){e=j("form"),U(n.$$.fragment),r=W(),U(o.$$.fragment),s=W(),U(u.$$.fragment)},m(d,g){P(d,e,g),F(n,e,null),x(e,r),F(o,e,null),x(e,s),F(u,e,null),c=!0,f||(p=Ie(e,"submit",Ko(t[2])),f=!0)},p(d,[g]){let v={};g&33&&(v.$$scope={dirty:g,ctx:d}),n.$set(v);let y={};g&33&&(y.$$scope={dirty:g,ctx:d}),o.$set(y);let b={};g&34&&(b.$$scope={dirty:g,ctx:d}),u.$set(b)},i(d){c||(E(n.$$.fragment,d),E(o.$$.fragment,d),E(u.$$.fragment,d),c=!0)},o(d){D(n.$$.fragment,d),D(o.$$.fragment,d),D(u.$$.fragment,d),c=!1},d(d){d&&M(e),$(n),$(o),$(u),f=!1,p()}}}function c4(t,e,n){let{service:r={name:"",price:0}}=e,{buttonText:o="\u0421\u043E\u0437\u0434\u0430\u0442\u044C"}=e,s=cn();function u(){s("submit",{service:r})}function c({target:f}){n(0,r[f.name]=f.value,r)}return t.$$set=f=>{"service"in f&&n(0,r=f.service),"buttonText"in f&&n(1,o=f.buttonText)},[r,o,u,c]}var lx=class extends X{constructor(e){super();J(this,e,c4,u4,Q,{service:0,buttonText:1})}},Bf=lx;function l4(t){let e,n;return e=new on({props:{message:"\u0423\u0441\u043B\u0443\u0433\u0430 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function f4(t){let e,n,r,o;return e=new Bf({props:{buttonText:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",service:t[0]}}),e.$on("submit",t[2]),r=new Mt({props:{$$slots:{default:[d4]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p(s,u){let c={};u&1&&(c.service=s[0]),e.$set(c);let f={};u&128&&(f.$$scope={dirty:u,ctx:s}),r.$set(f)},i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function h4(t){let e;return{c(){e=ne("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function d4(t){let e,n;return e=new Dt({props:{onlyBorder:!0,danger:!0,fullWidth:!0,$$slots:{default:[h4]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&128&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function p4(t){let e,n,r,o,s,u;e=new st({props:{title:"\u0420\u0435\u0434. \u0443\u0441\u043B\u0443\u0433\u0438"}});let c=[f4,l4],f=[];function p(d,g){return d[0]?0:1}return r=p(t,-1),o=f[r]=c[r](t),{c(){U(e.$$.fragment),n=W(),o.c(),s=rt()},m(d,g){F(e,d,g),P(d,n,g),f[r].m(d,g),P(d,s,g),u=!0},p(d,[g]){let v=r;r=p(d,g),r===v?f[r].p(d,g):(Te(),D(f[v],1,1,()=>{f[v]=null}),Se(),o=f[r],o?o.p(d,g):(o=f[r]=c[r](d),o.c()),E(o,1),o.m(s.parentNode,s))},i(d){u||(E(e.$$.fragment,d),E(o),u=!0)},o(d){D(e.$$.fragment,d),D(o),u=!1},d(d){$(e,d),d&&M(n),f[r].d(d),d&&M(s)}}}function m4(t,e,n){let r,o,{params:s={}}=e,{services:u,dispatch:c}=Pe("services");be(t,u,d=>n(5,o=d));let f=({detail:d})=>{c(Cf,d.service),wt("/services")},p=()=>{!confirm("\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C")||(c(Af,r.id),wt("/services"))};return t.$$set=d=>{"params"in d&&n(4,s=d.params)},t.$$.update=()=>{if(t.$$.dirty&48){e:n(0,r=o.find(d=>d.id===s?.id))}},[r,u,f,p,s,o]}var fx=class extends X{constructor(e){super();J(this,e,m4,p4,Q,{params:4})}},hx=fx;function v4(t){let e,n,r,o;return e=new st({props:{title:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0443\u0441\u043B\u0443\u0433\u0438"}}),r=new Bf({}),r.$on("submit",t[0]),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p:le,i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function g4(t){let{dispatch:e}=Pe();return[({detail:r})=>{e(Df,r.service),wt("/services")}]}var dx=class extends X{constructor(e){super();J(this,e,g4,v4,Q,{})}},px=dx;var mx=t=>{let e;try{e=$s({start:gn(t),end:js(t)})}catch(u){console.warn("error on allDaysInMonth")}let n=Nf(e[0])||7,r=[];n>1&&(r=$s({start:Cu(e[0],{days:n-1}),end:Cu(e[0],{days:1})}));let o=[],s=42-(e.length+r.length);if(s){let u=e[e.length-1];try{o=$s({start:Eu(u,{days:1}),end:Eu(u,{days:s})})}catch(c){console.warn("error on lastOffsetDays")}}return[...r.map(u=>({date:u,isActive:!1})),...e.map(u=>({date:u,isActive:!0})),...o.map(u=>({date:u,isActive:!1}))]};function Mu(t,e){if(t.one!==void 0&&e===1)return t.one;var n=e%10,r=e%100;return n===1&&r!==11?t.singularNominative.replace("{{count}}",e):n>=2&&n<=4&&(r<10||r>20)?t.singularGenitive.replace("{{count}}",e):t.pluralGenitive.replace("{{count}}",e)}function yn(t){return function(e,n){return n.addSuffix?n.comparison>0?t.future?Mu(t.future,e):"\u0447\u0435\u0440\u0435\u0437 "+Mu(t.regular,e):t.past?Mu(t.past,e):Mu(t.regular,e)+" \u043D\u0430\u0437\u0430\u0434":Mu(t.regular,e)}}var y4={lessThanXSeconds:yn({regular:{one:"\u043C\u0435\u043D\u044C\u0448\u0435 \u0441\u0435\u043A\u0443\u043D\u0434\u044B",singularNominative:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u044B",singularGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434",pluralGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434"},future:{one:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 \u0441\u0435\u043A\u0443\u043D\u0434\u0443",singularNominative:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u0443",singularGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u044B",pluralGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434"}}),xSeconds:yn({regular:{singularNominative:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u0430",singularGenitive:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u044B",pluralGenitive:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434"},past:{singularNominative:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u0443 \u043D\u0430\u0437\u0430\u0434",singularGenitive:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u044B \u043D\u0430\u0437\u0430\u0434",pluralGenitive:"{{count}} \u0441\u0435\u043A\u0443\u043D\u0434 \u043D\u0430\u0437\u0430\u0434"},future:{singularNominative:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u0443",singularGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434\u044B",pluralGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u0441\u0435\u043A\u0443\u043D\u0434"}}),halfAMinute:function(t,e){return e.addSuffix?e.comparison>0?"\u0447\u0435\u0440\u0435\u0437 \u043F\u043E\u043B\u043C\u0438\u043D\u0443\u0442\u044B":"\u043F\u043E\u043B\u043C\u0438\u043D\u0443\u0442\u044B \u043D\u0430\u0437\u0430\u0434":"\u043F\u043E\u043B\u043C\u0438\u043D\u0443\u0442\u044B"},lessThanXMinutes:yn({regular:{one:"\u043C\u0435\u043D\u044C\u0448\u0435 \u043C\u0438\u043D\u0443\u0442\u044B",singularNominative:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u043C\u0438\u043D\u0443\u0442\u044B",singularGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u043C\u0438\u043D\u0443\u0442",pluralGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435 {{count}} \u043C\u0438\u043D\u0443\u0442"},future:{one:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 \u043C\u0438\u043D\u0443\u0442\u0443",singularNominative:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442\u0443",singularGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442\u044B",pluralGenitive:"\u043C\u0435\u043D\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442"}}),xMinutes:yn({regular:{singularNominative:"{{count}} \u043C\u0438\u043D\u0443\u0442\u0430",singularGenitive:"{{count}} \u043C\u0438\u043D\u0443\u0442\u044B",pluralGenitive:"{{count}} \u043C\u0438\u043D\u0443\u0442"},past:{singularNominative:"{{count}} \u043C\u0438\u043D\u0443\u0442\u0443 \u043D\u0430\u0437\u0430\u0434",singularGenitive:"{{count}} \u043C\u0438\u043D\u0443\u0442\u044B \u043D\u0430\u0437\u0430\u0434",pluralGenitive:"{{count}} \u043C\u0438\u043D\u0443\u0442 \u043D\u0430\u0437\u0430\u0434"},future:{singularNominative:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442\u0443",singularGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442\u044B",pluralGenitive:"\u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0438\u043D\u0443\u0442"}}),aboutXHours:yn({regular:{singularNominative:"\u043E\u043A\u043E\u043B\u043E {{count}} \u0447\u0430\u0441\u0430",singularGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u0447\u0430\u0441\u043E\u0432",pluralGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u0447\u0430\u0441\u043E\u0432"},future:{singularNominative:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441",singularGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441\u0430",pluralGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u0447\u0430\u0441\u043E\u0432"}}),xHours:yn({regular:{singularNominative:"{{count}} \u0447\u0430\u0441",singularGenitive:"{{count}} \u0447\u0430\u0441\u0430",pluralGenitive:"{{count}} \u0447\u0430\u0441\u043E\u0432"}}),xDays:yn({regular:{singularNominative:"{{count}} \u0434\u0435\u043D\u044C",singularGenitive:"{{count}} \u0434\u043D\u044F",pluralGenitive:"{{count}} \u0434\u043D\u0435\u0439"}}),aboutXWeeks:yn({regular:{singularNominative:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043D\u0435\u0434\u0435\u043B\u0438",singularGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043D\u0435\u0434\u0435\u043B\u044C",pluralGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043D\u0435\u0434\u0435\u043B\u044C"},future:{singularNominative:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043D\u0435\u0434\u0435\u043B\u044E",singularGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043D\u0435\u0434\u0435\u043B\u0438",pluralGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043D\u0435\u0434\u0435\u043B\u044C"}}),xWeeks:yn({regular:{singularNominative:"{{count}} \u043D\u0435\u0434\u0435\u043B\u044F",singularGenitive:"{{count}} \u043D\u0435\u0434\u0435\u043B\u0438",pluralGenitive:"{{count}} \u043D\u0435\u0434\u0435\u043B\u044C"}}),aboutXMonths:yn({regular:{singularNominative:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043C\u0435\u0441\u044F\u0446\u0430",singularGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043C\u0435\u0441\u044F\u0446\u0435\u0432",pluralGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043C\u0435\u0441\u044F\u0446\u0435\u0432"},future:{singularNominative:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0435\u0441\u044F\u0446",singularGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0435\u0441\u044F\u0446\u0430",pluralGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043C\u0435\u0441\u044F\u0446\u0435\u0432"}}),xMonths:yn({regular:{singularNominative:"{{count}} \u043C\u0435\u0441\u044F\u0446",singularGenitive:"{{count}} \u043C\u0435\u0441\u044F\u0446\u0430",pluralGenitive:"{{count}} \u043C\u0435\u0441\u044F\u0446\u0435\u0432"}}),aboutXYears:yn({regular:{singularNominative:"\u043E\u043A\u043E\u043B\u043E {{count}} \u0433\u043E\u0434\u0430",singularGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043B\u0435\u0442",pluralGenitive:"\u043E\u043A\u043E\u043B\u043E {{count}} \u043B\u0435\u0442"},future:{singularNominative:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434",singularGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434\u0430",pluralGenitive:"\u043F\u0440\u0438\u0431\u043B\u0438\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0447\u0435\u0440\u0435\u0437 {{count}} \u043B\u0435\u0442"}}),xYears:yn({regular:{singularNominative:"{{count}} \u0433\u043E\u0434",singularGenitive:"{{count}} \u0433\u043E\u0434\u0430",pluralGenitive:"{{count}} \u043B\u0435\u0442"}}),overXYears:yn({regular:{singularNominative:"\u0431\u043E\u043B\u044C\u0448\u0435 {{count}} \u0433\u043E\u0434\u0430",singularGenitive:"\u0431\u043E\u043B\u044C\u0448\u0435 {{count}} \u043B\u0435\u0442",pluralGenitive:"\u0431\u043E\u043B\u044C\u0448\u0435 {{count}} \u043B\u0435\u0442"},future:{singularNominative:"\u0431\u043E\u043B\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434",singularGenitive:"\u0431\u043E\u043B\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434\u0430",pluralGenitive:"\u0431\u043E\u043B\u044C\u0448\u0435, \u0447\u0435\u043C \u0447\u0435\u0440\u0435\u0437 {{count}} \u043B\u0435\u0442"}}),almostXYears:yn({regular:{singularNominative:"\u043F\u043E\u0447\u0442\u0438 {{count}} \u0433\u043E\u0434",singularGenitive:"\u043F\u043E\u0447\u0442\u0438 {{count}} \u0433\u043E\u0434\u0430",pluralGenitive:"\u043F\u043E\u0447\u0442\u0438 {{count}} \u043B\u0435\u0442"},future:{singularNominative:"\u043F\u043E\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434",singularGenitive:"\u043F\u043E\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u0433\u043E\u0434\u0430",pluralGenitive:"\u043F\u043E\u0447\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 {{count}} \u043B\u0435\u0442"}})};function yg(t,e,n){return n=n||{},y4[t](e,n)}var _4={full:"EEEE, d MMMM y '\u0433.'",long:"d MMMM y '\u0433.'",medium:"d MMM y '\u0433.'",short:"dd.MM.y"},w4={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},b4={any:"{{date}}, {{time}}"},I4={date:qr({formats:_4,defaultWidth:"full"}),time:qr({formats:w4,defaultWidth:"full"}),dateTime:qr({formats:b4,defaultWidth:"any"})},vx=I4;function Wf(t,e,n){he(2,arguments);var r=cr(t,n),o=cr(e,n);return r.getTime()===o.getTime()}var _g=["\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0432\u0442\u043E\u0440\u043D\u0438\u043A","\u0441\u0440\u0435\u0434\u0443","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043F\u044F\u0442\u043D\u0438\u0446\u0443","\u0441\u0443\u0431\u0431\u043E\u0442\u0443"];function T4(t){var e=_g[t];switch(t){case 0:return"'\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u0435 "+e+" \u0432' p";case 1:case 2:case 4:return"'\u0432 \u043F\u0440\u043E\u0448\u043B\u044B\u0439 "+e+" \u0432' p";case 3:case 5:case 6:return"'\u0432 \u043F\u0440\u043E\u0448\u043B\u0443\u044E "+e+" \u0432' p"}}function gx(t){var e=_g[t];return t===2?"'\u0432\u043E "+e+" \u0432' p":"'\u0432 "+e+" \u0432' p"}function S4(t){var e=_g[t];switch(t){case 0:return"'\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 "+e+" \u0432' p";case 1:case 2:case 4:return"'\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 "+e+" \u0432' p";case 3:case 5:case 6:return"'\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E "+e+" \u0432' p"}}var E4={lastWeek:function(t,e,n){var r=t.getUTCDay();return Wf(t,e,n)?gx(r):T4(r)},yesterday:"'\u0432\u0447\u0435\u0440\u0430 \u0432' p",today:"'\u0441\u0435\u0433\u043E\u0434\u043D\u044F \u0432' p",tomorrow:"'\u0437\u0430\u0432\u0442\u0440\u0430 \u0432' p",nextWeek:function(t,e,n){var r=t.getUTCDay();return Wf(t,e,n)?gx(r):S4(r)},other:"P"};function wg(t,e,n,r){var o=E4[t];return typeof o=="function"?o(e,n,r):o}var k4={narrow:["\u0434\u043E \u043D.\u044D.","\u043D.\u044D."],abbreviated:["\u0434\u043E \u043D. \u044D.","\u043D. \u044D."],wide:["\u0434\u043E \u043D\u0430\u0448\u0435\u0439 \u044D\u0440\u044B","\u043D\u0430\u0448\u0435\u0439 \u044D\u0440\u044B"]},x4={narrow:["1","2","3","4"],abbreviated:["1-\u0439 \u043A\u0432.","2-\u0439 \u043A\u0432.","3-\u0439 \u043A\u0432.","4-\u0439 \u043A\u0432."],wide:["1-\u0439 \u043A\u0432\u0430\u0440\u0442\u0430\u043B","2-\u0439 \u043A\u0432\u0430\u0440\u0442\u0430\u043B","3-\u0439 \u043A\u0432\u0430\u0440\u0442\u0430\u043B","4-\u0439 \u043A\u0432\u0430\u0440\u0442\u0430\u043B"]},D4={narrow:["\u042F","\u0424","\u041C","\u0410","\u041C","\u0418","\u0418","\u0410","\u0421","\u041E","\u041D","\u0414"],abbreviated:["\u044F\u043D\u0432.","\u0444\u0435\u0432.","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440.","\u043C\u0430\u0439","\u0438\u044E\u043D\u044C","\u0438\u044E\u043B\u044C","\u0430\u0432\u0433.","\u0441\u0435\u043D\u0442.","\u043E\u043A\u0442.","\u043D\u043E\u044F\u0431.","\u0434\u0435\u043A."],wide:["\u044F\u043D\u0432\u0430\u0440\u044C","\u0444\u0435\u0432\u0440\u0430\u043B\u044C","\u043C\u0430\u0440\u0442","\u0430\u043F\u0440\u0435\u043B\u044C","\u043C\u0430\u0439","\u0438\u044E\u043D\u044C","\u0438\u044E\u043B\u044C","\u0430\u0432\u0433\u0443\u0441\u0442","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u043E\u043A\u0442\u044F\u0431\u0440\u044C","\u043D\u043E\u044F\u0431\u0440\u044C","\u0434\u0435\u043A\u0430\u0431\u0440\u044C"]},C4={narrow:["\u042F","\u0424","\u041C","\u0410","\u041C","\u0418","\u0418","\u0410","\u0421","\u041E","\u041D","\u0414"],abbreviated:["\u044F\u043D\u0432.","\u0444\u0435\u0432.","\u043C\u0430\u0440.","\u0430\u043F\u0440.","\u043C\u0430\u044F","\u0438\u044E\u043D.","\u0438\u044E\u043B.","\u0430\u0432\u0433.","\u0441\u0435\u043D\u0442.","\u043E\u043A\u0442.","\u043D\u043E\u044F\u0431.","\u0434\u0435\u043A."],wide:["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"]},A4={narrow:["\u0412","\u041F","\u0412","\u0421","\u0427","\u041F","\u0421"],short:["\u0432\u0441","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"],abbreviated:["\u0432\u0441\u043A","\u043F\u043D\u0434","\u0432\u0442\u0440","\u0441\u0440\u0434","\u0447\u0442\u0432","\u043F\u0442\u043D","\u0441\u0443\u0431"],wide:["\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0432\u0442\u043E\u0440\u043D\u0438\u043A","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043F\u044F\u0442\u043D\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043E\u0442\u0430"]},O4={narrow:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D.",noon:"\u043F\u043E\u043B\u0434.",morning:"\u0443\u0442\u0440\u043E",afternoon:"\u0434\u0435\u043D\u044C",evening:"\u0432\u0435\u0447.",night:"\u043D\u043E\u0447\u044C"},abbreviated:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D.",noon:"\u043F\u043E\u043B\u0434.",morning:"\u0443\u0442\u0440\u043E",afternoon:"\u0434\u0435\u043D\u044C",evening:"\u0432\u0435\u0447.",night:"\u043D\u043E\u0447\u044C"},wide:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D\u043E\u0447\u044C",noon:"\u043F\u043E\u043B\u0434\u0435\u043D\u044C",morning:"\u0443\u0442\u0440\u043E",afternoon:"\u0434\u0435\u043D\u044C",evening:"\u0432\u0435\u0447\u0435\u0440",night:"\u043D\u043E\u0447\u044C"}},N4={narrow:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D.",noon:"\u043F\u043E\u043B\u0434.",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043D\u044F",evening:"\u0432\u0435\u0447.",night:"\u043D\u043E\u0447\u0438"},abbreviated:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D.",noon:"\u043F\u043E\u043B\u0434.",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043D\u044F",evening:"\u0432\u0435\u0447.",night:"\u043D\u043E\u0447\u0438"},wide:{am:"\u0414\u041F",pm:"\u041F\u041F",midnight:"\u043F\u043E\u043B\u043D\u043E\u0447\u044C",noon:"\u043F\u043E\u043B\u0434\u0435\u043D\u044C",morning:"\u0443\u0442\u0440\u0430",afternoon:"\u0434\u043D\u044F",evening:"\u0432\u0435\u0447\u0435\u0440\u0430",night:"\u043D\u043E\u0447\u0438"}};function R4(t,e){var n=e||{},r=String(n.unit),o;return r==="date"?o="-\u0435":r==="week"||r==="minute"||r==="second"?o="-\u044F":o="-\u0439",t+o}var M4={ordinalNumber:R4,era:Vn({values:k4,defaultWidth:"wide"}),quarter:Vn({values:x4,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Vn({values:D4,defaultWidth:"wide",formattingValues:C4,defaultFormattingWidth:"wide"}),day:Vn({values:A4,defaultWidth:"wide"}),dayPeriod:Vn({values:O4,defaultWidth:"any",formattingValues:N4,defaultFormattingWidth:"wide"})},yx=M4;var P4=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,L4=/\d+/i,j4={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},$4={any:[/^д/i,/^н/i]},F4={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},U4={any:[/1/i,/2/i,/3/i,/4/i]},q4={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},V4={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},B4={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},W4={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},G4={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},H4={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},K4={ordinalNumber:ku({matchPattern:P4,parsePattern:L4,valueCallback:function(t){return parseInt(t,10)}}),era:Bn({matchPatterns:j4,defaultMatchWidth:"wide",parsePatterns:$4,defaultParseWidth:"any"}),quarter:Bn({matchPatterns:F4,defaultMatchWidth:"wide",parsePatterns:U4,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Bn({matchPatterns:q4,defaultMatchWidth:"wide",parsePatterns:V4,defaultParseWidth:"any"}),day:Bn({matchPatterns:B4,defaultMatchWidth:"wide",parsePatterns:W4,defaultParseWidth:"any"}),dayPeriod:Bn({matchPatterns:G4,defaultMatchWidth:"wide",parsePatterns:H4,defaultParseWidth:"any"})},_x=K4;var z4={code:"ru",formatDistance:yg,formatLong:vx,formatRelative:wg,localize:yx,match:_x,options:{weekStartsOn:1,firstWeekContainsDate:1}},Bs=z4;function Y4(t){let e;return{c(){e=Ue("path"),C(e,"d","M368.005 272h-96v96h96v-96zm-32-208v32h-160V64h-48v32h-24.01c-22.002 0-40 17.998-40 40v272c0 22.002 17.998 40 40 40h304.01c22.002 0 40-17.998 40-40V136c0-22.002-17.998-40-40-40h-24V64h-48zm72 344h-304.01V196h304.01v212z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function Q4(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[Y4]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function X4(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var wx=class extends X{constructor(e){super();J(this,e,X4,Q4,Q,{})}},bx=wx;function Ix(t,e,n){let r=t.slice();return r[12]=e[n].date,r[13]=e[n].isActive,r[14]=e[n].counter,r}function Tx(t,e,n){let r=t.slice();return r[17]=e[n],r}function Sx(t){let e,n=t[17]+"",r;return{c(){e=j("div"),r=ne(n),C(e,"class","picker__day-name svelte-1dxqrbu")},m(o,s){P(o,e,s),x(e,r)},p:le,d(o){o&&M(e)}}}function Ex(t){let e,n=t[14]+"",r;return{c(){e=j("div"),r=ne(n),C(e,"class","picker__days-counter svelte-1dxqrbu")},m(o,s){P(o,e,s),x(e,r)},p(o,s){s&2&&n!==(n=o[14]+"")&&ve(r,n)},d(o){o&&M(e)}}}function kx(t){let e,n,r,o=Ti(t[12])+"",s,u,c,f,p,d=t[14]&&Ex(t);function g(){return t[10](t[12])}return{c(){e=j("div"),n=j("button"),d&&d.c(),r=W(),s=ne(o),c=W(),C(n,"class","picker__days-number svelte-1dxqrbu"),n.disabled=u=!t[13],$e(n,"picker__days-number--active",wo(t[0].setHours(0,0,0,0),t[12].setHours(0,0,0,0))),C(e,"class","picker__days-day svelte-1dxqrbu")},m(v,y){P(v,e,y),x(e,n),d&&d.m(n,null),x(n,r),x(n,s),x(e,c),f||(p=Ie(n,"click",g),f=!0)},p(v,y){t=v,t[14]?d?d.p(t,y):(d=Ex(t),d.c(),d.m(n,r)):d&&(d.d(1),d=null),y&2&&o!==(o=Ti(t[12])+"")&&ve(s,o),y&2&&u!==(u=!t[13])&&(n.disabled=u),y&3&&$e(n,"picker__days-number--active",wo(t[0].setHours(0,0,0,0),t[12].setHours(0,0,0,0)))},d(v){v&&M(e),d&&d.d(),f=!1,p()}}}function J4(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T,S,A,V,q,L=Qt(t[0],"d LLLL yyyy",{locale:Bs})+"",O,R,K,ie;o=new bx({}),f=new qs({}),y=new Ei({});let Y=t[2],ye=[];for(let _e=0;_e<Y.length;_e+=1)ye[_e]=Sx(Tx(t,Y,_e));let N=t[1],Qe=[];for(let _e=0;_e<N.length;_e+=1)Qe[_e]=kx(Ix(t,N,_e));return{c(){e=j("div"),n=j("div"),r=j("button"),U(o.$$.fragment),s=W(),u=j("div"),c=j("button"),U(f.$$.fragment),p=W(),d=j("button"),d.textContent="\u0421\u0435\u0433\u043E\u0434\u043D\u044F",g=W(),v=j("button"),U(y.$$.fragment),b=W(),T=j("div");for(let _e=0;_e<ye.length;_e+=1)ye[_e].c();S=W(),A=j("div");for(let _e=0;_e<Qe.length;_e+=1)Qe[_e].c();V=W(),q=j("div"),O=ne(L),C(r,"class","picker__toolbar-button svelte-1dxqrbu"),C(c,"class","picker__toolbar-button svelte-1dxqrbu"),C(d,"class","picker__toolbar-button svelte-1dxqrbu"),C(v,"class","picker__toolbar-button svelte-1dxqrbu"),C(u,"class","picker__toolbar-arrows svelte-1dxqrbu"),C(n,"class","picker__toolbar svelte-1dxqrbu"),C(T,"class","picker__day-names svelte-1dxqrbu"),C(A,"class","picker__days svelte-1dxqrbu"),C(q,"class","picker__date svelte-1dxqrbu"),C(e,"class","picker svelte-1dxqrbu")},m(_e,at){P(_e,e,at),x(e,n),x(n,r),F(o,r,null),x(n,s),x(n,u),x(u,c),F(f,c,null),x(u,p),x(u,d),x(u,g),x(u,v),F(y,v,null),x(e,b),x(e,T);for(let we=0;we<ye.length;we+=1)ye[we].m(T,null);x(e,S),x(e,A);for(let we=0;we<Qe.length;we+=1)Qe[we].m(A,null);x(e,V),x(e,q),x(q,O),R=!0,K||(ie=[Ie(c,"click",t[6]),Ie(d,"click",t[7]),Ie(v,"click",t[5])],K=!0)},p(_e,[at]){if(at&4){Y=_e[2];let we;for(we=0;we<Y.length;we+=1){let tt=Tx(_e,Y,we);ye[we]?ye[we].p(tt,at):(ye[we]=Sx(tt),ye[we].c(),ye[we].m(T,null))}for(;we<ye.length;we+=1)ye[we].d(1);ye.length=Y.length}if(at&259){N=_e[1];let we;for(we=0;we<N.length;we+=1){let tt=Ix(_e,N,we);Qe[we]?Qe[we].p(tt,at):(Qe[we]=kx(tt),Qe[we].c(),Qe[we].m(A,null))}for(;we<Qe.length;we+=1)Qe[we].d(1);Qe.length=N.length}(!R||at&1)&&L!==(L=Qt(_e[0],"d LLLL yyyy",{locale:Bs})+"")&&ve(O,L)},i(_e){R||(E(o.$$.fragment,_e),E(f.$$.fragment,_e),E(y.$$.fragment,_e),R=!0)},o(_e){D(o.$$.fragment,_e),D(f.$$.fragment,_e),D(y.$$.fragment,_e),R=!1},d(_e){_e&&M(e),$(o),$(f),$(y),Nr(ye,_e),Nr(Qe,_e),K=!1,ct(ie)}}}function Z4(t,e,n){let r,o,s,u=["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],{recordsDate:c,monthDaysCount:f,dispatch:p}=Pe("recordsDate","monthDaysCount");be(t,c,T=>n(0,o=T)),be(t,f,T=>n(9,s=T));function d(){p(Ou,{}),p(Wr,gn(Tr(o,1)))}function g(){p(Ou,{}),p(Wr,gn(Si(o,1)))}function v(){p(Wr,new Date)}function y(T){p(Wr,T)}let b=T=>y(T);return t.$$.update=()=>{if(t.$$.dirty&513){e:n(1,r=mx(o).map(T=>{let S=Ti(T.date),A=s?.[S]||0;return{...T,counter:A}}))}},[o,r,u,c,f,d,g,v,y,s,b]}var xx=class extends X{constructor(e){super();J(this,e,Z4,J4,Q,{})}},Dx=xx;function Cx(t){let e=40,n=30,r=0,o=0;t.addEventListener("touchmove",s=>{o=r-s.changedTouches[0].pageX,!(Math.abs(o)<n)&&(t.style.right=`${o>e?e:o<Math.abs(e)*-1?Math.abs(e)*-1:o}px`)}),t.addEventListener("touchstart",s=>{r=s.changedTouches[0].pageX}),t.addEventListener("touchend",()=>{if(t.style.right="0px",t.addEventListener("animationend",()=>t.classList.remove("fadeInRightAnimation","fadeInLeftAnimation")),Math.abs(o)>=e){let s=o>0?"swipeRight":"swipeLeft";t.dispatchEvent(new CustomEvent(s)),s==="swipeRight"&&t.classList.add("fadeInRightAnimation"),s==="swipeLeft"&&t.classList.add("fadeInLeftAnimation")}r=0,o=0})}function Ax(t,e,n){let r=t.slice();return r[13]=e[n],r}function e3(t){let e,n;return e=new on({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function t3(t){let e,n,r,o=t[0].reduce(Rx,0)+"",s,u,c,f,p;return f=new Sr({props:{items:t[0],$$slots:{default:[n3,({item:d})=>({12:d}),({item:d})=>d?4096:0]},$$scope:{ctx:t}}}),{c(){e=j("div"),n=j("div"),r=ne(`\u041F\u043E\u0442\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0439 \u0434\u043E\u0445\u043E\u0434 -\r
				`),s=ne(o),u=ne("\u20BD"),c=W(),U(f.$$.fragment),C(n,"class","sum-of-records svelte-16dixzz"),C(e,"class","margin-container svelte-16dixzz")},m(d,g){P(d,e,g),x(e,n),x(n,r),x(n,s),x(n,u),x(e,c),F(f,e,null),p=!0},p(d,g){(!p||g&1)&&o!==(o=d[0].reduce(Rx,0)+"")&&ve(s,o);let v={};g&1&&(v.items=d[0]),g&69632&&(v.$$scope={dirty:g,ctx:d}),f.$set(v)},i(d){p||(E(f.$$.fragment,d),p=!0)},o(d){D(f.$$.fragment,d),p=!1},d(d){d&&M(e),$(f)}}}function Ox(t){let e,n=t[13]+"",r;return{c(){e=j("div"),r=ne(n),C(e,"class","services__service svelte-16dixzz")},m(o,s){P(o,e,s),x(e,r)},p(o,s){s&4096&&n!==(n=o[13]+"")&&ve(r,n)},d(o){o&&M(e)}}}function Nx(t){let e,n,r=t[12].description+"",o;return{c(){e=j("div"),n=ne("\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435: "),o=ne(r),C(e,"class","description svelte-16dixzz")},m(s,u){P(s,e,u),x(e,n),x(e,o)},p(s,u){u&4096&&r!==(r=s[12].description+"")&&ve(o,r)},d(s){s&&M(e)}}}function n3(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T=(t[12].client?.name||"Deleted")+"",S,A,V=(t[12].client?.description||"")+"",q,L,O,R=Qt(t[12].date,"HH:mm")+"",K,ie,Y,ye=t[12].sumPriceOfServices+"",N,Qe,_e,at,we,tt,ke,Le;g=new Gr({props:{initials:t[12].client?.name||"Deleted"}});let ut=t[12].services,$t=[];for(let Be=0;Be<ut.length;Be+=1)$t[Be]=Ox(Ax(t,ut,Be));let bt=t[12].description&&Nx(t);return{c(){e=j("li"),n=j("a"),r=ne("\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C"),u=W(),c=j("div"),f=j("div"),p=j("div"),d=j("div"),U(g.$$.fragment),v=W(),y=j("div"),b=j("div"),S=ne(T),A=W(),q=ne(V),L=W(),O=j("div"),K=ne(R),ie=W(),Y=j("div"),N=ne(ye),Qe=ne("\u20BD"),_e=W(),at=j("div");for(let Be=0;Be<$t.length;Be+=1)$t[Be].c();we=W(),bt&&bt.c(),C(n,"title","\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0437\u0430\u043F\u0438\u0441\u044C"),C(n,"href",o=`/records/${t[12].id}`),C(n,"class","list__event-button"),C(d,"class","client__avatar svelte-16dixzz"),C(b,"class","client__info-name"),C(O,"class","client__info-time svelte-16dixzz"),C(y,"class","client__info"),C(Y,"class","client__price svelte-16dixzz"),C(p,"class","client svelte-16dixzz"),C(at,"class","services svelte-16dixzz"),C(f,"class","list__item-content svelte-16dixzz"),C(c,"class","list__item")},m(Be,_n){P(Be,e,_n),x(e,n),x(n,r),x(e,u),x(e,c),x(c,f),x(f,p),x(p,d),F(g,d,null),x(p,v),x(p,y),x(y,b),x(b,S),x(b,A),x(b,q),x(y,L),x(y,O),x(O,K),x(p,ie),x(p,Y),x(Y,N),x(Y,Qe),x(f,_e),x(f,at);for(let Er=0;Er<$t.length;Er+=1)$t[Er].m(at,null);x(f,we),bt&&bt.m(f,null),tt=!0,ke||(Le=xt(s=Cn.call(null,n)),ke=!0)},p(Be,_n){(!tt||_n&4096&&o!==(o=`/records/${Be[12].id}`))&&C(n,"href",o);let Er={};if(_n&4096&&(Er.initials=Be[12].client?.name||"Deleted"),g.$set(Er),(!tt||_n&4096)&&T!==(T=(Be[12].client?.name||"Deleted")+"")&&ve(S,T),(!tt||_n&4096)&&V!==(V=(Be[12].client?.description||"")+"")&&ve(q,V),(!tt||_n&4096)&&R!==(R=Qt(Be[12].date,"HH:mm")+"")&&ve(K,R),(!tt||_n&4096)&&ye!==(ye=Be[12].sumPriceOfServices+"")&&ve(N,ye),_n&4096){ut=Be[12].services;let sn;for(sn=0;sn<ut.length;sn+=1){let Lu=Ax(Be,ut,sn);$t[sn]?$t[sn].p(Lu,_n):($t[sn]=Ox(Lu),$t[sn].c(),$t[sn].m(at,null))}for(;sn<$t.length;sn+=1)$t[sn].d(1);$t.length=ut.length}Be[12].description?bt?bt.p(Be,_n):(bt=Nx(Be),bt.c(),bt.m(f,null)):bt&&(bt.d(1),bt=null)},i(Be){tt||(E(g.$$.fragment,Be),tt=!0)},o(Be){D(g.$$.fragment,Be),tt=!1},d(Be){Be&&M(e),$(g),Nr($t,Be),bt&&bt.d(),ke=!1,Le()}}}function r3(t){let e,n,r,o,s,u,c,f,p,d,g;n=new st({props:{title:"\u041C\u043E\u0438 \u0437\u0430\u043F\u0438\u0441\u0438"}}),o=new Dx({});let v=[t3,e3],y=[];function b(T,S){return T[0].length?0:1}return u=b(t,-1),c=y[u]=v[u](t),{c(){e=j("div"),U(n.$$.fragment),r=W(),U(o.$$.fragment),s=W(),c.c(),C(e,"class","swipe svelte-16dixzz")},m(T,S){P(T,e,S),F(n,e,null),x(e,r),F(o,e,null),x(e,s),y[u].m(e,null),p=!0,d||(g=[xt(f=Cx.call(null,e)),Ie(e,"swipeRight",t[5]),Ie(e,"swipeLeft",t[6])],d=!0)},p(T,[S]){let A=u;u=b(T,S),u===A?y[u].p(T,S):(Te(),D(y[A],1,1,()=>{y[A]=null}),Se(),c=y[u],c?c.p(T,S):(c=y[u]=v[u](T),c.c()),E(c,1),c.m(e,null))},i(T){p||(E(n.$$.fragment,T),E(o.$$.fragment,T),E(c),p=!0)},o(T){D(n.$$.fragment,T),D(o.$$.fragment,T),D(c),p=!1},d(T){T&&M(e),$(n),$(o),y[u].d(),d=!1,ct(g)}}}var Rx=(t,e)=>t+e.sumPriceOfServices;function i3(t,e,n){let r,o,s,u,c,{records:f,clients:p,services:d,recordsDate:g,dispatch:v}=Pe("records","clients","services","recordsDate");be(t,f,T=>n(7,o=T)),be(t,p,T=>n(9,u=T)),be(t,d,T=>n(8,s=T)),be(t,g,T=>n(10,c=T));function y(){v(Wr,bi(c,1))}function b(){v(Wr,Us(c,1))}return t.$$.update=()=>{if(t.$$.dirty&896){e:n(0,r=o.map(T=>{let S=s.filter(({id:A})=>T.serviceIds.includes(A));return{...T,client:u.find(({id:A})=>A===T.clientId),services:S.map(({name:A})=>A),sumPriceOfServices:S.reduce((A,{price:V})=>A+ +V,0)}}))}},[r,f,p,d,g,y,b,o,s,u]}var Mx=class extends X{constructor(e){super();J(this,e,i3,r3,Q,{})}},Px=Mx;function o3(t){let e,n,r;return{c(){e=j("button"),e.textContent="\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D",C(e,"class","input__input svelte-1hpwq1i")},m(o,s){P(o,e,s),n||(r=Ie(e,"click",t[5]),n=!0)},p:le,i:le,o:le,d(o){o&&M(e),n=!1,r()}}}function s3(t){let e,n,r,o,s=t[0].name+"",u,c,f,p,d,g,v;return n=new Gr({props:{initials:t[0].name}}),{c(){e=j("div"),U(n.$$.fragment),r=W(),o=j("div"),u=ne(s),c=W(),f=j("div"),p=j("button"),p.textContent="\u0423\u0431\u0440\u0430\u0442\u044C",C(p,"class","client__cancel-button svelte-1hpwq1i"),C(o,"class","client__info svelte-1hpwq1i"),C(e,"class","client svelte-1hpwq1i")},m(y,b){P(y,e,b),F(n,e,null),x(e,r),x(e,o),x(o,u),x(o,c),x(o,f),x(f,p),d=!0,g||(v=Ie(p,"click",t[8]),g=!0)},p(y,b){let T={};b&1&&(T.initials=y[0].name),n.$set(T),(!d||b&1)&&s!==(s=y[0].name+"")&&ve(u,s)},i(y){d||(E(n.$$.fragment,y),d=!0)},o(y){D(n.$$.fragment,y),d=!1},d(y){y&&M(e),$(n),g=!1,v()}}}function Lx(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T;o=new Vs({}),u=new st({props:{title:"\u0412\u044B\u0431\u043E\u0440 \u043A\u043B\u0438\u0435\u043D\u0442\u0430"}}),f=new ki({}),f.$on("input",t[4]);let S=[u3,a3],A=[];function V(q,L){return q[2].length?0:1}return d=V(t,-1),g=A[d]=S[d](t),{c(){e=j("div"),n=j("div"),r=j("button"),U(o.$$.fragment),s=W(),U(u.$$.fragment),c=W(),U(f.$$.fragment),p=W(),g.c(),C(r,"class","modal__close-button svelte-1hpwq1i"),C(n,"class","modal__close-button-wrapper svelte-1hpwq1i"),C(e,"class","modal svelte-1hpwq1i")},m(q,L){P(q,e,L),x(e,n),x(n,r),F(o,r,null),x(e,s),F(u,e,null),x(e,c),F(f,e,null),x(e,p),A[d].m(e,null),y=!0,b||(T=Ie(r,"click",t[6]),b=!0)},p(q,L){let O=d;d=V(q,L),d===O?A[d].p(q,L):(Te(),D(A[O],1,1,()=>{A[O]=null}),Se(),g=A[d],g?g.p(q,L):(g=A[d]=S[d](q),g.c()),E(g,1),g.m(e,null))},i(q){y||(E(o.$$.fragment,q),E(u.$$.fragment,q),E(f.$$.fragment,q),E(g),Mn(()=>{v||(v=En(e,An,{duration:200},!0)),v.run(1)}),y=!0)},o(q){D(o.$$.fragment,q),D(u.$$.fragment,q),D(f.$$.fragment,q),D(g),v||(v=En(e,An,{duration:200},!1)),v.run(0),y=!1},d(q){q&&M(e),$(o),$(u),$(f),A[d].d(),q&&v&&v.end(),b=!1,T()}}}function a3(t){let e,n;return e=new on({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function u3(t){let e,n;return e=new Sr({props:{items:t[2],$$slots:{default:[c3,({item:r})=>({13:r}),({item:r})=>r?8192:0]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&4&&(s.items=r[2]),o&24576&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function c3(t){let e,n,r,o,s,u,c,f,p,d=t[13].name+"",g,v,y,b=t[13].description+"",T,S,A,V;function q(...L){return t[11](t[13],...L)}return s=new Gr({props:{initials:t[13].name}}),{c(){e=j("li"),n=j("button"),n.textContent="select client",r=W(),o=j("div"),U(s.$$.fragment),u=W(),c=j("div"),f=j("div"),p=j("h2"),g=ne(d),v=W(),y=j("h3"),T=ne(b),C(n,"class","list__event-button"),C(o,"class","list__item-avatar"),C(f,"class","list__item-content"),C(c,"class","list__item")},m(L,O){P(L,e,O),x(e,n),x(e,r),x(e,o),F(s,o,null),x(e,u),x(e,c),x(c,f),x(f,p),x(p,g),x(f,v),x(f,y),x(y,T),S=!0,A||(V=Ie(n,"click",q),A=!0)},p(L,O){t=L;let R={};O&8192&&(R.initials=t[13].name),s.$set(R),(!S||O&8192)&&d!==(d=t[13].name+"")&&ve(g,d),(!S||O&8192)&&b!==(b=t[13].description+"")&&ve(T,b)},i(L){S||(E(s.$$.fragment,L),S=!0)},o(L){D(s.$$.fragment,L),S=!1},d(L){L&&M(e),$(s),A=!1,V()}}}function l3(t){let e,n,r,o,s,u,c,f,p=[s3,o3],d=[];function g(y,b){return y[0]?0:1}o=g(t,-1),s=d[o]=p[o](t);let v=t[1]&&Lx(t);return{c(){e=j("div"),n=j("div"),n.textContent="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0430",r=W(),s.c(),u=W(),v&&v.c(),c=rt(),C(n,"class","input__label svelte-1hpwq1i"),C(e,"class","input")},m(y,b){P(y,e,b),x(e,n),x(e,r),d[o].m(e,null),P(y,u,b),v&&v.m(y,b),P(y,c,b),f=!0},p(y,[b]){let T=o;o=g(y,b),o===T?d[o].p(y,b):(Te(),D(d[T],1,1,()=>{d[T]=null}),Se(),s=d[o],s?s.p(y,b):(s=d[o]=p[o](y),s.c()),E(s,1),s.m(e,null)),y[1]?v?(v.p(y,b),b&2&&E(v,1)):(v=Lx(y),v.c(),E(v,1),v.m(c.parentNode,c)):v&&(Te(),D(v,1,1,()=>{v=null}),Se())},i(y){f||(E(s),E(v),f=!0)},o(y){D(s),D(v),f=!1},d(y){y&&M(e),d[o].d(),y&&M(u),v&&v.d(y),y&&M(c)}}}function f3(t,e,n){let r,o,{selectedClient:s}=e,u=!1,c="",f=cn(),{clients:p}=Pe("clients");be(t,p,S=>n(10,o=S));function d({detail:S}){n(9,c=S.value)}function g(S){S.preventDefault(),n(1,u=!0)}function v(S){S.preventDefault(),n(1,u=!1)}function y({event:S,client:A}){S.preventDefault(),n(0,s=A),n(1,u=!1),f("input",{clientId:A.id})}function b(S){S.preventDefault(),n(0,s=void 0),f("input",{clientId:void 0})}let T=(S,A)=>y({event:A,client:S});return t.$$set=S=>{"selectedClient"in S&&n(0,s=S.selectedClient)},t.$$.update=()=>{if(t.$$.dirty&1536){e:n(2,r=o.filter(({name:S,description:A})=>S.toLowerCase().includes(c.toLowerCase())||A.toLowerCase().includes(c.toLowerCase())))}},[s,u,r,p,d,g,v,y,b,c,o,T]}var jx=class extends X{constructor(e){super();J(this,e,f3,l3,Q,{selectedClient:0})}},$x=jx;function h3(t){let e;return{c(){e=Ue("path"),C(e,"d","M17.414 6.586c-.78-.781-2.048-.781-2.828 0l-2.586 2.586-2.586-2.586c-.78-.781-2.048-.781-2.828 0-.781.781-.781 2.047 0 2.828l2.585 2.586-2.585 2.586c-.781.781-.781 2.047 0 2.828.39.391.902.586 1.414.586s1.024-.195 1.414-.586l2.586-2.586 2.586 2.586c.39.391.902.586 1.414.586s1.024-.195 1.414-.586c.781-.781.781-2.047 0-2.828l-2.585-2.586 2.585-2.586c.781-.781.781-2.047 0-2.828z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function d3(t){let e,n,r=[{viewBox:"0 0 24 24"},t[0]],o={$$slots:{default:[h3]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function p3(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Fx=class extends X{constructor(e){super();J(this,e,p3,d3,Q,{})}},Ux=Fx;function m3(t){let e;return{c(){e=Ue("path"),C(e,"d","M362.6 192.9L345 174.8c-.7-.8-1.8-1.2-2.8-1.2-1.1 0-2.1.4-2.8 1.2l-122 122.9-44.4-44.4c-.8-.8-1.8-1.2-2.8-1.2-1 0-2 .4-2.8 1.2l-17.8 17.8c-1.6 1.6-1.6 4.1 0 5.7l56 56c3.6 3.6 8 5.7 11.7 5.7 5.3 0 9.9-3.9 11.6-5.5h.1l133.7-134.4c1.4-1.7 1.4-4.2-.1-5.7z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function v3(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[m3]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function g3(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var qx=class extends X{constructor(e){super();J(this,e,g3,v3,Q,{})}},Vx=qx;function Bx(t,e,n){let r=t.slice();return r[18]=e[n],r}function Wx(t){let e,n,r=t[0],o=[];for(let u=0;u<r.length;u+=1)o[u]=Gx(Bx(t,r,u));let s=u=>D(o[u],1,1,()=>{o[u]=null});return{c(){e=j("div");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","services svelte-4kdoim")},m(u,c){P(u,e,c);for(let f=0;f<o.length;f+=1)o[f].m(e,null);n=!0},p(u,c){if(c&257){r=u[0];let f;for(f=0;f<r.length;f+=1){let p=Bx(u,r,f);o[f]?(o[f].p(p,c),E(o[f],1)):(o[f]=Gx(p),o[f].c(),E(o[f],1),o[f].m(e,null))}for(Te(),f=r.length;f<o.length;f+=1)s(f);Se()}},i(u){if(!n){for(let c=0;c<r.length;c+=1)E(o[c]);n=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)D(o[c]);n=!1},d(u){u&&M(e),Nr(o,u)}}}function Gx(t){let e,n=t[18].name+"",r,o,s,u,c,f,p,d;u=new Ux({});function g(...v){return t[13](t[18],...v)}return{c(){e=j("div"),r=ne(n),o=W(),s=j("button"),U(u.$$.fragment),c=W(),C(s,"class","services__cancel-button svelte-4kdoim"),C(e,"class","services__service svelte-4kdoim")},m(v,y){P(v,e,y),x(e,r),x(e,o),x(e,s),F(u,s,null),x(e,c),f=!0,p||(d=Ie(s,"click",g),p=!0)},p(v,y){t=v,(!f||y&1)&&n!==(n=t[18].name+"")&&ve(r,n)},i(v){f||(E(u.$$.fragment,v),f=!0)},o(v){D(u.$$.fragment,v),f=!1},d(v){v&&M(e),$(u),p=!1,d()}}}function Hx(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T,S,A;u=new Vs({}),f=new st({props:{title:"\u0412\u044B\u0431\u043E\u0440 \u0443\u0441\u043B\u0443\u0433"}}),d=new ki({}),d.$on("input",t[4]);let V=[_3,y3],q=[];function L(O,R){return O[2].length?0:1}return v=L(t,-1),y=q[v]=V[v](t),{c(){e=j("div"),n=j("div"),r=j("button"),r.textContent="\u0412\u044B\u0431\u0440\u0430\u043D\u043E",o=W(),s=j("button"),U(u.$$.fragment),c=W(),U(f.$$.fragment),p=W(),U(d.$$.fragment),g=W(),y.c(),C(r,"class","modal__select-button svelte-4kdoim"),$e(r,"modal__select-button--hidden",!t[0].length),C(s,"class","modal__close-button svelte-4kdoim"),C(n,"class","modal__close-button-wrapper svelte-4kdoim"),C(e,"class","modal svelte-4kdoim")},m(O,R){P(O,e,R),x(e,n),x(n,r),x(n,o),x(n,s),F(u,s,null),x(e,c),F(f,e,null),x(e,p),F(d,e,null),x(e,g),q[v].m(e,null),T=!0,S||(A=[Ie(r,"click",t[7]),Ie(s,"click",t[6])],S=!0)},p(O,R){R&1&&$e(r,"modal__select-button--hidden",!O[0].length);let K=v;v=L(O,R),v===K?q[v].p(O,R):(Te(),D(q[K],1,1,()=>{q[K]=null}),Se(),y=q[v],y?y.p(O,R):(y=q[v]=V[v](O),y.c()),E(y,1),y.m(e,null))},i(O){T||(E(u.$$.fragment,O),E(f.$$.fragment,O),E(d.$$.fragment,O),E(y),Mn(()=>{b||(b=En(e,An,{duration:200},!0)),b.run(1)}),T=!0)},o(O){D(u.$$.fragment,O),D(f.$$.fragment,O),D(d.$$.fragment,O),D(y),b||(b=En(e,An,{duration:200},!1)),b.run(0),T=!1},d(O){O&&M(e),$(u),$(f),$(d),q[v].d(),O&&b&&b.end(),S=!1,ct(A)}}}function y3(t){let e,n;return e=new on({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function _3(t){let e,n;return e=new Sr({props:{items:t[2],$$slots:{default:[w3,({item:r})=>({17:r}),({item:r})=>r?131072:0]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&4&&(s.items=r[2]),o&2228225&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Kx(t){let e,n;return e=new Vx({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function w3(t){let e,n,r,o,s,u,c=t[17].name+"",f,p,d,g=t[17].price+"",v,y,b,T,S,A=t[0].some(O),V,q,L;function O(...Y){return t[12](t[17],...Y)}function R(...Y){return t[14](t[17],...Y)}let K=A&&Kx(t);function ie(...Y){return t[15](t[17],...Y)}return{c(){e=j("li"),n=j("button"),n.textContent="Open service",r=W(),o=j("div"),s=j("div"),u=j("h2"),f=ne(c),p=W(),d=j("h3"),v=ne(g),y=ne(" \u0440\u0443\u0431\u043B\u0435\u0439"),b=W(),T=j("div"),S=j("div"),K&&K.c(),C(n,"class","list__event-button"),C(s,"class","list__item-content"),C(S,"class","checkmark svelte-4kdoim"),$e(S,"checkmark--active",t[0].some(ie)),C(T,"class","list__item-end"),C(o,"class","list__item")},m(Y,ye){P(Y,e,ye),x(e,n),x(e,r),x(e,o),x(o,s),x(s,u),x(u,f),x(s,p),x(s,d),x(d,v),x(d,y),x(o,b),x(o,T),x(T,S),K&&K.m(S,null),V=!0,q||(L=Ie(n,"click",R),q=!0)},p(Y,ye){t=Y,(!V||ye&131072)&&c!==(c=t[17].name+"")&&ve(f,c),(!V||ye&131072)&&g!==(g=t[17].price+"")&&ve(v,g),ye&1&&(A=t[0].some(O)),A?K?ye&1&&E(K,1):(K=Kx(t),K.c(),E(K,1),K.m(S,null)):K&&(Te(),D(K,1,1,()=>{K=null}),Se()),ye&1&&$e(S,"checkmark--active",t[0].some(ie))},i(Y){V||(E(K),V=!0)},o(Y){D(K),V=!1},d(Y){Y&&M(e),K&&K.d(),q=!1,L()}}}function b3(t){let e,n,r,o,s=(t[0].length?"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0432\u044B\u0431\u043E\u0440":"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B")+"",u,c,f,p,d,g,v,y=t[0].length&&Wx(t),b=t[1]&&Hx(t);return{c(){e=j("div"),n=j("div"),n.textContent="\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0441\u043B\u0443\u0433\u0438",r=W(),o=j("button"),u=ne(s),c=W(),y&&y.c(),f=W(),b&&b.c(),p=rt(),C(n,"class","input__label svelte-4kdoim"),C(o,"class","input__input svelte-4kdoim"),$e(o,"input__input--bottom-margin",t[0].length),C(e,"class","input")},m(T,S){P(T,e,S),x(e,n),x(e,r),x(e,o),x(o,u),x(e,c),y&&y.m(e,null),P(T,f,S),b&&b.m(T,S),P(T,p,S),d=!0,g||(v=Ie(o,"click",t[5]),g=!0)},p(T,[S]){(!d||S&1)&&s!==(s=(T[0].length?"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0432\u044B\u0431\u043E\u0440":"\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u044B")+"")&&ve(u,s),S&1&&$e(o,"input__input--bottom-margin",T[0].length),T[0].length?y?(y.p(T,S),S&1&&E(y,1)):(y=Wx(T),y.c(),E(y,1),y.m(e,null)):y&&(Te(),D(y,1,1,()=>{y=null}),Se()),T[1]?b?(b.p(T,S),S&2&&E(b,1)):(b=Hx(T),b.c(),E(b,1),b.m(p.parentNode,p)):b&&(Te(),D(b,1,1,()=>{b=null}),Se())},i(T){d||(E(y),E(b),d=!0)},o(T){D(y),D(b),d=!1},d(T){T&&M(e),y&&y.d(),T&&M(f),b&&b.d(T),T&&M(p),g=!1,v()}}}function I3(t,e,n){let r,o,s=cn(),{services:u}=Pe("services");be(t,u,L=>n(11,o=L));let{selectedServices:c=[]}=e,f=!1,p="";function d({detail:L}){n(10,p=L.value)}function g(L){L.preventDefault(),n(1,f=!0)}function v(L){L.preventDefault(),n(1,f=!1)}function y(L){L.preventDefault(),n(1,f=!1),s("input",{serviceIds:c.map(({id:O})=>O)})}function b({event:L,serviceId:O}){L.preventDefault(),n(0,c=c.filter(({id:R})=>R!==O)),s("input",{serviceIds:c.map(({id:R})=>R)})}function T({event:L,service:O}){L.preventDefault();let R=c.some(({id:K})=>K===O.id);n(0,c=R?c.filter(({id:K})=>K!==O.id):[...c,O])}let S=(L,O)=>O.id===L.id,A=(L,O)=>b({event:O,serviceId:L.id}),V=(L,O)=>T({event:O,service:L}),q=(L,O)=>O.id===L.id;return t.$$set=L=>{"selectedServices"in L&&n(0,c=L.selectedServices)},t.$$.update=()=>{if(t.$$.dirty&3072){e:n(2,r=o.filter(({name:L,price:O})=>L.toLowerCase().includes(p.toLowerCase())||O.toString().includes(p.toLowerCase())))}},[c,f,r,u,d,g,v,y,b,T,p,o,S,A,V,q]}var zx=class extends X{constructor(e){super();J(this,e,I3,b3,Q,{selectedServices:0})}},Yx=zx;function T3(t){let e;return{c(){e=Ue("path"),C(e,"d","M228.9 79.9L51.8 403.1C40.6 423.3 55.5 448 78.9 448h354.3c23.3 0 38.2-24.7 27.1-44.9L283.1 79.9c-11.7-21.2-42.5-21.2-54.2 0zM273.6 214L270 336h-28l-3.6-122h35.2zM256 402.4c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4 19.1 8.1 19.1 18.4-8.4 18.4-19.1 18.4z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function S3(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[T3]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function E3(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Qx=class extends X{constructor(e){super();J(this,e,E3,S3,Q,{})}},Xx=Qx;function k3(t){let e;return{c(){e=Ue("path"),C(e,"d","M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm19 304h-38.2V207.9H275V352zm-19.1-159.8c-11.3 0-20.5-8.6-20.5-20s9.3-19.9 20.5-19.9c11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20z")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function x3(t){let e,n,r=[{viewBox:"0 0 512 512"},t[0]],o={$$slots:{default:[k3]},$$scope:{ctx:t}};for(let s=0;s<r.length;s+=1)o=ae(o,r[s]);return e=new Je({props:o}),{c(){U(e.$$.fragment)},m(s,u){F(e,s,u),n=!0},p(s,[u]){let c=u&1?We(r,[r[0],Ge(s[0])]):{};u&2&&(c.$$scope={dirty:u,ctx:s}),e.$set(c)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function D3(t,e,n){return t.$$set=r=>{n(0,e=ae(ae({},e),Ce(r)))},e=Ce(e),[e]}var Jx=class extends X{constructor(e){super();J(this,e,D3,x3,Q,{})}},Zx=Jx;function eD(t){let e,n;return e=new Xx({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function tD(t){let e,n;return e=new Zx({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function C3(t){let e,n,r,o,s=t[0]==="warning"&&eD(t),u=t[0]==="info"&&tD(t),c=t[2].default,f=zn(c,t,t[1],null);return{c(){e=j("div"),s&&s.c(),n=W(),u&&u.c(),r=W(),f&&f.c(),C(e,"class","important-message svelte-up8w58"),$e(e,"important-message--info",t[0]==="info")},m(p,d){P(p,e,d),s&&s.m(e,null),x(e,n),u&&u.m(e,null),x(e,r),f&&f.m(e,null),o=!0},p(p,[d]){p[0]==="warning"?s?d&1&&E(s,1):(s=eD(p),s.c(),E(s,1),s.m(e,n)):s&&(Te(),D(s,1,1,()=>{s=null}),Se()),p[0]==="info"?u?d&1&&E(u,1):(u=tD(p),u.c(),E(u,1),u.m(e,r)):u&&(Te(),D(u,1,1,()=>{u=null}),Se()),f&&f.p&&(!o||d&2)&&Yn(f,c,p,p[1],o?d:-1,null,null),d&1&&$e(e,"important-message--info",p[0]==="info")},i(p){o||(E(s),E(u),E(f,p),o=!0)},o(p){D(s),D(u),D(f,p),o=!1},d(p){p&&M(e),s&&s.d(),u&&u.d(),f&&f.d(p)}}}function A3(t,e,n){let{$$slots:r={},$$scope:o}=e,{style:s="warning"}=e;return t.$$set=u=>{"style"in u&&n(0,s=u.style),"$$scope"in u&&n(1,o=u.$$scope)},[s,o,r]}var nD=class extends X{constructor(e){super();J(this,e,A3,C3,Q,{style:0})}},Pu=nD;function rD(t){let e,n;return e=new Pu({props:{$$slots:{default:[O3]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function O3(t){let e;return{c(){e=ne("\u0423 \u0432\u0430\u0441 \u043D\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u043E \u043D\u0438 \u043E\u0434\u043D\u043E\u0433\u043E \u043A\u043B\u0438\u0435\u043D\u0442\u0430, \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043F\u0438\u0441\u0438 \u0441\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u043E\u0433\u043E.")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function iD(t){let e,n;return e=new Pu({props:{$$slots:{default:[N3]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function N3(t){let e;return{c(){e=ne("\u0423 \u0432\u0430\u0441 \u043D\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u043E \u043D\u0438 \u043E\u0434\u043D\u043E\u0439 \u0443\u0441\u043B\u0443\u0433\u0438, \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u044F \u0437\u0430\u043F\u0438\u0441\u0438 \u0441\u043E\u0437\u0434\u0430\u0439\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u0443.")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function R3(t){let e,n;return e=new $x({props:{selectedClient:t[4]}}),e.$on("input",t[12]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&16&&(s.selectedClient=r[4]),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function M3(t){let e,n;return e=new Yx({props:{selectedServices:t[5]}}),e.$on("input",t[13]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&32&&(s.selectedServices=r[5]),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function P3(t){let e,n;return e=new Hr({props:{required:!0,value:t[6],placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443",type:"datetime-local",label:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043F\u0438\u0441\u0438",name:"date"}}),e.$on("change",t[11]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&64&&(s.value=r[6]),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function L3(t){let e,n;return e=new Hr({props:{value:t[0].description,placeholder:"\u041D\u0443\u0436\u0435\u043D \u0442\u043E\u043F \u0431\u0435\u0437 \u043B\u0438\u043F\u043A\u043E\u0433\u043E \u0441\u043B\u043E\u044F",type:"text",label:"\u041F\u0440\u0438\u043C\u0435\u0447\u0430\u043D\u0438\u0435 \u043A \u043A\u043B\u0438\u0435\u043D\u0442\u0443",name:"description"}}),e.$on("change",t[14]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&1&&(s.value=r[0].description),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function j3(t){let e;return{c(){e=ne(t[1])},m(n,r){P(n,e,r)},p(n,r){r&2&&ve(e,n[1])},d(n){n&&M(e)}}}function $3(t){let e,n;return e=new Dt({props:{fullWidth:!0,$$slots:{default:[j3]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&262146&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function F3(t){let e,n,r,o,s,u,c,f,p,d,g,v,y,b,T,S=!t[2]?.length&&rD(t),A=!t[3]?.length&&iD(t);return o=new Mt({props:{$$slots:{default:[R3]},$$scope:{ctx:t}}}),u=new Mt({props:{$$slots:{default:[M3]},$$scope:{ctx:t}}}),f=new Mt({props:{$$slots:{default:[P3]},$$scope:{ctx:t}}}),d=new Mt({props:{$$slots:{default:[L3]},$$scope:{ctx:t}}}),v=new Mt({props:{$$slots:{default:[$3]},$$scope:{ctx:t}}}),{c(){S&&S.c(),e=W(),A&&A.c(),n=W(),r=j("form"),U(o.$$.fragment),s=W(),U(u.$$.fragment),c=W(),U(f.$$.fragment),p=W(),U(d.$$.fragment),g=W(),U(v.$$.fragment)},m(V,q){S&&S.m(V,q),P(V,e,q),A&&A.m(V,q),P(V,n,q),P(V,r,q),F(o,r,null),x(r,s),F(u,r,null),x(r,c),F(f,r,null),x(r,p),F(d,r,null),x(r,g),F(v,r,null),y=!0,b||(T=Ie(r,"submit",Ko(t[10])),b=!0)},p(V,[q]){V[2]?.length?S&&(Te(),D(S,1,1,()=>{S=null}),Se()):S?q&4&&E(S,1):(S=rD(V),S.c(),E(S,1),S.m(e.parentNode,e)),V[3]?.length?A&&(Te(),D(A,1,1,()=>{A=null}),Se()):A?q&8&&E(A,1):(A=iD(V),A.c(),E(A,1),A.m(n.parentNode,n));let L={};q&262160&&(L.$$scope={dirty:q,ctx:V}),o.$set(L);let O={};q&262176&&(O.$$scope={dirty:q,ctx:V}),u.$set(O);let R={};q&262208&&(R.$$scope={dirty:q,ctx:V}),f.$set(R);let K={};q&262145&&(K.$$scope={dirty:q,ctx:V}),d.$set(K);let ie={};q&262146&&(ie.$$scope={dirty:q,ctx:V}),v.$set(ie)},i(V){y||(E(S),E(A),E(o.$$.fragment,V),E(u.$$.fragment,V),E(f.$$.fragment,V),E(d.$$.fragment,V),E(v.$$.fragment,V),y=!0)},o(V){D(S),D(A),D(o.$$.fragment,V),D(u.$$.fragment,V),D(f.$$.fragment,V),D(d.$$.fragment,V),D(v.$$.fragment,V),y=!1},d(V){S&&S.d(V),V&&M(e),A&&A.d(V),V&&M(n),V&&M(r),$(o),$(u),$(f),$(d),$(v),b=!1,T()}}}function U3(t,e,n){let r,o,s,u,c,f,p=cn(),{dispatch:d,clients:g,services:v,recordsDate:y}=Pe("clients","services","recordsDate");be(t,g,O=>n(2,c=O)),be(t,v,O=>n(3,f=O)),be(t,y,O=>n(15,u=O));let{record:b={description:"",clientId:"",serviceIds:[],date:u}}=e,{buttonText:T="\u0421\u043E\u0437\u0434\u0430\u0442\u044C"}=e;function S(){if(!b.serviceIds.length)return d(it,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0441\u043B\u0443\u0433\u0438");if(!b.clientId)return d(it,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u043B\u0438\u0435\u043D\u0442\u0430");p("submit",{record:b})}function A({target:O}){n(0,b.date=new Date(O.value),b)}function V({detail:O}){n(0,b.clientId=O.clientId,b)}function q({detail:O}){n(0,b.serviceIds=O.serviceIds,b)}function L({target:O}){n(0,b.description=O.value,b)}return t.$$set=O=>{"record"in O&&n(0,b=O.record),"buttonText"in O&&n(1,T=O.buttonText)},t.$$.update=()=>{if(t.$$.dirty&5){e:n(4,r=c.find(({id:O})=>O===b.clientId))}if(t.$$.dirty&9){e:n(5,o=f.filter(({id:O})=>b.serviceIds.includes(O)))}if(t.$$.dirty&1){e:n(6,s=b.date&&b.date instanceof Date&&Qt(b.date,"yyyy-MM-dd'T'HH:mm")||"")}},[b,T,c,f,r,o,s,g,v,y,S,A,V,q,L]}var oD=class extends X{constructor(e){super();J(this,e,U3,F3,Q,{record:0,buttonText:1})}},Gf=oD;function q3(t){let e,n;return e=new on({props:{message:"\u0417\u0430\u043F\u0438\u0441\u044C \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430"}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function V3(t){let e,n,r,o;return e=new Gf({props:{buttonText:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",record:t[0]}}),e.$on("submit",t[2]),r=new Mt({props:{$$slots:{default:[W3]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p(s,u){let c={};u&1&&(c.record=s[0]),e.$set(c);let f={};u&128&&(f.$$scope={dirty:u,ctx:s}),r.$set(f)},i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function B3(t){let e;return{c(){e=ne("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function W3(t){let e,n;return e=new Dt({props:{onlyBorder:!0,danger:!0,fullWidth:!0,$$slots:{default:[B3]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,o){let s={};o&128&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function G3(t){let e,n,r,o,s,u;e=new st({props:{title:"\u0420\u0435\u0434. \u0437\u0430\u043F\u0438\u0441\u0438"}});let c=[V3,q3],f=[];function p(d,g){return d[0]?0:1}return r=p(t,-1),o=f[r]=c[r](t),{c(){U(e.$$.fragment),n=W(),o.c(),s=rt()},m(d,g){F(e,d,g),P(d,n,g),f[r].m(d,g),P(d,s,g),u=!0},p(d,[g]){let v=r;r=p(d,g),r===v?f[r].p(d,g):(Te(),D(f[v],1,1,()=>{f[v]=null}),Se(),o=f[r],o?o.p(d,g):(o=f[r]=c[r](d),o.c()),E(o,1),o.m(s.parentNode,s))},i(d){u||(E(e.$$.fragment,d),E(o),u=!0)},o(d){D(e.$$.fragment,d),D(o),u=!1},d(d){$(e,d),d&&M(n),f[r].d(d),d&&M(s)}}}function H3(t,e,n){let r,o,{params:s={}}=e,{records:u,dispatch:c}=Pe("records");be(t,u,d=>n(5,o=d));function f({detail:d}){console.log("handleSubmit",d),c(Pf,d.record),wt("/records")}function p(){!confirm("\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C")||(c(Lf,r.id),wt("/records"))}return t.$$set=d=>{"params"in d&&n(4,s=d.params)},t.$$.update=()=>{if(t.$$.dirty&48){e:n(0,r=o.find(d=>d.id===s?.id))}},[r,u,f,p,s,o]}var sD=class extends X{constructor(e){super();J(this,e,H3,G3,Q,{params:4})}},aD=sD;function K3(t){let e,n,r,o;return e=new st({props:{title:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0437\u0430\u043F\u0438\u0441\u0438"}}),r=new Gf({}),r.$on("submit",t[0]),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment)},m(s,u){F(e,s,u),P(s,n,u),F(r,s,u),o=!0},p:le,i(s){o||(E(e.$$.fragment,s),E(r.$$.fragment,s),o=!0)},o(s){D(e.$$.fragment,s),D(r.$$.fragment,s),o=!1},d(s){$(e,s),s&&M(n),$(r,s)}}}function z3(t){let{dispatch:e}=Pe();function n({detail:r}){e(jf,r.record),wt("/records")}return[n]}var uD=class extends X{constructor(e){super();J(this,e,z3,K3,Q,{})}},cD=uD;function Y3(t){let e;return{c(){e=ne("\u0412\u043E\u0439\u0442\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F Google")},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function Q3(t){let e,n,r;return n=new Dt({props:{$$slots:{default:[Y3]},$$scope:{ctx:t}}}),n.$on("click",t[0]),{c(){e=j("div"),U(n.$$.fragment),C(e,"class","centered svelte-dowzhl")},m(o,s){P(o,e,s),F(n,e,null),r=!0},p(o,[s]){let u={};s&4&&(u.$$scope={dirty:s,ctx:o}),n.$set(u)},i(o){r||(E(n.$$.fragment,o),r=!0)},o(o){D(n.$$.fragment,o),r=!1},d(o){o&&M(e),$(n)}}}function X3(t){let{dispatch:e}=Pe();function n(){e(_f)}return[n]}var lD=class extends X{constructor(e){super();J(this,e,X3,Q3,Q,{})}},fD=lD;function hD(t,e,n){let r=t.slice();return r[9]=e[n].title,r[10]=e[n].amount,r}function dD(t){let e,n=t[9]+"",r,o,s,u=t[10]+"",c,f;return{c(){e=j("li"),r=ne(n),o=W(),s=j("div"),c=ne(u),f=W(),C(s,"class","statistic__item-counter svelte-oujgk0"),C(e,"class","statistic__item svelte-oujgk0")},m(p,d){P(p,e,d),x(e,r),x(e,o),x(e,s),x(s,c),x(e,f)},p(p,d){d&1&&n!==(n=p[9]+"")&&ve(r,n),d&1&&u!==(u=p[10]+"")&&ve(c,u)},d(p){p&&M(e)}}}function J3(t){let e,n,r,o,s,u,c,f,p=t[1].name+"",d,g,v,y,b,T,S,A,V;e=new st({props:{title:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442"}}),s=new Gr({props:{src:t[1].picture}});let q=t[0],L=[];for(let O=0;O<q.length;O+=1)L[O]=dD(hD(t,q,O));return{c(){U(e.$$.fragment),n=W(),r=j("div"),o=j("div"),U(s.$$.fragment),u=W(),c=j("div"),f=j("div"),d=ne(p),g=W(),v=j("div"),y=j("button"),y.textContent="\u0412\u044B\u0439\u0442\u0438",b=W(),T=j("ul");for(let O=0;O<L.length;O+=1)L[O].c();C(o,"class","user__avatar"),C(f,"class","user__name svelte-oujgk0"),C(y,"class","user__exit-button svelte-oujgk0"),C(v,"class","user__exit"),C(c,"class","user__info svelte-oujgk0"),C(r,"class","user svelte-oujgk0"),C(T,"class","statistic svelte-oujgk0")},m(O,R){F(e,O,R),P(O,n,R),P(O,r,R),x(r,o),F(s,o,null),x(r,u),x(r,c),x(c,f),x(f,d),x(c,g),x(c,v),x(v,y),P(O,b,R),P(O,T,R);for(let K=0;K<L.length;K+=1)L[K].m(T,null);S=!0,A||(V=Ie(y,"click",t[5]),A=!0)},p(O,[R]){let K={};if(R&2&&(K.src=O[1].picture),s.$set(K),(!S||R&2)&&p!==(p=O[1].name+"")&&ve(d,p),R&1){q=O[0];let ie;for(ie=0;ie<q.length;ie+=1){let Y=hD(O,q,ie);L[ie]?L[ie].p(Y,R):(L[ie]=dD(Y),L[ie].c(),L[ie].m(T,null))}for(;ie<L.length;ie+=1)L[ie].d(1);L.length=q.length}},i(O){S||(E(e.$$.fragment,O),E(s.$$.fragment,O),S=!0)},o(O){D(e.$$.fragment,O),D(s.$$.fragment,O),S=!1},d(O){$(e,O),O&&M(n),O&&M(r),$(s),O&&M(b),O&&M(T),Nr(L,O),A=!1,V()}}}function Z3(t,e,n){let r,o,s,u,{user:c,clients:f,services:p,dispatch:d}=Pe("user","clients","services");be(t,c,v=>n(1,u=v)),be(t,f,v=>n(6,o=v)),be(t,p,v=>n(7,s=v));function g(){d(wf),wt("/signIn")}return t.$$.update=()=>{if(t.$$.dirty&192){e:n(0,r=[{title:"\u041A\u043B\u0438\u0435\u043D\u0442\u043E\u0432",amount:o.length},{title:"\u0423\u0441\u043B\u0443\u0433",amount:s.length}])}},[r,u,c,f,p,g,o,s]}var pD=class extends X{constructor(e){super();J(this,e,Z3,J3,Q,{})}},mD=pD;function eF(t){let e;return{c(){e=ne(`\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0440\u0430\u0441\u0447\u0438\u0442\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0441 \u043F\u0435\u0440\u0432\u043E\u0433\u043E \u0434\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0433\u043E \u0434\u043D\u044F \u043C\u0435\u0441\u044F\u0446\u0430. \u0415\u0441\u043B\u0438 \u043E\u0442\u043A\u0440\u044B\u0442 \u0442\u0435\u043A\u0443\u0449\u0438\u0439 \u043C\u0435\u0441\u044F\u0446,\r
	\u0442\u043E \u0440\u0430\u0441\u0447\u0435\u0442 \u0438\u0434\u0435\u0442 \u043E\u0442 \u043F\u0435\u0440\u0432\u043E\u0433\u043E \u0447\u0438\u0441\u043B\u0430 \u0434\u043E \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u043A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u043D\u043E\u0433\u043E \u0434\u043D\u044F.`)},m(n,r){P(n,e,r)},d(n){n&&M(e)}}}function tF(t){let e,n,r,o,s,u,c,f,p,d=Qt(t[0],"LLLL yyyy",{locale:Bs})+"",g,v,y,b,T,S,A,V,q,L=t[1].records+"",O,R,K,ie,Y,ye,N=t[1].money+"",Qe,_e,at,we,tt;return e=new st({props:{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"}}),r=new Pu({props:{style:"info",$$slots:{default:[eF]},$$scope:{ctx:t}}}),c=new qs({}),b=new Ei({}),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment),o=W(),s=j("div"),u=j("button"),U(c.$$.fragment),f=W(),p=j("div"),g=ne(d),v=W(),y=j("button"),U(b.$$.fragment),T=W(),S=j("div"),A=j("div"),A.textContent="\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439",V=W(),q=j("div"),O=ne(L),R=W(),K=j("div"),ie=j("div"),ie.textContent="\u0417\u0430\u0440\u0430\u0431\u043E\u0442\u0430\u043D\u043E",Y=W(),ye=j("div"),Qe=ne(N),_e=ne(" \u0440\u0443\u0431."),C(u,"class","date__slide-button svelte-10kyxth"),C(p,"class","date__month svelte-10kyxth"),C(y,"class","date__slide-button svelte-10kyxth"),C(s,"class","date svelte-10kyxth"),C(A,"class","counter__label svelte-10kyxth"),C(q,"class","counter__value svelte-10kyxth"),C(S,"class","counter svelte-10kyxth"),C(ie,"class","counter__label svelte-10kyxth"),C(ye,"class","counter__value svelte-10kyxth"),C(K,"class","counter svelte-10kyxth")},m(ke,Le){F(e,ke,Le),P(ke,n,Le),F(r,ke,Le),P(ke,o,Le),P(ke,s,Le),x(s,u),F(c,u,null),x(s,f),x(s,p),x(p,g),x(s,v),x(s,y),F(b,y,null),P(ke,T,Le),P(ke,S,Le),x(S,A),x(S,V),x(S,q),x(q,O),P(ke,R,Le),P(ke,K,Le),x(K,ie),x(K,Y),x(K,ye),x(ye,Qe),x(ye,_e),at=!0,we||(tt=[Ie(u,"click",t[6]),Ie(y,"click",t[5])],we=!0)},p(ke,[Le]){let ut={};Le&1024&&(ut.$$scope={dirty:Le,ctx:ke}),r.$set(ut),(!at||Le&1)&&d!==(d=Qt(ke[0],"LLLL yyyy",{locale:Bs})+"")&&ve(g,d),(!at||Le&2)&&L!==(L=ke[1].records+"")&&ve(O,L),(!at||Le&2)&&N!==(N=ke[1].money+"")&&ve(Qe,N)},i(ke){at||(E(e.$$.fragment,ke),E(r.$$.fragment,ke),E(c.$$.fragment,ke),E(b.$$.fragment,ke),at=!0)},o(ke){D(e.$$.fragment,ke),D(r.$$.fragment,ke),D(c.$$.fragment,ke),D(b.$$.fragment,ke),at=!1},d(ke){$(e,ke),ke&&M(n),$(r,ke),ke&&M(o),ke&&M(s),$(c),$(b),ke&&M(T),ke&&M(S),ke&&M(R),ke&&M(K),we=!1,ct(tt)}}}function nF(t,e,n){let r,o,s,{dispatch:u,recordsDate:c,isServicesLoaded:f,monthCounts:p}=Pe("recordsDate","isServicesLoaded","monthCounts");be(t,c,y=>n(8,r=y)),be(t,f,y=>n(7,o=y)),be(t,p,y=>n(1,s=y));let d=r;function g(){n(0,d=gn(Tr(d,1))),u(Au,d)}function v(){n(0,d=gn(Si(d,1))),u(Au,d)}return t.$$.update=()=>{if(t.$$.dirty&129){e:o&&u(Au,d)}},[d,s,c,f,p,g,v,o]}var vD=class extends X{constructor(e){super();J(this,e,nF,tF,Q,{})}},gD=vD;function rF(t){let e,n;return e=new uk({}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function iF(t){let e,n;return e=new ok({props:{restoreScrollState:!0,routes:t[3]}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p:le,i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function oF(t){let e,n,r,o,s=[iF,rF],u=[];function c(f,p){return f[1]?0:1}return e=c(t,-1),n=u[e]=s[e](t),{c(){n.c(),r=rt()},m(f,p){u[e].m(f,p),P(f,r,p),o=!0},p(f,p){let d=e;e=c(f,p),e===d?u[e].p(f,p):(Te(),D(u[d],1,1,()=>{u[d]=null}),Se(),n=u[e],n?n.p(f,p):(n=u[e]=s[e](f),n.c()),E(n,1),n.m(r.parentNode,r))},i(f){o||(E(n),o=!0)},o(f){D(n),o=!1},d(f){u[e].d(f),f&&M(r)}}}function sF(t){let e,n;return e=new Fk({props:{hideTabBar:!t[0].isSignedIn,$$slots:{default:[oF]},$$scope:{ctx:t}}}),{c(){U(e.$$.fragment)},m(r,o){F(e,r,o),n=!0},p(r,[o]){let s={};o&1&&(s.hideTabBar=!r[0].isSignedIn),o&130&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){D(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function aF(t,e,n){let r,o;be(t,Ff,d=>n(4,o=d));let{user:s,dispatch:u}=Pe("user");be(t,s,d=>n(0,r=d));let c=!1;Su.onAuthStateChanged(d=>{let g=Boolean(d);if(o==="/signIn"&&g&&wt("/"),o!=="/signIn"&&!g&&wt("/signIn"),d){let{displayName:v,email:y,uid:b,photoURL:T}=d;u(eg,{name:v,email:y,id:b,picture:T})}u(Zv,g),g||u(tg),n(1,c=!0)});let f=d=>gg({component:d,conditions:[()=>(r.isSignedIn||wt("/signIn"),r.isSignedIn)]}),p={"/":gg({component:async()=>{},conditions:[()=>wt("/records")]}),"/records":f(Px),"/records/create":f(cD),"/records/:id":f(aD),"/clients":f(Zk),"/clients/create":f(ax),"/clients/:id":f(ox),"/services":f(cx),"/services/create":f(px),"/services/:id":f(hx),"/account":f(mD),"/statistic":f(gD),"/signIn":fD};return t.$$.update=()=>{if(t.$$.dirty&1){e:r.isSignedIn&&(u(If),u(xf),u(Nu),u(Br))}},[r,c,s,p]}var yD=class extends X{constructor(e){super();J(this,e,aF,sF,Q,{})}},_D=yD;function uF(t){let e,n,r,o,s,u,c,f;return e=new Rw({props:{workbox:t[0]}}),r=new Lw({}),s=new _D({}),{c(){U(e.$$.fragment),n=W(),U(r.$$.fragment),o=W(),U(s.$$.fragment)},m(p,d){F(e,p,d),P(p,n,d),F(r,p,d),P(p,o,d),F(s,p,d),u=!0,c||(f=[Ie(window,"resize",Up),Ie(window,"load",Up)],c=!0)},p(p,[d]){let g={};d&1&&(g.workbox=p[0]),e.$set(g)},i(p){u||(E(e.$$.fragment,p),E(r.$$.fragment,p),E(s.$$.fragment,p),u=!0)},o(p){D(e.$$.fragment,p),D(r.$$.fragment,p),D(s.$$.fragment,p),u=!1},d(p){$(e,p),p&&M(n),$(r,p),p&&M(o),$(s,p),c=!1,ct(f)}}}function cF(t,e,n){Cw(XE);let{workbox:r}=e;return t.$$set=o=>{"workbox"in o&&n(0,r=o.workbox)},[r]}var wD=class extends X{constructor(e){super();J(this,e,cF,uF,Q,{workbox:0})}},bD=wD;!("serviceWorker"in navigator);var ID=new pw("/service-worker.js");ID.register();var lF=new bD({target:document.body,props:{workbox:ID||null}}),Ez=lF;})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=bundle.js.map
